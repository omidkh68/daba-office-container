<div class="component-content full-width full-height pos-abs left-0 right-0 top-0" [dir]="rtlDirection ? 'rtl' : 'ltr'">
  <div class="title-container pos-rel height-60 overflow-hide full-width display-flex align-items-end">
    <mat-tab-group (selectedTabChange)="tabChange($event)"
                   class="padding-r-l z-index-0 height-30" color="accent" disableRipple>
      <mat-tab *ngFor="let tab of tabs;">
        <ng-template mat-tab-label class="display-flex">
          <mat-icon class="tab-icon font-full-em width-15 height-15">
            {{tab.icon}}
          </mat-icon>
          <span class="padding-mini-r-l">{{tab.name}}</span>
        </ng-template>
      </mat-tab>
    </mat-tab-group>

    <div class="pos-abs top-full display-flex flex-space-between align-items-center"
         [ngClass]="rtlDirection ? 'left-full' : 'right-full'">
      <button *ngIf="doResetFilter" (click)="resetFilter()"
              class="no-bg no-border height-35 margin-l-full cursor-pointer">
        <mat-icon class="font-8-rem line-height-25 width-18 height-18">close</mat-icon>
        <span class="font-8-rem line-height-25">{{'global.reset_filter' | translate}}</span>
      </button>

      <button *ngIf="checksTab == 'calendar_task' || !checksTab" mat-raised-button [disabled]="!taskEssentialInfo" (click)="showFilter()"
              class="white-gradient padding-mini-r-l margin-r-l text-gray-800 line-height-30 font-9-em overflow-hide text-weight-normal">
        <mat-icon class="width-20 height-20 font-full-plus-two-tenth-rem">filter_list</mat-icon>
        <span class="padding-mini-r-l">{{'global.filter' | translate}}</span>
      </button>

      <button *ngIf="checksTab == 'calendar_task_rate'" mat-raised-button [disabled]="!taskEssentialInfo" (click)="showCalendarFilter()"
              class="white-gradient padding-mini-r-l margin-r-l text-gray-800 line-height-30 font-9-em overflow-hide text-weight-normal">
        <mat-icon class="width-20 height-20 font-full-plus-two-tenth-rem">filter_list</mat-icon>
<!--        <span class="padding-mini-r-l">{{'global.filter' | translate}}</span>-->
        <span class="padding-mini-r-l">فیلتر ساعات کاری</span>
      </button>

      <button *ngIf="!activeTab" mat-raised-button [disabled]="!taskEssentialInfo" (click)="addNewTask()"
              class="green-gradient padding-mini-r-l text-white line-height-30 font-9-em overflow-hide text-weight-normal">
        <mat-icon class="width-20 height-20 font-full-plus-two-tenth-rem">add</mat-icon>
        <span class="padding-mini-r-l">{{'tasks.main.add_new_task' | translate}}</span>
      </button>
    </div>
  </div>

  <div class="content-container padding-t-b full-width">
    <ng-container [ngSwitch]="activeTab">
      <!-- boards container -->
      <div class="full-height" *ngSwitchCase="0">
        <app-task-board [rtlDirection]="rtlDirection"
                        [filterBoards]="filteredBoardsData"
                        [refreshData]="refreshBoardData"
                        [pushTaskToBoard]="pushTaskToBoard"
                        (triggerBottomSheet)="openButtonSheet($event)"
                        (pushTaskEssentialInfo)="getTaskEssentialInfo($event)"></app-task-board>
      </div>
      <!--/ end of boards container -->

      <!-- calendar container -->
      <div class="full-height padding-b-full" *ngSwitchCase="1">
        <app-task-calendar [calendarParameters]="calendarParameters" (onTabLoaded)="doSomething($event)" [rtlDirection]="rtlDirection"></app-task-calendar>
      </div>
      <!--/ end of calendar container -->
    </ng-container>
  </div>

  <div class="current-task-container bg-white height-50 full-width padding-r-l line-height-50">
    <app-task-current [taskEssentialInfo]="taskEssentialInfo"
                      [rtlDirection]="rtlDirection"
                      (pushTaskToBoard)="getTaskToBoardData($event)"
                      (triggerBottomSheet)="openButtonSheet($event)"></app-task-current>
  </div>

  <app-task-bottom-sheet #bottomSheet></app-task-bottom-sheet>

  <div *ngIf="loadingIndicator.status && loadingIndicator.serviceName === 'project'"
       class="loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999">
    <div class="text-center">
      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
           width="24px" height="30px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve">
        <rect x="0" y="13" width="4" height="5" fill="#333">
          <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s"
                   repeatCount="indefinite"/>
          <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s"
                   repeatCount="indefinite"/>
        </rect>
        <rect x="10" y="13" width="4" height="5" fill="#333">
          <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s"
                   repeatCount="indefinite"/>
          <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s"
                   repeatCount="indefinite"/>
        </rect>
        <rect x="20" y="13" width="4" height="5" fill="#333">
          <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s"
                   repeatCount="indefinite"/>
          <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s"
                   repeatCount="indefinite"/>
        </rect>
      </svg>

      <span class="display-block font-8-em text-gray-700">{{'global.loading' | translate}}</span>
    </div>
  </div>
</div>
