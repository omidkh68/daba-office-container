<div [dir]="rtlDirection ? 'rtl' : 'ltr'"
     [matMenuTriggerFor]="timeAreaMenu"
     [ngClass]="rtlDirection ? 'margin-l-auto' : 'margin-r-auto'"
     class="box pos-rel mat-elevation-z1 padding-r-l text-center round-corner height-40 overflow-hide cursor-pointer">
  <mat-icon class="text-dark-mode-color text-gray-800">access_time</mat-icon>

  <div class="display-flex">
    <mat-list [ngClass]="rtlDirection ? 'text-right' : 'text-left'">
      <mat-list-item class="text-dark-mode-color text-gray-800">
        <div mat-line class="font-8-rem">{{datetime ? datetime.date : ''}}</div>
        <div mat-line class="font-8-rem">{{datetime ? datetime.weekday : ''}}</div>
      </mat-list-item>
    </mat-list>

    <mat-list [ngClass]="rtlDirection ? 'text-left' : 'text-right'">
      <mat-list-item class="text-dark-mode-color font-8-rem text-gray-800">
        <app-time-area-digital-clock [timezone]="loggedInUser.timezone" matLine>
        </app-time-area-digital-clock>
        <div mat-line dir="ltr" class="font-8-rem"><span>{{loggedInUser.timezone}}</span></div>
      </mat-list-item>
    </mat-list>
  </div>
</div>
<mat-menu class="toolbar-menu time-area-menu" #timeAreaMenu="matMenu" xPosition="before" yPosition="above">
  <h6 (click)="addMoreClock($event);" mat-subheader
      class="padding-mini-t-b padding-r-l text-weight-normal font-9-rem text-dark-mode-color display-flex flex-space-between">
    {{'dashboard.dashboard_toolbar.active_clocks' | translate}}
    <mat-icon *ngIf="!checkMoreClock">add</mat-icon>
    <span *ngIf="checkMoreClock">Done</span>
  </h6>

  <div *ngIf="!checkMoreClockContent" class="display-flex flex-space-around padding-half">
    <div
      *ngIf="cityClocksList && cityClocksList.length < 3"
      (click)="showMoreClockContent($event);"
      [ngClass]="checkMoreClock ? 'right-to-left' : 'left-to-right'" class="animate opacity-0 clock-plus">
      <mat-icon class="text-white">add</mat-icon>
    </div>

    <ng-container *ngFor="let clock of cityClocksList; let i = index;">
      <app-time-area-clock [cityClocksList]="cityClocksList" [item]="clock" [item_index]="i"
                           [checkMoreClock]="checkMoreClock"
                           class="transition">
      </app-time-area-clock>
    </ng-container>
  </div>

  <div class="padding-half" *ngIf="checkMoreClockContent">
    <form class="example-form">
      <mat-form-field class="full-width">
        <mat-label>{{'soft_phone.call_to_action.timezone' | translate}}</mat-label>
        <input class="full-width" type="text" (click)="$event.stopPropagation()" matInput [formControl]="myControl"
               [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
          <mat-option (click)="setClockCity(option)" *ngFor="let option of filteredOptions | async" [value]="option">
            {{option.city}} - {{option.timezone}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </form>
  </div>
</mat-menu>
