(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{A9vo:function(t,e,n){"use strict";n.r(e),n.d(e,"SoftPhoneModule",(function(){return we}));var i=n("PCNd"),o=n("ofXK"),r=n("sYmb"),c=n("zB/H"),s=n("Y2ut"),a=n("0d0Z"),l=n("unh5"),h=n("fXoL"),u=n("cH1L"),b=n("5+WD"),f=n("NFeN"),p=n("DDyt"),g=n("OC8m"),d=n("ISpo"),m=n("mrmJ"),v=n("PqYM"),S=n("tk/3"),w=n("AytR"),H=n("Qjjq"),y=function(){function t(t,e){this.http=t,this.companySelectorService=e,this.accessToken="",this.API_URL=w.a.CONTAINER_URL+"/pbx",this.headers={headers:new S.c({"Content-Type":"application/json; charset=UTF-8",Accept:"application/json; charset=UTF-8"})}}return t.prototype.getExtensionList=function(){return this.currentCompany=this.companySelectorService.currentCompany,this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=extensions"+(this.currentCompany?"&comp_id="+this.currentCompany.id:""),this.headers)},t.prototype.getExtensionStatus=function(){return this.currentCompany=this.companySelectorService.currentCompany,this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=extensionStatus"+(this.currentCompany?"&comp_id="+this.currentCompany.id:""),this.headers)},t.prototype.getCdr=function(t){return this.currentCompany=this.companySelectorService.currentCompany,this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/cdr.php?action=cdr&extensionNo="+t+(this.currentCompany?"&comp_id="+this.currentCompany.id:""),this.headers)},t.prototype.getConferenceList=function(){return this.currentCompany=this.companySelectorService.currentCompany,this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=conferenceList"+(this.currentCompany?"&comp_id="+this.currentCompany.id:""),this.headers)},t.prototype.getConferenceOnlineUser=function(t){return this.currentCompany=this.companySelectorService.currentCompany,this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=conferenceOnlineUser&phoneNumber="+t+(this.currentCompany?"&comp_id="+this.currentCompany.id:""),this.headers)},t.prototype.muteUnMute=function(t){return this.currentCompany=this.companySelectorService.currentCompany,this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.post(this.API_URL+"/extension.php?action=editMute"+(this.currentCompany?"&comp_id="+this.currentCompany.id:""),t,this.headers)},t.\u0275fac=function(e){return new(e||t)(h.Xb(S.a),h.Xb(H.a))},t.\u0275prov=h.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),x=["oBottomSheet"],k=["container"],_=function(){function t(t,e,n){var i=this;this.cfr=t,this.renderer=e,this.softPhoneService=n,this.minimizeStatus=!1,this._subscription=new c.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){i.minimizeStatus=t;try{var e=i.oBottomSheet.nativeElement.parentNode.parentNode;i.minimizeStatus?i.renderer.addClass(e,"minimizePopUp"):i.renderer.removeClass(e,"minimizePopUp")}catch(n){}})))}return t.prototype.toggleBottomSheet=function(t,e){var n=this;void 0===e&&(e=!0),this.container.clear();var i=this.oBottomSheet.nativeElement.parentNode.parentNode,o=this.oBottomSheet.nativeElement;if(e){this.renderer.addClass(i,"active"),this.renderer.setStyle(o,"height",t.height),this.renderer.setStyle(o,"width",t.width),this.renderer.setStyle(i,"z-index","5");var r=this.cfr.resolveComponentFactory(t.component);this.container.createComponent(r).instance.bottomSheetData=t}else this.renderer.removeClass(i,"active"),this.renderer.setStyle(o,"height","0"),this.renderer.setStyle(o,"width","0"),setTimeout((function(){return n.renderer.setStyle(i,"z-index","-1")}),100)},t.prototype.close=function(){this.toggleBottomSheet(null,!1)},t.\u0275fac=function(e){return new(e||t)(h.Nb(h.j),h.Nb(h.G),h.Nb(s.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-bottom-sheet"]],viewQuery:function(t,e){if(1&t&&(h.Mc(x,!0),h.Mc(k,!0,h.R)),2&t){var n=void 0;h.qc(n=h.bc())&&(e.oBottomSheet=n.first),h.qc(n=h.bc())&&(e.container=n.first)}},decls:12,vars:0,consts:[[1,"o-bottom-sheet-container","full-width","full-height"],[1,"o-bottom-sheet-backdrop","full-width","full-height",3,"click"],[1,"o-bottom-sheet-content","overflow-hide","pos-abs","margin-auto","bottom-0","right-0","left-0","round-corner-top-left","round-corner-top-right"],["oBottomSheet",""],[1,"o-bottom-sheet-comp"],["container",""]],template:function(t,e){1&t&&(h.Tb(0,"div",0),h.Hc(1,"\n  "),h.Tb(2,"div",1),h.ac("click",(function(){return e.close()})),h.Sb(),h.Hc(3,"\n\n  "),h.Tb(4,"div",2,3),h.Hc(6,"\n    "),h.Ob(7,"div",4,5),h.Hc(9,"\n  "),h.Sb(),h.Hc(10,"\n"),h.Sb(),h.Hc(11,"\n"))},styles:["[_nghost-%COMP%]{position:absolute;right:0;left:0;bottom:0;width:100%;height:100%;z-index:-1;transition:all .2s}[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{transition:background .2s!important;background:transparent}.active[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.7)}.minimizePopUp[_nghost-%COMP%]{bottom:-100%}[_nghost-%COMP%]   .o-bottom-sheet-content[_ngcontent-%COMP%]{transition:height .1s!important;box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);background-color:transparent;height:0;width:0}"]}),t}();function T(t,e){if(1&t){var n=h.Ub();h.Tb(0,"app-soft-phone-contacts",9),h.ac("triggerCloseBottomSheet",(function(){return h.vc(n),h.ec().closeTransferBottomSheet()})),h.Sb()}if(2&t){var i=h.ec();h.kc("fromPopUp",!0)("loggedInUser",i.loggedInUser)("rtlDirection",i.rtlDirection)("softPhoneUsers",i.softPhoneUsers)}}function C(t,e){if(1&t){var n=h.Ub();h.Tb(0,"app-soft-phone-keypad",10),h.ac("triggerCloseBottomSheet",(function(){return h.vc(n),h.ec().closeTransferBottomSheet()})),h.Sb()}if(2&t){var i=h.ec();h.kc("fromPopUp",!0)("rtlDirection",i.rtlDirection)("softPhoneUsers",i.softPhoneUsers)}}var P=function(t){return{"view-mode":t}},I=function(){function t(t,e,n){var i=this;this.viewDirection=t,this.softPhoneService=e,this.userInfoService=n,this.rtlDirection=!1,this.viewModeTypes="contact",this._subscription=new c.Subscription,this._subscription.add(this.softPhoneService.currentSoftPhoneUsers.subscribe((function(t){return i.softPhoneUsers=t}))),this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return i.rtlDirection=t}))),this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return i.loggedInUser=t})))}return t.prototype.ngOnInit=function(){},t.prototype.changeViewMode=function(t){this.viewModeTypes=t},t.prototype.closeTransferBottomSheet=function(){this.bottomSheetData.bottomSheetRef.close()},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(h.Nb(l.a),h.Nb(s.a),h.Nb(p.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-transfer-call"]],decls:34,vars:16,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0",3,"dir"],[1,"switch-container","height-45","padding-mini-t-b","padding-r-l"],[1,"full-width","mat-button-custom","height-30","line-height-15","round-corner-all",3,"ngClass","value","change"],["viewMode","matButtonToggleGroup"],[1,"overflow-hide","half-width","font-7-rem","line-height-15","height-30",3,"value"],[1,"component-container","height-full-minus-45","pos-rel"],[3,"ngSwitch"],[3,"fromPopUp","loggedInUser","rtlDirection","softPhoneUsers","triggerCloseBottomSheet",4,"ngSwitchCase"],[3,"fromPopUp","rtlDirection","softPhoneUsers","triggerCloseBottomSheet",4,"ngSwitchCase"],[3,"fromPopUp","loggedInUser","rtlDirection","softPhoneUsers","triggerCloseBottomSheet"],[3,"fromPopUp","rtlDirection","softPhoneUsers","triggerCloseBottomSheet"]],template:function(t,e){if(1&t){var n=h.Ub();h.Tb(0,"div",0),h.Hc(1,"\n  "),h.Tb(2,"div",1),h.Hc(3,"\n    "),h.Tb(4,"mat-button-toggle-group",2,3),h.ac("change",(function(){h.vc(n);var t=h.rc(5);return e.changeViewMode(t.value)})),h.Hc(6,"\n      "),h.Tb(7,"mat-button-toggle",4),h.Hc(8,"\n        "),h.Tb(9,"span"),h.Hc(10),h.fc(11,"translate"),h.Sb(),h.Hc(12,"\n      "),h.Sb(),h.Hc(13,"\n      "),h.Tb(14,"mat-button-toggle",4),h.Hc(15,"\n        "),h.Tb(16,"span"),h.Hc(17),h.fc(18,"translate"),h.Sb(),h.Hc(19,"\n      "),h.Sb(),h.Hc(20,"\n    "),h.Sb(),h.Hc(21,"\n  "),h.Sb(),h.Hc(22,"\n\n  "),h.Tb(23,"div",5),h.Hc(24,"\n    "),h.Rb(25,6),h.Hc(26,"\n      "),h.Fc(27,T,1,4,"app-soft-phone-contacts",7),h.Hc(28,"\n\n      "),h.Fc(29,C,1,3,"app-soft-phone-keypad",8),h.Hc(30,"\n    "),h.Qb(),h.Hc(31,"\n  "),h.Sb(),h.Hc(32,"\n"),h.Sb(),h.Hc(33,"\n")}if(2&t){var i=h.rc(5);h.kc("dir",e.rtlDirection?"rtl":"ltr"),h.Bb(4),h.kc("ngClass",h.nc(14,P,i))("value",e.viewModeTypes),h.Bb(3),h.kc("value","contact"),h.Bb(3),h.Ic(h.gc(11,10,"soft_phone.main.address_book")),h.Bb(4),h.kc("value","keypad"),h.Bb(3),h.Ic(h.gc(18,12,"soft_phone.main.dial_pad")),h.Bb(8),h.kc("ngSwitch",e.viewModeTypes),h.Bb(2),h.kc("ngSwitchCase","contact"),h.Bb(2),h.kc("ngSwitchCase","keypad")}},styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}"]}),t}(),B=n("MutI"),U=n("bTqV"),O=n("zkoq"),D=n("FKr1"),M=["bottomSheet"];function N(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",26),h.ac("click",(function(){return h.vc(n),h.ec().minimizePopUp()})),h.Hc(1,"\n    "),h.Tb(2,"mat-icon"),h.Hc(3),h.Sb(),h.Hc(4,"\n  "),h.Sb()}if(2&t){var i=h.ec();h.kc("ngClass",i.rtlDirection?"left-full":"right-full"),h.Bb(3),h.Ic(i.rtlDirection?"keyboard_arrow_left":"keyboard_arrow_right")}}var L=function(t,e){return{"right.px":t,"left.px":e}};function z(t,e){if(1&t&&(h.Tb(0,"li",32),h.Hc(1,"\n          "),h.Tb(2,"img",33),h.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),h.Sb(),h.Hc(3,"\n        "),h.Sb()),2&t){var n=h.ec(),i=n.index,o=n.$implicit,r=h.ec(2);h.kc("ngStyle",h.oc(3,L,r.rtlDirection?i+"2":"inherit",r.rtlDirection?"inherit":i+"2")),h.Bb(2),h.kc("alt",o.extension_name)("src","assets/profileImg/"+(o.username?o.username:"0")+".jpg",h.xc)}}function F(t,e){if(1&t&&(h.Rb(0),h.Hc(1,"\n        "),h.Fc(2,z,4,6,"li",31),h.Hc(3,"\n      "),h.Qb()),2&t){var n=e.index;h.Bb(2),h.kc("ngIf",n<3)}}function E(t,e){if(1&t&&(h.Tb(0,"span",34),h.Hc(1),h.Sb()),2&t){var n=h.ec(2);h.kc("ngClass",n.rtlDirection?"left-full-two-em-reverse":"right-full-two-em-reverse"),h.Bb(1),h.Jc("+",n.extensionList.length-3,"")}}function j(t,e){if(1&t){var n=h.Ub();h.Tb(0,"div",27),h.Hc(1,"\n    "),h.Tb(2,"ul",28),h.ac("click",(function(){h.vc(n);var t=h.ec();return t.activeExtensionList=!t.activeExtensionList})),h.Hc(3,"\n      "),h.Fc(4,F,4,1,"ng-container",29),h.Hc(5,"\n    "),h.Sb(),h.Hc(6,"\n    "),h.Fc(7,E,2,2,"span",30),h.Hc(8,"\n  "),h.Sb()}if(2&t){var i=h.ec();h.kc("ngClass",i.rtlDirection?"right-full":"left-full"),h.Bb(4),h.kc("ngForOf",i.extensionList),h.Bb(3),h.kc("ngIf",i.extensionList&&i.extensionList.length>3)}}function R(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",36),h.ac("click",(function(){h.vc(n);var t=e.$implicit;return h.ec(2).callEvent(t)})),h.Hc(1,"\n        "),h.Tb(2,"mat-icon"),h.Hc(3),h.Sb(),h.Hc(4,"\n      "),h.Sb()}if(2&t){var i=e.$implicit,o=h.ec(2);h.Bb(3),h.Ic(o.muteStatus?i.changeIcon:i.num)}}function A(t,e){if(1&t&&(h.Rb(0),h.Hc(1,"\n      "),h.Fc(2,R,5,1,"button",35),h.Hc(3,"\n    "),h.Qb()),2&t){var n=h.ec();h.Bb(2),h.kc("ngForOf",n.keys)}}function J(t,e){if(1&t&&(h.Tb(0,"div",39),h.Hc(1,"\n        "),h.Tb(2,"img",40),h.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),h.Sb(),h.Hc(3,"\n\n        "),h.Tb(4,"h3",41),h.Hc(5),h.Sb(),h.Hc(6,"\n\n        "),h.Tb(7,"span",42),h.Hc(8),h.fc(9,"translate"),h.Sb(),h.Hc(10,"\n      "),h.Sb()),2&t){var n=h.ec(2);h.Bb(2),h.kc("src","assets/profileImg/"+n.userJoinOrLeftTheConf.extension.username+".jpg",h.xc)("alt",n.userJoinOrLeftTheConf.extension.extension_name),h.Bb(3),h.Jc("\n          ",n.userJoinOrLeftTheConf.extension.extension_name,"\n        "),h.Bb(3),h.Jc("\n          ",h.gc(9,4,"left"===n.userJoinOrLeftTheConf.status?"soft_phone.call_pop_up.left_the_conf":"soft_phone.call_pop_up.joined_the_conf"),"\n        ")}}function K(t,e){if(1&t&&(h.Tb(0,"div",37),h.Hc(1,"\n      "),h.Fc(2,J,11,6,"div",38),h.Hc(3,"\n    "),h.Sb()),2&t){var n=h.ec();h.kc("ngClass",n.userJoinOrLeftTheConf?"bottom-0":"bottom-full-2-percent-reverse"),h.Bb(2),h.kc("ngIf",n.userJoinOrLeftTheConf)}}function V(t,e){if(1&t&&(h.Tb(0,"span"),h.Hc(1,"\n          "),h.Tb(2,"mat-icon",47),h.Hc(3),h.Sb(),h.Hc(4,"\n        "),h.Sb()),2&t){var n=h.ec().$implicit;h.Bb(3),h.Jc("\n            ",n.is_mute?"mic_off":"","\n          ")}}function q(t,e){if(1&t&&(h.Tb(0,"mat-list-item",43),h.Hc(1,"\n      "),h.Tb(2,"img",44),h.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),h.Sb(),h.Hc(3,"\n\n      "),h.Tb(4,"h3",45),h.Hc(5),h.Sb(),h.Hc(6,"\n\n      "),h.Tb(7,"div",46),h.Hc(8,"\n        "),h.Tb(9,"span"),h.Hc(10),h.Sb(),h.Hc(11,"\n\n        "),h.Fc(12,V,5,1,"span",9),h.Hc(13,"\n      "),h.Sb(),h.Hc(14,"\n    "),h.Sb()),2&t){var n=e.$implicit;h.Bb(2),h.kc("src","assets/profileImg/"+n.username+".jpg",h.xc)("alt",n.extension_name),h.Bb(3),h.Jc(" ",n.extension_name," "),h.Bb(2),h.kc("ngClass",n.is_mute?"flex-direction-column":"height-40"),h.Bb(3),h.Ic(n.extension_no),h.Bb(2),h.kc("ngIf",n.is_mute)}}function W(t,e){if(1&t){var n=h.Ub();h.Tb(0,"mat-grid-tile",48),h.Hc(1,"\n        "),h.Tb(2,"button",49),h.ac("mousedown",(function(t){h.vc(n);var i=e.$implicit;return h.ec().dialKeyPress(t,i)})),h.Hc(3),h.Sb(),h.Hc(4,"\n      "),h.Sb()}if(2&t){var i=e.$implicit;h.kc("colspan",1)("rowspan",1),h.Bb(3),h.Jc("\n          ",i.num,"\n        ")}}var $=function(){function t(t,e,n,i,o){var r=this;this.apiService=t,this.viewDirection=e,this.userInfoService=n,this.softPhoneService=i,this.notificationService=o,this.callTimer="00:00",this.counter=null,this.hour=0,this.minute=0,this.second=0,this.muteStatus=!1,this.connectedStatus=!1,this.extensionList=[],this.keys=[],this.activeExtensionList=!1,this.activeDialPad=!1,this.timerDueTime=0,this.timerPeriod=5e3,this.globalTimer=null,this.userJoinOrLeftTheConf=null,this.dialPadKeys=[{num:"1"},{num:"2"},{num:"3"},{num:"4"},{num:"5"},{num:"6"},{num:"7"},{num:"8"},{num:"9"},{num:"*"},{num:"0"},{num:"#"}],this._subscription=new c.Subscription,this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return r.loggedInUser=t}))),this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return r.rtlDirection=t})))}return t.prototype.ngOnInit=function(){var t=this;this.data=this.bottomSheetData.data,this.keys=[{type:"mute_unmute",num:"mic",changeIcon:"mic_off"}],"conference"!==this.data.type?this.keys.push({type:"forward",num:"phone_forwarded",changeIcon:"phone_forwarded"}):"conference"===this.data.type&&this.data.password.length&&this.keys.push({type:"key_pad",num:"dialpad",changeIcon:"dialpad"}),this.timeCounter&&(this.timeCounter.unsubscribe(),this.counter=null,this.callTimer="00:00"),this._subscription.add(this.softPhoneService.currentConnectedCall.subscribe((function(e){t.connectedStatus=e,t.connectedStatus?(t.counter=Object(v.a)(0,1e3),t.timeCounter=t.counter.subscribe((function(){t.second<59?t.second++:(t.second=0,t.minute<59?t.minute++:(t.minute=0,t.hour++)),t.callTimer=(t.hour<10?"0"+t.hour:t.hour)+":"+(t.minute<10?"0"+t.minute:t.minute)+":"+(t.second<10?"0"+t.second:t.second)})),t.globalTimer=Object(v.a)(t.timerDueTime,t.timerPeriod),t.globalTimerSubscription=t.globalTimer.subscribe((function(){return t.getConferenceOnlineUser()}))):t.globalTimerSubscription&&(t.globalTimerSubscription.unsubscribe(),t.globalTimer=null)}))),this.softPhoneService.sipCall("call-audio",this.data.extension_no)},t.prototype.callEvent=function(t){var e=this;switch(t.type){case"mute_unmute":this._subscription.add(this.apiService.muteUnMute({is_mute:this.muteStatus?0:1,extension_no:""+this.loggedInUser.extension_no}).subscribe((function(t){t.success&&(e.muteStatus=e.softPhoneService.sipToggleMute())})));break;case"forward":var n={component:I,height:"100%",width:"100%",data:""};n.bottomSheetRef=this.bottomSheet,this.bottomSheet.toggleBottomSheet(n);break;case"key_pad":this.activeDialPad=!0}},t.prototype.minimizePopUp=function(){this.softPhoneService.changeMinimizeCallPopUp(!0)},t.prototype.getConferenceOnlineUser=function(){var t=this;this._subscription.add(this.apiService.getConferenceOnlineUser(this.data.extension_no).subscribe((function(e){e.success&&t.joinOrLeftToConf(t.extensionList,e.data).then((function(){t.extensionList=e.data}))})))},t.prototype.joinOrLeftToConf=function(t,e){var n=this;return new Promise((function(i){var o=t.filter(n.arrayComparer(e)),r=e.filter(n.arrayComparer(t)),c=o.concat(r);if(c.length&&1===c.length){var s="";1===o.length&&0===r.length?s="left":0===o.length&&1===r.length&&(s="join");var a=c.pop();n.userJoinOrLeftTheConf=a.username!==n.loggedInUser.email?{extension:a,status:s}:null,i(!0)}else n.userJoinOrLeftTheConf=null,i(!0)}))},t.prototype.arrayComparer=function(t){return function(e){return 0==t.filter((function(t){return t.extension_no==e.extension_no&&t.extension_no==e.extension_no})).length}},t.prototype.hangUp=function(){this.softPhoneService.sipHangUp(),this.timeCounter&&(this.timeCounter.unsubscribe(),this.counter=null,this.callTimer="00:00"),this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)},t.prototype.dialKeyPress=function(t,e){var n=this;this.softPhoneService.sipSendDTMF(e.num),"#"===e.num&&setTimeout((function(){return n.activeDialPad=!1}),5e3)},t.prototype.onKeydownHandler=function(){this.activeExtensionList=!1},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe(),this.timeCounter&&this.timeCounter.unsubscribe(),this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)},t.\u0275fac=function(e){return new(e||t)(h.Nb(y),h.Nb(l.a),h.Nb(p.a),h.Nb(s.a),h.Nb(g.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-call-pop-up"]],viewQuery:function(t,e){var n;1&t&&h.Mc(M,!0),2&t&&h.qc(n=h.bc())&&(e.bottomSheet=n.first)},hostBindings:function(t,e){1&t&&h.ac("keydown.escape",(function(t){return e.onKeydownHandler(t)}),!1,h.tc)},decls:88,vars:32,consts:[[1,"popup-container","pos-rel","full-height","full-width","padding-full"],["class","minimizeBtn pos-abs top-full width-40 height-40 text-white no-bg no-border cursor-pointer",3,"ngClass","click",4,"ngIf"],["class","extension-list pos-abs top-full width-50 height-30",3,"ngClass",4,"ngIf"],[1,"avatar-holder","text-center","width-100","height-100","round-corner-all","padding-half","margin-auto","margin-t-full-3","margin-b-full"],["matListAvatar","",1,"full-width","round-corner-all",3,"alt","src","error"],[1,"width-200","margin-auto","height-40","line-height-40","text-center","text-white","text-eclipse","text-weight-normal","font-full-plus-two-tenth-em"],[1,"full-width","height-30","line-height-30","text-center","text-gray-500","text-weight-normal"],[1,"full-width","height-40","line-height-40","text-center","text-white","text-weight-normal",3,"ngClass"],[1,"full-width","transition","text-center","display-flex","padding-r-l-2","pos-abs","right-0","left-0","bottom-full-2",3,"ngClass"],[4,"ngIf"],["mat-raised-button","",1,"red-gradient","min-width-inherit","cursor-pointer","text-white","mat-elevation-z3","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","margin-mini-r-l","text-center","round-corner-all",3,"click"],["class","pos-abs width-ninety-percent height-50 bg-white mat-elevation-z3 left-0 right-0 margin-auto z-index-99 round-corner transition",3,"ngClass",4,"ngIf"],["bottomSheet",""],[1,"show-extension-list","pos-abs","height-300","left-0","right-0","margin-auto","round-corner-top","bg-white","transition","overflow-hide",3,"ngClass","dir"],[1,"full-width","height-45","line-height-45","padding-r-l"],[1,"pos-abs","top-half","cursor-pointer","no-bg","no-border","no-box-shadow","width-30","height-30",3,"ngClass","click"],[1,"text-grey-500","line-height-30"],[1,"full-width","height-full-minus-45","overflow-x-hide","overflow-y-auto"],["class","highlight cursor-pointer padding-r-l",4,"ngFor","ngForOf"],[1,"show-dialPad","pos-abs","height-300","left-0","right-0","margin-auto","round-corner-top","bg-white","transition","overflow-hide",3,"ngClass","dir"],[1,"key-container"],["cols","3","gutterSize","30","rowHeight","fit","dir","ltr",1,"full-height"],[3,"colspan","rowspan",4,"ngFor","ngForOf"],[1,"padding-r-l-4","pos-abs","full-width","bottom-full-2"],["mat-raised-button","","type","button",1,"red-gradient","full-width","text-white","font-8-rem","margin-auto","width-90","height-35","padding-mini-r-l",3,"click"],[1,"padding-mini-r-l"],[1,"minimizeBtn","pos-abs","top-full","width-40","height-40","text-white","no-bg","no-border","cursor-pointer",3,"ngClass","click"],[1,"extension-list","pos-abs","top-full","width-50","height-30",3,"ngClass"],[1,"list-style-none","no-padding","no-margin","cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],["class","text-white pos-abs line-height-30",3,"ngClass",4,"ngIf"],["class","pos-abs display-flex align-items-center",3,"ngStyle",4,"ngIf"],[1,"pos-abs","display-flex","align-items-center",3,"ngStyle"],["matListAvatar","",1,"mat-elevation-z3","width-30","height-30","round-corner-all",3,"alt","src","error"],[1,"text-white","pos-abs","line-height-30",3,"ngClass"],["class","key transition min-width-inherit cursor-pointer text-white mat-elevation-z3 no-box-shadow no-padding no-border font-full-plus-half-em width-50 height-50 margin-mini-r-l text-center round-corner-all","mat-raised-button","",3,"click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"key","transition","min-width-inherit","cursor-pointer","text-white","mat-elevation-z3","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","margin-mini-r-l","text-center","round-corner-all",3,"click"],[1,"pos-abs","width-ninety-percent","height-50","bg-white","mat-elevation-z3","left-0","right-0","margin-auto","z-index-99","round-corner","transition",3,"ngClass"],["class","full-width full-height display-flex align-items-center justify-content-start padding-r-l",4,"ngIf"],[1,"full-width","full-height","display-flex","align-items-center","justify-content-start","padding-r-l"],["matListAvatar","",1,"mat-elevation-z2","width-30","height-30","online-user","round-corner-all",3,"src","alt","error"],["matLine","",1,"mat-line","font-7-rem","text-weight-bold","no-margin","padding-mini-r-l"],[1,"font-8-em","text-weight-bold","white-space-no-wrap"],[1,"highlight","cursor-pointer","padding-r-l"],["matListAvatar","",1,"mat-elevation-z2","width-35","height-35","online-user",3,"src","alt","error"],["matLine","",1,"font-7-rem","text-weight-bold","no-margin"],[1,"pos-rel","online-extension","font-8-em","display-flex","flex-center-y",3,"ngClass"],[1,"width-20","height-20","text-gray-500","font-full-plus-half-em"],[3,"colspan","rowspan"],["mat-raised-button","",1,"dial-pad-key","cursor-pointer","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","line-height-50","text-center","round-corner-all",3,"mousedown"]],template:function(t,e){1&t&&(h.Tb(0,"div",0),h.Hc(1,"\n  "),h.Fc(2,N,5,2,"button",1),h.Hc(3,"\n\n  "),h.Fc(4,j,9,3,"div",2),h.Hc(5,"\n\n  "),h.Tb(6,"div",3),h.Hc(7,"\n    "),h.Tb(8,"img",4),h.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),h.Sb(),h.Hc(9,"\n  "),h.Sb(),h.Hc(10,"\n\n  "),h.Tb(11,"h2",5),h.Hc(12),h.fc(13,"translate"),h.Sb(),h.Hc(14,"\n\n  "),h.Tb(15,"h3",6),h.Hc(16),h.Sb(),h.Hc(17,"\n\n  "),h.Tb(18,"div",7),h.Hc(19),h.fc(20,"translate"),h.Sb(),h.Hc(21,"\n\n  "),h.Tb(22,"div",8),h.Hc(23,"\n    "),h.Fc(24,A,4,1,"ng-container",9),h.Hc(25,"\n\n    "),h.Tb(26,"button",10),h.ac("click",(function(){return e.hangUp()})),h.Hc(27,"\n      "),h.Tb(28,"mat-icon"),h.Hc(29,"call_end"),h.Sb(),h.Hc(30,"\n    "),h.Sb(),h.Hc(31,"\n\n    "),h.Fc(32,K,4,2,"div",11),h.Hc(33,"\n  "),h.Sb(),h.Hc(34,"\n"),h.Sb(),h.Hc(35,"\n\n"),h.Ob(36,"app-soft-phone-bottom-sheet",null,12),h.Hc(38,"\n\n"),h.Tb(39,"div",13),h.Hc(40,"\n  "),h.Tb(41,"h3",14),h.Hc(42),h.fc(43,"translate"),h.Sb(),h.Hc(44,"\n\n  "),h.Tb(45,"button",15),h.ac("click",(function(){return e.activeExtensionList=!1})),h.Hc(46,"\n    "),h.Tb(47,"mat-icon",16),h.Hc(48,"close"),h.Sb(),h.Hc(49,"\n  "),h.Sb(),h.Hc(50,"\n\n  "),h.Tb(51,"mat-list",17),h.Hc(52,"\n    "),h.Fc(53,q,15,6,"mat-list-item",18),h.Hc(54,"\n  "),h.Sb(),h.Hc(55,"\n"),h.Sb(),h.Hc(56,"\n\n"),h.Tb(57,"div",19),h.Hc(58,"\n  "),h.Tb(59,"h3",14),h.Hc(60),h.fc(61,"translate"),h.Sb(),h.Hc(62,"\n\n  "),h.Tb(63,"div",20),h.Hc(64,"\n    "),h.Tb(65,"mat-grid-list",21),h.Hc(66,"\n      "),h.Fc(67,W,5,3,"mat-grid-tile",22),h.Hc(68,"\n    "),h.Sb(),h.Hc(69,"\n  "),h.Sb(),h.Hc(70,"\n\n  "),h.Tb(71,"div",23),h.Hc(72,"\n    "),h.Tb(73,"button",24),h.ac("click",(function(){return e.activeDialPad=!1})),h.Hc(74,"\n      "),h.Tb(75,"span",25),h.Hc(76),h.fc(77,"translate"),h.Sb(),h.Hc(78,"\n    "),h.Sb(),h.Hc(79,"\n  "),h.Sb(),h.Hc(80,"\n\n  "),h.Tb(81,"button",15),h.ac("click",(function(){return e.activeDialPad=!1})),h.Hc(82,"\n    "),h.Tb(83,"mat-icon",16),h.Hc(84,"close"),h.Sb(),h.Hc(85,"\n  "),h.Sb(),h.Hc(86,"\n"),h.Sb(),h.Hc(87,"\n")),2&t&&(h.Bb(2),h.kc("ngIf",e.connectedStatus),h.Bb(2),h.kc("ngIf","conference"===e.data.type&&e.connectedStatus),h.Bb(4),h.kc("alt",e.data.name)("src","assets/profileImg/"+(e.data.username?e.data.username:"0")+".jpg",h.xc),h.Bb(4),h.Jc("\n    ",e.data.extension_no?e.data.extension_name:h.gc(13,22,"soft_phone.call_pop_up.unknown_number"),"\n  "),h.Bb(4),h.Jc("\n    ",e.data.extension_no?e.data.extension_no:e.data,"\n  "),h.Bb(2),h.kc("ngClass","00:00"!==e.callTimer?"":"blink-effect"),h.Bb(1),h.Jc("\n    ","00:00"!==e.callTimer?e.callTimer:h.gc(20,24,"soft_phone.call_pop_up.calling"),"\n  "),h.Bb(3),h.kc("ngClass",e.connectedStatus?"flex-space-between":"flex-space-around"),h.Bb(2),h.kc("ngIf",e.connectedStatus),h.Bb(8),h.kc("ngIf",!e.activeExtensionList),h.Bb(7),h.kc("ngClass",e.activeExtensionList?"bottom-0":"bottom-full-reverse-percent")("dir",e.rtlDirection?"rtl":"ltr"),h.Bb(3),h.Jc("\n    ",h.gc(43,26,"soft_phone.call_pop_up.available_users"),"\n  "),h.Bb(3),h.kc("ngClass",e.rtlDirection?"left-half":"right-half"),h.Bb(8),h.kc("ngForOf",e.extensionList),h.Bb(4),h.kc("ngClass",e.activeDialPad&&e.data.password.length?"bottom-0":"bottom-full-reverse-percent")("dir",e.rtlDirection?"rtl":"ltr"),h.Bb(3),h.Jc("\n    ",h.gc(61,28,"soft_phone.call_pop_up.available_users"),"\n  "),h.Bb(7),h.kc("ngForOf",e.dialPadKeys),h.Bb(9),h.Ic(h.gc(77,30,"global.hide")),h.Bb(5),h.kc("ngClass",e.rtlDirection?"left-half":"right-half"))},directives:[o.k,B.b,o.i,U.a,f.a,_,u.b,B.a,o.j,O.a,o.l,D.k,B.d,O.c],pipes:[r.c],styles:['[_nghost-%COMP%], [_nghost-%COMP%]:before{width:100%;height:100%;position:absolute;left:0;top:0;bottom:0;right:0}[_nghost-%COMP%]:before{content:"";filter:blur(8px);transform:scale(1.5)}.key[_ngcontent-%COMP%]{background-color:rgba(80,80,80,.9)}.dial-pad-key[_ngcontent-%COMP%]{background-color:#e1e1e1;min-width:inherit!important}.key-container[_ngcontent-%COMP%]{height:calc(100% - 180px);padding:1em 4em}.padding-r-l-4[_ngcontent-%COMP%]{padding:0 4em}.minimizeBtn[_ngcontent-%COMP%]{transform:scale(1.2)}.avatar-holder[_ngcontent-%COMP%]{background-color:#ddd;border:3px solid #aaa}.show-dialPad[_ngcontent-%COMP%], .show-extension-list[_ngcontent-%COMP%]{width:97%!important;height:99%!important;background-color:hsla(0,0%,100%,.95)}.online-user[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060}.online-extension[_ngcontent-%COMP%]{color:#4ec060}.width-ninety-percent[_ngcontent-%COMP%]{width:90%!important}.blink-effect[_ngcontent-%COMP%]{transition:all .4s!important;-webkit-animation:blink-effect 1s linear infinite;animation:blink-effect 1s linear infinite}@-webkit-keyframes blink-effect{0%{color:#888}33.33333%{color:transparent}to{color:#888}}@keyframes blink-effect{0%{color:#888}33.33333%{color:transparent}to{color:#888}}']}),t}(),X=n("XiUW"),Q=n("ue6I"),G=n("/Hbh"),Y=n("f0Cb");function Z(t,e){if(1&t&&h.Ob(0,"div",15),2&t){var n=h.ec();h.kc("ngClass",n.data.is_online?"online":"offline")}}var tt,et=function(){function t(t,e,n,i){var o=this;this.viewDirection=t,this.softPhoneService=e,this.notificationService=n,this.userInfoService=i,this._subscription=new c.Subscription,this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return o.loggedInUser=t}))),this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return o.rtlDirection=t})))}return t.prototype.ngOnInit=function(){this.data=this.bottomSheetData.data},t.prototype.call=function(t){this.softPhoneService.changeOnCallUser(t)},t.prototype.closeBottomSheet=function(){this.bottomSheetData.bottomSheetRef.close()},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(h.Nb(l.a),h.Nb(s.a),h.Nb(g.a),h.Nb(p.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-call-to-action"]],decls:66,vars:19,consts:[[1,"full-width","full-height","padding-full",3,"dir"],[1,"text-weight-bold","font-full-plus-three-tenth-em","no-margin"],[1,"width-30","height-30","pos-abs","top-0","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"ngClass","click"],[1,"line-height-35","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],[1,"margin-t-half"],["matListAvatar","",1,"online-user","mat-elevation-z2","width-50","height-50","round-corner-all","margin-auto",3,"alt","ngClass","src","error"],["matLine","",1,"font-8-rem"],[1,"ltr","padding-mini-r-l"],[3,"timezone"],["class","user-soft-phone-status pos-rel text-gray-500 width-30 height-30 round-corner-all",3,"ngClass",4,"ngIf"],[1,"margin-mini-t-b"],[1,"height-60","display-flex","flex-space-around"],["mat-raised-button","","type","submit",1,"green-gradient","full-width","text-white","font-8-rem","margin-auto","width-90","height-35","padding-mini-r-l",3,"disabled","click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],[1,"user-soft-phone-status","pos-rel","text-gray-500","width-30","height-30","round-corner-all",3,"ngClass"]],template:function(t,e){1&t&&(h.Tb(0,"div",0),h.Hc(1,"\n  "),h.Tb(2,"h3",1),h.Hc(3),h.Sb(),h.Hc(4,"\n\n  "),h.Tb(5,"button",2),h.ac("click",(function(){return e.closeBottomSheet()})),h.Hc(6,"\n    "),h.Tb(7,"mat-icon",3),h.Hc(8,"\n      close\n    "),h.Sb(),h.Hc(9,"\n  "),h.Sb(),h.Hc(10,"\n\n  "),h.Tb(11,"mat-list",4),h.Hc(12,"\n    "),h.Tb(13,"mat-list-item"),h.Hc(14,"\n      "),h.Tb(15,"img",5),h.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),h.Sb(),h.Hc(16,"\n\n      "),h.Tb(17,"p",6),h.Hc(18,"\n          "),h.Tb(19,"span"),h.Hc(20," "),h.Tb(21,"b"),h.Hc(22),h.fc(23,"translate"),h.Sb(),h.Hc(24,"\n            "),h.Tb(25,"span",7),h.Hc(26,"\n              "),h.Ob(27,"app-time-area-digital-clock",8),h.Hc(28,"\n            "),h.Sb(),h.Hc(29,"\n          "),h.Sb(),h.Hc(30,"\n      "),h.Sb(),h.Hc(31,"\n\n      "),h.Tb(32,"p",6),h.Hc(33,"\n        "),h.Tb(34,"span"),h.Hc(35," "),h.Tb(36,"b"),h.Hc(37),h.fc(38,"translate"),h.Sb(),h.Hc(39," "),h.Tb(40,"span",7),h.Hc(41),h.Sb(),h.Hc(42," "),h.Sb(),h.Hc(43,"\n      "),h.Sb(),h.Hc(44,"\n\n      "),h.Fc(45,Z,1,1,"div",9),h.Hc(46,"\n    "),h.Sb(),h.Hc(47,"\n  "),h.Sb(),h.Hc(48,"\n\n  "),h.Ob(49,"mat-divider",10),h.Hc(50,"\n\n  "),h.Tb(51,"div",11),h.Hc(52,"\n    "),h.Tb(53,"button",12),h.ac("click",(function(){return e.call(e.data)})),h.Hc(54,"\n      "),h.Tb(55,"mat-icon",13),h.Hc(56,"call"),h.Sb(),h.Hc(57,"\n      "),h.Tb(58,"span",14),h.Hc(59),h.fc(60,"translate"),h.Sb(),h.Hc(61,"\n    "),h.Sb(),h.Hc(62,"\n\n    "),h.Hc(63,"\n  "),h.Sb(),h.Hc(64,"\n"),h.Sb(),h.Hc(65,"\n")),2&t&&(h.kc("dir",e.rtlDirection?"rtl":"ltr"),h.Bb(3),h.Jc(" ",e.data.extension_name," "),h.Bb(2),h.kc("ngClass",e.rtlDirection?"left-0":"right-0"),h.Bb(10),h.kc("alt",e.data.name)("ngClass",e.data.is_online?"active":"")("src","assets/profileImg/"+e.data.username+".jpg",h.xc),h.Bb(7),h.Ic(h.gc(23,13,"soft_phone.call_to_action.timezone")),h.Bb(5),h.kc("timezone",e.data.timezone),h.Bb(10),h.Ic(h.gc(38,15,"global.extension")),h.Bb(4),h.Ic(e.data.extension_no),h.Bb(4),h.kc("ngIf","conference"!==e.data.type),h.Bb(8),h.kc("disabled",!e.data.is_online&&"conference"!==e.data.type),h.Bb(6),h.Ic(h.gc(60,17,"soft_phone.call_to_action.call")))},directives:[u.b,o.i,f.a,B.a,B.d,B.b,D.k,G.a,o.k,Y.a,U.a],pipes:[r.c],styles:['[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff}.user-soft-phone-status[_ngcontent-%COMP%]:before, [_nghost-%COMP%]{position:absolute;left:0;top:0;bottom:0;right:0}.user-soft-phone-status[_ngcontent-%COMP%]:before{border-radius:100px!important;content:"";width:12px;height:12px;margin:auto}.user-soft-phone-status.online[_ngcontent-%COMP%]:before{background-color:#4ec060;-webkit-animation:blink-online-user-light 1s linear infinite;animation:blink-online-user-light 1s linear infinite}.user-soft-phone-status.offline[_ngcontent-%COMP%]:before{background-color:#c30}.online-user[_ngcontent-%COMP%]{box-shadow:0 0 0 2px transparent}.online-user.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060;-webkit-animation:blink-online-user 1s linear infinite;animation:blink-online-user 1s linear infinite}@-webkit-keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@-webkit-keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}@keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}']}),t}(),nt=n("1jcm"),it=(tt=function(t,e){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ot=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function c(t){try{a(i.next(t))}catch(e){r(e)}}function s(t){try{a(i.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,s)}a((i=i.apply(t,e||[])).next())}))},rt=function(t,e){var n,i,o,r,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){c.label=r[1];break}if(6===r[0]&&c.label<o[1]){c.label=o[1],o=r;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(r);break}o[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},ct=function(t){return{active:t}};function st(t,e){if(1&t){var n=h.Ub();h.Tb(0,"mat-list-item",13),h.ac("click",(function(){h.vc(n);var t=e.$implicit;return h.ec(2).openSheet(t)})),h.Hc(1,"\n          "),h.Tb(2,"img",14),h.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),h.Sb(),h.Hc(3,"\n\n          "),h.Tb(4,"h3",15),h.Hc(5),h.Sb(),h.Hc(6,"\n\n          "),h.Tb(7,"div",16),h.Hc(8,"\n            "),h.Tb(9,"mat-icon",17),h.Hc(10,"access_time\n            "),h.Sb(),h.Hc(11,"\n\n            "),h.Tb(12,"app-time-area-digital-clock",18),h.Hc(13,"\n            "),h.Sb(),h.Hc(14,"\n          "),h.Sb(),h.Hc(15,"\n\n          "),h.Tb(16,"div",19),h.Hc(17),h.Sb(),h.Hc(18,"\n\n          "),h.Ob(19,"div",20),h.Hc(20,"\n        "),h.Sb()}if(2&t){var i=e.$implicit,o=h.ec(2);h.kc("ngClass",o.rtlDirection?"padding-r-half padding-l-tiny":"padding-l-half padding-r-tiny"),h.Bb(2),h.kc("alt",i.name)("ngClass",h.nc(10,ct,i.is_online))("src","assets/profileImg/"+i.username+".jpg",h.xc),h.Bb(3),h.Ic(i.extension_name),h.Bb(4),h.kc("ngClass",o.rtlDirection?"text-right":"text-left"),h.Bb(3),h.kc("timezone",i.timezone),h.Bb(4),h.kc("ngClass",i.is_online?"text-green-700":"text-red-700"),h.Bb(1),h.Jc("\n            ",i.extension_no,"\n          "),h.Bb(2),h.kc("ngClass",i.is_online?"online":"offline")}}function at(t,e){if(1&t){var n=h.Ub();h.Rb(0),h.Hc(1,"\n  "),h.Tb(2,"div",1),h.Hc(3,"\n    "),h.Tb(4,"mat-list",2),h.Hc(5,"\n      "),h.Tb(6,"mat-list-item",3),h.Hc(7,"\n        "),h.Tb(8,"img",4),h.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),h.Sb(),h.Hc(9,"\n        "),h.Tb(10,"h3",5),h.Hc(11),h.Sb(),h.Hc(12,"\n\n        "),h.Tb(13,"div",6),h.Hc(14,"\n          "),h.Tb(15,"mat-slide-toggle",7,8),h.ac("change",(function(t){return h.vc(n),h.ec().changeSoftphoneStatus(t)})),h.Hc(17,"\n          "),h.Tb(18,"span",9),h.Hc(19),h.fc(20,"translate"),h.Sb(),h.Hc(21,"\n          "),h.Sb(),h.Hc(22,"\n        "),h.Sb(),h.Hc(23,"\n      "),h.Sb(),h.Hc(24,"\n    "),h.Sb(),h.Hc(25,"\n\n    "),h.Tb(26,"div",10),h.Hc(27,"\n      "),h.Tb(28,"mat-list",11),h.Hc(29,"\n        "),h.Fc(30,st,21,12,"mat-list-item",12),h.fc(31,"myFilter"),h.Hc(32,"\n      "),h.Sb(),h.Hc(33,"\n    "),h.Sb(),h.Hc(34,"\n  "),h.Sb(),h.Hc(35,"\n"),h.Qb()}if(2&t){var i=h.rc(16),o=h.ec();h.Bb(8),h.kc("alt",o.loggedInUser?o.loggedInUser.name:"")("src","assets/profileImg/"+(o.loggedInUser?o.loggedInUser.email:"0")+".jpg",h.xc),h.Bb(3),h.Jc(" ",o.loggedInUser?o.loggedInUser.name:""," "),h.Bb(2),h.kc("dir",o.rtlDirection?"ltr":"rtl"),h.Bb(2),h.kc("checked",o.loggedInUserExtension&&o.softphoneConnectedStatus&&o.loggedInUserExtension.extension.is_online),h.Bb(4),h.Jc("\n            ",h.gc(20,7,i.checked?"global.active":"global.deactivate"),"\n          "),h.Bb(11),h.kc("ngForOf",h.hc(31,9,o.softPhoneUsers,o.filterArgs))}}var lt=function(t){function e(e,n,i,o,r,s,a,l,u){var b=t.call(this,n,r)||this;return b.api=e,b.injector=n,b.apiService=i,b.messageService=o,b.userInfoService=r,b.softPhoneService=s,b.translateService=a,b.refreshLoginService=l,b.loadingIndicatorService=u,b.triggerBottomSheet=new h.o,b.tabId=0,b.softPhoneUsers=[],b.timerDueTime=0,b.timerPeriod=15e3,b.globalTimer=null,b.loggedInUserExtension=null,b.filterArgs=null,b.callPopUpMinimizeStatus=!1,b.softphoneConnectedStatus=!1,b.currentIp="",b.extensionStatusSubscription=new c.Subscription,b.softphoneConnectedStatusSubscription=new c.Subscription,b._subscription=new c.Subscription,b._subscription.add(b.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return b.callPopUpMinimizeStatus=t}))),b._subscription.add(b.softPhoneService.currentConnectedCall.subscribe((function(t){t&&b.clearTimer()}))),b}return it(e,t),e.prototype.ngOnInit=function(){this.filterArgs={email:this.loggedInUser.email},this.getEssentialData()},e.prototype.getEssentialData=function(){return ot(this,void 0,void 0,(function(){return rt(this,(function(t){switch(t.label){case 0:return[4,this.getExtensions()];case 1:return t.sent(),[4,this.setDefaultUnMuteExtension()];case 2:return t.sent(),[4,this.startTimer()];case 3:return t.sent(),[2]}}))}))},e.prototype.getExtensions=function(){var t=this;return new Promise((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),t.api.accessToken=t.loginData.token_type+" "+t.loginData.access_token,t._subscription.add(t.api.getExtensionList().subscribe((function(n){if(t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),n.success){var i=n.data.filter((function(t){return"2"===t.extension_type&&t.username.length>10}));t.softPhoneService.changeExtensionList(i).then((function(){t.softPhoneUsers=i,t.softPhoneService.sipRegister()})),e(!0)}}),(function(n){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.refreshLoginService.openLoginDialog(n),e(!0)})))}))},e.prototype.getExtensionStatus=function(){var t=this;this.extensionStatusSubscription&&this.extensionStatusSubscription.unsubscribe(),this.extensionStatusSubscription=this.apiService.getExtensionStatus().subscribe((function(e){return ot(t,void 0,void 0,(function(){var t,n,i=this;return rt(this,(function(o){switch(o.label){case 0:return e.success?(this.currentIp&&this.currentIp!=e.meta.ip&&(this.softPhoneService.sipUnRegister(),setTimeout((function(){i.softPhoneService.sipRegister()}),500)),this.currentIp=e.meta.ip,this.softPhoneUsers&&this.softPhoneUsers.length?(t=e.data.filter((function(t){return"2"===t.extension_type&&t.username.length>10})),n=[],[4,this.softPhoneUsers.map((function(e){var i=t.filter((function(t){return t.username===e.username})).pop();i&&n.push(i)}))]):[3,2]):[3,2];case 1:o.sent(),this.softPhoneUsers=n.sort((function(t,e){var n=t.is_online,i=e.is_online,o=0;return n>i?o=-1:n<i&&(o=1),o})),this.softPhoneService.changeSoftPhoneUsers(this.softPhoneUsers),this.softphoneConnectedStatusSubscription&&this.softphoneConnectedStatusSubscription.unsubscribe(),this.softphoneConnectedStatusSubscription=this.softPhoneService.currentSoftphoneConnected.subscribe((function(t){return ot(i,void 0,void 0,(function(){var e=this;return rt(this,(function(i){switch(i.label){case 0:return t?(this.softphoneConnectedStatus=this.softPhoneService.getSoftphoneConnectedStatus,[4,n.map((function(t){t.username===e.loggedInUser.email&&(e.loggedInUserExtension={user:e.loggedInUser,extension:t})}))]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))})),o.label=2;case 2:return[2]}}))}))}),(function(e){t.clearTimer(),t.refreshLoginService.openLoginDialog(e)}))},e.prototype.setDefaultUnMuteExtension=function(){var t=this;return new Promise((function(e){t.apiService.muteUnMute({extension_no:""+t.loggedInUser.extension_no,is_mute:0}),e(!0)}))},e.prototype.openSheet=function(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:et,height:"200px",width:"98%",data:t})},e.prototype.getTranslate=function(t){return this.translateService.instant(t)},e.prototype.changeSoftphoneStatus=function(t){t.checked?this.softPhoneService.sipRegister():this.softPhoneService.sipUnRegister()},e.prototype.startTimer=function(){var t=this;this.globalTimer&&(this.globalTimer=null),this.globalTimer=Object(v.a)(this.timerDueTime,this.timerPeriod),this.globalTimerSubscription&&this.globalTimerSubscription.unsubscribe(),this.globalTimerSubscription=this.globalTimer.subscribe((function(){t.globalTimer&&t.getExtensionStatus()}))},e.prototype.clearTimer=function(){this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)},e.prototype.ngOnChanges=function(t){var e=this;t.tabId&&0===t.tabId.currentValue?(this.clearTimer(),setTimeout((function(){return e.startTimer()}),200)):this.clearTimer()},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe(),this.clearTimer(),this.extensionStatusSubscription&&this.extensionStatusSubscription.unsubscribe(),this.softphoneConnectedStatusSubscription&&this.softphoneConnectedStatusSubscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(h.Nb(y),h.Nb(h.t),h.Nb(y),h.Nb(X.a),h.Nb(p.a),h.Nb(s.a),h.Nb(r.d),h.Nb(d.a),h.Nb(m.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-soft-phone-information"]],inputs:{rtlDirection:"rtlDirection",tabId:"tabId"},outputs:{triggerBottomSheet:"triggerBottomSheet"},features:[h.yb,h.zb],decls:2,vars:1,consts:[[4,"ngIf"],[1,"full-width","full-height"],[1,"soft-phone-user","full-width","height-50"],[1,"padding-mini-r-l","full-height"],["matListAvatar","",1,"mat-elevation-z2","my-profile-img",3,"alt","src","error"],["matLine","",1,"font-8-rem","text-weight-bold"],[1,"font-8-rem",3,"dir"],[1,"soft-phone-status",3,"checked","change"],["slideToggle",""],[1,"padding-mini-r-l"],[1,"height-full-minus-50","overflow-x-hide","overflow-y-auto"],[1,"full-width"],["class","highlight cursor-pointer full-height",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","full-height",3,"ngClass","click"],["matListAvatar","",1,"online-user","mat-elevation-z2","width-35","height-35","transition",3,"alt","ngClass","src","error"],["matLine","",1,"font-7-rem","text-weight-bold","no-margin"],["matLine",""],[1,"width-18","height-18","font-8-em","pos-rel","top-two-tenth",3,"ngClass"],[1,"font-8-em","text-gray-600",3,"timezone"],[1,"pos-rel","height-30","line-height-30","round-corner-all","font-8-em",3,"ngClass"],[1,"user-soft-phone-status","pos-rel","text-gray-500","width-30","height-30","round-corner-all","transition",3,"ngClass"]],template:function(t,e){1&t&&(h.Fc(0,at,36,12,"ng-container",0),h.Hc(1,"\n")),2&t&&h.kc("ngIf",0===e.tabId)},directives:function(){return[o.k,B.a,B.d,B.b,D.k,u.b,nt.a,o.j,o.i,f.a,G.a]},pipes:function(){return[r.c,ht]},styles:['[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.my-profile-img[_ngcontent-%COMP%]{transform:scale(.9)}.soft-phone-user[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.user-soft-phone-status[_ngcontent-%COMP%]:before{border-radius:100px!important;content:"";position:absolute;width:12px;height:12px;left:0;right:0;bottom:0;top:0;margin:auto}.user-soft-phone-status.online[_ngcontent-%COMP%]:before{background-color:#4ec060;-webkit-animation:blink-online-user-light 1s linear infinite;animation:blink-online-user-light 1s linear infinite}.user-soft-phone-status.offline[_ngcontent-%COMP%]:before{background-color:#c30}.online-user.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060;-webkit-animation:blink-online-user 1s linear infinite;animation:blink-online-user 1s linear infinite}@-webkit-keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@-webkit-keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}@keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}.highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.highlight[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid hsla(0,0%,86.3%,.5)}']}),e}(Q.a),ht=function(){function t(){}return t.prototype.transform=function(t,e){return t&&e?t.filter((function(t){return t.username!==e.email})):t},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=h.Mb({name:"myFilter",type:t,pure:!1}),t}(),ut=n("3Pt+"),bt=function(){function t(t){this.el=t,this.decimal=!1,this.decimalSeparator=".",this.min=-1/0,this.max=1/0,this.onValueChanged=new h.o,this.hasDecimalPoint=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.inputElement=t.nativeElement}return t.prototype.ngOnChanges=function(t){if(t.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),t.min){var e=Number(this.min);this.min=isNaN(e)?-1/0:e}if(t.max){var n=Number(this.max);this.max=isNaN(n)?1/0:n}this.onValueChanged.emit(this.inputElement.value)},t.prototype.onKeyDown=function(t){if(this.navigationKeys.indexOf(t.key)>-1||"a"===t.key&&!0===t.ctrlKey||"c"===t.key&&!0===t.ctrlKey||"v"===t.key&&!0===t.ctrlKey||"x"===t.key&&!0===t.ctrlKey||"a"===t.key&&!0===t.metaKey||"c"===t.key&&!0===t.metaKey||"v"===t.key&&!0===t.metaKey||"x"===t.key&&!0===t.metaKey||this.decimal&&t.key===this.decimalSeparator&&!this.hasDecimalPoint)"Backspace"===t.key&&(this.inputElement.value=this.inputElement.value.substring(0,this.inputElement.value.length));else{if((" "===t.key||isNaN(Number(t.key)))&&t.preventDefault(),this.regex){var e=this.forecastValue(t.key);this.regex.test(e)||t.preventDefault()}var n=Number(this.forecastValue(t.key));(n>this.max||n<this.min)&&t.preventDefault()}},t.prototype.onKeyUp=function(t){this.updateDecimalPoint(),this.onValueChanged.emit(this.inputElement.value)},t.prototype.onPaste=function(t){var e=t.clipboardData.getData("text/plain");this.pasteData(e),t.preventDefault()},t.prototype.onDrop=function(t){var e=t.dataTransfer.getData("text");this.inputElement.focus(),this.pasteData(e),t.preventDefault()},t.prototype.updateDecimalPoint=function(){this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator)>-1)},t.prototype.pasteData=function(t){var e=this.sanitizeInput(t);if(!document.execCommand("insertText",!1,e)){var n=this.inputElement;this.inputElement.setRangeText(e,n.selectionStart,n.selectionEnd,"end")}this.updateDecimalPoint()},t.prototype.sanitizeInput=function(t){var e="";if(this.decimal&&this.isValidDecimal(t)){var n=new RegExp("[^0-9"+this.decimalSeparator+"]","g");e=t.replace(n,"")}else e=t.replace(/[^0-9]/g,"");var i=this.inputElement.maxLength;if(i>0){var o=i-this.inputElement.value.length;e=o>0?e.substring(0,o):""}return e},t.prototype.isValidDecimal=function(t){if(this.hasDecimalPoint){var e=this.getSelection();return e&&e.indexOf(this.decimalSeparator)>-1?t.split(this.decimalSeparator).length<=2:t.indexOf(this.decimalSeparator)<0}return t.split(this.decimalSeparator).length<=2},t.prototype.getSelection=function(){return this.inputElement.value.substring(this.inputElement.selectionStart,this.inputElement.selectionEnd)},t.prototype.forecastValue=function(t){var e=this.inputElement.selectionStart,n=this.inputElement.value,i=n.substring(e,this.inputElement.selectionEnd);return i?n.replace(i,t):n.substring(0,e)+t+n.substring(e)},t.\u0275fac=function(e){return new(e||t)(h.Nb(h.l))},t.\u0275dir=h.Ib({type:t,selectors:[["","digitOnly",""]],hostBindings:function(t,e){1&t&&h.ac("keydown",(function(t){return e.onKeyDown(t)}))("keyup",(function(t){return e.onKeyUp(t)}))("paste",(function(t){return e.onPaste(t)}))("drop",(function(t){return e.onDrop(t)}))},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",min:"min",max:"max",pattern:"pattern"},outputs:{onValueChanged:"onValueChanged"},features:[h.zb]}),t}();function ft(t,e){if(1&t){var n=h.Ub();h.Tb(0,"mat-grid-tile",9),h.Hc(1,"\n          "),h.Tb(2,"button",10),h.ac("mousedown",(function(t){h.vc(n);var i=e.$implicit;return h.ec(2).keyPress(t,i)})),h.Hc(3),h.Sb(),h.Hc(4,"\n        "),h.Sb()}if(2&t){var i=e.$implicit;h.kc("colspan",1)("rowspan",1),h.Bb(3),h.Jc("\n            ",i.num,"\n          ")}}function pt(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",15),h.ac("click",(function(){return h.vc(n),h.ec(3).removeFromNumber()})),h.Hc(1,"\n        "),h.Tb(2,"mat-icon"),h.Hc(3,"backspace"),h.Sb(),h.Hc(4,"\n      "),h.Sb()}}function gt(t,e){if(1&t){var n=h.Ub();h.Tb(0,"div",11),h.Hc(1,"\n      "),h.Tb(2,"button",12),h.ac("click",(function(){return h.vc(n),h.ec(2).openButtonSheet()})),h.Hc(3,"\n        "),h.Tb(4,"mat-icon",13),h.Hc(5,"phone"),h.Sb(),h.Hc(6,"\n      "),h.Sb(),h.Hc(7,"\n\n      "),h.Fc(8,pt,5,0,"button",14),h.Hc(9,"\n    "),h.Sb()}if(2&t){var i=h.ec(2);h.Bb(8),h.kc("ngIf",i.numeric.length)}}function dt(t,e){if(1&t){var n=h.Ub();h.Hc(0,"\n      "),h.Tb(1,"div",16),h.Hc(2,"\n        "),h.Tb(3,"button",17),h.ac("click",(function(){return h.vc(n),h.ec(2).transferCall()})),h.Hc(4,"\n          "),h.Tb(5,"span",18),h.Hc(6),h.fc(7,"translate"),h.Sb(),h.Hc(8,"\n        "),h.Sb(),h.Hc(9,"\n\n        "),h.Tb(10,"button",19),h.ac("click",(function(){return h.vc(n),h.ec(2).dismissTransferCall()})),h.Hc(11,"\n          "),h.Tb(12,"span",18),h.Hc(13),h.fc(14,"translate"),h.Sb(),h.Hc(15,"\n        "),h.Sb(),h.Hc(16,"\n      "),h.Sb(),h.Hc(17,"\n    ")}if(2&t){var i=h.ec(2);h.Bb(3),h.kc("disabled",i.disableKeypad),h.Bb(3),h.Ic(h.gc(7,4,"soft_phone.transfer_call")),h.Bb(4),h.kc("disabled",i.disableKeypad),h.Bb(3),h.Ic(h.gc(14,6,"global.dismiss"))}}function mt(t,e){if(1&t){var n=h.Ub();h.Rb(0),h.Hc(1,"\n  "),h.Tb(2,"div",1),h.Hc(3,"\n    "),h.Tb(4,"div",2),h.Hc(5,"\n      "),h.Tb(6,"input",3),h.ac("onValueChanged",(function(t){return h.vc(n),h.ec().changeNumber(t)})),h.fc(7,"translate"),h.Sb(),h.Hc(8,"\n    "),h.Sb(),h.Hc(9,"\n\n    "),h.Tb(10,"div",4),h.Hc(11,"\n      "),h.Tb(12,"mat-grid-list",5),h.Hc(13,"\n        "),h.Fc(14,ft,5,3,"mat-grid-tile",6),h.Hc(15,"\n      "),h.Sb(),h.Hc(16,"\n    "),h.Sb(),h.Hc(17,"\n\n    "),h.Fc(18,gt,10,1,"div",7),h.Hc(19,"\n\n    "),h.Fc(20,dt,18,8,"ng-template",null,8,h.Gc),h.Hc(22,"\n  "),h.Sb(),h.Hc(23,"\n"),h.Qb()}if(2&t){var i=h.rc(21),o=h.ec();h.Bb(6),h.lc("placeholder",h.gc(7,6,"global.extension_placeholder")),h.kc("ngModel",o.numeric)("readOnly",""!==o.oldNumeric),h.Bb(8),h.kc("ngForOf",o.keys),h.Bb(4),h.kc("ngIf",!o.fromPopUp)("ngIfElse",i)}}var vt=function(){function t(t,e,n){var i=this;this.softPhoneService=t,this.translateService=e,this.messageService=n,this.triggerBottomSheet=new h.o,this.triggerCloseBottomSheet=new h.o,this.tabId=1,this.fromPopUp=!1,this.numeric="",this.oldNumeric="",this.disableKeypad=!1,this.callPopUpMinimizeStatus=!1,this.keys=[{num:"1"},{num:"2"},{num:"3"},{num:"4"},{num:"5"},{num:"6"},{num:"7"},{num:"8"},{num:"9"},{num:"*"},{num:"0"},{num:"#"}],this._subscription=new c.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return i.callPopUpMinimizeStatus=t})))}return t.prototype.keyPress=function(t,e){var n=this;this.numeric+=e.num;var i=this.softPhoneUsers.filter((function(t){return n.numeric.includes(t.extension_no)})).pop();this.softPhoneService.sipSendDTMF(e.num),i&&(this.oldNumeric=this.numeric,this.numeric=i.extension_name)},t.prototype.removeFromNumber=function(){""!==this.oldNumeric?(this.numeric=this.oldNumeric,this.oldNumeric=""):this.numeric=this.numeric.substring(0,this.numeric.length-1)},t.prototype.changeNumber=function(t){var e=this;this.numeric=t;var n=this.softPhoneUsers.filter((function(t){return e.numeric.includes(t.extension_no)})).pop();n&&(this.oldNumeric=this.numeric,this.numeric=n.extension_name)},t.prototype.openButtonSheet=function(){var t=this;if(this.callPopUpMinimizeStatus)this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call"));else if(this.numeric.length){var e=this.softPhoneUsers.filter((function(e){return t.oldNumeric.includes(e.extension_no)})).pop();this.triggerBottomSheet.emit({component:$,height:"100%",width:"100%",data:e||this.numeric})}},t.prototype.transferCall=function(){var t=this;this.disableKeypad=!0;var e=this.softPhoneUsers.filter((function(e){return t.oldNumeric.includes(e.extension_no)})).pop();this.softPhoneService.sipTransfer(e?e.extension_no:this.numeric),setTimeout((function(){return t.triggerCloseBottomSheet.emit()}),1e3)},t.prototype.dismissTransferCall=function(){this.triggerCloseBottomSheet.emit()},t.prototype.getTranslate=function(t){return this.translateService.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(h.Nb(s.a),h.Nb(r.d),h.Nb(X.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-keypad"]],inputs:{rtlDirection:"rtlDirection",tabId:"tabId",fromPopUp:"fromPopUp",softPhoneUsers:"softPhoneUsers"},outputs:{triggerBottomSheet:"triggerBottomSheet",triggerCloseBottomSheet:"triggerCloseBottomSheet"},decls:2,vars:1,consts:[[4,"ngIf"],[1,"full-height"],[1,"input-holder","padding-mini-t-b","text-center","pos-rel","height-50","line-height-50"],["digitOnly","","dir","ltr","type","tel",1,"no-padding","no-border","no-bg","font-full-plus-three-tenth-em","full-width","text-center",3,"ngModel","readOnly","placeholder","onValueChanged"],[1,"key-container"],["cols","3","dir","ltr","gutterSize","30","rowHeight","fit",1,"full-height"],[3,"colspan","rowspan",4,"ngFor","ngForOf"],["class","dialer text-center padding-mini-t-b pos-rel",4,"ngIf","ngIfElse"],["inPopUp",""],[3,"colspan","rowspan"],["mat-raised-button","",1,"key","cursor-pointer","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","line-height-50","text-center","round-corner-all",3,"mousedown"],[1,"dialer","text-center","padding-mini-t-b","pos-rel"],["mat-raised-button","",1,"key","cursor-pointer","no-padding","no-box-shadow","no-border","font-full-plus-three-tenth-em","width-45","height-45","line-height-45","text-center","round-corner-all",3,"click"],[1,"line-height-25","text-white"],["class","remove-number top-full-plus-half no-bg no-border no-padding cursor-pointer pos-abs",3,"click",4,"ngIf"],[1,"remove-number","top-full-plus-half","no-bg","no-border","no-padding","cursor-pointer","pos-abs",3,"click"],[1,"height-60","full-width","pos-abs","bottom-0","padding-full","display-flex","flex-direction-row-reverse","flex-space-around"],["mat-raised-button","","type","button",1,"green-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"],[1,"padding-mini-r-l"],["mat-raised-button","","type","button",1,"red-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"]],template:function(t,e){1&t&&(h.Fc(0,mt,24,8,"ng-container",0),h.Hc(1,"\n")),2&t&&h.kc("ngIf",1===e.tabId)},directives:[o.k,ut.c,bt,u.b,ut.n,ut.q,O.a,o.j,O.c,U.a,f.a],pipes:[r.c],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.key[_ngcontent-%COMP%]{background-color:#e1e1e1;min-width:inherit!important}.key-container[_ngcontent-%COMP%]{height:calc(100% - 120px);padding:1em 4em}.input-holder[_ngcontent-%COMP%]{padding:.5em 3em!important}.dialer[_ngcontent-%COMP%]{height:50px}.dialer[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{background-color:#4ec060}.remove-number[_ngcontent-%COMP%]{right:6.5em}"]}),t}(),St=n("K3ar"),wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ht=function(){return(Ht=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function yt(t,e){if(1&t&&(h.Tb(0,"mat-list-item",6),h.Hc(1,"\n        "),h.Tb(2,"mat-icon",7),h.Hc(3),h.Sb(),h.Hc(4,"\n\n        "),h.Tb(5,"h3",8),h.Hc(6),h.Sb(),h.Hc(7,"\n\n        "),h.Tb(8,"p",9),h.Hc(9),h.fc(10,"jalali"),h.Sb(),h.Hc(11,"\n\n        "),h.Tb(12,"div",10),h.Hc(13),h.fc(14,"translate"),h.Sb(),h.Hc(15,"\n      "),h.Sb()),2&t){var n=e.$implicit,i=h.ec(3);h.Bb(2),h.Db(n.color),h.Bb(1),h.Jc("\n          ",n.icon,"\n        "),h.Bb(3),h.Kc("\n          ",n.user?n.user.extension_name+" -":""," ",n.src,"\n        "),h.Bb(3),h.Ic(h.hc(10,7,n.date,i.rtlDirection)),h.Bb(4),h.Jc("\n          ",h.gc(14,10,n.desc),"\n        ")}}function xt(t,e){if(1&t&&(h.Tb(0,"mat-list",4),h.Hc(1,"\n      "),h.Fc(2,yt,16,12,"mat-list-item",5),h.Hc(3,"\n    "),h.Sb()),2&t){var n=h.ec(2);h.Bb(2),h.kc("ngForOf",n.cdrExtensionList)}}function kt(t,e){1&t&&(h.Hc(0),h.fc(1,"translate")),2&t&&h.Jc("\n      ",h.gc(1,1,"global.no_result"),"\n    ")}function _t(t,e){if(1&t&&(h.Rb(0),h.Hc(1,"\n  "),h.Tb(2,"div",1),h.Hc(3,"\n    "),h.Fc(4,xt,4,1,"mat-list",2),h.Hc(5,"\n\n    "),h.Fc(6,kt,2,3,"ng-template",null,3,h.Gc),h.Hc(8,"\n  "),h.Sb(),h.Hc(9,"\n"),h.Qb()),2&t){var n=h.rc(7),i=h.ec();h.Bb(2),h.kc("dir",i.rtlDirection?"rtl":"ltr"),h.Bb(2),h.kc("ngIf",i.cdrExtensionList.length)("ngIfElse",n)}}var Tt=function(t){function e(e,n,i,o,r,s,a){var l=t.call(this,n,i)||this;return l.api=e,l.injector=n,l.userInfoService=i,l.softPhoneService=o,l.refreshLoginService=r,l.companySelectorService=s,l.loadingIndicatorService=a,l.triggerBottomSheet=new h.o,l.tabId=2,l.loggedInUserExtension="",l.cdrList=[],l.callPopUpMinimizeStatus=!1,l.cdrExtensionList=[],l._subscription=new c.Subscription,l._subscription.add(l.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return l.callPopUpMinimizeStatus=t}))),l._subscription.add(l.softPhoneService.currentExtensionList.subscribe((function(t){t&&t.length&&setTimeout((function(){l.loggedInUserExtension=t.filter((function(t){return t.username===l.loggedInUser.email})).pop().extension_no}))}))),l}return wt(e,t),e.prototype.getCdr=function(){var t=this;this.cdrExtensionList=[],this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token;var e=this.companySelectorService.currentCompany;this._subscription.add(this.api.getCdr(this.loggedInUserExtension).subscribe((function(n){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),n.success&&n.data.length&&(t.cdrList=n.data,t.cdrList.map((function(n){var i=null,o=null,r=n.src.replace("-"+e.subdomain,"");if(t.loggedInUserExtension===n.dst){o=t.softPhoneUsers.filter((function(t){return t.extension_no===r})).pop();var c="",s="";switch(n.disposition){case"NO ANSWER":c="soft_phone.call_logs.missed_call",s="text-red-500";break;case"BUSY":c="soft_phone.call_logs.rejected",s="text-orange-600";break;case"ANSWERED":c="soft_phone.call_logs.answered",s="text-green-500"}i={src:r,dst:n.dst,icon:"NO ANSWER"===n.disposition?"phone_missed":"phone_callback",date:n.calldate,color:s,desc:c}}else if(t.loggedInUserExtension===r){switch(o=t.softPhoneUsers.filter((function(t){return t.extension_no===n.dst})).pop(),c="",s="",n.disposition){case"NO ANSWER":c="soft_phone.call_logs.not_answered",s="text-red-500";break;case"BUSY":c="soft_phone.call_logs.busy",s="text-orange-600";break;case"ANSWERED":c="soft_phone.call_logs.answered",s="text-green-500"}i={src:n.dst,dst:r,icon:"phone_forwarded",date:n.calldate,color:s,desc:c}}o?(i=Ht(Ht({},i),{user:o}),t.cdrExtensionList.push(i)):t.cdrExtensionList.push(i)})))}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.ngOnChanges=function(t){var e=this;t.tabId&&t.tabId.currentValue&&2===t.tabId.currentValue&&setTimeout((function(){return e.getCdr()}))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(h.Nb(y),h.Nb(h.t),h.Nb(p.a),h.Nb(s.a),h.Nb(d.a),h.Nb(H.a),h.Nb(m.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-soft-phone-logs"]],inputs:{rtlDirection:"rtlDirection",tabId:"tabId",softPhoneUsers:"softPhoneUsers"},outputs:{triggerBottomSheet:"triggerBottomSheet"},features:[h.yb,h.zb],decls:2,vars:1,consts:[[4,"ngIf"],[1,"full-height","flex-center",3,"dir"],["class","cdr-mat-list full-width full-height overflow-x-hide overflow-y-auto",4,"ngIf","ngIfElse"],["noItem",""],[1,"cdr-mat-list","full-width","full-height","overflow-x-hide","overflow-y-auto"],["class","highlight cursor-pointer height-45 padding-tiny-t-b padding-mini-r-l",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","height-45","padding-tiny-t-b","padding-mini-r-l"],["mat-list-icon",""],["matLine","",1,"font-7-rem","text-weight-bold","line-height-20"],["matLine","",1,"font-7-em","text-gray-600","line-height-15"],[1,"user-soft-phone-status","white-space-nowrap","pos-rel","text-gray-500","round-corner-all","transition","font-7-em"]],template:function(t,e){1&t&&(h.Fc(0,_t,10,3,"ng-container",0),h.Hc(1,"\n")),2&t&&h.kc("ngIf",2===e.tabId)},directives:[o.k,u.b,B.a,o.j,B.d,f.a,B.c,D.k],pipes:[St.a,r.c],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.highlight[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid hsla(0,0%,86.3%,.5)}"]}),e}(Q.a),Ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pt=function(){return(Pt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function It(t,e){1&t&&(h.Tb(0,"div",9),h.Hc(1,"\n          "),h.Tb(2,"mat-icon",10),h.Hc(3,"lock"),h.Sb(),h.Hc(4,"\n        "),h.Sb())}function Bt(t,e){if(1&t){var n=h.Ub();h.Tb(0,"mat-list-item",5),h.ac("click",(function(){h.vc(n);var t=e.$implicit;return h.ec(2).openSheet(t)})),h.Hc(1,"\n        "),h.Tb(2,"mat-icon",6),h.Hc(3,"group"),h.Sb(),h.Hc(4,"\n\n        "),h.Tb(5,"h3",7),h.Hc(6),h.Sb(),h.Hc(7,"\n\n        "),h.Fc(8,It,5,0,"div",8),h.Hc(9,"\n      "),h.Sb()}if(2&t){var i=e.$implicit;h.Bb(6),h.Jc(" ",i.extension_name," "),h.Bb(2),h.kc("ngIf",i.password.length)}}function Ut(t,e){if(1&t&&(h.Rb(0),h.Hc(1,"\n  "),h.Tb(2,"div",1),h.Hc(3,"\n    "),h.Tb(4,"div",2),h.Hc(5),h.fc(6,"translate"),h.Sb(),h.Hc(7,"\n\n    "),h.Tb(8,"mat-list",3),h.Hc(9,"\n      "),h.Fc(10,Bt,10,2,"mat-list-item",4),h.Hc(11,"\n    "),h.Sb(),h.Hc(12,"\n  "),h.Sb(),h.Hc(13,"\n"),h.Qb()),2&t){var n=h.ec();h.Bb(2),h.kc("dir",n.rtlDirection?"rtl":"ltr"),h.Bb(3),h.Ic(h.gc(6,3,"soft_phone.conferences.conference_list")),h.Bb(5),h.kc("ngForOf",n.conferenceList)}}var Ot=function(t){function e(e,n,i,o,r,s,a,l){var u=t.call(this,i,s)||this;return u.softPhoneService=e,u.translateService=n,u.injector=i,u.apiService=o,u.refreshLoginService=r,u.userInfoService=s,u.loadingIndicatorService=a,u.messageService=l,u.tabId=3,u.softPhoneUsers=[],u.triggerBottomSheet=new h.o,u.conferenceList=[],u.callPopUpMinimizeStatus=!1,u.softPhoneConnectedStatus=!1,u._subscription=new c.Subscription,u._subscription.add(u.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return u.callPopUpMinimizeStatus=t}))),u}return Ct(e,t),e.prototype.ngOnInit=function(){var t=this;this._subscription.add(this.softPhoneService.currentSoftphoneConnected.subscribe((function(e){return t.softPhoneConnectedStatus=e})))},e.prototype.getConferenceList=function(){var t=this;this.conferenceList=[],this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.getConferenceList().subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),e.success&&e.data.map((function(e){var n=Pt({username:"0",is_online:0,extension_name:e.conf_name,caller_id_number:e.conf_number,extension_no:e.conf_number,extension_type:"2"},e);t.conferenceList.push(n)}))}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.openSheet=function(t){if(this.softPhoneConnectedStatus){if(this.callPopUpMinimizeStatus)return void this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call"));this.triggerBottomSheet.emit({component:et,height:"200px",width:"98%",data:Pt(Pt({},t),{type:"conference"})})}},e.prototype.getTranslate=function(t){return this.translateService.instant(t)},e.prototype.ngOnChanges=function(t){t.tabId&&t.tabId.currentValue&&3===t.tabId.currentValue&&this.getConferenceList()},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(h.Nb(s.a),h.Nb(r.d),h.Nb(h.t),h.Nb(y),h.Nb(d.a),h.Nb(p.a),h.Nb(m.a),h.Nb(X.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-soft-phone-conference"]],inputs:{rtlDirection:"rtlDirection",tabId:"tabId",softPhoneUsers:"softPhoneUsers"},outputs:{triggerBottomSheet:"triggerBottomSheet"},features:[h.yb,h.zb],decls:2,vars:1,consts:[[4,"ngIf"],[1,"full-width","full-height",3,"dir"],["mat-subheader","",1,"pos-rel"],[1,"full-width"],["class","highlight cursor-pointer padding-r-l height-50 margin-b-half",3,"click",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","padding-r-l","height-50","margin-b-half",3,"click"],["mat-list-icon",""],["matLine","",1,"font-7-rem","text-weight-bold"],["class","pos-rel text-gray-500 height-30 line-height-35 round-corner-all text-center",4,"ngIf"],[1,"pos-rel","text-gray-500","height-30","line-height-35","round-corner-all","text-center"],[1,"font-full-plus-two-tenth-em"]],template:function(t,e){1&t&&(h.Fc(0,Ut,14,5,"ng-container",0),h.Hc(1,"\n")),2&t&&h.kc("ngIf",3===e.tabId)},directives:[o.k,u.b,B.f,B.a,o.j,B.d,f.a,B.c,D.k],pipes:[r.c],styles:[".highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]}),e}(Q.a),Dt=n("+ixM"),Mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Nt(t,e){if(1&t){var n=h.Ub();h.Rb(0),h.Hc(1,"\n  "),h.Tb(2,"div",1),h.Hc(3,"\n    "),h.Tb(4,"button",2),h.ac("click",(function(){return h.vc(n),h.ec().openSoftphoneExtension()})),h.Hc(5,"\n      "),h.Tb(6,"span",3),h.Hc(7),h.fc(8,"translate"),h.Sb(),h.Hc(9,"\n    "),h.Sb(),h.Hc(10,"\n  "),h.Sb(),h.Hc(11,"\n"),h.Qb()}2&t&&(h.Bb(7),h.Ic(h.gc(8,1,"soft_phone.settings.extension_settings")))}var Lt=function(t){function e(e,n,i,o,r){var c=t.call(this,e,n)||this;return c.injector=e,c.userInfoService=n,c.addressService=i,c.windowManagerService=o,c.companySelectorService=r,c.tabId=4,c.triggerBottomSheet=new h.o,c}return Mt(e,t),e.prototype.openSoftphoneExtension=function(){var t=this,e=w.a.PBX_LOGIN_EXTENSION+"/login.php?action=loginbytoken&comp_id="+this.companySelectorService.currentCompany.id+"&token="+this.loginData.access_token,n=this.windowManagerService.serviceList.filter((function(t){return"web_browser"===t.service_name})).pop();this.windowManagerService.openWindowState(n).then((function(){setTimeout((function(){t.windowManagerService.activeWindow(n),t.addressService.changeAddress({url:e,title:"",disabled:!0})}),500)}))},e.\u0275fac=function(t){return new(t||e)(h.Nb(h.t),h.Nb(p.a),h.Nb(Dt.a),h.Nb(a.a),h.Nb(H.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-soft-phone-settings"]],inputs:{rtlDirection:"rtlDirection",tabId:"tabId"},outputs:{triggerBottomSheet:"triggerBottomSheet"},features:[h.yb],decls:2,vars:1,consts:[[4,"ngIf"],[1,"full-height","padding-full"],["mat-raised-button","","type","submit",1,"green-gradient","full-width","text-white","font-8-rem","margin-auto","width-90","height-35","padding-mini-r-l",3,"click"],[1,"padding-mini-r-l"]],template:function(t,e){1&t&&(h.Fc(0,Nt,12,3,"ng-container",0),h.Hc(1,"\n")),2&t&&h.kc("ngIf",e.tabId&&4===e.tabId)},directives:[o.k,U.a],pipes:[r.c],styles:[""]}),e}(Q.a),zt=n("wZkO"),Ft=["bottomSheet"],Et=["audioRemote"],jt=["ringtone"],Rt=["ringbacktone"],At=["dtmfTone"];function Jt(t,e){if(1&t){var n=h.Ub();h.Tb(0,"a",17),h.ac("click",(function(){return h.vc(n),h.ec().maximizeCallPopUp()})),h.Hc(1),h.fc(2,"translate"),h.Sb()}2&t&&(h.Bb(1),h.Jc("\n    ",h.gc(2,1,"soft_phone.main.back_to_call"),"\n  "))}function Kt(t,e){if(1&t&&(h.Hc(0,"\n          "),h.Tb(1,"mat-icon",20),h.Hc(2),h.Sb(),h.Hc(3,"\n          "),h.Tb(4,"span",21),h.Hc(5),h.Sb(),h.Hc(6,"\n        ")),2&t){var n=h.ec().$implicit;h.Bb(2),h.Jc("\n            ",n.icon,"\n          "),h.Bb(3),h.Ic(n.name)}}function Vt(t,e){1&t&&(h.Tb(0,"mat-tab",18),h.Hc(1,"\n        "),h.Fc(2,Kt,7,2,"ng-template",19),h.Hc(3,"\n      "),h.Sb())}function qt(t,e){1&t&&(h.Tb(0,"div",22),h.Hc(1,"\n    "),h.Tb(2,"div",23),h.Hc(3,"\n      "),h.dc(),h.Tb(4,"svg",24),h.Hc(5,"\n        "),h.Tb(6,"rect",25),h.Hc(7,"\n          "),h.Ob(8,"animate",26),h.Hc(9,"\n          "),h.Ob(10,"animate",27),h.Hc(11,"\n        "),h.Sb(),h.Hc(12,"\n        "),h.Tb(13,"rect",28),h.Hc(14,"\n          "),h.Ob(15,"animate",29),h.Hc(16,"\n          "),h.Ob(17,"animate",30),h.Hc(18,"\n        "),h.Sb(),h.Hc(19,"\n        "),h.Tb(20,"rect",31),h.Hc(21,"\n          "),h.Ob(22,"animate",32),h.Hc(23,"\n          "),h.Ob(24,"animate",33),h.Hc(25,"\n        "),h.Sb(),h.Hc(26,"\n      "),h.Sb(),h.Hc(27,"\n\n      "),h.cc(),h.Tb(28,"span",34),h.Hc(29),h.fc(30,"translate"),h.Sb(),h.Hc(31,"\n    "),h.Sb(),h.Hc(32,"\n  "),h.Sb()),2&t&&(h.Bb(29),h.Ic(h.gc(30,1,"global.loading")))}var Wt=function(t){return{"z-index-1":t}},$t=function(){function t(t,e,n,i,o,r,s){var a=this;this.translate=t,this.userInfoService=e,this.softPhoneService=n,this.viewDirection=i,this.notificationService=o,this.refreshLoginService=r,this.loadingIndicatorService=s,this.loadingIndicator=null,this.activeTab=0,this.tabs=[],this.callPopUpMinimizeStatus=!1,this.softPhoneUsers=[],this._subscription=new c.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){a.rtlDirection=t,a.changeMainTabLanguage()}))),this._subscription.add(this.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return a.loadingIndicator=t}))),this._subscription.add(this.softPhoneService.currentSoftPhoneUsers.subscribe((function(t){return a.softPhoneUsers=t}))),this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return a.callPopUpMinimizeStatus=t}))),this._subscription.add(this.softPhoneService.currentActiveTab.subscribe((function(t){return a.activeTab=t}))),this._subscription.add(this.softPhoneService.currentOnCallUser.subscribe((function(t){t?a.openButtonSheet({component:$,height:"100%",width:"100%",data:t}):a.bottomSheet&&a.bottomSheet.close()})))}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){this.softPhoneService.changeAudioRemoteTag({audioRemote:this.audioRemote,ringtone:this.ringtone,ringbacktone:this.ringbacktone,dtmfTone:this.dtmfTone}),this.changeMainTabLanguage()},t.prototype.changeMainTabLanguage=function(){var t=this;setTimeout((function(){t.tabs=[{name:t.getTranslate("soft_phone.main.status"),icon:"home"},{name:t.getTranslate("soft_phone.main.dial_pad"),icon:"dialpad"},{name:t.getTranslate("soft_phone.main.call_logs"),icon:"settings_phone"},{name:t.getTranslate("soft_phone.main.public_room"),icon:"group"},{name:t.getTranslate("global.settings"),icon:"settings"}]}),200)},t.prototype.tabChange=function(t){this.activeTab=t.index},t.prototype.openButtonSheet=function(t){try{t.bottomSheetRef=this.bottomSheet,this.bottomSheet.toggleBottomSheet(t)}catch(e){console.log(e)}},t.prototype.call=function(t){this.openButtonSheet(t)},t.prototype.maximizeCallPopUp=function(){this.softPhoneService.changeMinimizeCallPopUp(!1)},t.prototype.getTranslate=function(t){return this.translate.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe(),this.softPhoneService.sipHangUp(),this.softPhoneService.sipUnRegister()},t.\u0275fac=function(e){return new(e||t)(h.Nb(r.d),h.Nb(p.a),h.Nb(s.a),h.Nb(l.a),h.Nb(g.a),h.Nb(d.a),h.Nb(m.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-main"]],viewQuery:function(t,e){if(1&t&&(h.Mc(Ft,!0),h.Mc(Et,!0),h.Mc(jt,!0),h.Mc(Rt,!0),h.Mc(At,!0)),2&t){var n=void 0;h.qc(n=h.bc())&&(e.bottomSheet=n.first),h.qc(n=h.bc())&&(e.audioRemote=n.first),h.qc(n=h.bc())&&(e.ringtone=n.first),h.qc(n=h.bc())&&(e.ringbacktone=n.first),h.qc(n=h.bc())&&(e.dtmfTone=n.first)}},decls:54,vars:37,consts:[[1,"soft-phone-wrapper","full-height","bg-white","display-flex","overflow-hide",3,"dir"],["class","display-block full-width height-35 line-height-35 font-8-em back-to-call text-white cursor-pointer text-center pos-rel z-index-99",3,"click",4,"ngIf"],[1,"soft-phone-container","full-width","pos-rel",3,"ngClass"],[3,"ngClass","tabId","rtlDirection","triggerBottomSheet"],[3,"ngClass","tabId","rtlDirection","softPhoneUsers","triggerBottomSheet"],[1,"soft-phone-toolbar","clear-both","full-width","height-45","z-index-1"],["color","primary",1,"full-height","soft-phone-tab",3,"selectedIndex","selectedTabChange","selectedIndexChange"],["class","full-height",4,"ngFor","ngForOf"],["bottomSheet",""],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["autoplay","autoplay"],["audioRemote",""],["loop","",3,"src"],["ringtone",""],["ringbacktone",""],[3,"src"],["dtmfTone",""],[1,"display-block","full-width","height-35","line-height-35","font-8-em","back-to-call","text-white","cursor-pointer","text-center","pos-rel","z-index-99",3,"click"],[1,"full-height"],["class","full-height","mat-tab-label",""],["mat-list-icon","",1,"clear-both","text-gray-a300","height-20","width-20","font-full-plus-half-em"],[1,"font-half-em","clear-both","text-weight-bold"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","version","1.1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(h.Tb(0,"div",0),h.Hc(1,"\n  "),h.Fc(2,Jt,3,3,"a",1),h.Hc(3,"\n  "),h.Tb(4,"div",2),h.Hc(5,"\n    "),h.Hc(6,"\n    "),h.Tb(7,"app-soft-phone-information",3),h.ac("triggerBottomSheet",(function(t){return e.openButtonSheet(t)})),h.Sb(),h.Hc(8,"\n    "),h.Hc(9,"\n\n    "),h.Hc(10,"\n\n    "),h.Hc(11,"\n    "),h.Tb(12,"app-soft-phone-keypad",4),h.ac("triggerBottomSheet",(function(t){return e.openButtonSheet(t)})),h.Sb(),h.Hc(13,"\n    "),h.Hc(14,"\n\n    "),h.Hc(15,"\n    "),h.Tb(16,"app-soft-phone-logs",4),h.ac("triggerBottomSheet",(function(t){return e.openButtonSheet(t)})),h.Sb(),h.Hc(17,"\n    "),h.Hc(18,"\n\n    "),h.Hc(19,"\n    "),h.Tb(20,"app-soft-phone-conference",4),h.ac("triggerBottomSheet",(function(t){return e.openButtonSheet(t)})),h.Sb(),h.Hc(21,"\n    "),h.Hc(22,"\n\n    "),h.Hc(23,"\n    "),h.Tb(24,"app-soft-phone-settings",3),h.ac("triggerBottomSheet",(function(t){return e.openButtonSheet(t)})),h.Sb(),h.Hc(25,"\n    "),h.Hc(26,"\n  "),h.Sb(),h.Hc(27,"\n\n  "),h.Tb(28,"div",5),h.Hc(29,"\n    "),h.Tb(30,"mat-tab-group",6),h.ac("selectedTabChange",(function(t){return e.tabChange(t)}))("selectedIndexChange",(function(t){return e.activeTab=t})),h.Hc(31,"\n      "),h.Fc(32,Vt,4,0,"mat-tab",7),h.Hc(33,"\n    "),h.Sb(),h.Hc(34,"\n  "),h.Sb(),h.Hc(35,"\n\n  "),h.Ob(36,"app-soft-phone-bottom-sheet",null,8),h.Hc(38,"\n\n  "),h.Fc(39,qt,33,3,"div",9),h.Hc(40,"\n"),h.Sb(),h.Hc(41,"\n\n"),h.Ob(42,"audio",10,11),h.Hc(44,"\n"),h.Ob(45,"audio",12,13),h.Hc(47,"\n"),h.Ob(48,"audio",12,14),h.Hc(50,"\n"),h.Ob(51,"audio",15,16),h.Hc(53,"\n")),2&t&&(h.kc("dir",e.rtlDirection?"rtl":"ltr"),h.Bb(2),h.kc("ngIf",e.callPopUpMinimizeStatus),h.Bb(2),h.kc("ngClass",e.callPopUpMinimizeStatus?"height-full-minus-80":"height-full-minus-45"),h.Bb(3),h.kc("ngClass",h.nc(27,Wt,0===e.activeTab))("tabId",e.activeTab)("rtlDirection",e.rtlDirection),h.Bb(5),h.kc("ngClass",h.nc(29,Wt,1===e.activeTab))("tabId",e.activeTab)("rtlDirection",e.rtlDirection)("softPhoneUsers",e.softPhoneUsers),h.Bb(4),h.kc("ngClass",h.nc(31,Wt,2===e.activeTab))("tabId",e.activeTab)("rtlDirection",e.rtlDirection)("softPhoneUsers",e.softPhoneUsers),h.Bb(4),h.kc("ngClass",h.nc(33,Wt,3===e.activeTab))("tabId",e.activeTab)("rtlDirection",e.rtlDirection)("softPhoneUsers",e.softPhoneUsers),h.Bb(4),h.kc("ngClass",h.nc(35,Wt,4===e.activeTab))("tabId",e.activeTab)("rtlDirection",e.rtlDirection),h.Bb(6),h.kc("selectedIndex",e.activeTab),h.Bb(2),h.kc("ngForOf",e.tabs),h.Bb(7),h.kc("ngIf",e.loadingIndicator&&e.loadingIndicator.status&&"pbx"===e.loadingIndicator.serviceName),h.Bb(6),h.kc("src","assets/sounds/ringtone.wav",h.xc),h.Bb(3),h.kc("src","assets/sounds/ringbacktone.wav",h.xc),h.Bb(3),h.kc("src","assets/sounds/dtmf.wav",h.xc))},directives:[u.b,o.k,o.i,lt,vt,Tt,Ot,Lt,zt.b,o.j,_,zt.a,zt.c,f.a,B.c],pipes:[r.c],styles:[".soft-phone-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:stretch}.soft-phone-wrapper[_ngcontent-%COMP%]   .soft-phone-toolbar[_ngcontent-%COMP%]{border-top:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.soft-phone-wrapper[_ngcontent-%COMP%]   .mat-list-avatar[_ngcontent-%COMP%]{border:1px solid #bbb}.back-to-call[_ngcontent-%COMP%]{-webkit-animation:glowing 1s infinite;animation:glowing 1s infinite}@-webkit-keyframes glowing{0%{background-color:#46b241;-webkit-box-shadow:0 0 3px #46b241}50%{background-color:#418252;-webkit-box-shadow:0 0 10px #418252}to{background-color:#46b241;-webkit-box-shadow:0 0 3px #46b241}}@keyframes glowing{0%{background-color:#46b241;box-shadow:0 0 3px #46b241}50%{background-color:#418252;box-shadow:0 0 10px #418252}to{background-color:#46b241;box-shadow:0 0 3px #46b241}}"]}),t}();function Xt(t,e){if(1&t&&(h.Hc(0,"\n      "),h.Tb(1,"h3",10),h.Hc(2,"\n        "),h.Tb(3,"mat-icon",11),h.Hc(4),h.Sb(),h.Hc(5),h.Sb(),h.Hc(6,"\n    ")),2&t){var n=h.ec();h.Bb(3),h.kc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half"),h.Bb(1),h.Ic(n.data.icon),h.Bb(1),h.Jc("\n        ",n.rtlDirection?n.data.name_fa:n.data.name,"\n      ")}}function Qt(t,e){if(1&t&&(h.Hc(0,"\n      "),h.Tb(1,"h3",12),h.Hc(2,"\n        "),h.Tb(3,"mat-icon",11),h.Hc(4),h.Sb(),h.Hc(5),h.Sb(),h.Hc(6,"\n    ")),2&t){var n=h.ec();h.Bb(3),h.kc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half"),h.Bb(1),h.Ic(n.data.icon),h.Bb(1),h.Jc("\n        ",n.rtlDirection?n.data.name_fa:n.data.name,"\n      ")}}function Gt(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",13),h.ac("click",(function(t){return h.vc(n),h.ec().minimize(),t.stopPropagation()})),h.Hc(1,"\n        "),h.Tb(2,"mat-icon",8),h.Hc(3,"\n          minimize\n        "),h.Sb(),h.Hc(4,"\n      "),h.Sb()}}function Yt(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",7),h.ac("click",(function(t){return h.vc(n),h.ec().restore(),t.stopPropagation()})),h.Hc(1,"\n        "),h.Tb(2,"mat-icon",8),h.Hc(3,"\n          filter_none\n        "),h.Sb(),h.Hc(4,"\n      "),h.Sb()}}function Zt(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",7),h.ac("click",(function(t){return h.vc(n),h.ec().maximize(),t.stopPropagation()})),h.Hc(1,"\n        "),h.Tb(2,"mat-icon",8),h.Hc(3,"\n          crop_square\n        "),h.Sb(),h.Hc(4,"\n      "),h.Sb()}}var te=function(){function t(t,e,n){var i=this;this.windowManagerService=t,this.softPhoneService=e,this.viewDirection=n,this._subscription=new c.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return i.rtlDirection=t})))}return t.prototype.ngOnInit=function(){var t=this;this._subscription.add(this.windowManagerService.windowsList.subscribe((function(e){t.windowInstance=e.filter((function(e){return e.windowService.service_name===t.data.service_name})).pop()})))},t.prototype.activeWindow=function(){this.windowManagerService.activeWindow(this.data)},t.prototype.minimize=function(){this.windowManagerService.minimizeWindow(this.data)},t.prototype.maximize=function(){this.windowManagerService.maximizeWindow(this.data)},t.prototype.restore=function(){this.windowManagerService.restoreWindow(this.data)},t.prototype.close=function(){this.softPhoneService.sipHangUp(),this.softPhoneService.sipUnRegister(),this.windowManagerService.closeWindow(this.data)},t.prototype.centerWindow=function(){this.windowManagerService.centerWindow()},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(h.Nb(a.a),h.Nb(s.a),h.Nb(l.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-window"]],decls:32,vars:7,consts:[[1,"pos-abs","left-0","right-0","bottom-0","top-0","full-width",3,"dir","click"],["cdkDrag","","cdkDragBoundary",".dashboard-app-boundary","cdkDragRootElement",".cdk-overlay-pane",1,"window-heading","full-width","height-45","padding-mini-r-l","display-flex","align-items-center",3,"dblclick"],[3,"ngIfElse","ngIf"],["notDraggableHeading",""],[1,"window-actions","display-flex",3,"ngClass"],["class","width-30 height-30 text-center line-height-25 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],["class","width-30 height-30 text-center line-height-35 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],[1,"width-30","height-30","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"],[1,"text-dark-mode-color","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],[1,"window-content","pos-rel"],["cdkDragHandle","",1,"window-title","full-width","full-height","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex","align-items-center","no-margin"],[1,"text-dark-mode-color","pos-rel",3,"ngClass"],[1,"window-title","full-width","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex"],[1,"width-30","height-30","text-center","line-height-25","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"]],template:function(t,e){if(1&t&&(h.Tb(0,"div",0),h.ac("click",(function(){return e.activeWindow()})),h.Hc(1,"\n  "),h.Tb(2,"div",1),h.ac("dblclick",(function(){return e.windowInstance.isMaximized&&!e.windowInstance.isMaximized?e.maximize():e.windowInstance.isMaximized?e.restore():null})),h.Hc(3,"\n    "),h.Fc(4,Xt,7,3,"ng-template",2),h.Hc(5,"\n\n    "),h.Fc(6,Qt,7,3,"ng-template",null,3,h.Gc),h.Hc(8,"\n\n    "),h.Tb(9,"div",4),h.Hc(10,"\n      "),h.Hc(11,"\n      "),h.Fc(12,Gt,5,0,"button",5),h.Hc(13,"\n      "),h.Fc(14,Yt,5,0,"button",6),h.Hc(15,"\n      "),h.Fc(16,Zt,5,0,"button",6),h.Hc(17,"\n      "),h.Tb(18,"button",7),h.ac("click",(function(t){return e.close(),t.stopPropagation()})),h.Hc(19,"\n        "),h.Tb(20,"mat-icon",8),h.Hc(21,"close\n        "),h.Sb(),h.Hc(22,"\n      "),h.Sb(),h.Hc(23,"\n    "),h.Sb(),h.Hc(24,"\n  "),h.Sb(),h.Hc(25,"\n  "),h.Tb(26,"div",9),h.Hc(27,"\n    "),h.Ob(28,"app-soft-phone-main"),h.Hc(29,"\n  "),h.Sb(),h.Hc(30,"\n"),h.Sb(),h.Hc(31,"\n")),2&t){var n=h.rc(7);h.kc("dir",e.rtlDirection?"rtl":"ltr"),h.Bb(4),h.kc("ngIfElse",n)("ngIf",e.windowInstance.isDraggable),h.Bb(5),h.kc("ngClass",e.rtlDirection?" margin-r-auto":" margin-l-auto"),h.Bb(3),h.kc("ngIf",!e.windowInstance.isMinimized),h.Bb(2),h.kc("ngIf",e.windowInstance.isMaximized||e.windowInstance.isMinimized),h.Bb(2),h.kc("ngIf",e.windowInstance.maximizable&&!e.windowInstance.isMaximized&&!e.windowInstance.isMinimized)}},directives:[u.b,b.a,o.k,o.i,f.a,$t,b.b],encapsulation:2}),t}(),ee=n("kmnG"),ne=n("qFsG");function ie(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",20),h.ac("click",(function(){return h.vc(n),h.ec(2).form.get("name").setValue("")})),h.Hc(1,"\n              "),h.Tb(2,"mat-icon"),h.Hc(3,"close"),h.Sb(),h.Hc(4,"\n            "),h.Sb()}}function oe(t,e){1&t&&(h.Tb(0,"mat-error"),h.Hc(1),h.fc(2,"translate"),h.Sb()),2&t&&(h.Bb(1),h.Jc("\n              ",h.gc(2,1,"global.name_error"),"\n            "))}function re(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",20),h.ac("click",(function(){return h.vc(n),h.ec(2).form.get("family").setValue("")})),h.Hc(1,"\n              "),h.Tb(2,"mat-icon"),h.Hc(3,"close"),h.Sb(),h.Hc(4,"\n            "),h.Sb()}}function ce(t,e){1&t&&(h.Tb(0,"mat-error"),h.Hc(1),h.fc(2,"translate"),h.Sb()),2&t&&(h.Bb(1),h.Jc("\n              ",h.gc(2,1,"global.family_error"),"\n            "))}function se(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",20),h.ac("click",(function(){return h.vc(n),h.ec(2).form.get("extension").setValue("")})),h.Hc(1,"\n              "),h.Tb(2,"mat-icon"),h.Hc(3,"close"),h.Sb(),h.Hc(4,"\n            "),h.Sb()}}function ae(t,e){1&t&&(h.Tb(0,"mat-error"),h.Hc(1),h.fc(2,"translate"),h.Sb()),2&t&&(h.Bb(1),h.Jc("\n              ",h.gc(2,1,"global.extension_error"),"\n            "))}function le(t,e){1&t&&(h.Tb(0,"button",21),h.Hc(1,"\n          "),h.Tb(2,"mat-icon",17),h.Hc(3,"delete"),h.Sb(),h.Hc(4,"\n        "),h.Sb())}function he(t,e){if(1&t&&(h.Tb(0,"div",4),h.Hc(1,"\n    "),h.Tb(2,"form",5),h.Hc(3,"\n      "),h.Tb(4,"h1",6),h.Hc(5),h.fc(6,"translate"),h.Sb(),h.Hc(7,"\n\n      "),h.Tb(8,"div",7),h.Hc(9,"\n        "),h.Tb(10,"div",8),h.Hc(11,"\n          "),h.Tb(12,"mat-form-field",9),h.Hc(13,"\n            "),h.Tb(14,"mat-label"),h.Hc(15),h.fc(16,"translate"),h.Sb(),h.Hc(17,"\n\n            "),h.Ob(18,"input",10),h.Hc(19,"\n\n            "),h.Fc(20,ie,5,0,"button",11),h.Hc(21,"\n\n            "),h.Fc(22,oe,3,3,"mat-error",12),h.Hc(23,"\n          "),h.Sb(),h.Hc(24,"\n        "),h.Sb(),h.Hc(25,"\n\n        "),h.Tb(26,"div",8),h.Hc(27,"\n          "),h.Tb(28,"mat-form-field",9),h.Hc(29,"\n            "),h.Tb(30,"mat-label"),h.Hc(31),h.fc(32,"translate"),h.Sb(),h.Hc(33,"\n\n            "),h.Ob(34,"input",13),h.Hc(35,"\n\n            "),h.Fc(36,re,5,0,"button",11),h.Hc(37,"\n\n            "),h.Fc(38,ce,3,3,"mat-error",12),h.Hc(39,"\n          "),h.Sb(),h.Hc(40,"\n        "),h.Sb(),h.Hc(41,"\n\n        "),h.Tb(42,"div",8),h.Hc(43,"\n          "),h.Tb(44,"mat-form-field",9),h.Hc(45,"\n            "),h.Tb(46,"mat-label"),h.Hc(47),h.fc(48,"translate"),h.Sb(),h.Hc(49,"\n\n            "),h.Ob(50,"input",14),h.Hc(51,"\n\n            "),h.Fc(52,se,5,0,"button",11),h.Hc(53,"\n\n            "),h.Fc(54,ae,3,3,"mat-error",12),h.Hc(55,"\n          "),h.Sb(),h.Hc(56,"\n        "),h.Sb(),h.Hc(57,"\n      "),h.Sb(),h.Hc(58,"\n\n      "),h.Tb(59,"div",15),h.Hc(60,"\n        "),h.Tb(61,"button",16),h.Hc(62,"\n          "),h.Tb(63,"mat-icon",17),h.Hc(64,"check"),h.Sb(),h.Hc(65,"\n          "),h.Tb(66,"span",18),h.Hc(67),h.fc(68,"translate"),h.Sb(),h.Hc(69,"\n        "),h.Sb(),h.Hc(70,"\n\n        "),h.Fc(71,le,5,0,"button",19),h.Hc(72,"\n      "),h.Sb(),h.Hc(73,"\n    "),h.Sb(),h.Hc(74,"\n  "),h.Sb()),2&t){var n=h.ec();h.Bb(2),h.kc("formGroup",n.form),h.Bb(3),h.Jc("\n        ",h.gc(6,15,"soft_phone.soft_phone_contacts.add_new_contact"),"\n      "),h.Bb(10),h.Ic(h.gc(16,17,"global.name")),h.Bb(5),h.kc("ngIf",n.form.get("name").touched&&n.form.get("name").value.length),h.Bb(2),h.kc("ngIf",!n.form.get("name").valid&&n.form.get("name").touched),h.Bb(9),h.Ic(h.gc(32,19,"global.family")),h.Bb(5),h.kc("ngIf",n.form.get("family").touched&&n.form.get("family").value.length),h.Bb(2),h.kc("ngIf",!n.form.get("family").valid&&n.form.get("family").touched),h.Bb(9),h.Ic(h.gc(48,21,"global.extension")),h.Bb(5),h.kc("ngIf",n.form.get("extension").touched&&n.form.get("extension").value.length),h.Bb(2),h.kc("ngIf",!n.form.get("extension").valid&&n.form.get("extension").touched),h.Bb(7),h.kc("disabled",!n.form.valid&&n.form.touched)("ngClass",n.data&&"edit"===n.data.action&&n.rtlDirection?"margin-l-full":n.data&&"edit"===n.data.action?"margin-r-full":""),h.Bb(6),h.Ic(h.gc(68,23,"global.submit")),h.Bb(4),h.kc("ngIf",n.data&&"edit"===n.data.action)}}var ue=function(){function t(t,e){var n=this;this.viewDirection=t,this.fb=e,this._subscription=new c.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return n.rtlDirection=t})))}return t.prototype.ngOnInit=function(){var t=this;this.data=this.bottomSheetData.data,this.data?this.createForm().then((function(){t.form.patchValue({name:t.data.name,family:t.data.family,extension_no:t.data.extension_no})})):this.createForm()},t.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({name:new ut.e("",ut.u.required),family:new ut.e("",ut.u.required),extension_no:new ut.e(0,ut.u.required)}),e()}))},t.prototype.closeBottomSheet=function(){this.bottomSheetData.bottomSheetRef.close()},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(h.Nb(l.a),h.Nb(ut.d))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-contact-detail"]],decls:11,vars:2,consts:[[1,"full-width","full-height","padding-r-l","padding-b-full"],[1,"width-30","height-30","pos-abs","top-0","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"ngClass","click"],[1,"text-dark-mode-color","line-height-35","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],["class","height-full-minus-35 float-right full-width",4,"ngIf"],[1,"height-full-minus-35","float-right","full-width"],[1,"full-height",3,"formGroup"],[1,"margin-b-full","text-gray-800","full-width","font-full-em","text-weight-500","margin-b-half"],[1,"row"],[1,"col-md-12","margin-b-half","float-right"],[1,"full-width","font-9-em"],["formControlName","name","matInput","","tabindex","1"],["aria-label","Clear","class","close-icon pos-rel top-half float-left","mat-button","","mat-icon-button","","matSuffix","","type","button",3,"click",4,"ngIf"],[4,"ngIf"],["formControlName","family","matInput","","tabindex","2"],["formControlName","extension","matInput","","tabindex","3"],[1,"display-flex"],["mat-raised-button","","tabindex","4","type","submit",1,"green-gradient","full-width","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","ngClass"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["class","red-gradient width-30 height-30 text-white line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","","tabindex","5",4,"ngIf"],["aria-label","Clear","mat-button","","mat-icon-button","","matSuffix","","type","button",1,"close-icon","pos-rel","top-half","float-left",3,"click"],["mat-raised-button","","tabindex","5",1,"red-gradient","width-30","height-30","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal"]],template:function(t,e){1&t&&(h.Tb(0,"div",0),h.Hc(1,"\n  "),h.Tb(2,"button",1),h.ac("click",(function(){return e.closeBottomSheet()})),h.Hc(3,"\n    "),h.Tb(4,"mat-icon",2),h.Hc(5,"\n      close\n    "),h.Sb(),h.Hc(6,"\n  "),h.Sb(),h.Hc(7,"\n\n  "),h.Fc(8,he,75,25,"div",3),h.Hc(9,"\n"),h.Sb(),h.Hc(10,"\n")),2&t&&(h.Bb(2),h.kc("ngClass",e.rtlDirection?"left-0":"right-0"),h.Bb(6),h.kc("ngIf",e.form))},directives:[o.i,f.a,o.k,ut.v,ut.o,ut.i,ee.c,ee.f,ut.c,ne.b,ut.n,ut.g,U.a,ee.h,ee.b],pipes:[r.c],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}"]}),t}(),be=function(){return(be=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},fe=["bottomSheet"];function pe(t,e){if(1&t){var n=h.Ub();h.Tb(0,"mat-list",9),h.Hc(1,"\n    "),h.Tb(2,"mat-list-item",10),h.Hc(3,"\n      "),h.Tb(4,"img",11),h.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),h.Sb(),h.Hc(5,"\n      "),h.Tb(6,"h3",12),h.Hc(7),h.Sb(),h.Hc(8,"\n\n      "),h.Tb(9,"div",13),h.Hc(10,"\n        "),h.Tb(11,"button",14),h.ac("click",(function(){return h.vc(n),h.ec().addNewContact()})),h.Hc(12,"\n          "),h.Tb(13,"mat-icon",15),h.Hc(14,"add"),h.Sb(),h.Hc(15,"\n          "),h.Tb(16,"span",16),h.Hc(17),h.fc(18,"translate"),h.Sb(),h.Hc(19,"\n        "),h.Sb(),h.Hc(20,"\n      "),h.Sb(),h.Hc(21,"\n    "),h.Sb(),h.Hc(22,"\n  "),h.Sb()}if(2&t){var i=h.ec();h.Bb(4),h.kc("alt",i.loggedInUser?i.loggedInUser.name:"")("src",i.loggedInUser.email,h.xc),h.Bb(3),h.Jc(" ",i.loggedInUser?i.loggedInUser.name:""," "),h.Bb(10),h.Ic(h.gc(18,4,"soft_phone.soft_phone_contacts.new_contact"))}}function ge(t,e){if(1&t){var n=h.Ub();h.Tb(0,"button",22),h.ac("click",(function(t){h.vc(n);var e=h.ec().$implicit;return h.ec().editContact(e),t.stopPropagation()})),h.Hc(1,"\n          "),h.Tb(2,"mat-icon",23),h.Hc(3,"edit\n          "),h.Sb(),h.Hc(4,"\n        "),h.Sb()}}function de(t,e){if(1&t){var n=h.Ub();h.Tb(0,"mat-list-item",17),h.ac("click",(function(){h.vc(n);var t=e.$implicit,i=h.ec();return i.fromPopUp?i.transferCall(t):i.openSheet(t)})),h.Hc(1,"\n        "),h.Tb(2,"mat-icon",18),h.Hc(3,"person"),h.Sb(),h.Hc(4,"\n\n        "),h.Tb(5,"div",19),h.Hc(6),h.Sb(),h.Hc(7,"\n\n        "),h.Tb(8,"div",20),h.Hc(9),h.Sb(),h.Hc(10,"\n\n        "),h.Fc(11,ge,5,0,"button",21),h.Hc(12,"\n\n        "),h.Ob(13,"mat-divider"),h.Hc(14,"\n      "),h.Sb()}if(2&t){var i=e.$implicit,o=h.ec();h.Bb(6),h.Ic(i.extension_name),h.Bb(3),h.Ic(i.extension_no),h.Bb(2),h.kc("ngIf",!o.fromPopUp)}}function me(t,e){if(1&t){var n=h.Ub();h.Tb(0,"div",24),h.Hc(1,"\n    "),h.Tb(2,"button",25),h.ac("click",(function(){return h.vc(n),h.ec().dismissTransferCall()})),h.Hc(3,"\n      "),h.Tb(4,"span",16),h.Hc(5),h.fc(6,"translate"),h.Sb(),h.Hc(7,"\n    "),h.Sb(),h.Hc(8,"\n  "),h.Sb()}if(2&t){var i=h.ec();h.Bb(2),h.kc("disabled",i.disableContacts),h.Bb(3),h.Ic(h.gc(6,2,"global.dismiss"))}}var ve=function(){function t(t,e,n){var i=this;this.softPhoneService=t,this.translateService=e,this.messageService=n,this.triggerBottomSheet=new h.o,this.triggerCloseBottomSheet=new h.o,this.fromPopUp=!1,this.disableContacts=!1,this.callPopUpMinimizeStatus=!1,this.filterArgs=null,this._subscription=new c.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return i.callPopUpMinimizeStatus=t})))}return t.prototype.ngOnInit=function(){this.assignCopy(),this.filterArgs={email:this.loggedInUser.email}},t.prototype.filterContacts=function(t){t||this.assignCopy(),this.filteredUsers=Object.assign([],this.softPhoneUsers).filter((function(e){return e.extension_name.toLowerCase().indexOf(t.toLowerCase())>-1}))},t.prototype.assignCopy=function(){this.filteredUsers=Object.assign([],this.softPhoneUsers)},t.prototype.openSheet=function(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:et,height:"200px",width:"98%",data:t})},t.prototype.addNewContact=function(){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:ue,height:"270px",width:"98%"})},t.prototype.editContact=function(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:ue,height:"270px",width:"98%",data:be(be({},t),{action:"edit"})})},t.prototype.transferCall=function(t){var e=this;this.disableContacts=!0,this.softPhoneService.sipTransfer(t.extension_no),setTimeout((function(){return e.triggerCloseBottomSheet.emit()}),1e3)},t.prototype.dismissTransferCall=function(){this.triggerCloseBottomSheet.emit()},t.prototype.getTranslate=function(t){return this.translateService.instant(t)},t.\u0275fac=function(e){return new(e||t)(h.Nb(s.a),h.Nb(r.d),h.Nb(X.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-soft-phone-contacts"]],viewQuery:function(t,e){var n;1&t&&h.Mc(fe,!0),2&t&&h.qc(n=h.bc())&&(e.bottomSheet=n.first)},inputs:{rtlDirection:"rtlDirection",fromPopUp:"fromPopUp",softPhoneUsers:"softPhoneUsers",loggedInUser:"loggedInUser"},outputs:{triggerBottomSheet:"triggerBottomSheet",triggerCloseBottomSheet:"triggerCloseBottomSheet"},decls:23,vars:10,consts:[[1,"full-width","full-height"],["class","soft-phone-user full-width height-50",4,"ngIf"],[1,"contact-search","height-45","padding-half"],["type","text",1,"full-width","full-height","round-corner","padding-mini-r-l","line-height-45",3,"placeholder","input"],["contactList",""],[1,"height-full-minus-95","padding-r-l","overflow-x-hide","overflow-y-auto"],[3,"disabled"],["class","cursor-pointer full-width height-45 font-8-rem",3,"click",4,"ngFor","ngForOf"],["class","height-45 padding-mini-t-b padding-r-l full-width display-flex flex-direction-row-reverse flex-space-between",4,"ngIf"],[1,"soft-phone-user","full-width","height-50"],[1,"padding-mini-r-l","full-height"],["matListAvatar","",1,"mat-elevation-z2",3,"alt","src","error"],["matLine","",1,"font-8-rem","text-weight-bold"],[1,"font-8-rem"],["mat-raised-button","",1,"green-gradient","padding-mini-r-l","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],[1,"cursor-pointer","full-width","height-45","font-8-rem",3,"click"],["mat-list-icon",""],["mat-line",""],[1,"text-gray-700","margin-r-l"],["class","cursor-pointer no-bg no-border width-30 height-30 text-center text-green-500",3,"click",4,"ngIf"],[1,"cursor-pointer","no-bg","no-border","width-30","height-30","text-center","text-green-500",3,"click"],[1,"full-width","full-height","text-center","line-height-30","font-full-plus-two-tenth-rem"],[1,"height-45","padding-mini-t-b","padding-r-l","full-width","display-flex","flex-direction-row-reverse","flex-space-between"],["mat-raised-button","","type","button",1,"full-width","red-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"]],template:function(t,e){if(1&t){var n=h.Ub();h.Tb(0,"div",0),h.Hc(1,"\n  "),h.Fc(2,pe,23,6,"mat-list",1),h.Hc(3,"\n  "),h.Tb(4,"div",2),h.Hc(5,"\n    "),h.Tb(6,"input",3,4),h.ac("input",(function(){h.vc(n);var t=h.rc(7);return e.filterContacts(t.value)})),h.fc(8,"translate"),h.Sb(),h.Hc(9,"\n  "),h.Sb(),h.Hc(10,"\n\n  "),h.Tb(11,"div",5),h.Hc(12,"\n    "),h.Tb(13,"mat-list",6),h.Hc(14,"\n      "),h.Fc(15,de,15,3,"mat-list-item",7),h.fc(16,"myFilter"),h.Hc(17,"\n    "),h.Sb(),h.Hc(18,"\n  "),h.Sb(),h.Hc(19,"\n\n  "),h.Fc(20,me,9,4,"div",8),h.Hc(21,"\n"),h.Sb(),h.Hc(22,"\n")}2&t&&(h.Bb(2),h.kc("ngIf",!e.fromPopUp),h.Bb(4),h.lc("placeholder",h.gc(8,5,"global.search")),h.Bb(7),h.kc("disabled",e.disableContacts),h.Bb(2),h.kc("ngForOf",h.hc(16,7,e.filteredUsers,e.filterArgs)),h.Bb(5),h.kc("ngIf",e.fromPopUp))},directives:[o.k,B.a,o.j,B.d,B.b,D.k,U.a,f.a,B.c,Y.a],pipes:[r.c,ht],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.contact-search[_ngcontent-%COMP%], .soft-phone-user[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.contact-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .soft-phone-user[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid hsla(0,0%,86.3%,.93)}"]}),t}(),Se=n("jaxi"),we=function(){function t(t){this.componentFactoryResolver=t}return t.prototype.resolveComponent=function(){return this.componentFactoryResolver.resolveComponentFactory(te)},t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)(h.Xb(h.j))},imports:[[o.c,i.a,r.b.forChild()]]}),t}();h.yc(I,[u.b,Se.b,o.i,Se.a,o.m,o.n,ve,vt],[r.c])},OC8m:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("7RJT"),o=n("fXoL"),r=function(){function t(){this._notification=null,this.notification=new i.BehaviorSubject(this._notification),this.currentNotification=this.notification.asObservable()}return t.prototype.changeCurrentNotification=function(t){this.notification.next(t)},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}()}}]);