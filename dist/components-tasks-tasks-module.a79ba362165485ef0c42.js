(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"0KJs":function(t,e,n){function i(){var t;try{t=e.storage.debug}catch(n){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n("FXYA")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(a=r))})),t.splice(a,0,i)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(i())},"0z79":function(t,e,n){var i=n("AdPF"),r=n("CUme"),a=n("2laj"),o=n("Yvos"),s=n("0KJs")("engine.io-client:polling-xhr"),c=n("2UHX");function l(){}function u(t){if(r.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}function d(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function p(){for(var t in d.requests)d.requests.hasOwnProperty(t)&&d.requests[t].abort()}t.exports=u,t.exports.Request=d,o(u,r),u.prototype.supportsBinary=!0,u.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new d(t)},u.prototype.doWrite=function(t,e){var n=this.request({method:"POST",data:t,isBinary:"string"!=typeof t&&void 0!==t}),i=this;n.on("success",e),n.on("error",(function(t){i.onError("xhr post error",t)})),this.sendXhr=n},u.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},a(d.prototype),d.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new i(t),n=this;try{s("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}catch(a){}if("POST"===this.method)try{e.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(a){}try{e.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(a){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof e.status?e.status:0)}),0))},s("xhr data %s",this.data),e.send(this.data)}catch(a){return void setTimeout((function(){n.onError(a)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},d.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},d.prototype.cleanup=function(t){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(n){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},d.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",p):"function"==typeof addEventListener&&addEventListener("onpagehide"in c?"pagehide":"unload",p,!1))},"14A5":function(t,e){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),r=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),a=n&&n.prototype.append&&n.prototype.getBlob;function o(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function s(t,e){e=e||{};var i=new n;return o(t).forEach((function(t){i.append(t)})),e.type?i.getBlob(e.type):i.getBlob()}function c(t,e){return new Blob(o(t),e||{})}"undefined"!=typeof Blob&&(s.prototype=Blob.prototype,c.prototype=Blob.prototype),t.exports=i?r?Blob:c:a?s:void 0},"2Dig":function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},"2UHX":function(t,e){t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},"2laj":function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},"2pII":function(t,e,n){var i=n("akSB"),r=n("2laj"),a=n("0KJs")("engine.io-client:socket"),o=n("7jRU"),s=n("Wm4p"),c=n("L/rI"),l=n("aUuk");function u(t,e){if(!(this instanceof u))return new u(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=c(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=c(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=u,u.priorWebsocketSuccess=!1,r(u.prototype),u.protocol=s.protocol,u.Socket=u,u.Transport=n("Gbct"),u.transports=n("akSB"),u.parser=n("Wm4p"),u.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=s.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new i[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var t;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},u.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},u.prototype.probe=function(t){a('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,i=this;function r(){i.onlyBinaryUpgrades&&(n=n||!this.supportsBinary&&i.transport.supportsBinary),n||(a('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(a('probe transport "%s" pong',t),i.upgrading=!0,i.emit("upgrading",e),!e)return;u.priorWebsocketSuccess="websocket"===e.name,a('pausing current transport "%s"',i.transport.name),i.transport.pause((function(){n||"closed"!==i.readyState&&(a("changing transport and sending upgrade packet"),p(),i.setTransport(e),e.send([{type:"upgrade"}]),i.emit("upgrade",e),e=null,i.upgrading=!1,i.flush())}))}else{a('probe transport "%s" failed',t);var o=new Error("probe error");o.transport=e.name,i.emit("upgradeError",o)}})))}function o(){n||(n=!0,p(),e.close(),e=null)}function s(n){var r=new Error("probe error: "+n);r.transport=e.name,o(),a('probe transport "%s" failed because of error: %s',t,n),i.emit("upgradeError",r)}function c(){s("transport closed")}function l(){s("socket closed")}function d(t){e&&t.name!==e.name&&(a('"%s" works - aborting "%s"',t.name,e.name),o())}function p(){e.removeListener("open",r),e.removeListener("error",s),e.removeListener("close",c),i.removeListener("close",l),i.removeListener("upgrading",d)}u.priorWebsocketSuccess=!1,e.once("open",r),e.once("error",s),e.once("close",c),this.once("close",l),this.once("upgrading",d),e.open()},u.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},u.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},u.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},u.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},u.prototype.sendPacket=function(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():e()})):this.upgrading?i():e()}function e(){t.onClose("forced close"),a("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function i(){t.once("upgrade",n),t.once("upgradeError",n)}return this},u.prototype.onError=function(t){a("socket error %j",t),u.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},u.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(a('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},u.prototype.filterUpgrades=function(t){for(var e=[],n=0,i=t.length;n<i;n++)~o(this.transports,t[n])&&e.push(t[n]);return e}},"2xqC":function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},"3JDX":function(t,e,n){var i=n("RIqP");t.exports=function(t){function e(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){var n;function i(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];if(i.enabled){var o=i,s=Number(new Date),c=s-(n||s);o.diff=c,o.prev=n,o.curr=s,n=s,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var l=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;l++;var i=r.formatters[n];return"function"==typeof i&&(t=i.call(o,e[l]),e.splice(l,1),l--),t})),r.formatArgs.call(o,e);var u=o.log||r.log;u.apply(o,e)}}return i.namespace=t,i.enabled=r.enabled(t),i.useColors=r.useColors(),i.color=e(t),i.destroy=a,i.extend=o,"function"==typeof r.init&&r.init(i),r.instances.push(i),i}function a(){var t=r.instances.indexOf(this);return-1!==t&&(r.instances.splice(t,1),!0)}function o(t,e){var n=r(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(t){return t instanceof Error?t.stack||t.message:t},r.disable=function(){var t=[].concat(i(r.names.map(s)),i(r.skips.map(s).map((function(t){return"-"+t})))).join(",");return r.enable(""),t},r.enable=function(t){var e;r.save(t),r.names=[],r.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(e=0;e<i;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")));for(e=0;e<r.instances.length;e++){var a=r.instances[e];a.enabled=r.enabled(a.namespace)}},r.enabled=function(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1},r.humanize=n("FGiv"),Object.keys(t).forEach((function(e){r[e]=t[e]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}},4:function(t,e){},"5LH7":function(t,e){var n=1e3,i=60*n,r=60*i,a=24*r;function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var s,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var o=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===c&&!1===isNaN(t))return e.long?o(s=t,a,"day")||o(s,r,"hour")||o(s,i,"minute")||o(s,n,"second")||s+" ms":function(t){return t>=a?Math.round(t/a)+"d":t>=r?Math.round(t/r)+"h":t>=i?Math.round(t/i)+"m":t>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"7jRU":function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},AdPF:function(t,e,n){var i=n("yeub"),r=n("2UHX");t.exports=function(t){var e=t.xdomain,n=t.xscheme,a=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&a)return new XDomainRequest}catch(o){}if(!e)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(o){}}},Aplp:function(t,e,n){"use strict";var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a={},o=0,s=0;function c(t){var e="";do{e=r[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function l(){var t=c(+new Date);return t!==i?(o=0,i=t):t+"."+c(o++)}for(;s<64;s++)a[r[s]]=s;l.encode=c,l.decode=function(t){var e=0;for(s=0;s<t.length;s++)e=64*e+a[t.charAt(s)];return e},t.exports=l},Bnag:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},C2QD:function(t,e){function n(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},CIKq:function(t,e,n){var i,r,a=n("Gbct"),o=n("Wm4p"),s=n("aUuk"),c=n("Yvos"),l=n("Aplp"),u=n("0KJs")("engine.io-client:websocket");if("undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{r=n(4)}catch(f){}var d=i||r;function p(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=i&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(d=r),a.call(this,t)}t.exports=p,c(p,a),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new d(t,e):new d(t):new d(t,e,n)}catch(i){return this.emit("error",i)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},p.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,i=0,r=n;i<r;i++)!function(t){o.encodePacket(t,e.supportsBinary,(function(i){if(!e.usingBrowserWebSocket){var r={};t.options&&(r.compress=t.options.compress),e.perMessageDeflate&&("string"==typeof i?Buffer.byteLength(i):i.length)<e.perMessageDeflate.threshold&&(r.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(i):e.ws.send(i,r)}catch(f){u("websocket closed before onclose event")}--n||(e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0))}))}(t[i])},p.prototype.onClose=function(){a.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=l()),this.supportsBinary||(t.b64=1),(t=s.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},p.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===p.prototype.name)}},CUme:function(t,e,n){var i=n("Gbct"),r=n("aUuk"),a=n("Wm4p"),o=n("Yvos"),s=n("Aplp"),c=n("0KJs")("engine.io-client:polling");t.exports=u;var l=null!=new(n("AdPF"))({xdomain:!1}).responseType;function u(t){l&&!(t&&t.forceBase64)||(this.supportsBinary=!1),i.call(this,t)}o(u,i),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(t){var e=this;function n(){c("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--i||n()}))),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",(function(){c("pre-pause writing complete"),--i||n()})))}else n()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(t){var e=this;c("polling got data %s",t),a.decodePayload(t,this.socket.binaryType,(function(t,n,i){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var t=this;function e(){c("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},u.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};a.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,n)}))},u.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||t.sid||(t.b64=1),t=r.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},Cl5A:function(t,e,n){var i=n("CUme"),r=n("Yvos"),a=n("2UHX");t.exports=u;var o,s=/\n/g,c=/\\n/g;function l(){}function u(t){i.call(this,t),this.query=this.query||{},o||(o=a.___eio=a.___eio||[]),this.index=o.length;var e=this;o.push((function(t){e.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){e.script&&(e.script.onerror=l)}),!1)}r(u,i),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},u.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},u.prototype.doWrite=function(t,e){var n=this;if(!this.form){var i,r=document.createElement("form"),a=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=o,r.method="POST",r.setAttribute("accept-charset","utf-8"),a.name="d",r.appendChild(a),document.body.appendChild(r),this.form=r,this.area=a}function l(){u(),e()}function u(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{i=document.createElement('<iframe src="javascript:0" name="'+n.iframeId+'">')}catch(t){(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),u(),t=t.replace(c,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&l()}:this.iframe.onload=l}},EbDI:function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},FGiv:function(t,e){var n=1e3,i=60*n,r=60*i,a=24*r;function o(t,e,n,i){var r=e>=1.5*n;return Math.round(t/n)+" "+i+(r?"s":"")}t.exports=function(t,e){e=e||{};var s,c,l=typeof t;if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var o=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===l&&isFinite(t))return e.long?(s=t,(c=Math.abs(s))>=a?o(s,c,a,"day"):c>=r?o(s,c,r,"hour"):c>=i?o(s,c,i,"minute"):c>=n?o(s,c,n,"second"):s+" ms"):function(t){var e=Math.abs(t);return e>=a?Math.round(t/a)+"d":e>=r?Math.round(t/r)+"h":e>=i?Math.round(t/i)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},FXYA:function(t,e,n){function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,a=r-(n||r);t.diff=a,t.prev=n,t.curr=r,n=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=e.formatters[i];return"function"==typeof r&&(n=r.call(t,o[c]),o.splice(c,1),c--),n})),e.formatArgs.call(t,o);var l=i.log||e.log||console.log.bind(console);l.apply(t,o)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var a=e.instances[n];a.enabled=e.enabled(a.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n("5LH7"),e.instances=[],e.names=[],e.skips=[],e.formatters={}},Gbct:function(t,e,n){var i=n("Wm4p"),r=n("2laj");function a(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=a,r(a.prototype),a.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},a.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},a.prototype.onPacket=function(t){this.emit("packet",t)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},Ijbi:function(t,e,n){var i=n("WkPL");t.exports=function(t){if(Array.isArray(t))return i(t)}},KFGy:function(t,e,n){var i=n("Uwu7"),r=n("2xqC"),a=n("kSER"),o=n("2Dig"),s=n("QN7Q"),c=n("NOtv")("socket.io-client:socket"),l=n("TypT"),u=n("WLGk");t.exports=f;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=r.prototype.emit;function f(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(f.prototype),f.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[o(t,"open",s(this,"onopen")),o(t,"packet",s(this,"onpacket")),o(t,"close",s(this,"onclose"))]}},f.prototype.open=f.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},f.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},f.prototype.emit=function(t){if(d.hasOwnProperty(t))return p.apply(this,arguments),this;var e=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:u(e))?i.BINARY_EVENT:i.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},f.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},f.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},f.prototype.onclose=function(t){c("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},f.prototype.onpacket=function(t){if(t.nsp===this.nsp||t.type===i.ERROR&&"/"===t.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},f.prototype.onevent=function(t){var e=t.data||[];c("emitting event %j",e),null!=t.id&&(c("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},f.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);c("sending ack %j",r),e.packet({type:u(r)?i.BINARY_ACK:i.ACK,id:t,data:r})}}},f.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(c("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):c("bad ack %s",t.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},f.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(t){return this.flags.compress=t,this},f.prototype.binary=function(t){return this.flags.binary=t,this}},"L/rI":function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e,r,a=t,o=t.indexOf("["),s=t.indexOf("]");-1!=o&&-1!=s&&(t=t.substring(0,o)+t.substring(o,s).replace(/:/g,";")+t.substring(s,t.length));for(var c,l=n.exec(t||""),u={},d=14;d--;)u[i[d]]=l[d]||"";return-1!=o&&-1!=s&&(u.source=a,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=(r=(e=u.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=e.substr(0,1)&&0!==e.length||r.splice(0,1),"/"==e.substr(e.length-1,1)&&r.splice(r.length-1,1),r),u.queryKey=(c={},u.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(c[e]=n)})),c),u}},NOtv:function(t,e,n){e.log=function(){var t;return"object"==typeof console&&console.log&&(t=console).log.apply(t,arguments)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(r=i))})),e.splice(r,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(n){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n("3JDX")(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},Njrz:function(t,e,n){var i=n("luTP"),r=n("qGlh"),a=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===a.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===a.call(File);e.deconstructPacket=function(t){var e=[],n=t;return n.data=function t(e,n){if(!e)return e;if(r(e)){var a={_placeholder:!0,num:n.length};return n.push(e),a}if(i(e)){for(var o=new Array(e.length),s=0;s<e.length;s++)o[s]=t(e[s],n);return o}if("object"==typeof e&&!(e instanceof Date)){for(var c in o={},e)o[c]=t(e[c],n);return o}return e}(t.data,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(i(e))for(var r=0;r<e.length;r++)e[r]=t(e[r],n);else if("object"==typeof e)for(var a in e)e[a]=t(e[a],n);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,a=t;!function t(c,l,u){if(!c)return c;if(o&&c instanceof Blob||s&&c instanceof File){n++;var d=new FileReader;d.onload=function(){u?u[l]=this.result:a=this.result,--n||e(a)},d.readAsArrayBuffer(c)}else if(i(c))for(var p=0;p<c.length;p++)t(c[p],p,c);else if("object"==typeof c&&!r(c))for(var f in c)t(c[f],f,c)}(a),n||e(a)}},QN7Q:function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}},RIqP:function(t,e,n){var i=n("Ijbi"),r=n("EbDI"),a=n("ZhPi"),o=n("Bnag");t.exports=function(t){return i(t)||r(t)||a(t)||o()}},TypT:function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),i=0,r=n.length;i<r;i++){var a=n[i].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}},Uwu7:function(t,e,n){var i=n("0KJs")("socket.io-parser"),r=n("2laj"),a=n("Njrz"),o=n("luTP"),s=n("qGlh");function c(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=c,e.Decoder=d;var l=e.ERROR+'"encode error"';function u(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var r=function(t){try{return JSON.stringify(t)}catch(e){return!1}}(t.data);if(!1===r)return l;n+=r}return i("encoded %j as %s",t,n),n}function d(){this.reconstructor=null}function p(t){this.reconPack=t,this.buffers=[]}function f(t){return{type:e.ERROR,data:"parser error: "+t}}c.prototype.encode=function(t,n){i("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?function(t,e){a.removeBlobs(t,(function(t){var n=a.deconstructPacket(t),i=u(n.packet),r=n.buffers;r.unshift(i),e(r)}))}(t,n):n([u(t)])},r(d.prototype),d.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return f("unknown packet type "+r.type);if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var a="";"-"!==t.charAt(++n)&&(a+=t.charAt(n),n!=t.length););if(a!=Number(a)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===t.charAt(n+1))for(r.nsp="";++n&&","!==(c=t.charAt(n))&&(r.nsp+=c,n!==t.length););else r.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(r.id="";++n;){var c;if(null==(c=t.charAt(n))||Number(c)!=c){--n;break}if(r.id+=t.charAt(n),n===t.length)break}r.id=Number(r.id)}if(t.charAt(++n)){var l=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(n));if(!1===l||r.type!==e.ERROR&&!o(l))return f("invalid payload");r.data=l}return i("decoded %s as %j",t,r),r}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},Uxeu:function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,r=t.indexOf("["),a=t.indexOf("]");-1!=r&&-1!=a&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));for(var o=n.exec(t||""),s={},c=14;c--;)s[i[c]]=o[c]||"";return-1!=r&&-1!=a&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},WLGk:function(t,e,n){var i=n("luTP"),r=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);t.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(i(e)){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||a&&e instanceof Blob||o&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return!0;return!1}},WkPL:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}},Wm4p:function(t,e,n){var i,r=n("dkv/"),a=n("WLGk"),o=n("ypnn"),s=n("zMFY"),c=n("oIG/");"undefined"!=typeof ArrayBuffer&&(i=n("g5Dd"));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=l||u;e.protocol=3;var p=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=r(p),h={type:"error",data:"parser error"},b=n("14A5");function g(t,e,n){for(var i=new Array(t.length),r=s(t.length,n),a=function(t,n,r){e(n,(function(e,n){i[t]=n,r(e,i)}))},o=0;o<t.length;o++)a(o,t[o],r)}e.encodePacket=function(t,n,i,r){"function"==typeof n&&(r=n,n=!1),"function"==typeof i&&(r=i,i=null);var a=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=t.data,a=new Uint8Array(r),o=new Uint8Array(1+r.byteLength);o[0]=p[t.type];for(var s=0;s<a.length;s++)o[s+1]=a[s];return i(o.buffer)}(t,n,r);if(void 0!==b&&a instanceof b)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);if(d)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=new FileReader;return r.onload=function(){e.encodePacket({type:t.type,data:r.result},n,!0,i)},r.readAsArrayBuffer(t.data)}(t,n,i);var r=new Uint8Array(1);return r[0]=p[t.type],i(new b([r.buffer,t.data]))}(t,n,r);if(a&&a.base64)return function(t,n){return n("b"+e.packets[t.type]+t.data.data)}(t,r);var o=p[t.type];return void 0!==t.data&&(o+=i?c.encode(String(t.data),{strict:!1}):String(t.data)),r(""+o)},e.encodeBase64Packet=function(t,n){var i,r="b"+e.packets[t.type];if(void 0!==b&&t.data instanceof b){var a=new FileReader;return a.onload=function(){var t=a.result.split(",")[1];n(r+t)},a.readAsDataURL(t.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(l){for(var o=new Uint8Array(t.data),s=new Array(o.length),c=0;c<o.length;c++)s[c]=o[c];i=String.fromCharCode.apply(null,s)}return r+=btoa(i),n(r)},e.decodePacket=function(t,n,i){if(void 0===t)return h;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(i&&!1===(t=function(t){try{t=c.decode(t,{strict:!1})}catch(e){return!1}return t}(t)))return h;var r=t.charAt(0);return Number(r)==r&&f[r]?t.length>1?{type:f[r],data:t.substring(1)}:{type:f[r]}:h}r=new Uint8Array(t)[0];var a=o(t,1);return b&&"blob"===n&&(a=new b([a])),{type:f[r],data:a}},e.decodeBase64Packet=function(t,e){var n=f[t.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=i.decode(t.substr(1));return"blob"===e&&b&&(r=new b([r])),{type:n,data:r}},e.encodePayload=function(t,n,i){"function"==typeof n&&(i=n,n=null);var r=a(t);return n&&r?b&&!d?e.encodePayloadAsBlob(t,i):e.encodePayloadAsArrayBuffer(t,i):t.length?void g(t,(function(t,i){e.encodePacket(t,!!r&&n,!1,(function(t){i(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return i(e.join(""))})):i("0:")},e.decodePayload=function(t,n,i){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,i);var r;if("function"==typeof n&&(i=n,n=null),""===t)return i(h,0,1);for(var a,o,s="",c=0,l=t.length;c<l;c++){var u=t.charAt(c);if(":"===u){if(""===s||s!=(a=Number(s)))return i(h,0,1);if(s!=(o=t.substr(c+1,a)).length)return i(h,0,1);if(o.length){if(r=e.decodePacket(o,n,!1),h.type===r.type&&h.data===r.data)return i(h,0,1);if(!1===i(r,c+a,l))return}c+=a,s=""}else s+=u}return""!==s?i(h,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));g(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){return n(null,t)}))}),(function(t,e){var i=e.reduce((function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2}),0),r=new Uint8Array(i),a=0;return e.forEach((function(t){var e="string"==typeof t,n=t;if(e){for(var i=new Uint8Array(t.length),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);n=i.buffer}r[a++]=e?0:1;var s=n.byteLength.toString();for(o=0;o<s.length;o++)r[a++]=parseInt(s[o]);for(r[a++]=255,i=new Uint8Array(n),o=0;o<i.length;o++)r[a++]=i[o]})),n(r.buffer)}))},e.encodePayloadAsBlob=function(t,n){g(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);t=i.buffer,e[0]=0}var a=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),o=new Uint8Array(a.length+1);for(r=0;r<a.length;r++)o[r]=parseInt(a[r]);if(o[a.length]=255,b){var s=new b([e.buffer,o.buffer,t]);n(null,s)}}))}),(function(t,e){return n(new b(e))}))},e.decodePayloadAsBinary=function(t,n,i){"function"==typeof n&&(i=n,n=null);for(var r=t,a=[];r.byteLength>0;){for(var s=new Uint8Array(r),c=0===s[0],l="",u=1;255!==s[u];u++){if(l.length>310)return i(h,0,1);l+=s[u]}r=o(r,2+l.length),l=parseInt(l);var d=o(r,0,l);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(b){var p=new Uint8Array(d);for(d="",u=0;u<p.length;u++)d+=String.fromCharCode(p[u])}a.push(d),r=o(r,l)}var f=a.length;a.forEach((function(t,r){i(e.decodePacket(t,n,!0),r,f)}))}},Yvos:function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},ZhPi:function(t,e,n){var i=n("WkPL");t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}},aUuk:function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),i=0,r=n.length;i<r;i++){var a=n[i].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}},akSB:function(t,e,n){var i=n("AdPF"),r=n("0z79"),a=n("Cl5A"),o=n("CIKq");e.polling=function(t){var e=!1,n=!1,o=!1!==t.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,c=location.port;c||(c=s?443:80),e=t.hostname!==location.hostname||c!==t.port,n=t.secure!==s}if(t.xdomain=e,t.xscheme=n,"open"in new i(t)&&!t.forceJSONP)return new r(t);if(!o)throw new Error("JSONP disabled");return new a(t)},e.websocket=o},"dkv/":function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var i in t)n.call(t,i)&&e.push(i);return e}},eOtv:function(t,e,n){var i=n("lKxJ"),r=n("KFGy"),a=n("2xqC"),o=n("Uwu7"),s=n("2Dig"),c=n("QN7Q"),l=n("NOtv")("socket.io-client:manager"),u=n("7jRU"),d=n("C2QD"),p=Object.prototype.hasOwnProperty;function f(t,e){if(!(this instanceof f))return new f(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=f,f.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},f.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},f.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},a(f.prototype),f.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},f.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},f.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},f.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},f.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},f.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},f.prototype.open=f.prototype.connect=function(t,e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var a=s(n,"open",(function(){r.onopen(),t&&t()})),o=s(n,"error",(function(e){if(l("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c);var u=setTimeout((function(){l("connect attempt timed out after %d",c),a.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(a),this.subs.push(o),this},f.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(s(t,"data",c(this,"ondata"))),this.subs.push(s(t,"ping",c(this,"onping"))),this.subs.push(s(t,"pong",c(this,"onpong"))),this.subs.push(s(t,"error",c(this,"onerror"))),this.subs.push(s(t,"close",c(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",c(this,"ondecoded")))},f.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},f.prototype.ondata=function(t){this.decoder.add(t)},f.prototype.ondecoded=function(t){this.emit("packet",t)},f.prototype.onerror=function(t){l("error",t),this.emitAll("error",t)},f.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new r(this,t,e),this.nsps[t]=n;var i=this;n.on("connecting",a),n.on("connect",(function(){n.id=i.generateId(t)})),this.autoConnect&&a()}function a(){~u(i.connecting,n)||i.connecting.push(n)}return n},f.prototype.destroy=function(t){var e=u(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},f.prototype.packet=function(t){l("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var i=0;i<n.length;i++)e.engine.write(n[i],t.options);e.encoding=!1,e.processPacketQueue()})))},f.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},f.prototype.cleanup=function(){l("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},f.prototype.close=f.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},f.prototype.onclose=function(t){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(l("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(l("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(l("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},f.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},fRIO:function(t,e,n){"use strict";n.r(e),n.d(e,"TasksModule",(function(){return qn}));var i=n("ofXK"),r=n("PCNd"),a=n("sYmb"),o=n("zQsl"),s=n("zB/H"),c=n("ue6I"),l=n("DDyt"),u=n("3Pt+"),d=n("f7OT"),p=n("XiUW"),f=n("0IaG"),h=n("wd/R"),b=n("BCsW"),g=n("ISpo"),m=n("mrmJ"),v=n("unh5"),I=n("fXoL"),k=n("cH1L"),y=n("kmnG"),S=n("qFsG"),w=n("d3UM"),T=n("5RNC"),D=n("TFyl"),C=n("1jcm"),x=n("FKr1"),B=n("bTqV"),_=n("NFeN");function L(t,e){1&t&&(I.Tb(0,"h1",39),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n      ",I.gc(2,1,"tasks.main.add_new_task"),"\n    "))}function N(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.task_name_error"),"\n            "))}function O(t,e){if(1&t&&(I.Tb(0,"mat-option",40),I.Ic(1,"\n                "),I.Tb(2,"span",41),I.Ic(3),I.Sb(),I.Ic(4,"\n              "),I.Sb()),2&t){var n=e.$implicit;I.kc("value",n.id),I.Bb(2),I.kc("ngClass",n.id),I.Bb(1),I.Jc(n.name)}}function j(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.task_status_error"),"\n            "))}function M(t,e){if(1&t&&(I.Tb(0,"mat-option",40),I.Ic(1),I.Sb()),2&t){var n=e.$implicit;I.kc("value",n),I.Bb(1),I.Kc("\n                ",n.projectName,"\n              ")}}function P(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.task_project_error"),"\n            "))}function F(t,e){if(1&t&&(I.Tb(0,"mat-option",42),I.Ic(1,"\n                "),I.Tb(2,"div",43),I.Ic(3,"\n                  "),I.Tb(4,"img",44),I.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),I.Sb(),I.Ic(5,"\n                  "),I.Tb(6,"span",45),I.Ic(7),I.Sb(),I.Ic(8,"\n                "),I.Sb(),I.Ic(9,"\n              "),I.Sb()),2&t){var n=e.$implicit,i=I.ec(2);I.kc("value",n),I.Bb(4),I.kc("ngClass",i.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+n.email+".jpg",I.yc),I.Bb(3),I.Jc(n.name+" "+n.family)}}function A(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.assign_to_error"),"\n            "))}function E(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.task_durationHours_error"),"\n            "))}function Y(t,e){if(1&t&&(I.Tb(0,"mat-option",40),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t){var n=e.$implicit;I.kc("value",n),I.Bb(1),I.Lc("\n                ",n," ",n?I.gc(2,3,"global.minutes"):"","\n              ")}}function R(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.start_at_error"),"\n            "))}function U(t,e){if(1&t&&(I.Tb(0,"mat-option",40),I.Ic(1),I.Sb()),2&t){var n=e.$implicit;I.kc("value",n),I.Bb(1),I.Kc("\n                ",n,"\n              ")}}function q(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.start_time_error"),"\n            "))}function G(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.stop_at_error"),"\n            "))}function H(t,e){if(1&t&&(I.Tb(0,"mat-option",40),I.Ic(1),I.Sb()),2&t){var n=e.$implicit;I.kc("value",n),I.Bb(1),I.Kc("\n                ",n,"\n              ")}}function z(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.stop_time_error"),"\n            "))}function J(t,e){if(1&t&&(I.Tb(0,"div",21),I.Ic(1,"\n        "),I.Tb(2,"div",6),I.Ic(3,"\n          "),I.Tb(4,"mat-slide-toggle",46),I.Ic(5),I.fc(6,"translate"),I.Sb(),I.Ic(7,"\n        "),I.Sb(),I.Ic(8,"\n      "),I.Sb()),2&t){var n=I.ec(2);I.Bb(4),I.kc("color","primary"),I.Bb(1),I.Kc("\n            ",I.gc(6,2,n.form.get("status").value?"global.active":"global.deactivate"),"\n          ")}}function K(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",47),I.ac("click",(function(){return I.wc(n),I.ec(2).cancelBtn()})),I.Ic(1,"\n      "),I.Tb(2,"span",48),I.Ic(3),I.fc(4,"translate"),I.Sb(),I.Ic(5,"\n    "),I.Sb()}2&t&&(I.Bb(3),I.Jc(I.gc(4,1,"global.dismiss")))}function X(t,e){if(1&t&&(I.Tb(0,"button",49),I.Ic(1,"\n      "),I.Tb(2,"mat-icon",50),I.Ic(3,"check"),I.Sb(),I.Ic(4,"\n      "),I.Tb(5,"span",48),I.Ic(6),I.fc(7,"translate"),I.Sb(),I.Ic(8,"\n    "),I.Sb()),2&t){var n=I.ec(2);I.kc("disabled",!n.form.valid),I.Bb(6),I.Jc(I.gc(7,2,"global.submit"))}}function V(t,e){if(1&t){var n=I.Ub();I.Tb(0,"form",1),I.ac("submit",(function(){return I.wc(n),I.ec().submit()})),I.Ic(1,"\n  "),I.Tb(2,"div",2),I.Ic(3,"\n    "),I.Gc(4,L,3,3,"h1",3),I.Ic(5,"\n\n    "),I.Tb(6,"div",4),I.Ic(7,"\n      "),I.Tb(8,"div",5),I.Ic(9,"\n        "),I.Tb(10,"div",6),I.Ic(11,"\n          "),I.Tb(12,"mat-form-field",7),I.Ic(13,"\n            "),I.Ob(14,"input",8),I.fc(15,"translate"),I.Ic(16,"\n            "),I.Tb(17,"mat-label"),I.Ic(18),I.fc(19,"translate"),I.Sb(),I.Ic(20,"\n\n            "),I.Gc(21,N,3,3,"mat-error",9),I.Ic(22,"\n          "),I.Sb(),I.Ic(23,"\n        "),I.Sb(),I.Ic(24,"\n      "),I.Sb(),I.Ic(25,"\n\n      "),I.Tb(26,"div",5),I.Ic(27,"\n        "),I.Tb(28,"div",10),I.Ic(29,"\n          "),I.Tb(30,"mat-form-field",11),I.Ic(31,"\n            "),I.Tb(32,"mat-label"),I.Ic(33),I.fc(34,"translate"),I.Sb(),I.Ic(35,"\n            "),I.Tb(36,"mat-select",12),I.ac("selectionChange",(function(t){return I.wc(n),I.ec().changeBoardStatus(t)})),I.Ic(37,"\n              "),I.Gc(38,O,5,3,"mat-option",13),I.Ic(39,"\n            "),I.Sb(),I.Ic(40,"\n            "),I.Gc(41,j,3,3,"mat-error",9),I.Ic(42,"\n          "),I.Sb(),I.Ic(43,"\n        "),I.Sb(),I.Ic(44,"\n        "),I.Tb(45,"div",14),I.Ic(46,"\n          "),I.Tb(47,"div",15),I.Ic(48),I.fc(49,"translate"),I.Tb(50,"span"),I.Ic(51),I.Sb(),I.Ic(52," \u066a\n          "),I.Sb(),I.Ic(53,"\n          "),I.Tb(54,"mat-slider",16),I.Ic(55,"\n          "),I.Sb(),I.Ic(56,"\n        "),I.Sb(),I.Ic(57,"\n      "),I.Sb(),I.Ic(58,"\n\n      "),I.Tb(59,"div",5),I.Ic(60,"\n        "),I.Tb(61,"div",10),I.Ic(62,"\n          "),I.Tb(63,"mat-form-field",7),I.Ic(64,"\n            "),I.Tb(65,"mat-label"),I.Ic(66),I.fc(67,"translate"),I.Sb(),I.Ic(68,"\n            "),I.Tb(69,"mat-select",17),I.Ic(70,"\n              "),I.Gc(71,M,2,2,"mat-option",13),I.Ic(72,"\n            "),I.Sb(),I.Ic(73,"\n\n            "),I.Gc(74,P,3,3,"mat-error",9),I.Ic(75,"\n          "),I.Sb(),I.Ic(76,"\n        "),I.Sb(),I.Ic(77,"\n        "),I.Tb(78,"div",10),I.Ic(79,"\n          "),I.Tb(80,"mat-form-field",7),I.Ic(81,"\n            "),I.Ob(82,"img",18),I.Ic(83,"\n            "),I.Tb(84,"mat-label"),I.Ic(85),I.fc(86,"translate"),I.Sb(),I.Ic(87,"\n            "),I.Tb(88,"mat-select",19),I.Ic(89,"\n              "),I.Gc(90,F,10,4,"mat-option",20),I.Ic(91,"\n            "),I.Sb(),I.Ic(92,"\n\n            "),I.Gc(93,A,3,3,"mat-error",9),I.Ic(94,"\n          "),I.Sb(),I.Ic(95,"\n        "),I.Sb(),I.Ic(96,"\n      "),I.Sb(),I.Ic(97,"\n\n      "),I.Tb(98,"div",21),I.Ic(99,"\n        "),I.Tb(100,"div",10),I.Ic(101,"\n          "),I.Tb(102,"mat-form-field",7),I.Ic(103,"\n            "),I.Ob(104,"input",22),I.fc(105,"translate"),I.Ic(106,"\n            "),I.Tb(107,"mat-label"),I.Ic(108),I.fc(109,"translate"),I.Sb(),I.Ic(110,"\n\n            "),I.Gc(111,E,3,3,"mat-error",9),I.Ic(112,"\n          "),I.Sb(),I.Ic(113,"\n        "),I.Sb(),I.Ic(114,"\n        "),I.Tb(115,"div",10),I.Ic(116,"\n          "),I.Tb(117,"mat-form-field",7),I.Ic(118,"\n            "),I.Ob(119,"mat-label"),I.Ic(120,"\n            "),I.Tb(121,"mat-select",23),I.Ic(122,"\n              "),I.Gc(123,Y,3,5,"mat-option",13),I.Ic(124,"\n            "),I.Sb(),I.Ic(125,"\n          "),I.Sb(),I.Ic(126,"\n        "),I.Sb(),I.Ic(127,"\n      "),I.Sb(),I.Ic(128,"\n\n      "),I.Tb(129,"div",5),I.Ic(130,"\n        "),I.Tb(131,"div",24),I.Ic(132,"\n          "),I.Tb(133,"mat-form-field",25),I.Ic(134,"\n            "),I.Tb(135,"mat-label"),I.Ic(136),I.fc(137,"translate"),I.Sb(),I.Ic(138,"\n            "),I.Ob(139,"input",26),I.Ic(140,"\n\n            "),I.Gc(141,R,3,3,"mat-error",9),I.Ic(142,"\n          "),I.Sb(),I.Ic(143,"\n        "),I.Sb(),I.Ic(144,"\n        "),I.Tb(145,"div",27),I.Ic(146,"\n          "),I.Tb(147,"mat-form-field",7),I.Ic(148,"\n            "),I.Tb(149,"mat-label"),I.Ic(150),I.fc(151,"translate"),I.Sb(),I.Ic(152,"\n            "),I.Tb(153,"mat-select",28),I.Ic(154,"\n              "),I.Gc(155,U,2,2,"mat-option",13),I.Ic(156,"\n            "),I.Sb(),I.Ic(157,"\n\n            "),I.Gc(158,q,3,3,"mat-error",9),I.Ic(159,"\n          "),I.Sb(),I.Ic(160,"\n        "),I.Sb(),I.Ic(161,"\n\n        "),I.Tb(162,"div",29),I.Ic(163,"\n          "),I.Tb(164,"mat-form-field",25),I.Ic(165,"\n            "),I.Tb(166,"mat-label"),I.Ic(167),I.fc(168,"translate"),I.Sb(),I.Ic(169,"\n            "),I.Ob(170,"input",30),I.Ic(171,"\n\n            "),I.Gc(172,G,3,3,"mat-error",9),I.Ic(173,"\n          "),I.Sb(),I.Ic(174,"\n        "),I.Sb(),I.Ic(175,"\n        "),I.Tb(176,"div",27),I.Ic(177,"\n          "),I.Tb(178,"mat-form-field",7),I.Ic(179,"\n            "),I.Tb(180,"mat-label"),I.Ic(181),I.fc(182,"translate"),I.Sb(),I.Ic(183,"\n            "),I.Tb(184,"mat-select",31),I.Ic(185,"\n              "),I.Gc(186,H,2,2,"mat-option",13),I.Ic(187,"\n            "),I.Sb(),I.Ic(188,"\n\n            "),I.Gc(189,z,3,3,"mat-error",9),I.Ic(190,"\n          "),I.Sb(),I.Ic(191,"\n        "),I.Sb(),I.Ic(192,"\n      "),I.Sb(),I.Ic(193,"\n\n      "),I.Tb(194,"div",21),I.Ic(195,"\n        "),I.Tb(196,"div",6),I.Ic(197,"\n          "),I.Tb(198,"mat-form-field",32),I.Ic(199,"\n            "),I.Tb(200,"mat-label"),I.Ic(201),I.fc(202,"translate"),I.Sb(),I.Ic(203,"\n            "),I.Ob(204,"textarea",33),I.fc(205,"translate"),I.Ic(206,"\n          "),I.Sb(),I.Ic(207,"\n        "),I.Sb(),I.Ic(208,"\n      "),I.Sb(),I.Ic(209,"\n\n      "),I.Tb(210,"div",21),I.Ic(211,"\n        "),I.Tb(212,"div",6),I.Ic(213,"\n          "),I.Tb(214,"mat-slide-toggle",34),I.Ic(215),I.fc(216,"translate"),I.Sb(),I.Ic(217,"\n        "),I.Sb(),I.Ic(218,"\n      "),I.Sb(),I.Ic(219,"\n\n      "),I.Gc(220,J,9,4,"div",35),I.Ic(221,"\n    "),I.Sb(),I.Ic(222,"\n  "),I.Sb(),I.Ic(223,"\n\n  "),I.Tb(224,"div",36),I.Ic(225,"\n    "),I.Gc(226,K,6,3,"button",37),I.Ic(227,"\n\n    "),I.Gc(228,X,9,4,"button",38),I.Ic(229,"\n  "),I.Sb(),I.Ic(230,"\n"),I.Sb()}if(2&t){var i=I.ec();I.kc("dir",i.rtlDirection?"rtl":"ltr")("formGroup",i.form),I.Bb(4),I.kc("ngIf","detail"!==i.data.action),I.Bb(10),I.lc("placeholder",I.gc(15,50,"tasks.form.task_name")),I.Bb(4),I.Kc("\n              ",I.gc(19,52,"tasks.form.task_name"),"\n            "),I.Bb(3),I.kc("ngIf",!i.form.get("taskName").valid&&i.form.get("taskName").touched),I.Bb(12),I.Jc(I.gc(34,54,"tasks.form.task_status")),I.Bb(5),I.kc("ngForOf",i.boardsList),I.Bb(3),I.kc("ngIf",!i.form.get("boardStatus").valid&&i.form.get("boardStatus").touched),I.Bb(6),I.kc("ngClass",i.rtlDirection?"right-six-tenth":"left-six-tenth"),I.Bb(1),I.Kc("\n            ",I.gc(49,56,"tasks.boards.task_percentage"),"\n            "),I.Bb(3),I.Jc(i.form.get("percentage").value),I.Bb(3),I.kc("max",100)("min",0)("step",5)("thumbLabel",!0)("tickInterval",2),I.Bb(12),I.Jc(I.gc(67,58,"tasks.form.task_project")),I.Bb(5),I.kc("ngForOf",i.projectsList),I.Bb(3),I.kc("ngIf",!i.form.get("project").valid&&i.form.get("project").touched),I.Bb(8),I.kc("ngClass",i.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+i.form.get("email").value+".jpg",I.yc),I.Bb(3),I.Jc(I.gc(86,60,"tasks.form.assign_to")),I.Bb(5),I.kc("ngForOf",i.usersList),I.Bb(3),I.kc("ngIf",!i.form.get("assignTo").valid&&i.form.get("assignTo").touched),I.Bb(11),I.lc("placeholder",I.gc(105,62,"tasks.form.task_durationHours")),I.Bb(4),I.Kc("\n              ",I.gc(109,64,"tasks.form.task_durationHours"),"\n            "),I.Bb(3),I.kc("ngIf",!i.form.get("taskDurationHours").valid&&i.form.get("taskDurationHours").touched),I.Bb(12),I.kc("ngForOf",i.durationMinute),I.Bb(10),I.kc("dir",i.rtlDirection?"rtl":"ltr"),I.Bb(3),I.Jc(I.gc(137,66,"tasks.form.start_at")),I.Bb(3),I.kc("dpDayPicker",i.datePicker),I.Bb(2),I.kc("ngIf",!i.form.get("startAt").valid&&i.form.get("startAt").touched),I.Bb(9),I.Jc(I.gc(151,68,"tasks.form.start_time")),I.Bb(5),I.kc("ngForOf",i.hours),I.Bb(3),I.kc("ngIf",!i.form.get("startTime").valid&&i.form.get("startTime").touched),I.Bb(6),I.kc("dir",i.rtlDirection?"rtl":"ltr"),I.Bb(3),I.Jc(I.gc(168,70,"tasks.form.stop_at")),I.Bb(3),I.kc("dpDayPicker",i.datePicker),I.Bb(2),I.kc("ngIf",!i.form.get("stopAt").valid&&i.form.get("stopAt").touched),I.Bb(9),I.Jc(I.gc(182,72,"tasks.form.stop_time")),I.Bb(5),I.kc("ngForOf",i.hours),I.Bb(3),I.kc("ngIf",!i.form.get("stopTime").valid&&i.form.get("stopTime").touched),I.Bb(12),I.Jc(I.gc(202,74,"tasks.form.task_description")),I.Bb(3),I.lc("placeholder",I.gc(205,76,"tasks.form.task_description")),I.Bb(10),I.kc("color","primary"),I.Bb(1),I.Kc("\n            ",I.gc(216,78,"tasks.form.trackable_by_mobile"),"\n          "),I.Bb(5),I.kc("ngIf","detail"===i.data.action),I.Bb(6),I.kc("ngIf",i.editable||"detail"!==i.data.action),I.Bb(2),I.kc("ngIf",i.editable)}}var $,W=function(){function t(t,e){var n=this;this.translate=t,this.viewDirection=e,this.data=null,this.cancel=new I.o,this.formOutput=new I.o,this.task=null,this.projectsList=[],this.usersList=[],this.durationMinute=[0,15,30,45],this.hours=["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45","19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00","22:15","22:30","22:45","23:00","23:15","23:30","23:45"],this.boardsList=[],this.datePicker=null,this._subscription=new s.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){n.rtlDirection=t,n.setupDatepickers(),n.setupTaskStatusWords()})))}return t.prototype.ngOnInit=function(){this.usersList=this.data.usersList,this.projectsList=this.data.projectsList,"detail"===this.data.action?this.task=this.data.task:this.selectCurrentTime(),this.setupTaskStatusWords()},t.prototype.ngAfterViewInit=function(){this.setupDatepickers()},t.prototype.setupDatepickers=function(){this.datePicker={locale:this.rtlDirection?"fa":"en",firstDayOfWeek:this.rtlDirection?"sa":"mo",format:"YYYY/MM/DD",closeOnSelect:!0,closeOnSelectDelay:150}},t.prototype.setupTaskStatusWords=function(){var t=this;setTimeout((function(){t.boardsList=[{id:"todo",name:t.getTranslate("tasks.boards.todo")},{id:"inProgress",name:t.getTranslate("tasks.boards.in_progress")},{id:"done",name:t.getTranslate("tasks.boards.done")}]}),200)},t.prototype.ngOnChanges=function(t){var e=this;t.form&&!t.form.firstChange&&(this.form=t.form.currentValue,this._subscription.add(this.form.get("assignTo").valueChanges.subscribe((function(t){var n=e.usersList.filter((function(e){return e.adminId===t.adminId})).pop();n&&e.form.get("email").setValue(n.email)}))))},t.prototype.cancelBtn=function(){this.cancel.emit(!0)},t.prototype.changeBoardStatus=function(t){"done"===t.value?this.form.get("percentage").setValue(100):"detail"===this.data.action?"done"!==this.data.boardStatus&&this.form.get("percentage").setValue(this.task.percentage):this.form.get("percentage").setValue(0)},t.prototype.selectCurrentTime=function(){var t=new Date,e=t.getHours()<10?"0"+t.getHours():t.getHours(),n=t.getMinutes(),i="";n<15?i="00":n>=15&&n<30||n>=30&&n<45?i="15":n>=45&&(i="45");var r=e+":"+i;this.form.get("startTime").setValue(r),this.form.get("stopTime").setValue(r)},t.prototype.findInvalidControls=function(){var t=[],e=this.form.controls;for(var n in e)e[n].invalid&&t.push(n);return t.join(", ")},t.prototype.submit=function(){this.formOutput.emit(this.form)},t.prototype.getTranslate=function(t){return this.translate.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(a.d),I.Nb(v.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-form"]],inputs:{form:"form",data:"data",editable:"editable"},outputs:{cancel:"cancel",formOutput:"formOutput"},features:[I.zb],decls:2,vars:1,consts:[["autocomplete","off","class","full-height",3,"dir","formGroup","submit",4,"ngIf"],["autocomplete","off",1,"full-height",3,"dir","formGroup","submit"],[1,"height-full-minus-30","full-width"],["class","margin-b-full text-gray-800 font-full-em text-weight-500 margin-b-half",4,"ngIf"],[1,"full-height","padding-mini-r-l","overflow-y-auto","overflow-x-hide"],[1,"display-flex","margin-r-l-reverse"],[1,"full-width","padding-mini-r-l"],[1,"full-width","font-9-em"],["formControlName","taskName","matInput","","required","","tabindex","1","type","text",1,"full-width",3,"placeholder"],[4,"ngIf"],[1,"half-width","padding-mini-r-l"],[1,"full-width","font-full-em"],["formControlName","boardStatus","tabIndex","2",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"half-width","no-padding-r-l","pos-rel","display-flex","align-items-end"],[1,"font-9-em","pos-abs","top-full-plus-three-tenth",3,"ngClass"],["formControlName","percentage","tabindex","3",1,"full-width","pos-rel","top-half",3,"max","min","step","thumbLabel","tickInterval"],["formControlName","project","tabIndex","4"],["matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel","top-three-tenth",3,"ngClass","src"],["formControlName","assignTo","tabIndex","5"],["class","font-full-em",3,"value",4,"ngFor","ngForOf"],[1,"display-flex","margin-b-full","margin-r-l-reverse"],["formControlName","taskDurationHours","matInput","","required","","tabindex","6","type","number",1,"full-width",3,"placeholder"],["formControlName","taskDurationMinutes","tabIndex","7"],[1,"dpDateStartPicker","quarter-width","padding-mini-r-l"],[1,"dpDatePicker","full-width","font-9-em",3,"dir"],["formControlName","startAt","attachTo",".dpDateStartPicker","autocomplete","off","tabindex","8","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],[1,"quarter-width","padding-mini-r-l"],["formControlName","startTime","tabIndex","9"],[1,"dpDateStopPicker","quarter-width","padding-mini-r-l"],["autocomplete","off","formControlName","stopAt","attachTo",".dpDateStopPicker","tabindex","10","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],["formControlName","stopTime","tabIndex","11"],[1,"full-width","height-80","font-9-em"],["formControlName","taskDesc","matInput","","tabindex","12",3,"placeholder"],["formControlName","trackable","tabIndex","13",3,"color"],["class","display-flex margin-b-full margin-r-l-reverse",4,"ngIf"],[1,"height-30","display-flex","justify-content-end"],["class","display-flex full-height no-bg no-border cursor-pointer text-red-500 line-height-30 font-9-em overflow-hide text-weight-normal","type","button","tabindex","15",3,"click",4,"ngIf"],["class","display-flex full-height green-gradient text-white line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","","tabindex","16","type","submit",3,"disabled",4,"ngIf"],[1,"margin-b-full","text-gray-800","font-full-em","text-weight-500","margin-b-half"],[3,"value"],[1,"task-count",3,"ngClass"],[1,"font-full-em",3,"value"],[1,"display-flex","align-items-center"],["matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel",3,"ngClass","src","error"],[1,"line-height-40"],["formControlName","status","tabIndex","14",3,"color"],["type","button","tabindex","15",1,"display-flex","full-height","no-bg","no-border","cursor-pointer","text-red-500","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],[1,"padding-mini-r-l"],["mat-raised-button","","tabindex","16","type","submit",1,"display-flex","full-height","green-gradient","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"]],template:function(t,e){1&t&&(I.Gc(0,V,231,80,"form",0),I.Ic(1,"\n")),2&t&&I.kc("ngIf",e.form)},directives:[i.k,u.v,u.o,k.b,u.i,y.c,u.c,S.b,u.n,u.g,u.t,y.f,w.a,i.j,i.i,T.a,y.g,u.r,D.a,C.a,y.b,x.m,B.a,_.a],pipes:[a.c],styles:[".task-count.todo[_ngcontent-%COMP%]{color:#f44336}.task-count.inProgress[_ngcontent-%COMP%]{color:#eb9f4c}.task-count.done[_ngcontent-%COMP%]{color:#388e3c}.right-six-tenth[_ngcontent-%COMP%]{right:.6em!important}.left-six-tenth[_ngcontent-%COMP%]{left:.6em!important}"]}),t}(),Q=($=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Z=function(){return(Z=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function tt(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",1),I.Ic(1,"\n  "),I.Tb(2,"app-task-form",2),I.ac("cancel",(function(t){return I.wc(n),I.ec().cancelBtn(t)}))("formOutput",(function(t){return I.wc(n),I.ec().updateForm(t)})),I.Sb(),I.Ic(3,"\n"),I.Sb()}if(2&t){var i=I.ec();I.Bb(2),I.kc("data",i.data)("editable",i.editable)("form",i.form)}}var et=function(t){function e(e,n,i,r,a,o,c,l,u,d){var p=t.call(this,a,c)||this;return p.data=e,p.dialogRef=n,p.api=i,p.fb=r,p.injector=a,p.messageService=o,p.userInfoService=c,p.viewDirection=l,p.refreshLoginService=u,p.loadingIndicatorService=d,p.rtlDirection=!1,p.editable=!1,p.projectsList=[],p.usersList=[],p._subscription=new s.Subscription,p.usersList=p.data.usersList,p.projectsList=p.data.projectsList,p._subscription.add(p.viewDirection.currentDirection.subscribe((function(t){return p.rtlDirection=t}))),p}return Q(e,t),e.prototype.ngOnInit=function(){var t=this;this.createForm().then((function(){t.editable=!0,t.form.enable(),t._subscription.add(t.form.get("assignTo").valueChanges.subscribe((function(e){var n=t.usersList.filter((function(t){return t.adminId===e.adminId})).pop();n&&t.form.get("email").setValue(n.email)})))}))},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({taskId:new u.e(0),taskName:new u.e("",u.u.required),percentage:new u.e(0,u.u.required),assignTo:new u.e("",u.u.required),taskDurationHours:new u.e(0,[u.u.required,u.u.pattern("^[0-9]+")]),taskDurationMinutes:new u.e(0,u.u.required),startAt:new u.e("",u.u.required),stopAt:new u.e("",u.u.required),startTime:new u.e("",u.u.required),stopTime:new u.e("",u.u.required),project:new u.e({},u.u.required),taskDesc:new u.e(""),email:new u.e("0"),boardStatus:new u.e("",u.u.required),taskDateStart:"0000-00-00 00:00:00",taskDateStop:"0000-00-00 00:00:00",assigner:new u.e(t.loggedInUser.email,u.u.required),trackable:new u.e(0)}),e()}))},e.prototype.updateForm=function(t){var e=this;this.form=t,setTimeout((function(){e.submit()}),500)},e.prototype.cancelBtn=function(t){t&&this.dialogRef.close(!1)},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"});var e=Z({},this.form.value);this.form.disable(),this.rtlDirection?(e.startAt=b.from(e.startAt,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD"),e.stopAt=b.from(e.stopAt,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD")):(e.startAt=h(e.startAt,"YYYY/MM/DD").format("YYYY-MM-DD"),e.stopAt=h(e.stopAt,"YYYY/MM/DD").format("YYYY-MM-DD"));var n=Z(Z({},e),{startAt:e.startAt+" "+e.startTime+":00",stopAt:e.stopAt+" "+e.stopTime+":00"});delete n.taskId,this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.createTask(n).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),1===e.result?(t.messageService.showMessage(e.message),t.dialogRef.close(!0)):(t.form.enable(),t.messageService.showMessage(e.message))}),(function(e){e.message&&t.messageService.showMessage(e.message),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e),t.form.enable()})))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(I.Nb(f.a),I.Nb(f.e),I.Nb(d.a),I.Nb(u.d),I.Nb(I.t),I.Nb(p.a),I.Nb(l.a),I.Nb(v.a),I.Nb(g.a),I.Nb(m.a))},e.\u0275cmp=I.Hb({type:e,selectors:[["ng-component"]],features:[I.yb],decls:2,vars:1,consts:[["class","pos-abs left-0 right-0 top-0 bottom-0 padding-full z-index-99",4,"ngIf"],[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99"],[3,"data","editable","form","cancel","formOutput"]],template:function(t,e){1&t&&(I.Gc(0,tt,4,3,"div",0),I.Ic(1,"\n")),2&t&&I.kc("ngIf",e.form)},directives:[i.k,W],encapsulation:2}),e}(c.a),nt=n("LyM2"),it=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rt=function(){return(rt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function at(t,e){if(1&t&&(I.Tb(0,"mat-option",31),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t){var n=e.$implicit;I.kc("value",n.typeName),I.Bb(1),I.Kc("\n                ",I.gc(2,2,n.textName),"\n              ")}}function ot(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.task_name_error"),"\n            "))}function st(t,e){if(1&t&&(I.Tb(0,"mat-option",31),I.Ic(1),I.Sb()),2&t){var n=e.$implicit;I.kc("value",n.projectId),I.Bb(1),I.Kc("\n                ",n.projectName,"\n              ")}}function ct(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.task_project_error"),"\n            "))}function lt(t,e){if(1&t&&(I.Tb(0,"img",32),I.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),I.Sb()),2&t){var n=I.ec(2);I.kc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+n.form.get("userImg").value+".jpg",I.yc)}}function ut(t,e){if(1&t&&(I.Tb(0,"mat-option",31),I.Ic(1,"\n                "),I.Tb(2,"div",33),I.Ic(3,"\n                  "),I.Tb(4,"img",34),I.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),I.Sb(),I.Ic(5,"\n                  "),I.Tb(6,"span",35),I.Ic(7),I.Sb(),I.Ic(8,"\n                "),I.Sb(),I.Ic(9,"\n              "),I.Sb()),2&t){var n=e.$implicit,i=I.ec(2);I.kc("value",n.adminId),I.Bb(4),I.kc("ngClass",i.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+n.email+".jpg",I.yc),I.Bb(3),I.Jc(n.name+" "+n.family)}}function dt(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.assign_to_error"),"\n            "))}function pt(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",36),I.ac("click",(function(t){return I.wc(n),I.ec(2).form.get("dateStart").setValue(""),t.stopPropagation()})),I.Ic(1,"\n              "),I.Tb(2,"mat-icon"),I.Ic(3,"close"),I.Sb(),I.Ic(4,"\n            "),I.Sb()}if(2&t){var i=I.ec(2);I.kc("ngClass",i.rtlDirection?"float-left":"float-right")}}function ft(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"global.date_error"),"\n            "))}function ht(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",36),I.ac("click",(function(t){return I.wc(n),I.ec(2).form.get("dateStop").setValue(""),t.stopPropagation()})),I.Ic(1,"\n              "),I.Tb(2,"mat-icon"),I.Ic(3,"close"),I.Sb(),I.Ic(4,"\n            "),I.Sb()}if(2&t){var i=I.ec(2);I.kc("ngClass",i.rtlDirection?"float-left":"float-right")}}function bt(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"global.date_error"),"\n            "))}function gt(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",1),I.Ic(1,"\n  "),I.Tb(2,"form",2),I.ac("submit",(function(){return I.wc(n),I.ec().submit()})),I.Ic(3,"\n    "),I.Tb(4,"div",3),I.Ic(5,"\n      "),I.Tb(6,"h1",4),I.Ic(7),I.fc(8,"translate"),I.Sb(),I.Ic(9,"\n\n      "),I.Tb(10,"div",5),I.Ic(11,"\n        "),I.Tb(12,"div",6),I.Ic(13,"\n          "),I.Tb(14,"mat-form-field",7),I.Ic(15,"\n            "),I.Tb(16,"mat-label"),I.Ic(17),I.fc(18,"translate"),I.Sb(),I.Ic(19,"\n            "),I.Tb(20,"mat-select",8),I.Ic(21,"\n              "),I.Gc(22,at,3,4,"mat-option",9),I.Ic(23,"\n            "),I.Sb(),I.Ic(24,"\n          "),I.Sb(),I.Ic(25,"\n        "),I.Sb(),I.Ic(26,"\n\n        "),I.Tb(27,"div",6),I.Ic(28,"\n          "),I.Tb(29,"mat-form-field",7),I.Ic(30,"\n            "),I.Ob(31,"input",10),I.fc(32,"translate"),I.Ic(33,"\n            "),I.Tb(34,"mat-label"),I.Ic(35),I.fc(36,"translate"),I.Sb(),I.Ic(37,"\n\n            "),I.Gc(38,ot,3,3,"mat-error",11),I.Ic(39,"\n          "),I.Sb(),I.Ic(40,"\n        "),I.Sb(),I.Ic(41,"\n      "),I.Sb(),I.Ic(42,"\n\n      "),I.Tb(43,"div",5),I.Ic(44,"\n        "),I.Tb(45,"div",6),I.Ic(46,"\n          "),I.Tb(47,"mat-form-field",7),I.Ic(48,"\n            "),I.Tb(49,"mat-label"),I.Ic(50),I.fc(51,"translate"),I.Sb(),I.Ic(52,"\n            "),I.Tb(53,"mat-select",12),I.Ic(54,"\n              "),I.Gc(55,st,2,2,"mat-option",9),I.Ic(56,"\n            "),I.Sb(),I.Ic(57,"\n\n            "),I.Gc(58,ct,3,3,"mat-error",11),I.Ic(59,"\n          "),I.Sb(),I.Ic(60,"\n        "),I.Sb(),I.Ic(61,"\n\n        "),I.Tb(62,"div",6),I.Ic(63,"\n          "),I.Tb(64,"mat-form-field",7),I.Ic(65,"\n            "),I.Gc(66,lt,1,2,"img",13),I.Ic(67,"\n            "),I.Tb(68,"mat-label"),I.Ic(69),I.fc(70,"translate"),I.Sb(),I.Ic(71,"\n            "),I.Tb(72,"mat-select",14),I.Ic(73,"\n              "),I.Gc(74,ut,10,4,"mat-option",9),I.Ic(75,"\n            "),I.Sb(),I.Ic(76,"\n\n            "),I.Gc(77,dt,3,3,"mat-error",11),I.Ic(78,"\n          "),I.Sb(),I.Ic(79,"\n        "),I.Sb(),I.Ic(80,"\n      "),I.Sb(),I.Ic(81,"\n\n      "),I.Tb(82,"div",15),I.Ic(83,"\n        "),I.Tb(84,"div",16),I.Ic(85,"\n          "),I.Tb(86,"mat-form-field",17),I.Ic(87,"\n            "),I.Tb(88,"mat-label"),I.Ic(89),I.fc(90,"translate"),I.Sb(),I.Ic(91,"\n            "),I.Ob(92,"input",18),I.Ic(93,"\n\n            "),I.Gc(94,pt,5,1,"button",19),I.Ic(95,"\n\n            "),I.Gc(96,ft,3,3,"mat-error",11),I.Ic(97,"\n          "),I.Sb(),I.Ic(98,"\n        "),I.Sb(),I.Ic(99,"\n\n        "),I.Tb(100,"div",20),I.Ic(101,"\n          "),I.Tb(102,"mat-form-field",17),I.Ic(103,"\n            "),I.Tb(104,"mat-label"),I.Ic(105),I.fc(106,"translate"),I.Sb(),I.Ic(107,"\n            "),I.Ob(108,"input",21),I.Ic(109,"\n\n            "),I.Gc(110,ht,5,1,"button",19),I.Ic(111,"\n\n            "),I.Gc(112,bt,3,3,"mat-error",11),I.Ic(113,"\n          "),I.Sb(),I.Ic(114,"\n        "),I.Sb(),I.Ic(115,"\n      "),I.Sb(),I.Ic(116,"\n\n      "),I.Tb(117,"div",22),I.Ic(118,"\n        "),I.Tb(119,"div",6),I.Ic(120,"\n          "),I.Tb(121,"mat-slide-toggle",23),I.Ic(122,"\n            "),I.Tb(123,"span",24),I.Ic(124),I.fc(125,"translate"),I.Sb(),I.Ic(126,"\n          "),I.Sb(),I.Ic(127,"\n        "),I.Sb(),I.Ic(128,"\n\n        "),I.Tb(129,"div",6),I.Ic(130,"\n          "),I.Tb(131,"mat-slide-toggle",25),I.Ic(132,"\n            "),I.Tb(133,"span",24),I.Ic(134),I.fc(135,"translate"),I.Sb(),I.Ic(136,"\n          "),I.Sb(),I.Ic(137,"\n        "),I.Sb(),I.Ic(138,"\n      "),I.Sb(),I.Ic(139,"\n    "),I.Sb(),I.Ic(140,"\n\n    "),I.Tb(141,"div",26),I.Ic(142,"\n      "),I.Tb(143,"button",27),I.Ic(144,"\n        "),I.Tb(145,"mat-icon",28),I.Ic(146,"check"),I.Sb(),I.Ic(147,"\n        "),I.Tb(148,"span",29),I.Ic(149),I.fc(150,"translate"),I.Sb(),I.Ic(151,"\n      "),I.Sb(),I.Ic(152,"\n\n      "),I.Tb(153,"button",30),I.ac("click",(function(){return I.wc(n),I.ec().dialogRef.close(!1)})),I.Ic(154,"\n        "),I.Tb(155,"span",29),I.Ic(156),I.fc(157,"translate"),I.Sb(),I.Ic(158,"\n      "),I.Sb(),I.Ic(159,"\n    "),I.Sb(),I.Ic(160,"\n  "),I.Sb(),I.Ic(161,"\n"),I.Sb()}if(2&t){var i=I.ec();I.kc("dir",i.rtlDirection?"rtl":"ltr"),I.Bb(2),I.kc("formGroup",i.form),I.Bb(5),I.Kc("\n        ",I.gc(8,32,"tasks.task_filter.tasks_filter"),"\n      "),I.Bb(10),I.Jc(I.gc(18,34,"tasks.task_filter.filter_types")),I.Bb(5),I.kc("ngForOf",i.filterTypes),I.Bb(9),I.lc("placeholder",I.gc(32,36,"tasks.form.task_name")),I.Bb(4),I.Kc("\n              ",I.gc(36,38,"tasks.form.task_name"),"\n            "),I.Bb(3),I.kc("ngIf",!i.form.get("taskName").valid&&i.form.get("taskName").touched),I.Bb(12),I.Jc(I.gc(51,40,"tasks.form.task_project")),I.Bb(5),I.kc("ngForOf",i.projectsList),I.Bb(3),I.kc("ngIf",!i.form.get("projectId").valid&&i.form.get("projectId").touched),I.Bb(8),I.kc("ngIf",i.form.get("adminId").valid),I.Bb(3),I.Jc(I.gc(70,42,"tasks.form.assign_to")),I.Bb(5),I.kc("ngForOf",i.usersList),I.Bb(3),I.kc("ngIf",!i.form.get("adminId").valid&&i.form.get("adminId").touched),I.Bb(9),I.kc("dir",i.rtlDirection?"rtl":"ltr"),I.Bb(3),I.Jc(I.gc(90,44,"global.from_date")),I.Bb(3),I.kc("dpDayPicker",i.datePicker),I.Bb(2),I.kc("ngIf",i.form.get("dateStart").touched&&i.form.get("dateStart").value.length),I.Bb(2),I.kc("ngIf",!i.form.get("dateStart").valid&&i.form.get("dateStart").touched),I.Bb(6),I.kc("dir",i.rtlDirection?"rtl":"ltr"),I.Bb(3),I.Jc(I.gc(106,46,"global.to_date")),I.Bb(3),I.kc("dpDayPicker",i.datePicker),I.Bb(2),I.kc("ngIf",i.form.get("dateStop").touched&&i.form.get("dateStop").value.length),I.Bb(2),I.kc("ngIf",!i.form.get("dateStop").valid&&i.form.get("dateStop").touched),I.Bb(9),I.kc("color","primary"),I.Bb(3),I.Jc(I.gc(125,48,"tasks.task_filter.in_progress_tasks")),I.Bb(7),I.kc("color","primary"),I.Bb(3),I.Jc(I.gc(135,50,"tasks.task_filter.show_disabled_task")),I.Bb(9),I.kc("disabled",!i.form.valid&&i.form.touched),I.Bb(6),I.Jc(I.gc(150,52,"global.submit")),I.Bb(7),I.Jc(I.gc(157,54,"global.dismiss"))}}var mt=function(t){function e(e,n,i,r,a,o,c,l,u,d,p){var f=t.call(this,a,l)||this;return f.data=e,f.dialogRef=n,f.api=i,f.fb=r,f.injector=a,f.translate=o,f.messageService=c,f.userInfoService=l,f.viewDirection=u,f.refreshLoginService=d,f.loadingIndicatorService=p,f.filterData={userId:0,adminId:0,dateStart:"",dateStop:"",projectId:0,taskName:"",email:"0",userImg:"0",type:"",status:0,percentageStatus:!1},f.projectsList=[],f.usersList=[],f.filterTypes=[{index:0,typeName:"byCreateDate",textName:"tasks.task_filter.by_create_date"},{index:1,typeName:"byProject",textName:"tasks.task_filter.by_project"},{index:2,typeName:"byUser",textName:"tasks.task_filter.by_user"},{index:3,typeName:"byStartDate",textName:"tasks.task_filter.by_start_date"},{index:4,typeName:"byStopDate",textName:"tasks.task_filter.by_stop_date"},{index:5,typeName:"byUserStartDate",textName:"tasks.task_filter.by_user_start_date"},{index:6,typeName:"byUserStopDate",textName:"tasks.task_filter.by_user_stop_date"},{index:7,typeName:"byStartedTask",textName:"tasks.task_filter.by_started_task"},{index:8,typeName:"byPostponed",textName:"tasks.task_filter.by_postponed"}],f.datePicker=null,f._subscription=new s.Subscription,f._subscription.add(f.viewDirection.currentDirection.subscribe((function(t){f.rtlDirection=t,f.form&&f.setupDatepickers()}))),f.usersList=f.data.usersList,f.projectsList=f.data.projectsList,f.filterData=f.data.filterData,f}return it(e,t),e.prototype.ngOnInit=function(){var t=this;this.createForm().then((function(){t.form.patchValue({taskName:t.filterData.taskName?t.filterData.taskName:"",projectId:t.filterData.projectId?t.filterData.projectId:0,dateStart:t.filterData.dateStart?t.filterData.dateStart:"",dateStop:t.filterData.dateStop?t.filterData.dateStop:"",adminId:t.filterData.adminId?t.filterData.adminId:0,email:t.filterData.email?t.filterData.email:t.loggedInUser.email,userImg:t.filterData.userImg?t.filterData.userImg:"0",type:t.filterData.type?t.filterData.type:null,status:t.filterData.status?t.filterData.status:0,percentageStatus:!!t.filterData.percentageStatus&&t.filterData.percentageStatus}),t.form.markAllAsTouched(),setTimeout((function(){return t.checkFormValidation()}),1e3),t._subscription.add(t.form.get("adminId").valueChanges.subscribe((function(e){var n=t.usersList.filter((function(t){return t.adminId===e})).pop();n&&t.form.get("userImg").setValue(n.email)})))})),setTimeout((function(){-1===t.usersList.findIndex((function(t){return 0===t.adminId}))&&t.usersList.splice(0,0,{adminId:0,name:t.getTranslate("tasks.task_filter.all"),family:"",email:"0"}),-1===t.projectsList.findIndex((function(t){return 0===t.projectId}))&&t.projectsList.splice(0,0,{projectId:0,projectName:t.getTranslate("tasks.task_filter.all")})}),500)},e.prototype.ngAfterViewInit=function(){this.setupDatepickers()},e.prototype.setupDatepickers=function(){this.datePicker={locale:this.rtlDirection?"fa":"en",firstDayOfWeek:this.rtlDirection?"sa":"mo",format:"YYYY/MM/DD",closeOnSelect:!0,closeOnSelectDelay:150}},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({userId:new u.e(0,u.u.required),userImg:new u.e("0"),email:new u.e(t.loggedInUser.email),taskName:new u.e(""),projectId:new u.e(0),dateStart:new u.e(""),dateStop:new u.e(""),type:new u.e("byCreateDate",u.u.required),adminId:new u.e(0),page:new u.e("-1"),status:new u.e(0),percentageStatus:new u.e(!1)}),e(!0)}))},e.prototype.checkFormValidation=function(){var t=this;"byProject"!==this.form.get("type").value&&"byUser"!==this.form.get("type").value&&this.dateRequiredValidation(),this._subscription.add(this.form.valueChanges.subscribe((function(e){var n=t.form.get("projectId"),i=t.form.get("adminId");switch(e.type){case"byProject":t.resetFormValidation(),0===n.value&&(n.setErrors({incorrect:!0}),n.markAsTouched());break;case"byCreateDate":case"byStartDate":case"byStopDate":case"byUserStartDate":case"byUserStopDate":t.dateRequiredValidation();break;case"byUser":t.resetFormValidation(),0===i.value&&(i.setErrors({incorrect:!0}),i.markAsTouched());break;default:t.resetFormValidation()}})))},e.prototype.dateRequiredValidation=function(){var t=this.form.get("dateStart"),e=this.form.get("dateStop");this.resetFormValidation(),(""===t.value||""===e.value||""===t.value&&""!==e.value||""!==t.value&&""===e.value)&&(t.setErrors({incorrect:!0}),e.setErrors({incorrect:!0}),t.markAsTouched(),e.markAsTouched())},e.prototype.resetFormValidation=function(){this.form.get("projectId").setErrors(null),this.form.get("dateStart").setErrors(null),this.form.get("dateStop").setErrors(null),this.form.get("adminId").setErrors(null)},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"});var e=rt({},this.form.value);this.rtlDirection&&("Invalid date"!==b(e.dateStart).format("YYYY/MM/DD")&&(e.dateStart=b.from(e.dateStart,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD")),"Invalid date"!==b(e.dateStop).format("YYYY/MM/DD")&&(e.dateStop=b.from(e.dateStop,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD"))),this.filterData=rt({},this.form.value),0===e.adminId&&delete e.adminId,0===e.projectId&&delete e.projectId,""===e.taskName&&delete e.taskName,""===e.dateStart&&delete e.dateStart,""===e.dateStop&&delete e.dateStop,!1===e.percentageStatus&&delete e.percentageStatus,0===e.status&&delete e.status,this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.form.disable(),this._subscription.add(this.api.filterTask(e).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),1===e.result&&t.dialogRef.close({result:1,filterData:t.filterData,content:e.content}),t.form.enable(),t.messageService.showMessage(e.message)}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.getTranslate=function(t){return this.translate.instant(t)},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(I.Nb(f.a),I.Nb(f.e),I.Nb(d.a),I.Nb(u.d),I.Nb(I.t),I.Nb(a.d),I.Nb(p.a),I.Nb(l.a),I.Nb(v.a),I.Nb(g.a),I.Nb(m.a))},e.\u0275cmp=I.Hb({type:e,selectors:[["app-task-filter"]],features:[I.yb],decls:2,vars:1,consts:[["class","pos-abs left-0 right-0 top-0 bottom-0 padding-full z-index-99",3,"dir",4,"ngIf"],[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99",3,"dir"],["autocomplete","off",1,"full-height",3,"formGroup","submit"],[1,"height-full-minus-30","full-width"],[1,"margin-b-full","text-gray-800","font-full-em","text-weight-500","margin-b-half"],[1,"display-flex","margin-r-l-reverse"],[1,"half-width","padding-r-l"],[1,"full-width","font-9-em"],["formControlName","type","required","","tabIndex","1"],["class","font-full-em",3,"value",4,"ngFor","ngForOf"],["formControlName","taskName","matInput","","tabindex","2","type","text",1,"full-width",3,"placeholder"],[4,"ngIf"],["formControlName","projectId","tabIndex","3"],["class","width-20 height-20 round-corner-all pos-rel top-three-tenth","matPrefix","",3,"ngClass","src","error",4,"ngIf"],["formControlName","adminId","tabIndex","4"],[1,"display-flex","margin-r-l-reverse","margin-b-full"],[1,"dpDateStartPicker","half-width","padding-r-l"],[1,"dpDatePicker","full-width","font-9-em",3,"dir"],["formControlName","dateStart","tabindex","5","autocomplete","off","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],["aria-label","Clear","class","close-icon pos-rel top-half","mat-button","","mat-icon-button","","matSuffix","","type","button",3,"ngClass","click",4,"ngIf"],[1,"dpDateStopPicker","half-width","padding-r-l"],["formControlName","dateStop","tabindex","6","autocomplete","off","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],[1,"display-flex","margin-r-l-reverse","margin-t-full-2"],["formControlName","percentageStatus",3,"color"],[1,"font-9-em"],["formControlName","status",3,"color"],[1,"height-30","full-width","display-flex","flex-direction-row-reverse"],["mat-raised-button","","tabindex","13","type","submit",1,"green-gradient","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["type","button",1,"no-bg","no-border","cursor-pointer","text-red-500","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],[1,"font-full-em",3,"value"],["matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel","top-three-tenth",3,"ngClass","src","error"],[1,"display-flex","align-items-center"],["matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel",3,"ngClass","src","error"],[1,"line-height-40"],["aria-label","Clear","mat-button","","mat-icon-button","","matSuffix","","type","button",1,"close-icon","pos-rel","top-half",3,"ngClass","click"]],template:function(t,e){1&t&&(I.Gc(0,gt,162,56,"div",0),I.Ic(1,"\n")),2&t&&I.kc("ngIf",e.form)},directives:[i.k,k.b,u.v,u.o,u.i,y.c,y.f,w.a,u.n,u.g,u.t,i.j,u.c,S.b,D.a,C.a,B.a,_.a,x.m,y.b,y.g,i.i,y.h],pipes:[a.c],encapsulation:2}),e}(c.a),vt=n("+Ibf"),It=n("0d0Z"),kt=n("7RJT"),yt=function(){function t(){this._defaultButtonSheetData=null,this.buttonSheetData=new kt.BehaviorSubject(this._defaultButtonSheetData),this.currentButtonSheetData=this.buttonSheetData.asObservable()}return t.prototype.changeButtonSheetData=function(t){var e=this;this.buttonSheetData.next(t),setTimeout((function(){e.buttonSheetData.next(null)}),500)},t.\u0275prov=I.Jb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),St=["oBottomSheet"],wt=["container"],Tt=function(){function t(t,e){this.renderer=t,this.cfr=e}return t.prototype.toggleBottomSheet=function(t,e){var n=this;void 0===e&&(e=!0),this.container.clear();var i=this.oBottomSheet.nativeElement.parentNode.parentNode,r=this.oBottomSheet.nativeElement;if(e){this.renderer.addClass(i,"active"),this.renderer.setStyle(r,"height",t.height),this.renderer.setStyle(r,"width",t.width),this.renderer.setStyle(i,"z-index","5");var a=this.cfr.resolveComponentFactory(t.component);this.container.createComponent(a).instance.bottomSheetData=t}else this.renderer.removeClass(i,"active"),this.renderer.setStyle(r,"height","0"),this.renderer.setStyle(r,"width","0"),setTimeout((function(){return n.renderer.setStyle(i,"z-index","-1")}),100)},t.prototype.close=function(t){this.toggleBottomSheet(null,!1)},t.\u0275fac=function(e){return new(e||t)(I.Nb(I.G),I.Nb(I.j))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-bottom-sheet"]],viewQuery:function(t,e){if(1&t&&(I.Oc(St,!0),I.Oc(wt,!0,I.R)),2&t){var n=void 0;I.rc(n=I.bc())&&(e.oBottomSheet=n.first),I.rc(n=I.bc())&&(e.container=n.first)}},decls:12,vars:0,consts:[[1,"o-bottom-sheet-container","full-width","full-height"],[1,"o-bottom-sheet-backdrop","full-width","full-height",3,"click"],[1,"o-bottom-sheet-content","overflow-hide","pos-abs","margin-auto","bottom-0","right-0","left-0","round-corner-top-left","round-corner-top-right"],["oBottomSheet",""],[1,"o-bottom-sheet-comp"],["container",""]],template:function(t,e){1&t&&(I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Tb(2,"div",1),I.ac("click",(function(){return e.close()})),I.Sb(),I.Ic(3,"\n\n  "),I.Tb(4,"div",2,3),I.Ic(6,"\n    "),I.Ob(7,"div",4,5),I.Ic(9,"\n  "),I.Sb(),I.Ic(10,"\n"),I.Sb(),I.Ic(11,"\n"))},styles:["[_nghost-%COMP%]{position:absolute;right:0;left:0;bottom:0;width:100%;height:100%;z-index:-1}[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{transition:background .2s!important;background:transparent}.active[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}[_nghost-%COMP%]   .o-bottom-sheet-content[_ngcontent-%COMP%]{transition:height .1s!important;box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);background-color:transparent;height:0;width:0}"]}),t}(),Dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ct=function(){return(Ct=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function xt(t,e){if(1&t){var n=I.Ub();I.Tb(0,"mat-option",22),I.ac("onSelectionChange",(function(t){I.wc(n);var i=e.$implicit;return I.ec().updateImage(t,i)})),I.Ic(1,"\n                "),I.Tb(2,"div",23),I.Ic(3,"\n                  "),I.Tb(4,"img",24),I.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),I.Sb(),I.Ic(5,"\n                  "),I.Tb(6,"span",25),I.Ic(7),I.Sb(),I.Ic(8,"\n                "),I.Sb(),I.Ic(9,"\n              "),I.Sb()}if(2&t){var i=e.$implicit,r=I.ec();I.kc("value",i.adminId),I.Bb(4),I.kc("ngClass",r.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+i.email+".jpg",I.yc),I.Bb(3),I.Jc(i.name+" "+i.family)}}function Bt(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.assign_to_error"),"\n            "))}function _t(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",26),I.ac("click",(function(){return I.wc(n),I.ec().form.get("dateStart").setValue("")})),I.Ic(1,"\n              "),I.Tb(2,"mat-icon"),I.Ic(3,"close"),I.Sb(),I.Ic(4,"\n            "),I.Sb()}}function Lt(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"global.date_error"),"\n            "))}function Nt(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.form.assign_to_error"),"\n            "))}function Ot(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",26),I.ac("click",(function(){return I.wc(n),I.ec().form.get("dateStop").setValue("")})),I.Ic(1,"\n              "),I.Tb(2,"mat-icon"),I.Ic(3,"close"),I.Sb(),I.Ic(4,"\n            "),I.Sb()}}function jt(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"global.date_error"),"\n            "))}var Mt=function(t){function e(e,n,i,r,a,o,c){var l=t.call(this,n,r)||this;return l.data=e,l.injector=n,l.apiService=i,l.userInfoService=r,l.refreshLoginService=a,l.loadingIndicatorService=o,l.dialogRef=c,l._subscription=new s.Subscription,l.usersList=l.data.usersList,l.loginData=l.data.loginData,l.rtlDirection=l.data.rtlDirection,l}return Dt(e,t),e.prototype.ngOnInit=function(){var t=this;this.createForm().then((function(){t._subscription.add(t.form.get("adminId").valueChanges.subscribe((function(e){var n=t.usersList.filter((function(t){return t.adminId===e})).pop();n&&t.form.get("userImg").setValue(n.email)})))}))},e.prototype.ngAfterViewInit=function(){this.setupDatepickers()},e.prototype.setupDatepickers=function(){this.datePicker={locale:this.rtlDirection?"fa":"en",firstDayOfWeek:this.rtlDirection?"sa":"mo",format:"YYYY/MM/DD",closeOnSelect:!0,closeOnSelectDelay:150}},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=new u.h({adminId:new u.e(null,u.u.required),dateStart:new u.e("",u.u.required),dateStop:new u.e("",u.u.required),userImg:new u.e("0"),email:new u.e(t.loggedInUser.email)}),e()}))},e.prototype.updateImage=function(t,e){t.isUserInput&&(this.userSelected=e)},e.prototype.closeDialog=function(t){this.dialogRef.close(t)},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"});var e=Ct({},this.form.value);this.rtlDirection?(e.dateStart=b.from(e.dateStart,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD"),e.dateStop=b.from(e.dateStop,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD")):(e.dateStart=h(e.dateStart,"YYYY/MM/DD").format("YYYY-MM-DD"),e.dateStop=h(e.dateStop,"YYYY/MM/DD").format("YYYY-MM-DD")),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.form.disable(),this._subscription.add(this.apiService.boardsCalendarDurationTask(e).subscribe((function(n){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"});try{if(1===n.result){var i=[];n.content[0].map((function(t){var e={title:t.timediff,start:new Date(t.startDate),end:new Date(t.startDate)};i.push(e)})),t.sumTime=n.content[1][0].timeSum,t.dialogRef.close({sumTime:t.sumTime,calendarEvent:i,dateStart:e.dateStart,userSelected:t.userSelected,filterData:e})}else t.form.enable()}catch(r){console.log(r)}}),(function(e){t.form.enable(),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(I.Nb(f.a),I.Nb(I.t),I.Nb(d.a),I.Nb(l.a),I.Nb(g.a),I.Nb(m.a),I.Nb(f.e))},e.\u0275cmp=I.Hb({type:e,selectors:[["app-task-calendar-filter"]],inputs:{sumTime:"sumTime",calendarComponent:"calendarComponent"},features:[I.yb],decls:92,vars:34,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99",3,"dir"],["autocomplete","off",1,"full-height",3,"formGroup","submit"],[1,"height-full-minus-30","full-width"],[1,"margin-b-full","text-gray-800","font-full-em","text-weight-500","margin-b-half"],[1,"display-flex","margin-r-l-reverse"],[1,"full-width","padding-r-l"],[1,"full-width","font-8-em"],["matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel","top-three-tenth",3,"ngClass","src"],["formControlName","adminId","tabIndex","1"],["class","font-full-em",3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"dpDateStartPicker","half-width","padding-r-l"],[1,"dpDatePicker","full-width","font-8-em",3,"dir"],["formControlName","dateStart","tabindex","2","autocomplete","off","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],["aria-label","Clear","class","close-icon pos-rel top-half float-left","mat-button","","mat-icon-button","","matSuffix","","type","button",3,"click",4,"ngIf"],[1,"dpDateStopPicker","half-width","padding-r-l"],["formControlName","dateStop","tabindex","6","autocomplete","off","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],[1,"height-30","full-width","display-flex","flex-direction-row-reverse"],["disabled","","mat-raised-button","","tabindex","13","type","submit",1,"green-gradient","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["type","button",1,"no-bg","no-border","cursor-pointer","text-red-500","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],[1,"font-full-em",3,"value","onSelectionChange"],[1,"display-flex","align-items-center"],["matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel",3,"ngClass","src","error"],[1,"line-height-40"],["aria-label","Clear","mat-button","","mat-icon-button","","matSuffix","","type","button",1,"close-icon","pos-rel","top-half","float-left",3,"click"]],template:function(t,e){1&t&&(I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Tb(2,"form",1),I.ac("submit",(function(){return e.submit()})),I.Ic(3,"\n    "),I.Tb(4,"div",2),I.Ic(5,"\n      "),I.Tb(6,"h1",3),I.Ic(7),I.fc(8,"translate"),I.Sb(),I.Ic(9,"\n      "),I.Tb(10,"div",4),I.Ic(11,"\n        "),I.Tb(12,"div",5),I.Ic(13,"\n          "),I.Tb(14,"mat-form-field",6),I.Ic(15,"\n            "),I.Ob(16,"img",7),I.Ic(17,"\n            "),I.Tb(18,"mat-label"),I.Ic(19),I.fc(20,"translate"),I.Sb(),I.Ic(21,"\n            "),I.Tb(22,"mat-select",8),I.Ic(23,"\n              "),I.Gc(24,xt,10,4,"mat-option",9),I.Ic(25,"\n            "),I.Sb(),I.Ic(26,"\n\n            "),I.Gc(27,Bt,3,3,"mat-error",10),I.Ic(28,"\n          "),I.Sb(),I.Ic(29,"\n        "),I.Sb(),I.Ic(30,"\n      "),I.Sb(),I.Ic(31,"\n      "),I.Tb(32,"div",4),I.Ic(33,"\n        "),I.Tb(34,"div",11),I.Ic(35,"\n          "),I.Tb(36,"mat-form-field",12),I.Ic(37,"\n            "),I.Tb(38,"mat-label"),I.Ic(39),I.fc(40,"translate"),I.Sb(),I.Ic(41,"\n            "),I.Ob(42,"input",13),I.Ic(43,"\n\n            "),I.Gc(44,_t,5,0,"button",14),I.Ic(45,"\n\n            "),I.Gc(46,Lt,3,3,"mat-error",10),I.Ic(47,"\n\n            "),I.Gc(48,Nt,3,3,"mat-error",10),I.Ic(49,"\n          "),I.Sb(),I.Ic(50,"\n        "),I.Sb(),I.Ic(51,"\n        "),I.Tb(52,"div",15),I.Ic(53,"\n          "),I.Tb(54,"mat-form-field",12),I.Ic(55,"\n            "),I.Tb(56,"mat-label"),I.Ic(57),I.fc(58,"translate"),I.Sb(),I.Ic(59,"\n            "),I.Ob(60,"input",16),I.Ic(61,"\n\n            "),I.Gc(62,Ot,5,0,"button",14),I.Ic(63,"\n\n            "),I.Gc(64,jt,3,3,"mat-error",10),I.Ic(65,"\n          "),I.Sb(),I.Ic(66,"\n        "),I.Sb(),I.Ic(67,"\n      "),I.Sb(),I.Ic(68,"\n    "),I.Sb(),I.Ic(69,"\n    "),I.Tb(70,"div",17),I.Ic(71,"\n      "),I.Tb(72,"button",18),I.Ic(73,"\n        "),I.Tb(74,"mat-icon",19),I.Ic(75,"check"),I.Sb(),I.Ic(76,"\n        "),I.Tb(77,"span",20),I.Ic(78),I.fc(79,"translate"),I.Sb(),I.Ic(80,"\n      "),I.Sb(),I.Ic(81,"\n      "),I.Tb(82,"button",21),I.ac("click",(function(){return e.closeDialog(!1)})),I.Ic(83,"\n        "),I.Tb(84,"span",20),I.Ic(85),I.fc(86,"translate"),I.Sb(),I.Ic(87,"\n      "),I.Sb(),I.Ic(88,"\n    "),I.Sb(),I.Ic(89,"\n  "),I.Sb(),I.Ic(90,"\n"),I.Sb(),I.Ic(91,"\n")),2&t&&(I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(2),I.kc("formGroup",e.form),I.Bb(5),I.Kc("\n        ",I.gc(8,22,"tasks.task_filter.tasks_filter_calendar"),"\n      "),I.Bb(9),I.kc("ngClass",e.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+e.form.get("userImg").value+".jpg",I.yc),I.Bb(3),I.Jc(I.gc(20,24,"tasks.form.assign_to")),I.Bb(5),I.kc("ngForOf",e.usersList),I.Bb(3),I.kc("ngIf",!e.form.get("adminId").valid&&e.form.get("adminId").touched),I.Bb(9),I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(3),I.Jc(I.gc(40,26,"global.from_date")),I.Bb(3),I.kc("dpDayPicker",e.datePicker),I.Bb(2),I.kc("ngIf",e.form.get("dateStart").touched&&e.form.get("dateStart").value.length),I.Bb(2),I.kc("ngIf",!e.form.get("dateStart").valid&&e.form.get("dateStart").touched),I.Bb(2),I.kc("ngIf",e.form.get("dateStart").value>e.form.get("dateStop").value),I.Bb(6),I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(3),I.Jc(I.gc(58,28,"global.to_date")),I.Bb(3),I.kc("dpDayPicker",e.datePicker),I.Bb(2),I.kc("ngIf",e.form.get("dateStop").touched&&e.form.get("dateStop").value.length),I.Bb(2),I.kc("ngIf",!e.form.get("dateStop").valid&&e.form.get("dateStop").touched),I.Bb(8),I.kc("disabled",!e.form.valid),I.Bb(6),I.Jc(I.gc(79,30,"global.submit")),I.Bb(7),I.Jc(I.gc(86,32,"global.dismiss")))},directives:[k.b,u.v,u.o,u.i,y.c,y.g,i.i,y.f,w.a,u.n,u.g,i.j,i.k,u.c,S.b,D.a,B.a,_.a,x.m,y.b,y.h],pipes:[a.c],encapsulation:2}),e}(c.a),Pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ft=function(){return(Ft=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},At=["bottomSheet"];function Et(t,e){if(1&t&&(I.Ic(0,"\n          "),I.Tb(1,"mat-icon",18),I.Ic(2),I.Sb(),I.Ic(3,"\n          "),I.Tb(4,"span",8),I.Ic(5),I.Sb(),I.Ic(6,"\n        ")),2&t){var n=I.ec().$implicit;I.Bb(2),I.Kc("\n            ",n.icon,"\n          "),I.Bb(3),I.Jc(n.name)}}function Yt(t,e){1&t&&(I.Tb(0,"mat-tab"),I.Ic(1,"\n        "),I.Gc(2,Et,7,2,"ng-template",17),I.Ic(3,"\n      "),I.Sb())}function Rt(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",19),I.ac("click",(function(){return I.wc(n),I.ec().resetFilter()})),I.Ic(1,"\n        "),I.Tb(2,"mat-icon",20),I.Ic(3,"close"),I.Sb(),I.Ic(4,"\n        "),I.Tb(5,"span",21),I.Ic(6),I.fc(7,"translate"),I.Sb(),I.Ic(8,"\n      "),I.Sb()}2&t&&(I.Bb(6),I.Jc(I.gc(7,1,"global.reset_filter")))}function Ut(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",22),I.ac("click",(function(){return I.wc(n),I.ec().addNewTask()})),I.Ic(1,"\n        "),I.Tb(2,"mat-icon",7),I.Ic(3,"add"),I.Sb(),I.Ic(4,"\n        "),I.Tb(5,"span",8),I.Ic(6),I.fc(7,"translate"),I.Sb(),I.Ic(8,"\n      "),I.Sb()}if(2&t){var i=I.ec();I.kc("disabled",!i.taskEssentialInfo||i.disableButton),I.Bb(6),I.Jc(I.gc(7,2,"tasks.main.add_new_task"))}}function qt(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",23),I.Ic(1,"\n        "),I.Tb(2,"app-task-board",24),I.ac("pushTaskEssentialInfo",(function(t){return I.wc(n),I.ec().getTaskEssentialInfo(t)}))("triggerBottomSheet",(function(t){return I.wc(n),I.ec().openButtonSheet(t)}))("resetFilter",(function(t){return I.wc(n),I.ec().makeFilterReset(t)})),I.Ic(3,"\n        "),I.Sb(),I.Ic(4,"\n      "),I.Sb()}if(2&t){var i=I.ec();I.Bb(2),I.kc("filterBoards",i.filteredBoardsData)("pushTaskToBoard",i.pushTaskToBoard)("refreshData",i.refreshBoardData)("rtlDirection",i.rtlDirection)}}function Gt(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",25),I.Ic(1,"\n        "),I.Tb(2,"app-task-calendar",26),I.ac("onTabLoaded",(function(t){return I.wc(n),I.ec().doSomething(t)})),I.Sb(),I.Ic(3,"\n      "),I.Sb()}if(2&t){var i=I.ec();I.Bb(2),I.kc("calendarParameters",i.calendarParameters)("rtlDirection",i.rtlDirection)}}function Ht(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",27),I.Ic(1,"\n    "),I.Tb(2,"app-task-current",28),I.ac("pushTaskToBoard",(function(t){return I.wc(n),I.ec().getTaskToBoardData(t)}))("triggerBottomSheet",(function(t){return I.wc(n),I.ec().openButtonSheet(t)})),I.Ic(3,"\n    "),I.Sb(),I.Ic(4,"\n  "),I.Sb()}if(2&t){var i=I.ec();I.Bb(2),I.kc("rtlDirection",i.rtlDirection)("taskEssentialInfo",i.taskEssentialInfo)}}function zt(t,e){1&t&&(I.Tb(0,"div",29),I.Ic(1,"\n    "),I.Tb(2,"div",30),I.Ic(3,"\n      "),I.dc(),I.Tb(4,"svg",31),I.Ic(5,"\n        "),I.Tb(6,"rect",32),I.Ic(7,"\n          "),I.Ob(8,"animate",33),I.Ic(9,"\n          "),I.Ob(10,"animate",34),I.Ic(11,"\n        "),I.Sb(),I.Ic(12,"\n        "),I.Tb(13,"rect",35),I.Ic(14,"\n          "),I.Ob(15,"animate",36),I.Ic(16,"\n          "),I.Ob(17,"animate",37),I.Ic(18,"\n        "),I.Sb(),I.Ic(19,"\n        "),I.Tb(20,"rect",38),I.Ic(21,"\n          "),I.Ob(22,"animate",39),I.Ic(23,"\n          "),I.Ob(24,"animate",40),I.Ic(25,"\n        "),I.Sb(),I.Ic(26,"\n      "),I.Sb(),I.Ic(27,"\n\n      "),I.cc(),I.Tb(28,"span",41),I.Ic(29),I.fc(30,"translate"),I.Sb(),I.Ic(31,"\n    "),I.Sb(),I.Ic(32,"\n  "),I.Sb()),2&t&&(I.Bb(29),I.Jc(I.gc(30,1,"global.loading")))}var Jt=function(t){return{"margin-r-l":t}},Kt=function(t){function e(e,n,i,r,a,o,c,l,u,d){var p=t.call(this,n,r)||this;return p.dialog=e,p.injector=n,p.translate=i,p.userInfoService=r,p.viewDirection=a,p.currentTaskService=o,p.eventHandlerService=c,p.windowManagerService=l,p.buttonSheetDataService=u,p.loadingIndicatorService=d,p.loadingIndicator={status:!1,serviceName:"project"},p.doResetFilter=!1,p.disableButton=!1,p.activeTab=0,p.refreshBoardData=!1,p.filterData=null,p.tabs=[],p.calendarParameters={},p.currentTasks=null,p.projectsList=[],p.usersList=[],p._subscription=new s.Subscription,p._subscription.add(p.viewDirection.currentDirection.subscribe((function(t){p.rtlDirection=t,p.changeMainTabLanguage()}))),p._subscription.add(p.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return p.loadingIndicator=t}))),p._subscription.add(p.currentTaskService.currentTask.subscribe((function(t){return p.currentTasks=t}))),p}return Pt(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.changeMainTabLanguage(),this.filterData={userId:0,userImg:"0",adminId:0,dateStart:"",dateStop:"",projectId:0,taskName:"",type:"",email:this.loggedInUser.email,status:0},this._subscription.add(this.buttonSheetDataService.currentButtonSheetData.subscribe((function(e){null!==e&&(e.bottomSheetRef=t.bottomSheet,t.bottomSheet.toggleBottomSheet(e))})))},e.prototype.changeMainTabLanguage=function(){var t=this;setTimeout((function(){t.tabs=[{name:t.getTranslate("tasks.main.boards"),icon:"view_week",id:"boards"},{name:t.getTranslate("tasks.main.calendar"),icon:"event_available",id:"calendar"}]}),200)},e.prototype.addNewTask=function(){var t=this;this.disableButton=!0;var e=this.dialog.open(et,{data:{action:"add",usersList:this.taskEssentialInfo.usersList,projectsList:this.taskEssentialInfo.projectsList},autoFocus:!1,width:"50%",height:"560px"});this.windowManagerService.dialogOnTop(e.id),this._subscription.add(e.afterClosed().subscribe((function(e){t.disableButton=!1,e&&(t.refreshBoardData=!0,setTimeout((function(){return t.refreshBoardData=!1}),500))})))},e.prototype.tabChange=function(t){this.activeTab=t.index,this.doResetFilter=!1},e.prototype.getTaskEssentialInfo=function(t){this.taskEssentialInfo=t},e.prototype.getTaskToBoardData=function(t){this.pushTaskToBoard=t},e.prototype.showCalendarFilter=function(){var t=this,e=this.dialog.open(Mt,{data:{filterData:this.filterData,usersList:this.taskEssentialInfo.usersList,projectsList:this.taskEssentialInfo.projectsList,loginData:this.loginData,rtlDirection:this.rtlDirection},autoFocus:!1,width:"500px",height:"450px"});this.windowManagerService.dialogOnTop(e.id),this._subscription.add(e.afterClosed().subscribe((function(e){t.disableButton=!1,e&&t.eventHandlerService.moveCalendarRate(e)})))},e.prototype.showTaskFilter=function(){var t=this,e=this.dialog.open(mt,{data:{filterData:this.filterData,usersList:this.taskEssentialInfo.usersList,projectsList:this.taskEssentialInfo.projectsList},autoFocus:!1,width:"500px",height:"450px"});this.windowManagerService.dialogOnTop(e.id),this._subscription.add(e.afterClosed().subscribe((function(e){t.disableButton=!1,e&&1===e.result&&(t.filterData=null,t.filterData=Ft({},e.filterData),t.filteredBoardsData={resp:e},t.eventHandlerService.moveEventsTask(e),t.doResetFilter=!0)})))},e.prototype.showFilter=function(){this.disableButton=!0,void 0!==this.checksTab&&"calendar_task"!=this.checksTab&&this.activeTab&&"calendar_task_rate"==this.checksTab&&this.activeTab?this.showCalendarFilter():this.showTaskFilter()},e.prototype.resetFilter=function(){var t=this;this.refreshBoardData=!0,this.filterData=null,setTimeout((function(){t.refreshBoardData=!1,t.doResetFilter=!1}),200)},e.prototype.makeFilterReset=function(t){t&&this.resetFilter()},e.prototype.openButtonSheet=function(t){},e.prototype.getTranslate=function(t){return this.translate.instant(t)},e.prototype.doSomething=function(t){this.checksTab=t},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(I.Nb(f.b),I.Nb(I.t),I.Nb(a.d),I.Nb(l.a),I.Nb(v.a),I.Nb(nt.a),I.Nb(vt.a),I.Nb(It.a),I.Nb(yt),I.Nb(m.a))},e.\u0275cmp=I.Hb({type:e,selectors:[["app-task-main"]],viewQuery:function(t,e){var n;1&t&&I.Oc(At,!0),2&t&&I.rc(n=I.bc())&&(e.bottomSheet=n.first)},features:[I.yb],decls:49,vars:18,consts:[[1,"full-width","full-height","pos-abs","left-0","right-0","top-0",3,"dir"],[1,"title-container","pos-rel","height-60","overflow-hide","full-width","display-flex","align-items-end"],["color","accent","disableRipple","",1,"padding-r-l","z-index-0","height-30",3,"selectedTabChange"],[4,"ngFor","ngForOf"],[1,"pos-abs","top-full","display-flex","flex-space-between","align-items-center",3,"ngClass"],["class","no-bg no-border height-35 margin-l-full cursor-pointer",3,"click",4,"ngIf"],["mat-raised-button","",1,"white-gradient","padding-mini-r-l","text-gray-800","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","ngClass","click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["class","green-gradient padding-mini-r-l text-white line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","",3,"disabled","click",4,"ngIf"],[1,"content-container","padding-t-b","full-width",3,"ngClass"],[3,"ngSwitch"],["class","full-height padding-mini-r-l",4,"ngSwitchCase"],["class","full-height",4,"ngSwitchCase"],["class","current-task-container bg-white height-50 full-width padding-r-l line-height-50",4,"ngIf"],["bottomSheet",""],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["class","display-flex","mat-tab-label",""],[1,"tab-icon","font-full-em","width-15","height-15"],[1,"no-bg","no-border","height-35","margin-l-full","cursor-pointer",3,"click"],[1,"font-8-rem","line-height-25","width-18","height-18"],[1,"font-8-rem","line-height-25"],["mat-raised-button","",1,"green-gradient","padding-mini-r-l","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","click"],[1,"full-height","padding-mini-r-l"],[3,"filterBoards","pushTaskToBoard","refreshData","rtlDirection","pushTaskEssentialInfo","triggerBottomSheet","resetFilter"],[1,"full-height"],[3,"calendarParameters","rtlDirection","onTabLoaded"],[1,"current-task-container","bg-white","height-50","full-width","padding-r-l","line-height-50"],[3,"rtlDirection","taskEssentialInfo","pushTaskToBoard","triggerBottomSheet"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","version","1.1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Tb(2,"div",1),I.Ic(3,"\n    "),I.Tb(4,"mat-tab-group",2),I.ac("selectedTabChange",(function(t){return e.tabChange(t)})),I.Ic(5,"\n      "),I.Gc(6,Yt,4,0,"mat-tab",3),I.Ic(7,"\n    "),I.Sb(),I.Ic(8,"\n\n    "),I.Tb(9,"div",4),I.Ic(10,"\n      "),I.Gc(11,Rt,9,3,"button",5),I.Ic(12,"\n\n      "),I.Tb(13,"button",6),I.ac("click",(function(){return e.showFilter()})),I.Ic(14,"\n        "),I.Tb(15,"mat-icon",7),I.Ic(16,"filter_list"),I.Sb(),I.Ic(17,"\n        "),I.Tb(18,"span",8),I.Ic(19),I.fc(20,"translate"),I.Sb(),I.Ic(21,"\n      "),I.Sb(),I.Ic(22,"\n\n      "),I.Gc(23,Ut,9,4,"button",9),I.Ic(24,"\n    "),I.Sb(),I.Ic(25,"\n  "),I.Sb(),I.Ic(26,"\n\n  "),I.Tb(27,"div",10),I.Ic(28,"\n    "),I.Rb(29,11),I.Ic(30,"\n      "),I.Ic(31,"\n      "),I.Gc(32,qt,5,4,"div",12),I.Ic(33,"\n      "),I.Ic(34,"\n\n      "),I.Ic(35,"\n      "),I.Gc(36,Gt,4,2,"div",13),I.Ic(37,"\n      "),I.Ic(38,"\n    "),I.Qb(),I.Ic(39,"\n  "),I.Sb(),I.Ic(40,"\n\n  "),I.Gc(41,Ht,5,2,"div",14),I.Ic(42,"\n\n  "),I.Ob(43,"app-task-bottom-sheet",null,15),I.Ic(45,"\n\n  "),I.Gc(46,zt,33,3,"div",16),I.Ic(47,"\n"),I.Sb(),I.Ic(48,"\n")),2&t&&(I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(6),I.kc("ngForOf",e.tabs),I.Bb(3),I.kc("ngClass",e.rtlDirection?"left-full":"right-full"),I.Bb(2),I.kc("ngIf",e.doResetFilter&&0===e.activeTab),I.Bb(2),I.kc("disabled",!e.taskEssentialInfo||e.disableButton)("ngClass",I.oc(16,Jt,!e.activeTab)),I.Bb(6),I.Jc(I.gc(20,14,"global.filter")),I.Bb(4),I.kc("ngIf",!e.activeTab),I.Bb(4),I.kc("ngClass",e.currentTasks&&e.currentTasks.length?"height-full-minus-110":"height-full-minus-60"),I.Bb(2),I.kc("ngSwitch",e.activeTab),I.Bb(3),I.kc("ngSwitchCase",0),I.Bb(4),I.kc("ngSwitchCase",1),I.Bb(5),I.kc("ngIf",e.currentTasks&&e.currentTasks.length),I.Bb(5),I.kc("ngIf",e.loadingIndicator.status&&"project"===e.loadingIndicator.serviceName))},encapsulation:2}),e}(c.a),Xt=n("8Tul"),Vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function $t(t,e){1&t&&(I.Tb(0,"mat-error"),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Kc("\n              ",I.gc(2,1,"tasks.task_stop.description_error"),"\n            "))}function Wt(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",1),I.Ic(1,"\n  "),I.Tb(2,"form",2),I.ac("submit",(function(){return I.wc(n),I.ec().submit()})),I.Ic(3,"\n    "),I.Tb(4,"div",3),I.Ic(5,"\n      "),I.Tb(6,"h1",4),I.Ic(7),I.fc(8,"translate"),I.Sb(),I.Ic(9,"\n\n      "),I.Tb(10,"div",5),I.Ic(11,"\n        "),I.Tb(12,"div",6),I.Ic(13,"\n          "),I.Tb(14,"span"),I.Ic(15),I.fc(16,"translate"),I.Sb(),I.Ic(17," "),I.Tb(18,"span",7),I.Ic(19),I.Sb(),I.Ic(20,"\n        "),I.Sb(),I.Ic(21,"\n      "),I.Sb(),I.Ic(22,"\n\n      "),I.Tb(23,"div",8),I.Ic(24,"\n        "),I.Tb(25,"div",9),I.Ic(26,"\n          "),I.Tb(27,"div",10),I.Ic(28),I.fc(29,"translate"),I.Tb(30,"span"),I.Ic(31),I.Sb(),I.Ic(32," \u066a\n          "),I.Sb(),I.Ic(33,"\n          "),I.Tb(34,"mat-slider",11),I.Ic(35,"\n          "),I.Sb(),I.Ic(36,"\n        "),I.Sb(),I.Ic(37,"\n      "),I.Sb(),I.Ic(38,"\n\n      "),I.Tb(39,"div",5),I.Ic(40,"\n        "),I.Tb(41,"div",6),I.Ic(42,"\n          "),I.Tb(43,"mat-form-field",12),I.Ic(44,"\n            "),I.Tb(45,"mat-label"),I.Ic(46),I.fc(47,"translate"),I.Sb(),I.Ic(48,"\n            "),I.Ob(49,"textarea",13),I.fc(50,"translate"),I.Ic(51,"\n\n            "),I.Gc(52,$t,3,3,"mat-error",14),I.Ic(53,"\n          "),I.Sb(),I.Ic(54,"\n        "),I.Sb(),I.Ic(55,"\n      "),I.Sb(),I.Ic(56,"\n    "),I.Sb(),I.Ic(57,"\n\n    "),I.Tb(58,"div",15),I.Ic(59,"\n      "),I.Tb(60,"button",16),I.Ic(61,"\n        "),I.Tb(62,"mat-icon",17),I.Ic(63,"check"),I.Sb(),I.Ic(64,"\n        "),I.Tb(65,"span",18),I.Ic(66),I.fc(67,"translate"),I.Sb(),I.Ic(68,"\n      "),I.Sb(),I.Ic(69,"\n    "),I.Sb(),I.Ic(70,"\n  "),I.Sb(),I.Ic(71,"\n"),I.Sb()}if(2&t){var i=I.ec();I.kc("dir",i.rtlDirection?"rtl":"ltr"),I.Bb(2),I.kc("formGroup",i.form),I.Bb(5),I.Kc("\n        ",I.gc(8,19,"tasks.task_stop.stop_description"),"\n      "),I.Bb(8),I.Kc("",I.gc(16,21,"tasks.form.task_name"),": "),I.Bb(4),I.Jc(i.task.taskName),I.Bb(8),I.kc("ngClass",i.rtlDirection?"right-full":"left-full"),I.Bb(1),I.Kc("\n            ",I.gc(29,23,"tasks.boards.task_percentage"),"\n            "),I.Bb(3),I.Jc(i.form.get("percentage").value),I.Bb(3),I.kc("disabled","done"===i.task.boardStatus)("max",100)("min",0)("step",5)("thumbLabel",!0)("tickInterval",2),I.Bb(12),I.Jc(I.gc(47,25,"tasks.task_stop.description")),I.Bb(3),I.lc("placeholder",I.gc(50,27,"tasks.task_stop.description")),I.Bb(3),I.kc("ngIf",!i.form.get("description").valid&&i.form.get("description").touched),I.Bb(8),I.kc("disabled",!i.form.valid),I.Bb(6),I.Jc(I.gc(67,29,"global.submit"))}}var Qt=function(t){function e(e,n,i,r,a,o,c,l,u,d){var p=t.call(this,a,c)||this;return p.data=e,p.dialogRef=n,p.api=i,p.fb=r,p.injector=a,p.messageService=o,p.userInfoService=c,p.viewDirection=l,p.refreshLoginService=u,p.loadingIndicatorService=d,p._subscription=new s.Subscription,p._subscription.add(p.viewDirection.currentDirection.subscribe((function(t){return p.rtlDirection=t}))),p.task=e,p}return Vt(e,t),e.prototype.ngOnInit=function(){var t=this;this.createForm().then((function(){t.form.patchValue({taskId:t.task.taskId,percentage:t.task.percentage})}))},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({taskId:new u.e(0),description:new u.e("",u.u.required),percentage:new u.e(0,u.u.required),email:new u.e(t.loggedInUser.email,u.u.required)}),e(!0)}))},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.form.disable(),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.taskStop(this.form.value).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),1===e.result?(t.messageService.showMessage(e.message),t.dialogRef.close(!0)):(t.form.enable(),t.messageService.showMessage(e.message))}),(function(e){e.message&&t.messageService.showMessage(e.message),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.form.enable(),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(I.Nb(f.a),I.Nb(f.e),I.Nb(d.a),I.Nb(u.d),I.Nb(I.t),I.Nb(p.a),I.Nb(l.a),I.Nb(v.a),I.Nb(g.a),I.Nb(m.a))},e.\u0275cmp=I.Hb({type:e,selectors:[["app-task-stop"]],features:[I.yb],decls:2,vars:1,consts:[["class","pos-abs left-0 right-0 top-0 bottom-0 padding-full z-index-99 overflow-hide",3,"dir",4,"ngIf"],[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99","overflow-hide",3,"dir"],["autocomplete","off",1,"full-height",3,"formGroup","submit"],[1,"full-width"],[1,"margin-b-full","font-full-em","text-weight-500"],[1,"row","margin-b-full"],[1,"col-md-12"],[1,"text-orange-700"],[1,"row"],[1,"col-md-12","no-padding-r-l"],[1,"font-9-em","pos-abs","top-half","right-full",3,"ngClass"],["formControlName","percentage","tabIndex","1","tabindex","3",1,"full-width","no-padding-r-l","pos-rel","top-half",3,"disabled","max","min","step","thumbLabel","tickInterval"],[1,"full-width","height-110","font-9-em"],["formControlName","description","matInput","","required","","tabindex","2",3,"placeholder"],[4,"ngIf"],[1,"height-30","full-width","display-flex","justify-content-end"],["mat-raised-button","","tabindex","3","type","submit",1,"green-gradient","float-left","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"]],template:function(t,e){1&t&&(I.Gc(0,Wt,72,31,"div",0),I.Ic(1,"\n")),2&t&&I.kc("ngIf",e.form)},directives:[i.k,k.b,u.v,u.o,u.i,i.i,T.a,u.n,u.g,y.c,y.f,u.c,S.b,u.t,B.a,_.a,y.b],pipes:[a.c],styles:[""]}),e}(c.a),Zt=n("AH9q"),te=function(){function t(){this._defaultUsersProjectsList=null,this.usersProjectsList=new kt.BehaviorSubject(this._defaultUsersProjectsList),this.currentUsersProjectsList=this.usersProjectsList.asObservable()}return Object.defineProperty(t.prototype,"getUsersProjectsList",{get:function(){return this.usersProjectsList.getValue()},enumerable:!1,configurable:!0}),t.prototype.changeUsersProjectsList=function(t){this.usersProjectsList.next(t)},t.\u0275prov=I.Jb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),ee=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ne=function(){return(ne=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function ie(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",16),I.ac("click",(function(){return I.wc(n),I.ec(2).deleteTask()})),I.fc(1,"translate"),I.Ic(2,"\n        "),I.Tb(3,"mat-icon",11),I.Ic(4,"delete"),I.Sb(),I.Ic(5,"\n      "),I.Sb()}2&t&&I.lc("matTooltip",I.gc(1,1,"tasks.task_detail.delete_title"))}function re(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",17),I.ac("click",(function(){return I.wc(n),I.ec(2).editableForm()})),I.Ic(1,"\n        "),I.Tb(2,"mat-icon",11),I.Ic(3,"edit"),I.Sb(),I.Ic(4,"\n      "),I.Sb()}}function ae(t,e){if(1&t){var n=I.Ub();I.Tb(0,"li",28),I.ac("click",(function(){I.wc(n);var t=e.last,i=e.$implicit,r=I.ec(4);return t?null:r.openTask(i)})),I.Ic(1),I.Sb()}if(2&t){var i=e.$implicit;I.kc("ngClass",e.last?"active text-gray-500":"cursor-pointer"),I.Bb(1),I.Kc("\n            ",i.taskName,"\n          ")}}function oe(t,e){if(1&t&&(I.Tb(0,"nav",25),I.Ic(1,"\n\n        "),I.Tb(2,"ol",26),I.Ic(3,"\n          "),I.Gc(4,ae,2,2,"li",27),I.Ic(5,"\n        "),I.Sb(),I.Ic(6,"\n      "),I.Sb()),2&t){var n=I.ec(3);I.kc("dir",n.rtlDirection?"rtl":"ltr"),I.Bb(4),I.kc("ngForOf",n.breadcrumbList)}}function se(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",18),I.Ic(1,"\n    "),I.Tb(2,"div",19),I.Ic(3,"\n      "),I.Gc(4,oe,7,2,"nav",20),I.Ic(5,"\n\n      "),I.Tb(6,"div",21),I.Ic(7,"\n        "),I.Tb(8,"app-task-form",22),I.ac("cancel",(function(t){return I.wc(n),I.ec(2).cancelBtn(t)}))("formOutput",(function(t){return I.wc(n),I.ec(2).updateForm(t)})),I.Sb(),I.Ic(9,"\n      "),I.Sb(),I.Ic(10,"\n    "),I.Sb(),I.Ic(11,"\n\n    "),I.Tb(12,"div",23),I.Ic(13,"\n      "),I.Ob(14,"app-task-todo",24),I.Ic(15,"\n    "),I.Sb(),I.Ic(16,"\n  "),I.Sb()}if(2&t){var i=I.ec(2);I.Bb(2),I.kc("ngClass",i.rtlDirection?"float-right":"float-left"),I.Bb(2),I.kc("ngIf",i.breadcrumbList&&i.breadcrumbList.length>1),I.Bb(2),I.kc("ngClass",i.breadcrumbList&&i.breadcrumbList.length>1?"height-full-minus-35":"full-height"),I.Bb(2),I.kc("data",i.data)("editable",i.editable)("form",i.form),I.Bb(4),I.kc("ngClass",i.rtlDirection?"float-left":"float-right"),I.Bb(2),I.kc("loggedInUser",i.loggedInUser)("loginData",i.loginData)("rtlDirection",i.rtlDirection)("parentTaskData",i.task)}}function ce(t,e){if(1&t&&(I.Tb(0,"div",18),I.Ic(1,"\n      "),I.Tb(2,"div",30),I.Ic(3,"\n        "),I.Ob(4,"app-task-report",31),I.Ic(5,"\n      "),I.Sb(),I.Ic(6,"\n\n      "),I.Tb(7,"div",32),I.Ic(8,"\n        "),I.Ob(9,"app-task-activity",33),I.Ic(10,"\n      "),I.Sb(),I.Ic(11,"\n    "),I.Sb()),2&t){var n=I.ec(3);I.Bb(2),I.kc("ngClass",n.rtlDirection?" float-right":" float-left"),I.Bb(2),I.kc("loginData",n.loginData)("rtlDirection",n.rtlDirection)("task",n.task)("usersList",n.usersList),I.Bb(3),I.kc("ngClass",n.rtlDirection?" float-left":" float-right"),I.Bb(2),I.kc("loginData",n.loginData)("rtlDirection",n.rtlDirection)("task",n.task)}}function le(t,e){if(1&t&&(I.Ic(0,"\n    "),I.Gc(1,ce,12,9,"div",29),I.Ic(2,"\n  ")),2&t){var n=I.ec(2);I.Bb(1),I.kc("ngIf",n.task)}}var ue=function(t){return{"view-mode":t}};function de(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",1),I.Ic(1,"\n  "),I.Tb(2,"div",2),I.Ic(3,"\n    "),I.Tb(4,"h1",3),I.Ic(5,"\n      "),I.Tb(6,"span",4),I.Ic(7),I.Sb(),I.Ic(8),I.Sb(),I.Ic(9,"\n\n    "),I.Tb(10,"div",5),I.Ic(11,"\n      "),I.Tb(12,"mat-button-toggle-group",6,7),I.ac("change",(function(){I.wc(n);var t=I.sc(13);return I.ec().changeViewMode(t.value)})),I.Ic(14,"\n        "),I.Tb(15,"mat-button-toggle",8),I.Ic(16,"\n          "),I.Tb(17,"span"),I.Ic(18),I.fc(19,"translate"),I.Sb(),I.Ic(20,"\n        "),I.Sb(),I.Ic(21,"\n        "),I.Tb(22,"mat-button-toggle",8),I.Ic(23,"\n          "),I.Tb(24,"span"),I.Ic(25),I.fc(26,"translate"),I.Sb(),I.Ic(27,"\n        "),I.Sb(),I.Ic(28,"\n      "),I.Sb(),I.Ic(29,"\n    "),I.Sb(),I.Ic(30,"\n\n    "),I.Tb(31,"div",9),I.Ic(32,"\n      "),I.Tb(33,"button",10),I.ac("click",(function(){return I.wc(n),I.ec().cancelBtn(!0)})),I.Ic(34,"\n        "),I.Tb(35,"mat-icon",11),I.Ic(36,"close"),I.Sb(),I.Ic(37,"\n      "),I.Sb(),I.Ic(38,"\n\n      "),I.Gc(39,ie,6,3,"button",12),I.Ic(40,"\n\n      "),I.Gc(41,re,5,0,"button",13),I.Ic(42,"\n    "),I.Sb(),I.Ic(43,"\n  "),I.Sb(),I.Ic(44,"\n\n  "),I.Gc(45,se,17,11,"div",14),I.Ic(46,"\n\n  "),I.Gc(47,le,3,1,"ng-template",null,15,I.Hc),I.Ic(49,"\n"),I.Sb()}if(2&t){var i=I.sc(13),r=I.sc(48),a=I.ec();I.kc("dir",a.rtlDirection?"rtl":"ltr"),I.Bb(7),I.Kc("#",a.task.taskId,""),I.Bb(1),I.Kc(" ",a.task.taskName,"\n    "),I.Bb(4),I.kc("ngClass",I.oc(17,ue,i))("value",a.viewModeTypes),I.Bb(3),I.kc("value","info"),I.Bb(3),I.Jc(I.gc(19,13,"tasks.task_detail.overview")),I.Bb(4),I.kc("value","report"),I.Bb(3),I.Jc(I.gc(26,15,"tasks.task_detail.reports")),I.Bb(14),I.kc("ngIf","info"===a.viewModeTypes),I.Bb(2),I.kc("ngIf","info"===a.viewModeTypes&&!a.editable),I.Bb(4),I.kc("ngIf","info"===a.viewModeTypes)("ngIfElse",r)}}var pe=function(t){function e(e,n,i,r,a,o,c,l,u,d,p,f,h,b){var g=t.call(this,i,o)||this;return g.dialog=e,g.fb=n,g.injector=i,g.apiService=r,g.messageService=a,g.userInfoService=o,g.translateService=c,g.viewDirection=l,g.refreshLoginService=u,g.refreshBoardService=d,g.windowManagerService=p,g.buttonSheetDataService=f,g.taskEssentialInfoService=h,g.loadingIndicatorService=b,g.editable=!1,g.task=null,g.breadcrumbList=[],g.projectsList=[],g.usersList=[],g.projectsListNew=[],g.usersListNew=[],g.viewModeTypes="info",g._subscription=new s.Subscription,g._subscription.add(g.viewDirection.currentDirection.subscribe((function(t){g.rtlDirection=t,g.form&&g.formPatchValue()}))),g}return ee(e,t),e.prototype.ngOnInit=function(){this.data=this.bottomSheetData.data,this.usersList=this.data.usersList,this.projectsList=this.data.projectsList,this.task=this.data.task,this.breadcrumbList=this.data.breadcrumbList},e.prototype.ngAfterViewInit=function(){var t=this;this.createForm().then((function(){"detail"===t.data.action&&t.formPatchValue()}))},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({taskId:new u.e(0),taskName:new u.e("",u.u.required),percentage:new u.e(0,u.u.required),assignTo:new u.e({adminId:0},u.u.required),email:new u.e("0"),taskDurationHours:new u.e(0,[u.u.required,u.u.pattern("^[0-9]+")]),taskDurationMinutes:new u.e(0,u.u.required),startAt:new u.e("",u.u.required),stopAt:new u.e("",u.u.required),startTime:new u.e("",u.u.required),stopTime:new u.e("",u.u.required),project:new u.e({},u.u.required),taskDesc:new u.e(""),boardStatus:new u.e("",u.u.required),taskDateStart:"0000-00-00 00:00:00",taskDateStop:"0000-00-00 00:00:00",status:new u.e(0),assigner:new u.e(t.loggedInUser.email,u.u.required),trackable:new u.e(0)}),e()}))},e.prototype.updateForm=function(t){this.form=t,this.submit()},e.prototype.cancelBtn=function(t){this.form.disable(),t&&("detail"===this.data.action&&this.editable?this.formPatchValue():this.bottomSheetData.bottomSheetRef.close())},e.prototype.onKeydownHandler=function(){this.bottomSheetData.bottomSheetRef.close()},e.prototype.formPatchValue=function(){var t=this;this.form.disable(),this.editable=!1;var e,n,i=this.task.startAt?this.task.startAt.split(" "):null,r=this.task.stopAt?this.task.stopAt.split(" "):null,a=i?i[1].split(":"):null,o=r?r[1].split(":"):null,s=a?a[0]+":"+a[1]:null,c=o?o[0]+":"+o[1]:null,l=this.projectsList.filter((function(e){return e.projectId===t.task.project.projectId})).pop(),u=this.usersList.filter((function(e){return e.email===t.task.assignTo.email})).pop();e="Invalid"!==i[0]?b.from(i[0],"en","YYYY-MM-DD").locale(this.rtlDirection?"fa":"en").format("YYYY/MM/DD"):null,n="Invalid"!==r[0]?b.from(r[0],"en","YYYY-MM-DD").locale(this.rtlDirection?"fa":"en").format("YYYY/MM/DD"):null,this.form.patchValue({taskId:this.task.taskId,taskName:this.task.taskName,percentage:this.task.percentage,assignTo:u,taskDurationHours:this.task.taskDurationHours,taskDurationMinutes:this.task.taskDurationMinutes,startAt:e,startTime:s,stopAt:n,stopTime:c,project:l,taskDesc:this.task.taskDesc,email:u.email,boardStatus:this.data.boardStatus,taskDateStart:this.task.taskDateStart,taskDateStop:this.task.taskDateStop,assigner:this.task.assigner,status:this.task.status,trackable:this.task.trackable})},e.prototype.editableForm=function(){this.editable=!0,this.editable?this.form.enable():this.form.disable()},e.prototype.deleteTask=function(){var t=this,e=this.dialog.open(Xt.a,{data:{title:this.getTranslate("tasks.task_detail.delete_title"),message:this.getTranslate("tasks.task_detail.delete_text")},autoFocus:!1,width:"70vh",maxWidth:"350px",panelClass:"approve-detail-dialog",height:"160px"});this.windowManagerService.dialogOnTop(e.id),this._subscription.add(e.afterClosed().subscribe((function(e){e&&(t.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),t.apiService.accessToken=t.loginData.token_type+" "+t.loginData.access_token,t._subscription.add(t.apiService.deleteTask(t.task).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.result?(t.bottomSheetData.bottomSheetRef.close(),t.messageService.showMessage(e.message),t.refreshBoardService.changeCurrentDoRefresh(!0)):t.messageService.showMessage(e.message)}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)}))))})))},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"});var e=ne({},this.form.value);this.rtlDirection?(e.startAt=b.from(e.startAt,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD"),e.stopAt=b.from(e.stopAt,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD")):(e.startAt=h(e.startAt,"YYYY/MM/DD").format("YYYY-MM-DD"),e.stopAt=h(e.stopAt,"YYYY/MM/DD").format("YYYY-MM-DD")),e.startAt=e.startAt+" "+e.startTime+":00",e.stopAt=e.stopAt+" "+e.stopTime+":00",this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.form.disable(),this._subscription.add(this.apiService.updateTask(e).subscribe((function(n){if(t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),n.result){if(0===n.content.parentTaskId?t.bottomSheetData.bottomSheetRef.close():(t.editableForm(),t.editable=!1),"inProgress"!==t.task.boardStatus||"todo"!==e.boardStatus&&"done"!==e.boardStatus){if("todo"===t.task.boardStatus&&"done"===e.boardStatus)t.showTaskStopModal(e);else if("done"===t.task.boardStatus&&"todo"===e.boardStatus){var i=ne(ne({},e),{percentage:0,boardStatus:"todo"});t.showTaskStopModal(i)}}else t.showTaskStopModal(e);t.messageService.showMessage(n.message),t.refreshBoardService.changeCurrentDoRefresh(!0)}else t.form.enable(),t.messageService.showMessage(n.message)}),(function(e){e.message&&t.messageService.showMessage(e.message),t.form.enable(),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.showTaskStopModal=function(t){var e=this.dialog.open(Qt,{data:t,autoFocus:!1,width:"500px",height:"310px",disableClose:!0});this.windowManagerService.dialogOnTop(e.id),this._subscription.add(e.afterClosed().subscribe((function(t){})))},e.prototype.openTask=function(t){var n=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.getBoardData().then((function(){n.getBreadcrumbData(t.taskId).then((function(){n.bottomSheetData.bottomSheetRef.close(),n.usersListNew.map((function(e){t.assignTo===e.adminId&&(t.assignTo=e)})),n.projectsListNew.map((function(e){t.project===e.projectId&&(t.project=e)})),setTimeout((function(){var i={component:e,height:"98%",width:"95%",data:{action:"detail",usersList:n.usersListNew,projectsList:n.projectsListNew,task:t,boardStatus:t.boardStatus,breadcrumbList:n.breadcrumbList}};n.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),n.buttonSheetDataService.changeButtonSheetData(i)}),500)}))}))},e.prototype.getBoardData=function(){var t=this;return new Promise((function(e){t.usersListNew=t.taskEssentialInfoService.getUsersProjectsList.usersList,t.projectsListNew=t.taskEssentialInfoService.getUsersProjectsList.projectsList,e(!0)}))},e.prototype.getBreadcrumbData=function(t){var e=this;return new Promise((function(n){e._subscription.add(e.apiService.getBreadcrumb(t).subscribe((function(t){1===t.result&&(e.breadcrumbList=t.content,n(!0))}),(function(t){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.refreshLoginService.openLoginDialog(t)})))}))},e.prototype.getTranslate=function(t){return this.translateService.instant(t)},e.prototype.changeViewMode=function(t){this.viewModeTypes=t},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(I.Nb(f.b),I.Nb(u.d),I.Nb(I.t),I.Nb(d.a),I.Nb(p.a),I.Nb(l.a),I.Nb(a.d),I.Nb(v.a),I.Nb(g.a),I.Nb(Zt.a),I.Nb(It.a),I.Nb(yt),I.Nb(te),I.Nb(m.a))},e.\u0275cmp=I.Hb({type:e,selectors:[["ng-component"]],hostBindings:function(t,e){1&t&&I.ac("keydown.escape",(function(t){return e.onKeydownHandler(t)}),!1,I.uc)},features:[I.yb],decls:2,vars:1,consts:[["class","full-page-size overflow-hide",3,"dir",4,"ngIf"],[1,"full-page-size","overflow-hide",3,"dir"],[1,"task-heading","clear-both","full-width","height-45","display-flex","flex-space-between"],[1,"no-margin","height-45","line-height-45","font-full-plus-one-tenth-em","text-eclipse","padding-r-l","text-pink-600","text-weight-500"],[1,"text-gray-700"],[1,"pos-abs","top-fourth-tenth","content-switcher"],[1,"full-width","mat-button-custom","line-height-20","round-corner-all",3,"ngClass","value","change"],["viewMode","matButtonToggleGroup"],[1,"overflow-hide","font-7-rem","line-height-20","height-30",3,"value"],[1,"display-flex","flex-direction-row-reverse"],["type","button",1,"no-border","cursor-pointer","no-bg","text-center","width-45","height-45","text-gray-600","no-padding",3,"click"],[1,"line-height-30"],["class","no-border cursor-pointer no-bg text-center width-45 height-45 text-red-400 no-padding","type","button",3,"matTooltip","click",4,"ngIf"],["class","no-border cursor-pointer no-bg text-center width-45 height-45 text-green-400 no-padding","type","button",3,"click",4,"ngIf"],["class","full-width height-full-minus-45",4,"ngIf","ngIfElse"],["reportView",""],["type","button",1,"no-border","cursor-pointer","no-bg","text-center","width-45","height-45","text-red-400","no-padding",3,"matTooltip","click"],["type","button",1,"no-border","cursor-pointer","no-bg","text-center","width-45","height-45","text-green-400","no-padding",3,"click"],[1,"full-width","height-full-minus-45"],[1,"task-form-container","full-height","overflow-hide","pos-rel",3,"ngClass"],["class","breadcrumb-container height-35 padding-r-l padding-t-half padding-b-half",3,"dir",4,"ngIf"],[1,"padding-full",3,"ngClass"],[3,"data","editable","form","cancel","formOutput"],[1,"task-todo-container","full-height","padding-r-l","padding-mini-t-b","pos-rel",3,"ngClass"],[3,"loggedInUser","loginData","rtlDirection","parentTaskData"],[1,"breadcrumb-container","height-35","padding-r-l","padding-t-half","padding-b-half",3,"dir"],[1,"breadcrumb","breadcrumb-scroll","no-margin","no-list-style","no-radius","no-padding","display-flex"],["class","breadcrumb-item white-space-no-wrap font-8-em text-warning display-flex",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"breadcrumb-item","white-space-no-wrap","font-8-em","text-warning","display-flex",3,"ngClass","click"],["class","full-width height-full-minus-45",4,"ngIf"],[1,"task-report-container","padding-r-l","padding-mini-t-b","full-height","pos-rel",3,"ngClass"],[3,"loginData","rtlDirection","task","usersList"],[1,"task-activity-container","full-height","padding-r-l","padding-mini-t-b","pos-rel",3,"ngClass"],[3,"loginData","rtlDirection","task"]],template:function(t,e){1&t&&(I.Gc(0,de,50,19,"div",0),I.Ic(1,"\n")),2&t&&I.kc("ngIf",e.data)},styles:['[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.content-switcher[_ngcontent-%COMP%]{transform:translate(-50%);left:50%}.full-page-size[_ngcontent-%COMP%]{width:100vw;height:90vh;max-width:100%;max-height:100%}.task-heading[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1}.task-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:450px}.task-form-container[_ngcontent-%COMP%], .task-report-container[_ngcontent-%COMP%]{width:65%}.task-activity-container[_ngcontent-%COMP%], .task-todo-container[_ngcontent-%COMP%]{width:35%;background-color:#f5f5f5}.task-file-container[_ngcontent-%COMP%]{height:155px;border-top:1px solid #ddd;background-color:#eee}.breadcrumb-container[_ngcontent-%COMP%]{background-color:#f5f5f5}.breadcrumb[_ngcontent-%COMP%]{flex-wrap:wrap;background-color:transparent}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item.active[_ngcontent-%COMP%]{color:#e4a786!important}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;color:#e65100;content:"/";padding:0 .25rem}']}),e}(c.a),fe=n("5+WD"),he=n("Wp6s"),be=function(t){return{"text-line-through":t}};function ge(t,e){if(1&t){var n=I.Ub();I.Tb(0,"mat-card",15),I.Ic(1,"\n\n            "),I.Tb(2,"mat-card-content",16),I.Ic(3,"\n\n              "),I.Tb(4,"div",17),I.Ic(5,"\n                "),I.Tb(6,"mat-icon",18),I.Ic(7,"\n                  drag_handle\n                "),I.Sb(),I.Ic(8,"\n\n                "),I.Ic(9,"\n\n                "),I.Tb(10,"mat-icon",19),I.ac("click",(function(){I.wc(n);var t=e.$implicit;return I.ec(2).checkTask(t)})),I.Ic(11),I.Sb(),I.Ic(12,"\n              "),I.Sb(),I.Ic(13,"\n\n              "),I.Ic(14,"\n\n              "),I.Tb(15,"div",20),I.ac("click",(function(){I.wc(n);var t=e.$implicit;return I.ec(2).openTask(t)})),I.Ic(16,"\n                "),I.Tb(17,"div",21),I.Ic(18),I.Sb(),I.Ic(19,"\n\n                "),I.Ic(20,"\n              "),I.Sb(),I.Ic(21,"\n\n              "),I.Tb(22,"div",17),I.Ic(23,"\n                "),I.Tb(24,"button",22),I.ac("click",(function(t){I.wc(n);var i=e.$implicit,r=I.ec(2);return t.stopPropagation(),r.updateTask(i)})),I.Ic(25,"\n                  "),I.Tb(26,"mat-icon",23),I.Ic(27,"edit\n                  "),I.Sb(),I.Ic(28,"\n                "),I.Sb(),I.Ic(29,"\n\n                "),I.Tb(30,"button",24),I.ac("click",(function(t){I.wc(n);var i=e.$implicit,r=I.ec(2);return t.stopPropagation(),r.deleteTask(i)})),I.Ic(31,"\n                  "),I.Tb(32,"mat-icon",25),I.Ic(33,"close\n                  "),I.Sb(),I.Ic(34,"\n                "),I.Sb(),I.Ic(35,"\n              "),I.Sb(),I.Ic(36,"\n            "),I.Sb(),I.Ic(37,"\n          "),I.Sb()}if(2&t){var i=e.$implicit,r=I.ec(2);I.Bb(6),I.kc("ngClass",r.rtlDirection?"margin-l-tiny":"margin-r-tiny"),I.Bb(4),I.kc("ngClass",100===i.percentage?"text-green-200":"text-gray-700"),I.Bb(1),I.Kc("\n                  ",100===i.percentage?"check_circle_outline":"radio_button_unchecked","\n                "),I.Bb(4),I.kc("ngClass",100===i.percentage?"text-green-200":"text-gray-700"),I.Bb(2),I.kc("ngClass",I.oc(7,be,100===i.percentage)),I.Bb(1),I.Jc(i.taskName),I.Bb(6),I.kc("ngClass",r.rtlDirection?"margin-l-half":"margin-r-half")}}function me(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",12),I.Ic(1,"\n        "),I.Tb(2,"div",13),I.ac("cdkDropListDropped",(function(t){return I.wc(n),I.ec().changeTodo(t)})),I.Ic(3,"\n          "),I.Gc(4,ge,38,9,"mat-card",14),I.Ic(5,"\n        "),I.Sb(),I.Ic(6,"\n      "),I.Sb()}if(2&t){var i=I.ec();I.Bb(2),I.kc("cdkDropListData",i.tasks),I.Bb(2),I.kc("ngForOf",i.tasks)}}function ve(t,e){1&t&&(I.Tb(0,"div",26),I.Ic(1,"\n    "),I.Tb(2,"div",27),I.Ic(3,"\n      "),I.dc(),I.Tb(4,"svg",28),I.Ic(5,"\n        "),I.Tb(6,"rect",29),I.Ic(7,"\n          "),I.Ob(8,"animate",30),I.Ic(9,"\n          "),I.Ob(10,"animate",31),I.Ic(11,"\n        "),I.Sb(),I.Ic(12,"\n        "),I.Tb(13,"rect",32),I.Ic(14,"\n          "),I.Ob(15,"animate",33),I.Ic(16,"\n          "),I.Ob(17,"animate",34),I.Ic(18,"\n        "),I.Sb(),I.Ic(19,"\n        "),I.Tb(20,"rect",35),I.Ic(21,"\n          "),I.Ob(22,"animate",36),I.Ic(23,"\n          "),I.Ob(24,"animate",37),I.Ic(25,"\n        "),I.Sb(),I.Ic(26,"\n      "),I.Sb(),I.Ic(27,"\n\n      "),I.cc(),I.Tb(28,"span",38),I.Ic(29),I.fc(30,"translate"),I.Sb(),I.Ic(31,"\n    "),I.Sb(),I.Ic(32,"\n  "),I.Sb()),2&t&&(I.Bb(29),I.Jc(I.gc(30,1,"global.loading")))}var Ie=function(){function t(t,e,n,i,r,a,o,c,l,u,d){var p=this;this.dialog=t,this.fb=e,this.api=n,this.messageService=i,this.translateService=r,this.refreshLoginService=a,this.refreshBoardService=o,this.windowManagerService=c,this.buttonSheetDataService=l,this.taskEssentialInfoService=u,this.loadingIndicatorService=d,this.taskId=0,this.edit=!1,this.loadingIndicator={status:!1,serviceName:"todo"},this.tasks=[],this.bottomSheetData=null,this.usersList=[],this.projectsList=[],this.breadcrumbList=[],this._subscription=new s.Subscription,this._subscription.add(this.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return p.loadingIndicator=t})))}return t.prototype.ngOnInit=function(){var t=this;this._subscription.add(this.buttonSheetDataService.currentButtonSheetData.subscribe((function(e){t.bottomSheetData=Object.assign({},t.bottomSheetData,e)}))),this.createForm(),this.getTaskList()},t.prototype.createForm=function(){this.form=this.fb.group({taskId:new u.e(0),status:new u.e(1),taskName:new u.e(""),percentage:new u.e(0),assignTo:new u.e(""),taskDurationHours:new u.e(0),taskDurationMinutes:new u.e(0),startAt:new u.e(""),stopAt:new u.e(""),startTime:new u.e(""),stopTime:new u.e(""),project:new u.e({}),taskDesc:new u.e(""),email:new u.e("0"),boardStatus:new u.e(""),taskDateStart:"0000-00-00 00:00:00",taskDateStop:"0000-00-00 00:00:00",assigner:new u.e(this.loggedInUser.email),trackable:new u.e(0),parentTaskId:new u.e(0)})},t.prototype.changeTodo=function(t){t.previousContainer===t.container?(Object(fe.e)(t.container.data,t.previousIndex,t.currentIndex),this.changeTodoPriority(t.container.data)):Object(fe.f)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)},t.prototype.changeTodoPriority=function(t){var e=this;if(t.length>1){var n=t;n.map((function(t,e){return t.priority=e})),this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.form.disable(),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.changePriority(n).subscribe((function(t){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.form.enable(),t.message&&e.messageService.showMessage(t.message)}),(function(t){t.message&&e.messageService.showMessage(t.message),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.refreshLoginService.openLoginDialog(t)})))}},t.prototype.sortTodo=function(){this.tasks.sort((function(t,e){var n=t.priority,i=e.priority,r=0;return n>i?r=1:n<i&&(r=-1),r}))},t.prototype.getTaskList=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.form.disable(),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.usersList=this.taskEssentialInfoService.getUsersProjectsList.usersList,this.projectsList=this.taskEssentialInfoService.getUsersProjectsList.projectsList,this._subscription.add(this.api.getSubsetTask(this.loggedInUser.email,this.parentTaskData.taskId).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),1===e.result&&(t.tasks=e.content.boards.list,t.tasks.map((function(e){return e.assignTo=t.usersList.filter((function(t){return t.adminId===e.assignTo})).pop(),e.assigner=t.usersList.filter((function(t){return t.adminId===e.assigner})).pop().email,e.project=t.projectsList.filter((function(t){return t.projectId===e.project})).pop(),e})),t.sortTodo(),e.message&&t.messageService.showMessage(e.message)),t.form.enable()}),(function(e){e.message&&t.messageService.showMessage(e.message),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),t.refreshLoginService.openLoginDialog(e)})))},t.prototype.checkTask=function(t){var e=this;this.form.disable();var n={task:{taskId:t.taskId,taskName:t.taskName,assignTo:t.assignTo,taskDurationHours:t.taskDurationHours,taskDurationMinutes:t.taskDurationMinutes,startAt:t.startAt,stopAt:t.stopAt,project:t.project,status:t.status,taskDesc:t.taskDesc,percentage:"done"===t.boardStatus?0:100,assigner:t.assigner,taskDateStart:t.taskDateStart,taskDateStop:t.taskDateStop,boardStatus:"done"===t.boardStatus?"todo":"done",trackable:t.trackable,todoCount:t.todoCount,startTime:t.startTime,stopTime:t.stopTime,email:t.email}};this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this._subscription.add(this.api.taskChangeStatus(n.task,n.task.boardStatus).subscribe((function(t){return n=e,void 0,r=function(){var e;return function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(s){a=[6,s],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(n){return this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),t.result&&(e=t.content,this.tasks=this.tasks.map((function(t){return t.taskId===e.taskId&&(t=Object.assign(t,e)),t})),this.sortTodo()),t.message&&this.messageService.showMessage(t.message),this.form.enable(),[2]}))},new((i=void 0)||(i=Promise))((function(t,e){function a(t){try{s(r.next(t))}catch(n){e(n)}}function o(t){try{s(r.throw(t))}catch(n){e(n)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(a,o)}s((r=r.apply(n,[])).next())}));var n,i,r}),(function(t){t.message&&e.messageService.showMessage(t.message),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.refreshLoginService.openLoginDialog(t)})))},t.prototype.deleteTask=function(t){var e=this;this.form.disable();var n=this.dialog.open(Xt.a,{data:{title:this.getTranslate("tasks.task_detail.delete_title"),message:this.getTranslate("tasks.task_detail.delete_text")},autoFocus:!1,width:"70vh",maxWidth:"350px",panelClass:"approve-detail-dialog",height:"160px"});this.windowManagerService.dialogOnTop(n.id),this._subscription.add(n.afterClosed().subscribe((function(n){n&&(e.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),e.api.accessToken=e.loginData.token_type+" "+e.loginData.access_token,e._subscription.add(e.api.deleteTask(t).subscribe((function(n){1===n.result&&(e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.tasks=e.tasks.filter((function(e){return e.taskId!==t.taskId})),e.sortTodo()),n.message&&e.messageService.showMessage(n.message),e.form.enable()}),(function(t){t.message&&e.messageService.showMessage(t.message),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.refreshLoginService.openLoginDialog(t)}))))})))},t.prototype.addTask=function(){var t=this;if(this.form.get("taskName").value.trim(this.form.get("taskName").value).length>=1){this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.form.disable();var e={taskName:this.form.get("taskName").value,assignTo:this.parentTaskData.assignTo,taskDurationHours:0,taskDurationMinutes:0,startAt:"0000-00-00 00:00:00",stopAt:"0000-00-00 00:00:00",taskDateStart:"0000-00-00 00:00:00",taskDateStop:"0000-00-00 00:00:00",project:this.parentTaskData.project,taskDesc:"",percentage:0,assigner:this.loggedInUser.email,boardStatus:"todo",trackable:0,startTime:"00:00",stopTime:"00:00",parentTaskId:this.parentTaskData.taskId};this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.createTask(e).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),1===e.result&&(t.tasks.push(e.content),t.form.reset(),t.sortTodo()),t.form.enable(),e.message&&t.messageService.showMessage(e.message)}),(function(e){e.message&&t.messageService.showMessage(e.message),t.form.enable(),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),t.refreshLoginService.openLoginDialog(e)})))}},t.prototype.updateTask=function(t){this.edit=!0,this.form.patchValue({taskId:t.taskId,taskName:t.taskName,percentage:t.percentage,assignTo:t.assignTo,taskDurationHours:t.taskDurationHours,taskDurationMinutes:t.taskDurationMinutes,startAt:t.startAt,stopAt:t.stopAt,startTime:t.startTime?t.startTime:"00:00",stopTime:t.stopTime?t.stopTime:"00:00",project:t.project,taskDesc:t.taskDesc,email:t.assignTo.email,boardStatus:t.boardStatus,taskDateStart:t.taskDateStart,taskDateStop:t.taskDateStop,assigner:t.assigner,trackable:t.trackable,parentTaskId:t.parentTaskId})},t.prototype.saveTask=function(){var t=this;this.form.get("taskName").value.trim(this.form.get("taskName").value).length>=1&&(this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.form.disable(),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.updateTask(this.form.value).subscribe((function(e){if(t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),1===e.result){var n=e.content;t.tasks=t.tasks.map((function(t){return t.taskId===n.taskId&&(t=Object.assign(t,n)),t})),t.form.reset(),t.edit=!1,t.sortTodo()}t.form.enable(),e.message&&t.messageService.showMessage(e.message)}),(function(e){e.message&&t.messageService.showMessage(e.message),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),t.refreshLoginService.openLoginDialog(e)}))))},t.prototype.openTask=function(t){var e=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.getBreadcrumbData(t.taskId).then((function(){e.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),e.bottomSheetData.bottomSheetRef.close(),setTimeout((function(){var n={component:pe,height:"98%",width:"95%",data:{action:"detail",usersList:e.usersList,projectsList:e.projectsList,task:t,boardStatus:t.boardStatus,breadcrumbList:e.breadcrumbList}};e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.buttonSheetDataService.changeButtonSheetData(n)}),500)}))},t.prototype.getBreadcrumbData=function(t){var e=this;return new Promise((function(n){e._subscription.add(e.api.getBreadcrumb(t).subscribe((function(t){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),1===t.result&&(e.breadcrumbList=t.content,n(!0)),t.message&&e.messageService.showMessage(t.message)}),(function(t){t.message&&e.messageService.showMessage(t.message),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.refreshLoginService.openLoginDialog(t)})))}))},t.prototype.getTranslate=function(t){return this.translateService.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(f.b),I.Nb(u.d),I.Nb(d.a),I.Nb(p.a),I.Nb(a.d),I.Nb(g.a),I.Nb(Zt.a),I.Nb(It.a),I.Nb(yt),I.Nb(te),I.Nb(m.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-todo"]],inputs:{taskId:"taskId",parentTaskData:"parentTaskData",rtlDirection:"rtlDirection",loginData:"loginData",loggedInUser:"loggedInUser"},decls:40,vars:16,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","full-width","full-height",3,"dir"],[1,"margin-b-full","text-gray-800","font-full-em","text-weight-500","no-margin","height-45","padding-full"],[1,"text-gray-500","font-7-em","text-italic",3,"ngClass"],[1,"todo-content-container","height-full-minus-50","padding-full","padding-b-half","overflow-y-auto"],[1,"full-height",3,"formGroup"],["class","todo-list-container height-full-minus-45 overflow-y-auto overflow-x-hide",4,"ngIf"],[1,"enter-todo-container","height-45"],[1,"full-height"],["appearance","outline","color","primary",1,"full-width","height-45","font-9-em"],["matInput","","formControlName","taskName","name","inputValue",3,"placeholder","keydown"],["mat-raised-button","","matSuffix","","type","button",3,"disabled","click"],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],[1,"todo-list-container","height-full-minus-45","overflow-y-auto","overflow-x-hide"],["cdkDropList","",1,"no-padding","example-list",3,"cdkDropListData","cdkDropListDropped"],["class","height-auto cursor-pointer border-bottom no-padding bg-grey no-box-shadow","cdkDragLockAxis","y","cdkDrag","",4,"ngFor","ngForOf"],["cdkDragLockAxis","y","cdkDrag","",1,"height-auto","cursor-pointer","border-bottom","no-padding","bg-grey","no-box-shadow"],[1,"text-gray-600","display-flex","flex-space-between"],[1,"display-flex","align-items-center"],["cdkDragHandle","",1,"no-padding","text-gray-400",3,"ngClass"],[1,"no-padding",3,"ngClass","click"],[1,"flex-grow-1",3,"ngClass","click"],[1,"no-text-eclipse","font-full-em","height-auto","padding-mini-t-b","padding-mini-r-l",3,"ngClass"],["type","button",1,"display-block","cursor-pointer","width-18","height-18","text-center","no-padding","no-border","no-bg",3,"ngClass","click"],[1,"no-padding","width-18","height-18","line-height-15","font-full-rem","text-green-600"],["type","button",1,"display-block","cursor-pointer","width-18","height-18","text-center","no-padding","no-border","no-bg",3,"click"],[1,"no-padding","width-18","height-18","line-height-15","font-full-rem","text-red-600"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","24px","height","30px","viewBox","0 0 24 30",0,"xml","space","preserve",2,"enable-background","new 0 0 50 50"],["x","0","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0s","dur","0.6s","repeatCount","indefinite"],["x","10","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0.15s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0.15s","dur","0.6s","repeatCount","indefinite"],["x","20","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0.3s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0.3s","dur","0.6s","repeatCount","indefinite"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Tb(2,"h1",1),I.Ic(3),I.fc(4,"translate"),I.Tb(5,"span",2),I.Ic(6),I.fc(7,"translate"),I.Sb(),I.Ic(8,"\n  "),I.Sb(),I.Ic(9,"\n\n  "),I.Tb(10,"div",3),I.Ic(11,"\n    "),I.Tb(12,"form",4),I.Ic(13,"\n\n      "),I.Gc(14,me,7,2,"div",5),I.Ic(15,"\n\n      "),I.Tb(16,"div",6),I.Ic(17,"\n        "),I.Tb(18,"div",7),I.Ic(19,"\n          "),I.Tb(20,"mat-form-field",8),I.Ic(21,"\n            "),I.Tb(22,"input",9),I.ac("keydown",(function(t){return"Enter"===t.code?e.edit?e.saveTask():e.addTask():""})),I.fc(23,"translate"),I.Sb(),I.Ic(24,"\n\n            "),I.Tb(25,"button",10),I.ac("click",(function(){return e.edit?e.saveTask():e.addTask()})),I.Ic(26,"\n              "),I.Tb(27,"mat-icon"),I.Ic(28,"check"),I.Sb(),I.Ic(29,"\n            "),I.Sb(),I.Ic(30,"\n          "),I.Sb(),I.Ic(31,"\n        "),I.Sb(),I.Ic(32,"\n      "),I.Sb(),I.Ic(33,"\n      "),I.Ic(34,"\n    "),I.Sb(),I.Ic(35,"\n  "),I.Sb(),I.Ic(36,"\n\n  "),I.Gc(37,ve,33,3,"div",11),I.Ic(38,"\n"),I.Sb(),I.Ic(39,"\n")),2&t&&(I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(3),I.Kc("\n    ",I.gc(4,10,"tasks.task_todo.todo_list"),"\n    "),I.Bb(2),I.kc("ngClass",e.rtlDirection?"margin-r-half":"margin-l-half"),I.Bb(1),I.Lc("\n      ",e.tasks.length?e.tasks.length:""," ",I.gc(7,12,e.tasks.length?"global.items":""),"\n    "),I.Bb(6),I.kc("formGroup",e.form),I.Bb(2),I.kc("ngIf",e.tasks.length),I.Bb(8),I.lc("placeholder",I.gc(23,14,"tasks.task_todo.add_an_item")),I.Bb(3),I.kc("disabled",""===e.form.get("taskName").value),I.Bb(12),I.kc("ngIf",e.loadingIndicator.status&&"todo"===e.loadingIndicator.serviceName))},directives:[k.b,i.i,u.v,u.o,u.i,i.k,y.c,S.b,u.c,u.n,u.g,B.a,y.h,_.a,fe.c,i.j,he.a,fe.a,he.c,fe.b],pipes:[a.c],styles:[".text-line-through[_ngcontent-%COMP%]{text-decoration:line-through}.border-bottom[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #ddd}.flex-grow-1[_ngcontent-%COMP%]{flex-grow:1!important}"]}),t}(),ke=n("gFX4"),ye=n("AytR"),Se=function(){function t(t){var e=this;this.userInfoService=t,this._subscription=new s.Subscription,this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return e.loggedInUser=t})))}return t.prototype.setupSocketConnection=function(t){return this.socket=ke(ye.a.SOCKET_URL,{query:{token:"cde",userEmail:this.loggedInUser.email,componentName:t}}),this.socket},t.\u0275fac=function(e){return new(e||t)(I.Xb(l.a))},t.\u0275prov=I.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),we=n("zkoq"),Te=n("Qu3c"),De=n("Xa2L"),Ce=n("K3ar"),xe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Be=function(){return(Be=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},_e=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{c(i.next(t))}catch(e){a(e)}}function s(t){try{c(i.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))},Le=function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(s){a=[6,s],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ne=["searchBox"];function Oe(t,e){if(1&t){var n=I.Ub();I.Tb(0,"mat-grid-tile",4),I.Ic(1,"\n    "),I.Tb(2,"div",5),I.Ic(3,"\n      "),I.Tb(4,"span",6),I.Ic(5),I.fc(6,"translate"),I.Sb(),I.Ic(7,"\n\n      "),I.Tb(8,"a",7),I.ac("click",(function(){I.wc(n);var t=e.$implicit,i=I.ec(2);return i.showFilterArgs[t.id]=!0,i.focusSearchBox(t.id)})),I.Ic(9,"\n        "),I.Tb(10,"mat-icon",8),I.Ic(11,"search"),I.Sb(),I.Ic(12,"\n      "),I.Sb(),I.Ic(13,"\n\n      "),I.Tb(14,"span",9),I.Ic(15),I.Sb(),I.Ic(16,"\n\n      "),I.Tb(17,"div",10),I.Ic(18,"\n        "),I.Tb(19,"mat-icon",11),I.Ic(20,"\n          search\n        "),I.Sb(),I.Ic(21,"\n\n        "),I.Tb(22,"input",12,13),I.ac("ngModelChange",(function(t){I.wc(n);var i=e.$implicit;return I.ec(2).filterArgs[i.id]=t}))("keydown",(function(t){I.wc(n);var i=e.$implicit,r=I.ec(2);return"Escape"===t.code&&(r.showFilterArgs[i.id]=!1),"Escape"===t.code?r.filterArgs[i.id]=null:""})),I.fc(24,"translate"),I.fc(25,"translate"),I.Sb(),I.Ic(26,"\n\n        "),I.Tb(27,"mat-icon",14),I.ac("click",(function(){I.wc(n);var t=e.$implicit,i=I.ec(2);return i.filterArgs[t.id]=null,i.showFilterArgs[t.id]=!1})),I.Ic(28,"\n          close\n        "),I.Sb(),I.Ic(29,"\n      "),I.Sb(),I.Ic(30,"\n    "),I.Sb(),I.Ic(31,"\n  "),I.Sb()}if(2&t){var i=e.$implicit,r=I.ec(2);I.kc("colspan",i.cols)("rowspan",i.rows),I.Bb(5),I.Jc(I.gc(6,13,i.name)),I.Bb(3),I.kc("ngClass",r.rtlDirection?"margin-l-full margin-r-auto":"margin-r-full margin-l-auto"),I.Bb(6),I.kc("ngClass",i.id),I.Bb(1),I.Kc("\n        ",i.tasks.length,"\n      "),I.Bb(2),I.kc("ngClass",r.showFilterArgs[i.id]?"display-flex":"display-none"),I.Bb(2),I.kc("ngClass",r.rtlDirection?"right-half":"left-half"),I.Bb(3),I.mc("placeholder","",I.gc(24,15,"tasks.boards.search_in")," ",I.gc(25,17,i.name),""),I.kc("ngModel",r.filterArgs[i.id]),I.Cb("aria-label",i.id),I.Bb(5),I.kc("ngClass",r.rtlDirection?"left-half":"right-half")}}function je(t,e){if(1&t&&(I.Tb(0,"mat-grid-list",2),I.Ic(1,"\n  "),I.Gc(2,Oe,32,19,"mat-grid-tile",3),I.Ic(3,"\n"),I.Sb()),2&t){var n=I.ec();I.kc("dir",n.rtlDirection?"rtl":"ltr"),I.Bb(2),I.kc("ngForOf",n.boards)}}function Me(t,e){if(1&t&&(I.Tb(0,"div",21),I.Ic(1,"\n        "),I.Ob(2,"img",22),I.Ic(3,"\n        "),I.Tb(4,"span",23),I.Ic(5),I.fc(6,"translate"),I.Sb(),I.Ic(7,"\n      "),I.Sb()),2&t){var n=I.ec().$implicit;I.Bb(2),I.kc("src","assets/board-empty-state/"+n.id+".png",I.yc)("alt",n.id),I.Bb(3),I.Kc("\n          ",I.gc(6,3,"global.no_result"),"\n        ")}}var Pe=function(t){return{"overdue-task":t}};function Fe(t,e){if(1&t){var n=I.Ub();I.Tb(0,"mat-card",24),I.ac("click",(function(){I.wc(n);var t=e.$implicit,i=I.ec().$implicit;return I.ec(2).showTaskDetail(t,i.id)})),I.fc(1,"translate"),I.Ic(2,"\n        "),I.Tb(3,"mat-card-header",25),I.Ic(4,"\n          "),I.Tb(5,"mat-card-subtitle",26),I.Ic(6,"\n            "),I.Tb(7,"span",27),I.Ic(8,"\n              "),I.Tb(9,"mat-icon",28),I.Ic(10,"access_alarm"),I.Sb(),I.Ic(11),I.fc(12,"jalali"),I.Sb(),I.Ic(13,"\n\n            "),I.Tb(14,"span"),I.Ic(15),I.Sb(),I.Ic(16,"\n          "),I.Sb(),I.Ic(17,"\n          "),I.Tb(18,"mat-card-title",29),I.Ic(19),I.Sb(),I.Ic(20,"\n        "),I.Sb(),I.Ic(21,"\n\n        "),I.Tb(22,"mat-card-content",30),I.Ic(23,"\n          "),I.Tb(24,"mat-icon",28),I.Ic(25,"work\n          "),I.Sb(),I.Ic(26),I.Sb(),I.Ic(27,"\n\n        "),I.Tb(28,"mat-card-footer",31),I.Ic(29,"\n          "),I.Tb(30,"span",32),I.Ic(31,"\n            "),I.Ob(32,"img",33),I.Ic(33,"\n            "),I.Tb(34,"span",34),I.Ic(35),I.Sb(),I.Ic(36,"\n          "),I.Sb(),I.Ic(37,"\n\n          "),I.Tb(38,"span",35),I.fc(39,"translate"),I.Ic(40,"\n            "),I.Tb(41,"mat-icon",36),I.Ic(42,"\n              rule\n            "),I.Sb(),I.Ic(43),I.Sb(),I.Ic(44,"\n\n          "),I.Tb(45,"span",37),I.fc(46,"translate"),I.Ic(47,"\n            "),I.Tb(48,"span",38),I.Ic(49),I.Sb(),I.Ic(50,"\n            "),I.Tb(51,"mat-progress-spinner",39),I.Ic(52,"\n            "),I.Sb(),I.Ic(53,"\n          "),I.Sb(),I.Ic(54,"\n        "),I.Sb(),I.Ic(55,"\n      "),I.Sb()}if(2&t){var i=e.$implicit,r=I.ec(3);I.lc("matTooltip",i.overdue?I.gc(1,23,"tasks.boards.overdue"):null),I.kc("ngClass",I.oc(32,Pe,i.overdue))("cdkDragData",i),I.Bb(9),I.kc("ngClass",r.rtlDirection?"margin-l-half":"margin-r-half"),I.Bb(2),I.Kc("\n              ",I.hc(12,25,i.stopAt,r.rtlDirection),"\n            "),I.Bb(4),I.Kc("\n              #",i.taskId,"\n            "),I.Bb(4),I.Kc("\n            ",i.taskName,"\n          "),I.Bb(5),I.kc("ngClass",r.rtlDirection?"margin-l-half":"margin-r-half"),I.Bb(2),I.Kc("\n          ",i.project.projectName,"\n        "),I.Bb(6),I.kc("src","assets/profileImg/"+i.assignTo.email+".jpg",I.yc)("alt",i.assignTo.name+" "+i.assignTo.family),I.Bb(3),I.Kc("\n              ",i.assignTo.name+" "+i.assignTo.family,"\n            "),I.Bb(3),I.lc("matTooltip",I.gc(39,28,"tasks.boards.todo_count")),I.kc("ngClass",r.rtlDirection?"margin-l-full margin-r-auto":"margin-r-full margin-l-auto")("matTooltipPosition",r.rtlDirection?"right":"left"),I.Bb(5),I.Kc("\n            ",i.todoCount,"\n          "),I.Bb(2),I.lc("matTooltip",I.gc(46,30,"tasks.boards.task_percentage")),I.kc("matTooltipPosition",r.rtlDirection?"left":"right"),I.Bb(4),I.Kc("\n              ",i.percentage,"\n            "),I.Bb(2),I.kc("ngClass",r.getColor(i.percentage))("diameter",25)("strokeWidth",2)("value",i.percentage)}}function Ae(t,e){if(1&t){var n=I.Ub();I.Tb(0,"mat-grid-tile",17),I.Ic(1,"\n    "),I.Tb(2,"div",18),I.ac("cdkDropListDropped",(function(t){return I.wc(n),I.ec(2).changeStatus(t)})),I.Ic(3,"\n      "),I.Gc(4,Me,8,5,"div",19),I.Ic(5,"\n\n      "),I.Gc(6,Fe,56,34,"mat-card",20),I.fc(7,"myFilter"),I.Ic(8,"\n    "),I.Sb(),I.Ic(9,"\n  "),I.Sb()}if(2&t){var i=e.$implicit,r=I.ec(2);I.kc("colspan",i.cols)("rowspan",i.rows),I.Bb(2),I.kc("id",i.id)("cdkDropListData",i.tasks)("cdkDropListConnectedTo",r.connectedTo),I.Bb(2),I.kc("ngIf",!i.tasks.length),I.Bb(2),I.kc("ngForOf",I.hc(7,7,i.tasks,r.filterArgs[i.id]))}}function Ee(t,e){if(1&t&&(I.Tb(0,"mat-grid-list",15),I.Ic(1,"\n  "),I.Gc(2,Ae,10,10,"mat-grid-tile",16),I.Ic(3,"\n"),I.Sb()),2&t){var n=I.ec();I.Bb(2),I.kc("ngForOf",n.boards)}}var Ye=function(t){function e(e,n,i,r,a,o,c,l,u,d,p,f,h){var b=t.call(this,i,o)||this;return b.dialog=e,b.api=n,b.injector=i,b.socketService=r,b.messageService=a,b.userInfoService=o,b.currentTaskService=c,b.refreshLoginService=l,b.refreshBoardService=u,b.windowManagerService=d,b.buttonSheetDataService=p,b.taskEssentialInfoService=f,b.loadingIndicatorService=h,b.triggerBottomSheet=new I.o,b.pushTaskEssentialInfo=new I.o,b.resetFilter=new I.o,b.refreshData=!1,b.myTasks=[],b.rowHeight="0",b.connectedTo=[],b.boards=[],b.usersList=[],b.projectsList=[],b.currentTasks=null,b.filterArgs=null,b.showFilterArgs=null,b._subscription=new s.Subscription,b._subscription.add(b.currentTaskService.currentTask.subscribe((function(t){return b.currentTasks=t}))),b._subscription.add(b.refreshBoardService.currentDoRefresh.subscribe((function(t){t&&(b.getBoards(),b.doResetFilter())}))),b._subscription.add(b.userInfoService.currentLoginData.subscribe((function(){b.getBoards(),b.doResetFilter()}))),b}return xe(e,t),e.prototype.ngOnInit=function(){this.rowHeight="100%",this.resetColumnFilter()},e.prototype.resetColumnFilter=function(){this.filterArgs={todo:null,inProgress:null,done:null},this.showFilterArgs={todo:!1,inProgress:!1,done:!1}},e.prototype.changeStatus=function(t){var e=this;if(t.previousContainer===t.container)Object(fe.e)(t.container.data,t.previousIndex,t.currentIndex);else{this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),Object(fe.f)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex);var n=t.item.data;this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.taskChangeStatus(n,t.container.id).subscribe((function(n){return _e(e,void 0,void 0,(function(){var e;return Le(this,(function(i){return this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),n.result&&(e=n.content,this.messageService.showMessage(n.message),this.assignNewTaskToBoard(e,t.previousContainer.id,t.container.id)),[2]}))}))}),(function(t){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.refreshLoginService.openLoginDialog(t)})))}},e.prototype.assignNewTaskToBoard=function(t,e,n){return _e(this,void 0,void 0,(function(){var i,r,a,o,s=this;return Le(this,(function(c){switch(c.label){case 0:return[4,this.projectsList.filter((function(e){return e.projectId===t.project.projectId})).pop()];case 1:return i=c.sent(),[4,this.usersList.filter((function(e){return e.adminId===t.assignTo.adminId})).pop()];case 2:return r=c.sent(),this.myTasks=[],[4,this.boards.map((function(e){e.id===n&&e.tasks.map((function(e){return e.taskId===t.taskId&&(t.assignTo=r,t.project=i,e=Object.assign(e,t)),e.assignTo.email===s.loggedInUser.email&&"inProgress"===n&&s.myTasks.push(e),e}))}))];case 3:return c.sent(),this.myTasks.length?(this.currentTaskService.changeCurrentTask(this.myTasks),this.myTasks=[]):this.currentTasks.length?"inProgress"!==t.boardStatus&&(a=this.currentTasks.findIndex((function(e){return e.taskId===t.taskId})),this.currentTasks.splice(a,1),this.currentTaskService.changeCurrentTask(this.currentTasks)):this.currentTaskService.changeCurrentTask(null),"inProgress"!==e||"todo"!==n&&"done"!==n?"todo"===e&&"done"===n?this.showTaskStopModal(t):"done"===e&&"todo"===n&&(o=Be(Be({},t),{percentage:0,boardStatus:"todo"}),this.showTaskStopModal(o)):this.showTaskStopModal(t),this.resetColumnFilter(),[2]}}))}))},e.prototype.showTaskStopModal=function(t){var e=this,n=this.dialog.open(Qt,{data:t,autoFocus:!1,width:"500px",height:"310px",disableClose:!0});this.windowManagerService.dialogOnTop(n.id),this._subscription.add(n.afterClosed().subscribe((function(t){t&&(e.getBoards(),e.doResetFilter())})))},e.prototype.showTaskDetail=function(t,e){this.buttonSheetDataService.changeButtonSheetData({component:pe,height:"98%",width:"95%",data:{action:"detail",usersList:this.usersList,projectsList:this.projectsList,task:t,boardStatus:e,boardsList:this.boards}})},e.prototype.putTasksToAllBoards=function(t){var e=this,n=[],i=[],r=[];this.boards=[],this.connectedTo=[],this.usersList=t.content.users.list,this.projectsList=t.content.projects.list,this.pushTaskEssentialInfo.emit({usersList:this.usersList,projectsList:this.projectsList}),this.myTasks=[],t.content.boards.list.map((function(t){t.assignTo.email===e.loggedInUser.email&&"inProgress"===t.boardStatus&&e.myTasks.push(t);var a=t.stopAt,o=new Date,s=h(o).format("YYYY-MM-DD HH:mm:ss"),c=h.utc(a,"YYYY-MM-DD HH:mm:ss").isSameOrBefore(s);switch(t.boardStatus){case"todo":t.overdue=c,n.push(t);break;case"inProgress":t.overdue=c,i.push(t);break;case"done":r.push(t)}})),this.boards.push({id:"todo",cols:1,rows:1,name:"tasks.boards.todo",tasks:n}),this.boards.push({id:"inProgress",cols:1,rows:1,name:"tasks.boards.in_progress",tasks:i}),this.boards.push({id:"done",cols:1,rows:1,name:"tasks.boards.done",tasks:r});for(var a=0,o=this.boards;a<o.length;a++)this.connectedTo.push(o[a].id);this.currentTaskService.changeCurrentTask(this.myTasks),this.myTasks=[],this.resetColumnFilter()},e.prototype.getBoards=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.loginData&&this.loginData.token_type&&(this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.boards(this.loggedInUser.email).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),1===e.result&&(t.taskEssentialInfoService.changeUsersProjectsList({usersList:e.content.users.list,projectsList:e.content.projects.list}),t.putTasksToAllBoards(e),t.resetColumnFilter())}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)}))))},e.prototype.getColor=function(t){return t<10&&t>=0?"spinner-color-red":t<=30&&t>10?"spinner-color-redorange":t<=50&&t>30?"spinner-color-orange":t<=80&&t>50?"spinner-color-lightgreen":t>80?"spinner-color-green":void 0},e.prototype.doResetFilter=function(){this.resetFilter.emit(!0)},e.prototype.focusSearchBox=function(t){this.searchBoxes.toArray().map((function(e){var n=e.nativeElement;n.getAttribute("aria-label")===t&&setTimeout((function(){return n.focus()}),0)}))},e.prototype.ngOnChanges=function(t){this.refreshData&&(this.getBoards(),this.doResetFilter()),t.filterBoards&&!t.filterBoards.firstChange&&(this.filterBoards=t.filterBoards.currentValue,this.putTasksToAllBoards(this.filterBoards.resp)),t.pushTaskToBoard&&!t.pushTaskToBoard.firstChange&&(this.pushTaskToBoard=t.pushTaskToBoard.currentValue,this.assignNewTaskToBoard(this.pushTaskToBoard.task,this.pushTaskToBoard.prevContainer,this.pushTaskToBoard.newContainer))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(I.Nb(f.b),I.Nb(d.a),I.Nb(I.t),I.Nb(Se),I.Nb(p.a),I.Nb(l.a),I.Nb(nt.a),I.Nb(g.a),I.Nb(Zt.a),I.Nb(It.a),I.Nb(yt),I.Nb(te),I.Nb(m.a))},e.\u0275cmp=I.Hb({type:e,selectors:[["app-task-board"]],viewQuery:function(t,e){var n;1&t&&I.Oc(Ne,!0),2&t&&I.rc(n=I.bc())&&(e.searchBoxes=n)},inputs:{pushTaskToBoard:"pushTaskToBoard",rtlDirection:"rtlDirection",refreshData:"refreshData",filterBoards:"filterBoards"},outputs:{triggerBottomSheet:"triggerBottomSheet",pushTaskEssentialInfo:"pushTaskEssentialInfo",resetFilter:"resetFilter"},features:[I.yb,I.zb],decls:4,vars:2,consts:[["cols","3","gutterSize","10","rowHeight","40px",3,"dir",4,"ngIf"],["class","grid-height","cols","3","gutterSize","10","rowHeight","fit",4,"ngIf"],["cols","3","gutterSize","10","rowHeight","40px",3,"dir"],["class","board-container round-corner-top",3,"colspan","rowspan",4,"ngFor","ngForOf"],[1,"board-container","round-corner-top",3,"colspan","rowspan"],[1,"board-name","pos-abs","top-0","right-0","full-width","full-height","padding-mini-t-b","padding-r-l","display-flex","flex-space-between","align-items-center","pos-rel"],[1,"font-9-em"],[1,"cursor-pointer","full-height",3,"ngClass","click"],[1,"text-blue-700"],[1,"task-count","width-25","height-25","line-height-20","font-7-em","text-center","text-weight-500",3,"ngClass"],[1,"full-width","full-height","flex-space-between","align-items-center","pos-abs","top-0","bottom-0","left-0","right-0",3,"ngClass"],[1,"pos-abs","width-25","height-25","line-height-20","font-full-plus-two-tenth-em","flex-center",3,"ngClass"],[1,"font-9-em","full-width","full-height","no-border","padding-r-l-two-plus-half","no-margin","round-corner-top",3,"ngModel","placeholder","ngModelChange","keydown"],["searchBox",""],[1,"pos-abs","width-25","height-25","line-height-20","font-full-plus-two-tenth-em","flex-center","cursor-pointer",3,"ngClass","click"],["cols","3","gutterSize","10","rowHeight","fit",1,"grid-height"],["class","board-container",3,"colspan","rowspan",4,"ngFor","ngForOf"],[1,"board-container",3,"colspan","rowspan"],["cdkDropList","",1,"task-container","full-height","full-width","padding-full","overflow-x-hide","overflow-y-auto",3,"id","cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["class","flex-center full-width full-height pos-abs left-0 right-0 top-0 bottom-0 z-index-0",4,"ngIf"],["class","margin-b-full bg-white card-hover","cdkDrag","",3,"ngClass","cdkDragData","matTooltip","click",4,"ngFor","ngForOf"],[1,"flex-center","full-width","full-height","pos-abs","left-0","right-0","top-0","bottom-0","z-index-0"],[1,"width-250",3,"src","alt"],[1,"pos-abs","left-0","right-0","bottom-0","top-0","z-index-0","margin-auto","text-gray-400","font-8-rem","full-width","height-45","line-height-150","text-center"],["cdkDrag","",1,"margin-b-full","bg-white","card-hover",3,"ngClass","cdkDragData","matTooltip","click"],[1,"full-width"],[1,"full-width","height-30","text-gray-600","display-flex","flex-space-between","no-margin"],[1,"display-flex"],[1,"width-18","height-18","font-full-plus-three-tenth-em",3,"ngClass"],[1,"full-width","clear-both","text-pink-600","font-full-em","padding-t-half"],[1,"text-gray-600","margin-b-half","display-flex"],[1,"padding-mini-t-b","padding-r-l","height-45","display-flex","flex-space-between"],[1,"display-flex","align-items-center"],["onerror","this.src='assets/profileImg/0.jpg'",1,"display-block","width-25","height-25","round-corner-all","mat-elevation-z1",3,"src","alt"],[1,"display-block","full-height","line-height-25","padding-mini-r-l","text-eclipse","width-150"],[1,"display-flex","padding-tiny-t-b",3,"ngClass","matTooltip","matTooltipPosition"],[1,"width-18","height-18","font-full-plus-three-tenth-em","line-height-20","margin-mini-r-l"],[1,"width-25","height-25","round-corner-all","mat-elevation-z1","pos-rel",3,"matTooltip","matTooltipPosition"],[1,"font-6-em","text-gray-800","pos-abs","left-0","right-0","top-0","bottom-0","margin-auto","text-center","line-height-25","text-weight-500"],["color","accent",3,"ngClass","diameter","strokeWidth","value"]],template:function(t,e){1&t&&(I.Gc(0,je,4,2,"mat-grid-list",0),I.Ic(1,"\n"),I.Gc(2,Ee,4,1,"mat-grid-list",1),I.Ic(3,"\n")),2&t&&(I.kc("ngIf",e.boards.length),I.Bb(2),I.kc("ngIf",e.boards.length))},directives:function(){return[i.k,we.a,k.b,i.j,we.c,i.i,_.a,u.c,u.n,u.q,fe.c,he.a,fe.a,Te.a,he.e,he.g,he.h,he.c,he.d,De.a]},pipes:function(){return[a.c,Re,Ce.a]},styles:[".board-container[_ngcontent-%COMP%]{border:1px solid #ddd;background:#f8f8f8}.board-container[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]{align-self:start}.grid-height[_ngcontent-%COMP%]{height:calc(100% - 40px)}.line-height-22[_ngcontent-%COMP%]{line-height:22px!important}.task-count[_ngcontent-%COMP%]{border-radius:100px!important}.task-count.todo[_ngcontent-%COMP%]{border:2px solid #f44336;color:#f44336}.task-count.inProgress[_ngcontent-%COMP%]{border:2px solid #ffa000;color:#ffa000}.task-count.done[_ngcontent-%COMP%]{border:2px solid #388e3c;color:#388e3c}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.task-item[_ngcontent-%COMP%]:last-child{border:none}.tasks-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.mat-card[_ngcontent-%COMP%]:hover{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-card-footer[_ngcontent-%COMP%]{border-top:1px solid #ddd}.mat-card-footer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #ddd}.overdue-task[_ngcontent-%COMP%]{border:1px solid #f44336;border-radius:5px;box-shadow:0 4px 10px -4px #f44336}.padding-r-l-two-plus-half[_ngcontent-%COMP%]{padding-right:2.5em;padding-left:2.5em}"]}),e}(c.a),Re=function(){function t(){}return t.prototype.transform=function(t,e){return t&&e?t.filter((function(t){return t.taskName.toLowerCase().includes(e.toLowerCase())||t.project.projectName.toLowerCase().includes(e.toLowerCase())||t.assigner.toLowerCase().includes(e.toLowerCase())||t.assignTo.name.toLowerCase().includes(e.toLowerCase())||t.assignTo.family.toLowerCase().includes(e.toLowerCase())||t.assignTo.email.toLowerCase().includes(e.toLowerCase())?t:void 0})):t},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=I.Mb({name:"myFilter",type:t,pure:!1}),t}(),Ue=n("M9IT"),qe=n("+0xr"),Ge=function(){function t(t,e,n,i,r){var a=this;this.data=t,this.windowManagerService=e,this.dialog=n,this.dialogRef=i,this.viewDirection=r,this.taskId=0,this.cancel=new I.o,this.usersList=[],this._subscription=new s.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return a.rtlDirection=t})))}return t.prototype.ngOnInit=function(){this.taskDescription=this.data.element.description,this.NameDescription=this.data.task.taskName,this.taskPercentage=this.data.element.percentage,this.DateStop=this.data.element.taskDateStop},t.prototype.close=function(){this.dialogRef.close()},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(f.a),I.Nb(It.a),I.Nb(f.b),I.Nb(f.e),I.Nb(v.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-description"]],viewQuery:function(t,e){var n;1&t&&I.Cc(Ue.a,!0),2&t&&I.rc(n=I.bc())&&(e.paginator=n.first)},inputs:{rtlDirection:"rtlDirection",loginData:"loginData",taskId:"taskId",editable:"editable",usersList:"usersList"},outputs:{cancel:"cancel"},decls:45,vars:20,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99"],[1,"full-height",3,"dir"],[1,"height-45","overflow-x-hide","overflow-y-auto","full-width"],[1,"margin-b-full","font-full-em","text-pink-600","text-weight-500","margin-b-half",3,"ngClass"],[1,"pos-abs","top-full","cursor-pointer","text-gray-600",3,"ngClass","click"],[1,"text-grey-500"],[1,"height-full-minus-90"],[1,"half-width","display-block","text-gray-600","font-7-em","margin-b-full","display-flex",3,"ngClass"],[1,"width-18","height-18","font-full-plus-three-tenth-em","line-height-20"],[1,"half-width","display-block","text-gray-600","font-7-em","margin-b-full",3,"ngClass"],[3,"ngClass"],[1,"height-45","display-flex","justify-content-end","full-width","display-flex","align-items-end","justify-content-end"],["type","button",1,"no-bg","no-border","cursor-pointer","text-red-500","line-height-30","font-9-em","overflow-hide","text-weight-normal","full-width",3,"ngClass","click"],[1,"padding-mini-r-l"]],template:function(t,e){1&t&&(I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Tb(2,"div",1),I.Ic(3,"\n    "),I.Tb(4,"div",2),I.Ic(5,"\n      "),I.Tb(6,"h1",3),I.Ic(7),I.Sb(),I.Ic(8,"\n      "),I.Tb(9,"a",4),I.ac("click",(function(){return e.close()})),I.Ic(10,"\n        "),I.Tb(11,"mat-icon",5),I.Ic(12,"close"),I.Sb(),I.Ic(13,"\n      "),I.Sb(),I.Ic(14,"\n    "),I.Sb(),I.Ic(15,"\n    "),I.Tb(16,"div",6),I.Ic(17,"\n      "),I.Tb(18,"span",7),I.Ic(19,"\n           "),I.Tb(20,"mat-icon",8),I.Ic(21,"access_alarm"),I.Sb(),I.Ic(22),I.fc(23,"jalali"),I.Sb(),I.Ic(24,"\n      "),I.Tb(25,"span",9),I.Ic(26),I.fc(27,"translate"),I.Sb(),I.Ic(28,"\n      "),I.Tb(29,"p",10),I.Ic(30),I.Sb(),I.Ic(31,"\n    "),I.Sb(),I.Ic(32,"\n    "),I.Tb(33,"div",11),I.Ic(34,"\n      "),I.Tb(35,"button",12),I.ac("click",(function(){return e.close()})),I.Ic(36,"\n        "),I.Tb(37,"span",13),I.Ic(38),I.fc(39,"translate"),I.Sb(),I.Ic(40,"\n      "),I.Sb(),I.Ic(41,"\n    "),I.Sb(),I.Ic(42,"\n  "),I.Sb(),I.Ic(43,"\n"),I.Sb(),I.Ic(44,"\n")),2&t&&(I.Bb(2),I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(4),I.kc("ngClass",e.rtlDirection?"text-right":"text-left"),I.Bb(1),I.Kc("\n        ",e.NameDescription,"\n      "),I.Bb(2),I.kc("ngClass",e.rtlDirection?"left-full ":"right-full"),I.Bb(9),I.kc("ngClass",e.rtlDirection?"text-right float-right":"text-left float-left"),I.Bb(4),I.Kc(": ",I.hc(23,13,e.DateStop,e.rtlDirection),"\n      "),I.Bb(3),I.kc("ngClass",e.rtlDirection?"text-right float-right":"text-left float-left"),I.Bb(1),I.Lc("",I.gc(27,16,"tasks.boards.task_percentage"),"\n        :  ",e.taskPercentage,"%\n      "),I.Bb(3),I.kc("ngClass",e.rtlDirection?"text-right":"text-left"),I.Bb(1),I.Jc(e.taskDescription),I.Bb(5),I.kc("ngClass",e.rtlDirection?"text-left":"text-right"),I.Bb(3),I.Jc(I.gc(39,18,"global.dismiss")))},directives:[k.b,i.i,_.a],pipes:[Ce.a,a.c],encapsulation:2}),t}();function He(t,e){1&t&&(I.Tb(0,"th",18),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Jc(I.gc(2,1,"tasks.form.start_at")))}function ze(t,e){if(1&t&&(I.Tb(0,"td",19),I.Ic(1,"\n          "),I.Tb(2,"span",20),I.Ic(3),I.fc(4,"jalali"),I.Sb(),I.Ic(5,"\n        "),I.Sb()),2&t){var n=e.$implicit,i=I.ec();I.Bb(3),I.Jc(I.hc(4,1,n.taskDateStart,i.rtlDirection))}}function Je(t,e){1&t&&(I.Tb(0,"th",18),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Jc(I.gc(2,1,"tasks.form.stop_at")))}function Ke(t,e){if(1&t&&(I.Tb(0,"td",19),I.Ic(1,"\n          "),I.Tb(2,"span",20),I.Ic(3),I.fc(4,"jalali"),I.Sb(),I.Ic(5,"\n        "),I.Sb()),2&t){var n=e.$implicit,i=I.ec();I.Bb(3),I.Jc(I.hc(4,1,n.taskDateStop,i.rtlDirection))}}function Xe(t,e){1&t&&(I.Tb(0,"th",18),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Jc(I.gc(2,1,"tasks.form.task_admin_start")))}function Ve(t,e){if(1&t&&(I.Tb(0,"td",19),I.Ic(1,"\n          "),I.Tb(2,"span",20),I.Ic(3),I.Sb(),I.Ic(4,"\n        "),I.Sb()),2&t){var n=e.$implicit;I.Bb(3),I.Jc(n.adminIdStartTask)}}function $e(t,e){1&t&&(I.Tb(0,"th",18),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Jc(I.gc(2,1,"tasks.form.task_admin_stop")))}function We(t,e){if(1&t&&(I.Tb(0,"td",19),I.Ic(1,"\n          "),I.Tb(2,"span",20),I.Ic(3),I.Sb(),I.Ic(4,"\n        "),I.Sb()),2&t){var n=e.$implicit;I.Bb(3),I.Jc(n.adminIdStopTask)}}function Qe(t,e){1&t&&(I.Tb(0,"th",18),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Jc(I.gc(2,1,"tasks.boards.task_percentage")))}function Ze(t,e){if(1&t&&(I.Tb(0,"td",19),I.Ic(1,"\n          "),I.Tb(2,"span",20),I.Ic(3),I.Sb(),I.Ic(4,"\n        "),I.Sb()),2&t){var n=e.$implicit;I.Bb(3),I.Kc("",n.percentage,"%")}}function tn(t,e){1&t&&(I.Tb(0,"th",18),I.Ic(1),I.fc(2,"translate"),I.Sb()),2&t&&(I.Bb(1),I.Jc(I.gc(2,1,"tasks.form.task_description")))}function en(t,e){1&t&&(I.Tb(0,"span"),I.Ic(1,"\n            "),I.Tb(2,"a",23),I.Ic(3),I.Sb(),I.Ic(4,"\n          "),I.Sb()),2&t&&(I.Bb(3),I.Kc("\n             ","-","\n            "))}function nn(t,e){if(1&t){var n=I.Ub();I.Tb(0,"a",24),I.ac("click",(function(){I.wc(n);var t=I.ec().$implicit;return I.ec().descriptionTask(t)})),I.Ic(1,"\n            "),I.Tb(2,"span",25),I.Ic(3),I.fc(4,"translate"),I.Sb(),I.Ic(5,"\n          "),I.Sb()}2&t&&(I.Bb(3),I.Jc(I.gc(4,1,"tasks.task_detail.overview_description")))}function rn(t,e){if(1&t&&(I.Tb(0,"td",19),I.Ic(1,"\n          "),I.Ic(2,"\n          "),I.Gc(3,en,5,1,"span",21),I.Ic(4,"\n\n          "),I.Gc(5,nn,6,3,"a",22),I.Ic(6,"\n        "),I.Sb()),2&t){var n=e.$implicit;I.Bb(3),I.kc("ngIf",!n.description.length),I.Bb(2),I.kc("ngIf",n.description.length)}}function an(t,e){1&t&&I.Ob(0,"tr",26)}function on(t,e){1&t&&I.Ob(0,"tr",27)}function sn(t,e){1&t&&(I.Tb(0,"div",28),I.Ic(1,"\n    "),I.Tb(2,"div",29),I.Ic(3,"\n      "),I.dc(),I.Tb(4,"svg",30),I.Ic(5,"\n        "),I.Tb(6,"rect",31),I.Ic(7,"\n          "),I.Ob(8,"animate",32),I.Ic(9,"\n          "),I.Ob(10,"animate",33),I.Ic(11,"\n        "),I.Sb(),I.Ic(12,"\n        "),I.Tb(13,"rect",34),I.Ic(14,"\n          "),I.Ob(15,"animate",35),I.Ic(16,"\n          "),I.Ob(17,"animate",36),I.Ic(18,"\n        "),I.Sb(),I.Ic(19,"\n        "),I.Tb(20,"rect",37),I.Ic(21,"\n          "),I.Ob(22,"animate",38),I.Ic(23,"\n          "),I.Ob(24,"animate",39),I.Ic(25,"\n        "),I.Sb(),I.Ic(26,"\n      "),I.Sb(),I.Ic(27,"\n\n      "),I.cc(),I.Tb(28,"span",40),I.Ic(29),I.fc(30,"translate"),I.Sb(),I.Ic(31,"\n    "),I.Sb(),I.Ic(32,"\n  "),I.Sb()),2&t&&(I.Bb(29),I.Jc(I.gc(30,1,"global.loading")))}var cn=function(){function t(t,e,n,i,r,a,o,c){var l=this;this.dialog=t,this.api=e,this.translate=n,this.messageService=i,this.matPaginatorIntl=r,this.refreshLoginService=a,this.windowManagerService=o,this.loadingIndicatorService=c,this.usersList=[],this.taskReports=[],this.displayedColumns=["taskDateStart","taskDateStop","adminIdStartTask","adminIdStopTask","percentage","description"],this.pageLimit=[10,25,50,100],this.dataSource=new qe.k(this.taskReports),this.loadingIndicator={status:!1,serviceName:"project-report-report"},this.dataChange=!1,this._subscription=new s.Subscription,this._subscription.add(this.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return l.loadingIndicator=t})))}return t.prototype.ngOnInit=function(){var t=this;this.getTaskReport(),this.matPaginatorIntl.itemsPerPageLabel=this.getTranslate("global.pagination.item_per_page"),this.matPaginatorIntl.getRangeLabel=function(e,n,i){if(0===i||0===n)return"0 "+t.getTranslate("global.pagination.from")+" "+i;var r=e*n;return r+1+" - "+(r<(i=Math.max(i,0))?Math.min(r+n,i):r+n)+" "+t.getTranslate("global.pagination.from")+" "+i}},t.prototype.getTaskReport=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project-report"}),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.getTaskReport(this.task.taskId).subscribe((function(e){if(t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project-report"}),1===e.result){t.taskReports=e.contents;var n=0;t.taskReports.map((function(t){if("0000-00-00 00:00:00"!==t.taskDateStop){var e=new Date(t.taskDateStart),i=new Date(t.taskDateStop),r=Math.abs(i.getTime()-e.getTime());n+=r}}));var i=(n=(n-n%1e3)/1e3)%60,r=(n=(n-i)/60)%60,a=(n-r)/60;t.total={hours:a<10?"0"+a:a,minutes:r<10?"0"+r:r,seconds:i<10?"0"+i:i},t.taskReports.map((function(e){if(e.adminIdStartTask){var n=t.usersList.filter((function(t){return t.adminId===e.adminIdStartTask})).pop();e.adminIdStartTask=n?n.name+" "+n.family:"-"}if(e.adminIdStopTask){var i=t.usersList.filter((function(t){return t.adminId===e.adminIdStopTask})).pop();e.adminIdStopTask=i?i.name+" "+i.family:"-"}})),t.dataSource=new qe.k(t.taskReports),t.dataSource.paginator=t.paginator}t.messageService.showMessage(e.message)}),(function(e){e.message&&t.messageService.showMessage(e.message),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project-report"}),t.refreshLoginService.openLoginDialog(e)})))},t.prototype.getTranslate=function(t){return this.translate.instant(t)},t.prototype.descriptionTask=function(t){var e=this,n=this.dialog.open(Ge,{data:{task:this.task,element:t},autoFocus:!1,width:"500px",height:"250px"});this.windowManagerService.dialogOnTop(n.id),this._subscription.add(n.afterClosed().subscribe((function(t){t&&(e.dataChange=!0,setTimeout((function(){e.dataChange=!1}),500))})))},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(f.b),I.Nb(d.a),I.Nb(a.d),I.Nb(p.a),I.Nb(Ue.b),I.Nb(g.a),I.Nb(It.a),I.Nb(m.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-report"]],viewQuery:function(t,e){var n;1&t&&I.Cc(Ue.a,!0),2&t&&I.rc(n=I.bc())&&(e.paginator=n.first)},inputs:{rtlDirection:"rtlDirection",loginData:"loginData",task:"task",usersList:"usersList"},decls:78,vars:21,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","full-width","full-height",3,"dir"],[1,"padding-full","height-40","border-bottom","line-height"],[1,"text-pink-600"],[1,"margin-r-l","text-gray-700"],[1,"full-width","height-full-minus-40","overflow-y-auto","overflow-x-hide","height-full-minus-40"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","taskDateStart"],["class","font-7-em","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","taskDateStop"],["matColumnDef","adminIdStartTask"],["matColumnDef","adminIdStopTask"],["matColumnDef","percentage"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"full-width",3,"pageSizeOptions"],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["mat-header-cell","",1,"font-7-em"],["mat-cell",""],[1,"font-7-em","display-block","width-60"],[4,"ngIf"],["class","line-height-30 font-9-em overflow-hide text-weight-normal no-box-shadow cursor-pointer",3,"click",4,"ngIf"],[1,"font-7-em","display-block"],[1,"line-height-30","font-9-em","overflow-hide","text-weight-normal","no-box-shadow","cursor-pointer",3,"click"],[1,"text-blue"],["mat-header-row",""],["mat-row",""],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","version","1.1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Tb(2,"div",1),I.Ic(3,"\n    "),I.Tb(4,"span",2),I.Ic(5),I.fc(6,"translate"),I.Sb(),I.Ic(7,"\n    "),I.Tb(8,"span",3),I.Ic(9),I.fc(10,"translate"),I.fc(11,"translate"),I.fc(12,"translate"),I.Sb(),I.Ic(13,"\n  "),I.Sb(),I.Ic(14,"\n\n  "),I.Tb(15,"div",4),I.Ic(16,"\n    "),I.Tb(17,"table",5),I.Ic(18,"\n      "),I.Ic(19,"\n      "),I.Rb(20,6),I.Ic(21,"\n        "),I.Gc(22,He,3,3,"th",7),I.Ic(23,"\n        "),I.Gc(24,ze,6,4,"td",8),I.Ic(25,"\n      "),I.Qb(),I.Ic(26,"\n\n      "),I.Ic(27,"\n      "),I.Rb(28,9),I.Ic(29,"\n        "),I.Gc(30,Je,3,3,"th",7),I.Ic(31,"\n        "),I.Gc(32,Ke,6,4,"td",8),I.Ic(33,"\n      "),I.Qb(),I.Ic(34,"\n\n      "),I.Ic(35,"\n      "),I.Rb(36,10),I.Ic(37,"\n        "),I.Gc(38,Xe,3,3,"th",7),I.Ic(39,"\n        "),I.Gc(40,Ve,5,1,"td",8),I.Ic(41,"\n      "),I.Qb(),I.Ic(42,"\n\n      "),I.Ic(43,"\n      "),I.Rb(44,11),I.Ic(45,"\n        "),I.Gc(46,$e,3,3,"th",7),I.Ic(47,"\n        "),I.Gc(48,We,5,1,"td",8),I.Ic(49,"\n      "),I.Qb(),I.Ic(50,"\n\n      "),I.Ic(51,"\n      "),I.Rb(52,12),I.Ic(53,"\n        "),I.Gc(54,Qe,3,3,"th",7),I.Ic(55,"\n        "),I.Gc(56,Ze,5,1,"td",8),I.Ic(57,"\n      "),I.Qb(),I.Ic(58,"\n\n      "),I.Ic(59,"\n      "),I.Rb(60,13),I.Ic(61,"\n        "),I.Gc(62,tn,3,3,"th",7),I.Ic(63,"\n        "),I.Gc(64,rn,7,2,"td",8),I.Ic(65,"\n      "),I.Qb(),I.Ic(66,"\n\n      "),I.Gc(67,an,1,0,"tr",14),I.Ic(68,"\n      "),I.Gc(69,on,1,0,"tr",15),I.Ic(70,"\n    "),I.Sb(),I.Ic(71,"\n\n    "),I.Ob(72,"mat-paginator",16),I.Ic(73,"\n  "),I.Sb(),I.Ic(74,"\n\n  "),I.Gc(75,sn,33,3,"div",17),I.Ic(76,"\n"),I.Sb(),I.Ic(77,"\n")),2&t&&(I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(5),I.Kc("\n      ",I.gc(6,13,"tasks.task_report.total_time"),":\n    "),I.Bb(4),I.Nc("\n      ",e.total.hours," ",I.gc(10,15,"global.hours")," - ",e.total.minutes," ",I.gc(11,17,"global.minutes")," - ",e.total.seconds," ",I.gc(12,19,"global.seconds"),"\n    "),I.Bb(8),I.kc("dataSource",e.dataSource),I.Bb(50),I.kc("matHeaderRowDef",e.displayedColumns),I.Bb(2),I.kc("matRowDefColumns",e.displayedColumns),I.Bb(3),I.kc("pageSizeOptions",e.pageLimit),I.Bb(3),I.kc("ngIf",e.loadingIndicator.status&&"project-report"===e.loadingIndicator.serviceName))},directives:[k.b,qe.j,qe.c,qe.e,qe.b,qe.g,qe.i,Ue.a,i.k,qe.d,qe.a,qe.f,qe.h],pipes:[a.c,Ce.a],styles:[".border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1}.line-height[_ngcontent-%COMP%]{line-height:10px}"]}),t}();function ln(t,e){if(1&t&&(I.Ic(0,"\n      "),I.Tb(1,"h3",10),I.Ic(2,"\n        "),I.Tb(3,"mat-icon",11),I.Ic(4),I.Sb(),I.Ic(5),I.Sb(),I.Ic(6,"\n    ")),2&t){var n=I.ec();I.Bb(3),I.kc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half"),I.Bb(1),I.Jc(n.data.icon),I.Bb(1),I.Kc("\n        ",n.rtlDirection?n.data.name_fa:n.data.name,"\n      ")}}function un(t,e){if(1&t&&(I.Ic(0,"\n      "),I.Tb(1,"h3",12),I.Ic(2,"\n        "),I.Tb(3,"mat-icon",11),I.Ic(4),I.Sb(),I.Ic(5),I.Sb(),I.Ic(6,"\n    ")),2&t){var n=I.ec();I.Bb(3),I.kc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half"),I.Bb(1),I.Jc(n.data.icon),I.Bb(1),I.Kc("\n        ",n.rtlDirection?n.data.name_fa:n.data.name,"\n      ")}}function dn(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",13),I.ac("click",(function(t){return I.wc(n),I.ec().minimize(),t.stopPropagation()})),I.Ic(1,"\n        "),I.Tb(2,"mat-icon",8),I.Ic(3,"\n          minimize\n        "),I.Sb(),I.Ic(4,"\n      "),I.Sb()}}function pn(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",7),I.ac("click",(function(t){return I.wc(n),I.ec().restore(),t.stopPropagation()})),I.Ic(1,"\n        "),I.Tb(2,"mat-icon",8),I.Ic(3,"\n          filter_none\n        "),I.Sb(),I.Ic(4,"\n      "),I.Sb()}}function fn(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",7),I.ac("click",(function(t){return I.wc(n),I.ec().maximize(),t.stopPropagation()})),I.Ic(1,"\n        "),I.Tb(2,"mat-icon",8),I.Ic(3,"\n          crop_square\n        "),I.Sb(),I.Ic(4,"\n      "),I.Sb()}}var hn=function(){function t(t,e){var n=this;this.windowManagerService=t,this.viewDirection=e,this._subscription=new s.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return n.rtlDirection=t})))}return t.prototype.ngOnInit=function(){var t=this;this._subscription.add(this.windowManagerService.windowsList.subscribe((function(e){t.windowInstance=e.filter((function(e){return e.windowService.service_name===t.data.service_name})).pop()})))},t.prototype.activeWindow=function(){this.windowManagerService.activeWindow(this.data)},t.prototype.minimize=function(){this.windowManagerService.minimizeWindow(this.data)},t.prototype.maximize=function(){this.windowManagerService.maximizeWindow(this.data)},t.prototype.restore=function(){this.windowManagerService.restoreWindow(this.data)},t.prototype.close=function(){this.windowManagerService.closeWindow(this.data)},t.prototype.centerWindow=function(){this.windowManagerService.centerWindow()},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(It.a),I.Nb(v.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-window"]],decls:32,vars:7,consts:[[1,"pos-abs","left-0","right-0","bottom-0","top-0","full-width",3,"dir","click"],["cdkDrag","","cdkDragBoundary",".dashboard-app-boundary","cdkDragRootElement",".cdk-overlay-pane",1,"window-heading","full-width","height-45","padding-mini-r-l","display-flex","align-items-center",3,"dblclick"],[3,"ngIfElse","ngIf"],["notDraggableHeading",""],[1,"window-actions","display-flex",3,"ngClass"],["class","width-30 height-30 text-center line-height-25 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],["class","width-30 height-30 text-center line-height-35 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],[1,"width-30","height-30","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"],[1,"text-dark-mode-color","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],[1,"window-content","pos-rel"],["cdkDragHandle","",1,"window-title","full-width","full-height","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex","align-items-center","no-margin"],[1,"text-dark-mode-color","pos-rel",3,"ngClass"],[1,"window-title","full-width","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex","align-items-center","no-margin"],[1,"width-30","height-30","text-center","line-height-25","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"]],template:function(t,e){if(1&t&&(I.Tb(0,"div",0),I.ac("click",(function(){return e.activeWindow()})),I.Ic(1,"\n  "),I.Tb(2,"div",1),I.ac("dblclick",(function(){return e.windowInstance.isMaximized?e.restore():e.maximize()})),I.Ic(3,"\n    "),I.Gc(4,ln,7,3,"ng-template",2),I.Ic(5,"\n\n    "),I.Gc(6,un,7,3,"ng-template",null,3,I.Hc),I.Ic(8,"\n\n    "),I.Tb(9,"div",4),I.Ic(10,"\n      "),I.Ic(11,"\n      "),I.Gc(12,dn,5,0,"button",5),I.Ic(13,"\n      "),I.Gc(14,pn,5,0,"button",6),I.Ic(15,"\n      "),I.Gc(16,fn,5,0,"button",6),I.Ic(17,"\n      "),I.Tb(18,"button",7),I.ac("click",(function(t){return e.close(),t.stopPropagation()})),I.Ic(19,"\n        "),I.Tb(20,"mat-icon",8),I.Ic(21,"close\n        "),I.Sb(),I.Ic(22,"\n      "),I.Sb(),I.Ic(23,"\n    "),I.Sb(),I.Ic(24,"\n  "),I.Sb(),I.Ic(25,"\n  "),I.Tb(26,"div",9),I.Ic(27,"\n    "),I.Ob(28,"app-task-main"),I.Ic(29,"\n  "),I.Sb(),I.Ic(30,"\n"),I.Sb(),I.Ic(31,"\n")),2&t){var n=I.sc(7);I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(4),I.kc("ngIfElse",n)("ngIf",e.windowInstance.isDraggable),I.Bb(5),I.kc("ngClass",e.rtlDirection?" margin-r-auto":" margin-l-auto"),I.Bb(3),I.kc("ngIf",!e.windowInstance.isMinimized),I.Bb(2),I.kc("ngIf",e.windowInstance.isMaximized||e.windowInstance.isMinimized),I.Bb(2),I.kc("ngIf",!e.windowInstance.isMaximized&&!e.windowInstance.isMinimized)}},directives:[k.b,fe.a,i.k,i.i,_.a,Kt,fe.b],encapsulation:2}),t}();function bn(t,e){if(1&t){var n=I.Ub();I.Tb(0,"button",4),I.ac("click",(function(){I.wc(n);var t=e.$implicit;return I.ec(2).showTask(t)})),I.Ic(1,"\n      "),I.Tb(2,"mat-icon",5),I.Ic(3,"play_arrow\n      "),I.Sb(),I.Ic(4,"\n      "),I.Tb(5,"span",6),I.Ic(6),I.Sb(),I.Ic(7,"\n    "),I.Sb()}if(2&t){var i=e.$implicit,r=I.ec(2);I.kc("disabled",!r.taskEssentialInfo)("ngClass",r.rtlDirection?"margin-l-half":"margin-r-half"),I.Bb(6),I.Jc(i.taskName)}}function gn(t,e){if(1&t&&(I.Tb(0,"div",2),I.Ic(1,"\n    "),I.Gc(2,bn,8,3,"button",3),I.Ic(3,"\n  "),I.Sb()),2&t){var n=I.ec();I.Bb(2),I.kc("ngForOf",n.currentTasks)}}var mn=function(){function t(t,e,n,i){var r=this;this.userInfoService=t,this.buttonSheetDataService=e,this.taskEssentialInfoService=n,this.currentTaskService=i,this.triggerBottomSheet=new I.o,this.pushTaskToBoard=new I.o,this.projectsList=[],this.usersList=[],this.currentTasks=null,this.message="",this.notification=!1,this._subscription=new s.Subscription,this._subscription.add(this.currentTaskService.currentTask.subscribe((function(t){return r.currentTasks=t}))),this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return r.user=t})))}return t.prototype.showTask=function(t){var e=this;this.usersList=this.taskEssentialInfoService.getUsersProjectsList.usersList,this.projectsList=this.taskEssentialInfoService.getUsersProjectsList.projectsList,setTimeout((function(){e.buttonSheetDataService.changeButtonSheetData({component:pe,height:"98%",width:"95%",data:{action:"detail",usersList:e.usersList,projectsList:e.projectsList,task:t,boardStatus:t.boardStatus,breadcrumbList:null}})}),500)},t.prototype.ngOnChanges=function(t){t.taskEssentialInfo&&!t.taskEssentialInfo.firstChange&&(this.usersList=t.taskEssentialInfo.currentValue.usersList,this.projectsList=t.taskEssentialInfo.currentValue.projectsList)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(l.a),I.Nb(yt),I.Nb(te),I.Nb(nt.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-current"]],inputs:{taskEssentialInfo:"taskEssentialInfo",rtlDirection:"rtlDirection"},outputs:{triggerBottomSheet:"triggerBottomSheet",pushTaskToBoard:"pushTaskToBoard"},features:[I.zb],decls:5,vars:1,consts:[[1,"display-flex","flex-space-between","align-items-center","full-height"],["class","display-flex flex-space-between height-30 align-items-center",4,"ngIf"],[1,"display-flex","flex-space-between","height-30","align-items-center"],["class","blink-effect white-gradient line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"blink-effect","white-gradient","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","ngClass","click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"]],template:function(t,e){1&t&&(I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Gc(2,gn,4,1,"div",1),I.Ic(3,"\n"),I.Sb(),I.Ic(4,"\n")),2&t&&(I.Bb(2),I.kc("ngIf",e.currentTasks))},directives:[i.k,i.j,B.a,i.i,_.a],styles:[".hidden[_ngcontent-%COMP%]{display:none}.blink-effect[_ngcontent-%COMP%]{transition:all .4s!important;-webkit-animation:blink-effect 1s linear infinite;animation:blink-effect 1s linear infinite}@-webkit-keyframes blink-effect{0%{color:#888!important}33.33333%{color:#f94850;box-shadow:0 2px 4px -1px #ff0844,0 10px 25px -7px #ffb199,0 1px 10px 0 rgba(0,0,0,.12)}to{color:#888;box-shadow:none}}@keyframes blink-effect{0%{color:#888!important}33.33333%{color:#f94850;box-shadow:0 2px 4px -1px #ff0844,0 10px 25px -7px #ffb199,0 1px 10px 0 rgba(0,0,0,.12)}to{color:#888;box-shadow:none}}"]}),t}(),vn=n("rBWh"),In=n("jaxi"),kn=n("eXWX"),yn=n("gaxV"),Sn=n("XhcP"),wn=["dateCalendar"],Tn=function(){function t(t,e,n,i,r,a,o){var c=this;this.dialog=t,this.popoverService=e,this.translateService=n,this.viewDirection=i,this.eventHandlerService=r,this.taskCalendarService=a,this.windowManagerService=o,this.triggerBottomSheet=new I.o,this.calendarEvents=null,this.tasks=[],this.usersList=[],this.datePickerConfig=null,this._subscription=new s.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return c.rtlDirection=t}))),this._subscription.add(this.eventHandlerService.currentEventsTaskList.subscribe((function(t){if(t){c.calendarEvents=c.taskCalendarService.prepareTaskItems(t);var e=c.rtlDirection?b.from(t.filterData.dateStart,"fa","YYYY/MM/DD"):h(new Date(t.filterData.dateStart));setTimeout((function(){c.datePickerDirective.api.moveCalendarTo(e)}))}})))}return t.prototype.ngAfterViewInit=function(){this.getCalendarItemsData()},t.prototype.dayBtnCssClassCallback=function(t){var e=this;this.calendarEvents&&setTimeout((function(){var n=e.rtlDirection?t.locale("fa").format("YYYY/M/D"):t.locale("en").format("DD-MM-YYYY"),i=document.querySelector('.weekday-calendar .dp-calendar-day[data-date="'+n+'"]');if(i){var r=0;e.calendarEvents.map((function(e){e.start.toLocaleDateString()==t._d.toLocaleDateString()&&(r<1&&i.insertAdjacentHTML("beforeend","<div data-objects='"+JSON.stringify(e)+"' style='background: "+e.color+" !important;' class='custom-event-box'><img src='"+e.imageurl+"'>"+e.title+"</div>"),r++)})),r>1&&i.insertAdjacentHTML("beforeend",'<div class="custom-event-count">+'+r+"</div>")}}))},t.prototype.getCalendarItemsData=function(){var t=this;this._subscription.add(this.eventHandlerService.currentCalendarItems.subscribe((function(e){e&&(t.calendarEvents=e,t.setupCalendar())})))},t.prototype.setupCalendar=function(){var t=this,e=this.rtlDirection?b(new Date):h(new Date);setTimeout((function(){t.datePickerDirective.api.moveCalendarTo(e)})),this.datePickerConfig={locale:this.rtlDirection?"fa":"en",dayBtnCssClassCallback:function(e){t.dayBtnCssClassCallback(e)}}},t.prototype.eventClick=function(t){var e=this,n=this.calendarEvents.filter((function(e){return e.start.toLocaleDateString()==t.date._d.toLocaleDateString()}));if(n.length>1){var i=this.dialog.open(yn.a,{data:{eventTemp:n,rtlDirection:this.rtlDirection},autoFocus:!1,width:"400px",height:"300px"});this.windowManagerService.dialogOnTop(i.id),this._subscription.add(i.afterClosed().subscribe((function(t){t&&e.loadTaskDetails(t)})))}else{var r=this.rtlDirection?t.date.locale("fa").format("YYYY/M/D"):t.date.locale("en").format("DD-MM-YYYY"),a=document.querySelector('.weekday-calendar .dp-calendar-day[data-date="'+r+'"] .custom-event-box');if(a&&a.dataset){var o=JSON.parse(a.dataset.objects);this.loadTaskDetails(o)}}},t.prototype.loadTaskDetails=function(t){this.triggerBottomSheet.emit({component:pe,height:"98%",width:"98%",data:{action:"detail",usersList:t.usersList,projectsList:t.projectsList,task:t,boardStatus:void 0}})},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(f.b),I.Nb(kn.a),I.Nb(a.d),I.Nb(v.a),I.Nb(vt.a),I.Nb(vn.a),I.Nb(It.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-calendar-weekday"]],viewQuery:function(t,e){var n;1&t&&I.Oc(wn,!0),2&t&&I.rc(n=I.bc())&&(e.datePickerDirective=n.first)},outputs:{triggerBottomSheet:"triggerBottomSheet"},decls:6,vars:4,consts:[["autosize","",1,"weekday-calendar",3,"dir","ngClass"],["theme","dp-material",1,"custom-full-calendar","no-margin","mat-elevation-z3",3,"dir","config","onSelect"],["dateCalendar",""]],template:function(t,e){1&t&&(I.Tb(0,"mat-drawer-container",0),I.Ic(1,"\n  "),I.Tb(2,"dp-day-calendar",1,2),I.ac("onSelect",(function(t){return e.eventClick(t)})),I.Sb(),I.Ic(4,"\n\n"),I.Sb(),I.Ic(5,"\n")),2&t&&(I.kc("dir",e.rtlDirection?"rtl":"ltr")("ngClass",e.rtlDirection?"ca-rtl":"ca-ltr"),I.Bb(2),I.kc("dir",e.rtlDirection?"rtl":"ltr")("config",e.datePickerConfig))},directives:[Sn.b,k.b,i.i,D.b],styles:[".fc{font-family:inherit!important}.ca-rtl .fc-button-group,.ca-rtl .fc-content,.ca-rtl .fc-toolbar{direction:rtl!important}.ca-ltr .fc-button-group,.ca-ltr .fc-content,.ca-ltr .fc-toolbar{direction:ltr!important}.fc th{text-align:center;padding:5px!important}.fc-button{background:none;color:#333;border:none;margin:0!important}.fc-button-primary:not(:disabled).fc-button-active,.fc-button-primary:not(:disabled):active{border-radius:4px!important;background-image:linear-gradient(-20deg,#3949ab,#4fc3f7)!important}.fc-button-primary:hover{color:#3949ab;background:none;border:none}.fc-button-primary:disabled{color:#fff!important;background:#ccc}.fc-button-primary:not(:disabled).fc-button-active:focus,.fc-button-primary:not(:disabled):active:focus{box-shadow:none!important;background:none!important;color:#3949ab!important}.fc-day-grid-event .fc-content{white-space:normal!important;display:flex;flex-direction:inherit!important}.fc-day-grid-event .fc-content .fc-title{font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:left;line-height:20px;padding-left:5px!important;padding-right:5px!important}.fc-day-grid-event .fc-content .fc-time{display:none}a.fc-more{margin:1px 9px;font-size:.85em;cursor:pointer;text-decoration:none;background:#eee;border-radius:100%;width:18px;line-height:18px;display:block;text-align:center;border:1px solid #e6e6e6;font-weight:700;direction:ltr;color:#656565}"],encapsulation:2}),t}(),Dn=function(){function t(){}return t.prototype.pad=function(t,e,n){return n=n||"0",(t+="").length>=e?t:new Array(e-t.length+1).join(n)+t},t.\u0275prov=I.Jb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),Cn=["drawer"],xn=["dateCalendar"];function Bn(t,e){if(1&t&&(I.Tb(0,"div",7),I.Ic(1,"\n      "),I.Ic(2,"\n      "),I.Ob(3,"img",8),I.Ic(4,"\n\n      "),I.Tb(5,"div",9),I.Ic(6,"\n        "),I.Tb(7,"mat-icon",10),I.Ic(8,"person"),I.Sb(),I.Ic(9,"\n\n        "),I.Tb(10,"span",11),I.Ic(11),I.Sb(),I.Ic(12,"\n      "),I.Sb(),I.Ic(13,"\n\n      "),I.Tb(14,"div",9),I.Ic(15,"\n        "),I.Tb(16,"mat-icon",10),I.Ic(17,"mail_outline"),I.Sb(),I.Ic(18,"\n\n        "),I.Tb(19,"span",11),I.Ic(20),I.Sb(),I.Ic(21,"\n      "),I.Sb(),I.Ic(22,"\n\n      "),I.Tb(23,"div",9),I.Ic(24,"\n        "),I.Tb(25,"mat-icon",10),I.Ic(26,"av_timer"),I.Sb(),I.Ic(27,"\n\n        "),I.Tb(28,"span",11),I.Ic(29),I.fc(30,"translate"),I.Tb(31,"span",12),I.Ic(32),I.Sb(),I.Ic(33,"\n        "),I.Sb(),I.Ic(34,"\n      "),I.Sb(),I.Ic(35,"\n    "),I.Sb()),2&t){var n=I.ec();I.Bb(3),I.kc("alt",n.userSelected.name+" "+n.userSelected.family)("src","/assets/profileImg/"+n.userSelected.email+".jpg",I.yc),I.Bb(7),I.kc("ngClass",n.rtlDirection?"padding-r-half":"padding-l-half"),I.Bb(1),I.Lc("\n          ",n.userSelected.name," ",n.userSelected.family,"\n        "),I.Bb(8),I.kc("ngClass",n.rtlDirection?"padding-r-half":"padding-l-half"),I.Bb(1),I.Kc("\n          ",n.userSelected.email,"\n        "),I.Bb(8),I.kc("ngClass",n.rtlDirection?"padding-r-half":"padding-l-half"),I.Bb(1),I.Kc("\n          ",I.gc(30,10,"tasks.task_filter.tasks_filter_calendar_hours"),":\n          "),I.Bb(3),I.Jc(n.sumTime)}}var _n=function(){function t(t,e,n,i,r,a){var o=this;this.api=t,this.utilService=e,this.translateService=n,this.eventHandlerService=i,this.taskCalendarService=r,this.viewDirectionService=a,this.datePickerConfig=null,this.isVisible=!1,this._subscription=new s.Subscription,this._subscription.add(this.viewDirectionService.currentDirection.subscribe((function(t){return o.rtlDirection=t}))),this._subscription.add(this.eventHandlerService.currentCalendarRate.subscribe((function(t){t&&(o.calendarEvents=t.calendarEvent,o.sumTime=t.sumTime,o.userSelected=t.userSelected,setTimeout((function(){o.drawer.open();var e=o.rtlDirection?b(new Date(t.filterData.dateStart)):h(new Date(t.filterData.dateStart));o.datePickerDirective.api.moveCalendarTo(e),document.querySelector(".rate-calendar .custom-full-calendar").classList.add("margin-r-full"),o.datePickerConfig.locale=o.rtlDirection?"fa":"en",o.isVisible=!0}),1e3))})))}return t.prototype.ngAfterViewInit=function(){this.setupCalendar()},t.prototype.dayBtnCssClassCallback=function(t){var e=this;this.calendarEvents&&setTimeout((function(){var n=e.rtlDirection?t.locale("fa").format("YYYY/M/D"):t.locale("en").format("DD-MM-YYYY"),i=document.querySelector('.rate-calendar .dp-calendar-day[data-date="'+n+'"]');i&&e.calendarEvents.map((function(e){e.start.toLocaleDateString()==t._d.toLocaleDateString()&&i.insertAdjacentHTML("beforeend","<div class='custom-event-box'>"+e.title+"</div>")}))}))},t.prototype.setupCalendar=function(){var t=this;this.datePickerConfig={locale:this.rtlDirection?"fa":"en",firstDayOfWeek:this.rtlDirection?"sa":"mo",dayBtnCssClassCallback:function(e){t.dayBtnCssClassCallback(e)}}},t.prototype.getTranslate=function(t){return this.translateService.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(d.a),I.Nb(Dn),I.Nb(a.d),I.Nb(vt.a),I.Nb(vn.a),I.Nb(v.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-calendar-rate"]],viewQuery:function(t,e){if(1&t&&(I.Oc(Cn,!0),I.Oc(xn,!0)),2&t){var n=void 0;I.rc(n=I.bc())&&(e.drawer=n.first),I.rc(n=I.bc())&&(e.datePickerDirective=n.first)}},inputs:{usersList:"usersList",loginData:"loginData"},decls:16,vars:6,consts:[["autosize","",1,"full-width","rate-calendar","display-flex","flex-space-between"],["mode","side",1,"round-corner","mat-elevation-z1","padding-tiny-r-l",3,"disableClose"],["drawer",""],["class","padding-half",4,"ngIf"],[1,"full-height","rate-calendar",3,"dir","ngClass"],["theme","dp-material",1,"custom-full-calendar","no-margin","full-height",3,"dir","config"],["dateCalendar",""],[1,"padding-half"],[1,"width-70","height-70","display-block","margin-t-b","margin-auto","text-center","round-corner-all","margin-auto","pos-rel","top-six-tenth","mat-elevation-z2",3,"alt","src"],[1,"padding-t-b","display-flex","align-items-center"],[1,"width-20","height-20","line-height-20","font-full-plus-half-em"],[3,"ngClass"],[1,"text-weight-bold","text-green-500"]],template:function(t,e){1&t&&(I.Tb(0,"mat-drawer-container",0),I.Ic(1,"\n  "),I.Tb(2,"mat-drawer",1,2),I.Ic(4,"\n    "),I.Gc(5,Bn,36,12,"div",3),I.Ic(6,"\n  "),I.Sb(),I.Ic(7,"\n  "),I.Tb(8,"div",4),I.Ic(9,"\n\n    "),I.Tb(10,"dp-day-calendar",5,6),I.Ic(12,"\n    "),I.Sb(),I.Ic(13,"\n  "),I.Sb(),I.Ic(14,"\n"),I.Sb(),I.Ic(15,"\n")),2&t&&(I.Bb(2),I.kc("disableClose",!0),I.Bb(3),I.kc("ngIf",e.userSelected&&e.userSelected.email),I.Bb(3),I.kc("dir",e.rtlDirection?"rtl":"ltr")("ngClass",e.rtlDirection?"ca-rtl":"ca-ltr"),I.Bb(2),I.kc("dir",e.rtlDirection?"rtl":"ltr")("config",e.datePickerConfig))},directives:[Sn.b,Sn.a,i.k,k.b,i.i,D.b,_.a],pipes:[a.c],encapsulation:2}),t}(),Ln=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nn=["bottomSheet"];function On(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",7),I.Ic(1,"\n      "),I.Tb(2,"app-task-calendar-weekday",8),I.ac("triggerBottomSheet",(function(t){return I.wc(n),I.ec().openButtonSheet(t)})),I.Sb(),I.Ic(3,"\n      "),I.Ob(4,"app-task-bottom-sheet",null,9),I.Ic(6,"\n    "),I.Sb()}}function jn(t,e){if(1&t&&(I.Tb(0,"div",7),I.Ic(1,"\n      "),I.Ob(2,"app-task-calendar-rate",10),I.Ic(3,"\n    "),I.Sb()),2&t){var n=I.ec();I.Bb(2),I.kc("loginData",n.loginData)("usersList",n.usersList)}}var Mn=function(t){return{"view-mode":t}},Pn=function(t){function e(e,n,i,r,a,o,c,l){var u=t.call(this,i,r)||this;return u.dialog=e,u.api=n,u.injector=i,u.userInfoService=r,u.refreshLoginService=a,u.taskCalendarService=o,u.eventHandlerService=c,u.loadingIndicatorService=l,u.refreshData=!1,u.onTabLoaded=new I.o,u.tasks=[],u.usersList=[],u.projectsList=[],u.calendarEvents=[],u.holidays=[],u.viewModeTypes="calendar_task",u._subscription=new s.Subscription,u}return Ln(e,t),e.prototype.ngOnInit=function(){this.getBoards()},e.prototype.changeViewMode=function(t){this.viewModeTypes=t,this.onTabLoaded.emit(this.viewModeTypes)},e.prototype.openButtonSheet=function(t){t.bottomSheetRef=this.bottomSheet,this.bottomSheet.toggleBottomSheet(t)},e.prototype.getBoards=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.loggedInUser&&this.loggedInUser.email&&(this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this._subscription.add(this.api.boardsCalendar(this.loggedInUser.email).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),1===e.result&&(t.usersList=e.content.users.list,t.projectsList=e.content.projects.list,t.tasks=e.content.boards.list,t.taskCalendarService.holidays=e.content.boards.holidays,t.calendarEvents=t.taskCalendarService.prepareTaskItems(e),t.eventHandlerService.moveCalendarItem(t.calendarEvents))}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)}))))},e.prototype.ngOnDestroy=function(){this.viewModeTypes=null,this.onTabLoaded.emit(this.viewModeTypes),this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(I.Nb(f.b),I.Nb(d.a),I.Nb(I.t),I.Nb(l.a),I.Nb(g.a),I.Nb(vn.a),I.Nb(vt.a),I.Nb(m.a))},e.\u0275cmp=I.Hb({type:e,selectors:[["app-task-calendar"]],viewQuery:function(t,e){var n;1&t&&I.Oc(Nn,!0),2&t&&I.rc(n=I.bc())&&(e.bottomSheet=n.first)},inputs:{calendarParameters:"calendarParameters",filterBoards:"filterBoards",refreshData:"refreshData",rtlDirection:"rtlDirection"},outputs:{onTabLoaded:"onTabLoaded"},features:[I.yb],decls:34,vars:13,consts:[[1,"content-container","padding-mini-r-l","full-width","full-height"],[1,"calendar-switcher","pos-abs","left-0","right-0","top-full","text-center","margin-auto"],["value","calendar_task",1,"mat-button-custom","line-height-20","center-block","round-corner-all",3,"ngClass","change"],["viewMode","matButtonToggleGroup"],[1,"overflow-hide","font-7-rem","line-height-20","height-30",3,"value"],[1,"full-height"],["class","full-height mat-elevation-z3",4,"ngIf"],[1,"full-height","mat-elevation-z3"],[3,"triggerBottomSheet"],["bottomSheet",""],[3,"loginData","usersList"]],template:function(t,e){if(1&t){var n=I.Ub();I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Tb(2,"div",1),I.Ic(3,"\n    "),I.Tb(4,"mat-button-toggle-group",2,3),I.ac("change",(function(){I.wc(n);var t=I.sc(5);return e.changeViewMode(t.value)})),I.Ic(6,"\n      "),I.Tb(7,"mat-button-toggle",4),I.Ic(8,"\n        "),I.Tb(9,"span"),I.Ic(10),I.fc(11,"translate"),I.Sb(),I.Ic(12,"\n      "),I.Sb(),I.Ic(13,"\n      "),I.Tb(14,"mat-button-toggle",4),I.Ic(15,"\n        "),I.Tb(16,"span"),I.Ic(17),I.fc(18,"translate"),I.Sb(),I.Ic(19,"\n      "),I.Sb(),I.Ic(20,"\n    "),I.Sb(),I.Ic(21,"\n  "),I.Sb(),I.Ic(22,"\n\n  "),I.Rb(23,5),I.Ic(24,"\n    "),I.Ic(25,"\n    "),I.Gc(26,On,7,0,"div",6),I.Ic(27,"\n    "),I.Ic(28,"\n\n    "),I.Ic(29,"\n    "),I.Gc(30,jn,4,2,"div",6),I.Ic(31,"\n  "),I.Qb(),I.Ic(32,"\n"),I.Sb(),I.Ic(33,"\n")}if(2&t){var i=I.sc(5);I.Bb(4),I.kc("ngClass",I.oc(11,Mn,i)),I.Bb(3),I.kc("value","calendar_task"),I.Bb(3),I.Jc(I.gc(11,7,"tasks.form.task_calendar")),I.Bb(4),I.kc("value","calendar_task_rate"),I.Bb(3),I.Jc(I.gc(18,9,"tasks.form.task_calendar_hours")),I.Bb(9),I.kc("ngIf","calendar_task"==e.viewModeTypes),I.Bb(4),I.kc("ngIf","calendar_task_rate"==e.viewModeTypes)}},directives:[In.b,i.i,In.a,i.k,Tn,Tt,_n],pipes:[a.c],styles:[".calendar-switcher{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.fc-day-number{padding:0 5px!important}.fc-view .fc-event,.fc-view .fc-event-dot{border:none!important;margin:2px 10px!important;border-radius:5px!important;color:#fff!important;padding:1px 5px!important;font-size:12px!important;cursor:pointer;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.fc-more{position:absolute;top:0}[dir=rtl] .fc-more{right:0}.mat-drawer-content{width:100%;overflow:hidden!important;padding:0!important}"],encapsulation:2}),e}(c.a),Fn=n("MutI");function An(t,e){if(1&t&&(I.Tb(0,"mat-list-item",9),I.Ic(1,"\n        "),I.Tb(2,"mat-icon",10),I.Ic(3),I.Sb(),I.Ic(4,"\n\n        "),I.Tb(5,"div",11),I.Ic(6),I.Sb(),I.Ic(7,"\n\n        "),I.Tb(8,"div",12),I.Ic(9),I.fc(10,"jalali"),I.Sb(),I.Ic(11,"\n      "),I.Sb()),2&t){var n=e.$implicit,i=I.ec(2);I.Bb(3),I.Kc("\n          ",n.activityIcon,"\n        "),I.Bb(3),I.Jc(n.commentText),I.Bb(3),I.Jc(I.hc(10,3,n.creationDate,i.rtlDirection))}}function En(t,e){if(1&t&&(I.Tb(0,"mat-list",7),I.Ic(1,"\n      "),I.Gc(2,An,12,6,"mat-list-item",8),I.Ic(3,"\n    "),I.Sb()),2&t){var n=I.ec();I.Bb(2),I.kc("ngForOf",n.activityList)}}function Yn(t,e){1&t&&(I.Tb(0,"div",13),I.Ic(1,"\n    "),I.Tb(2,"div",14),I.Ic(3,"\n      "),I.dc(),I.Tb(4,"svg",15),I.Ic(5,"\n        "),I.Tb(6,"rect",16),I.Ic(7,"\n          "),I.Ob(8,"animate",17),I.Ic(9,"\n          "),I.Ob(10,"animate",18),I.Ic(11,"\n        "),I.Sb(),I.Ic(12,"\n        "),I.Tb(13,"rect",19),I.Ic(14,"\n          "),I.Ob(15,"animate",20),I.Ic(16,"\n          "),I.Ob(17,"animate",21),I.Ic(18,"\n        "),I.Sb(),I.Ic(19,"\n        "),I.Tb(20,"rect",22),I.Ic(21,"\n          "),I.Ob(22,"animate",23),I.Ic(23,"\n          "),I.Ob(24,"animate",24),I.Ic(25,"\n        "),I.Sb(),I.Ic(26,"\n      "),I.Sb(),I.Ic(27,"\n\n      "),I.cc(),I.Tb(28,"span",25),I.Ic(29),I.fc(30,"translate"),I.Sb(),I.Ic(31,"\n    "),I.Sb(),I.Ic(32,"\n  "),I.Sb()),2&t&&(I.Bb(29),I.Jc(I.gc(30,1,"global.loading")))}var Rn=function(){function t(t,e,n,i){var r=this;this.api=t,this.refreshLoginService=e,this.loadingIndicatorService=n,this.translate=i,this.activityList=[],this.loadingIndicator={status:!1,serviceName:"project-activity"},this.single=[],this.gradient=!1,this.showLegend=!1,this.showLabels=!0,this.isDoughnut=!1,this.colorScheme={domain:["#4caf50","#b71c1c"]},this._subscription=new s.Subscription,this._subscription.add(this.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return r.loadingIndicator=t})))}return t.prototype.ngAfterViewInit=function(){var t=this;this.getActivities().then((function(e){setTimeout((function(){return t.activityList=e})),t.single=[{name:t.getTranslate("tasks.activity.completed"),value:t.task.percentage},{name:t.getTranslate("tasks.activity.not_completed"),value:100-t.task.percentage}]}))},t.prototype.getActivities=function(){var t=this;return new Promise((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project-activity"}),t.api.accessToken=t.loginData.token_type+" "+t.loginData.access_token,t._subscription.add(t.api.getActivities(t.task.taskId).subscribe((function(n){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project-activity"}),1===n.result&&e(n.contents)}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project-activity"}),t.refreshLoginService.openLoginDialog(e)})))}))},t.prototype.getTranslate=function(t){return this.translate.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(I.Nb(d.a),I.Nb(g.a),I.Nb(m.a),I.Nb(a.d))},t.\u0275cmp=I.Hb({type:t,selectors:[["app-task-activity"]],inputs:{task:"task",rtlDirection:"rtlDirection",loginData:"loginData"},decls:24,vars:17,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","full-width","full-height",3,"dir"],[1,"margin-b-full","padding-r-l","full-width","text-gray-800","font-full-em","text-weight-500","no-margin","height-35",3,"ngClass"],["dir","ltr",1,"full-width","padding-b-full-2","height-200"],[3,"doughnut","gradient","labels","legend","results","scheme"],[1,"activity-content-container","padding-r-l","overflow-y-auto","overflow-x-hide"],["class","no-padding",4,"ngIf"],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],[1,"no-padding"],["class","height-30 no-padding cursor-pointer margin-b-half",4,"ngFor","ngForOf"],[1,"height-30","no-padding","cursor-pointer","margin-b-half"],["mat-list-icon","",1,"no-padding","width-15","height-15","font-8-rem","text-center","line-height-15"],["mat-line","",1,"text-gray-600","font-8-rem"],["mat-line","",1,"text-italic","font-7-em"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","version","1.1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(I.Tb(0,"div",0),I.Ic(1,"\n  "),I.Tb(2,"h1",1),I.Ic(3),I.fc(4,"translate"),I.Sb(),I.Ic(5,"\n  "),I.Tb(6,"div",2),I.Ic(7,"\n    "),I.Tb(8,"ngx-charts-pie-chart",3),I.Ic(9,"\n    "),I.Sb(),I.Ic(10,"\n  "),I.Sb(),I.Ic(11,"\n\n  "),I.Tb(12,"h1",1),I.Ic(13),I.fc(14,"translate"),I.Sb(),I.Ic(15,"\n  "),I.Tb(16,"div",4),I.Ic(17,"\n    "),I.Gc(18,En,4,1,"mat-list",5),I.Ic(19,"\n  "),I.Sb(),I.Ic(20,"\n\n  "),I.Gc(21,Yn,33,3,"div",6),I.Ic(22,"\n"),I.Sb(),I.Ic(23,"\n")),2&t&&(I.kc("dir",e.rtlDirection?"rtl":"ltr"),I.Bb(2),I.kc("ngClass",e.rtlDirection?"text-right":"text-left"),I.Bb(1),I.Kc("\n    ",I.gc(4,13,"tasks.activity.task_completion_percentage"),"\n  "),I.Bb(5),I.kc("doughnut",e.isDoughnut)("gradient",e.gradient)("labels",e.showLabels)("legend",e.showLegend)("results",e.single)("scheme",e.colorScheme),I.Bb(4),I.kc("ngClass",e.rtlDirection?"text-right":"text-left"),I.Bb(1),I.Kc("\n    ",I.gc(14,15,"tasks.activity.activity_list"),"\n  "),I.Bb(5),I.kc("ngIf",e.activityList.length),I.Bb(3),I.kc("ngIf",e.loadingIndicator.status&&"project-activity"===e.loadingIndicator.serviceName))},directives:[k.b,i.i,o.b,i.k,Fn.a,i.j,Fn.d,_.a,Fn.c,x.j],pipes:[a.c,Ce.a],styles:[".activity-content-container[_ngcontent-%COMP%]{height:calc(100% - 270px)}"]}),t}(),Un=n("wZkO"),qn=function(){function t(t){this.componentFactoryResolver=t}return t.prototype.resolveComponent=function(){return this.componentFactoryResolver.resolveComponentFactory(hn)},t.\u0275mod=I.Lb({type:t}),t.\u0275inj=I.Kb({factory:function(e){return new(e||t)(I.Xb(I.j))},imports:[[i.c,r.a,o.a,D.c,a.b.forChild()]]}),t}();I.zc(Kt,[k.b,Un.b,i.j,Un.a,Un.c,_.a,i.i,i.k,B.a,i.m,i.n,Ye,Pn,mn,Tt],[a.c]),I.zc(pe,[i.k,k.b,In.b,i.i,In.a,_.a,Te.a,i.j,W,Ie,cn,Rn],[a.c])},g5Dd:function(t,e){!function(t){"use strict";e.encode=function(e){var n,i=new Uint8Array(e),r=i.length,a="";for(n=0;n<r;n+=3)a+=t[i[n]>>2],a+=t[(3&i[n])<<4|i[n+1]>>4],a+=t[(15&i[n+1])<<2|i[n+2]>>6],a+=t[63&i[n+2]];return r%3==2?a=a.substring(0,a.length-1)+"=":r%3==1&&(a=a.substring(0,a.length-2)+"=="),a},e.decode=function(e){var n,i,r,a,o,s=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),d=new Uint8Array(u);for(n=0;n<c;n+=4)i=t.indexOf(e[n]),r=t.indexOf(e[n+1]),a=t.indexOf(e[n+2]),o=t.indexOf(e[n+3]),d[l++]=i<<2|r>>4,d[l++]=(15&r)<<4|a>>2,d[l++]=(3&a)<<6|63&o;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},gFX4:function(t,e,n){var i=n("zJ60"),r=n("Uwu7"),a=n("eOtv"),o=n("NOtv")("socket.io-client");t.exports=e=c;var s=e.managers={};function c(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r=i(t),c=r.source,l=r.id;return e.forceNew||e["force new connection"]||!1===e.multiplex||s[l]&&r.path in s[l].nsps?(o("ignoring socket cache for %s",c),n=a(c,e)):(s[l]||(o("new io instance for %s",c),s[l]=a(c,e)),n=s[l]),r.query&&!e.query&&(e.query=r.query),n.socket(r.path,e)}e.protocol=r.protocol,e.connect=c,e.Manager=n("eOtv"),e.Socket=n("KFGy")},kSER:function(t,e){t.exports=function(t,e){for(var n=[],i=(e=e||0)||0;i<t.length;i++)n[i-e]=t[i];return n}},lKxJ:function(t,e,n){t.exports=n("2pII"),t.exports.parser=n("Wm4p")},luTP:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},"oIG/":function(t,e){var n,i,r,a=String.fromCharCode;function o(t){for(var e,n,i=[],r=0,a=t.length;r<a;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<a?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function s(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(t,e){return a(t>>e&63|128)}function l(t,e){if(0==(4294967168&t))return a(t);var n="";return 0==(4294965248&t)?n=a(t>>6&31|192):0==(4294901760&t)?(s(t,e)||(t=65533),n=a(t>>12&15|224),n+=c(t,6)):0==(4292870144&t)&&(n=a(t>>18&7|240),n+=c(t,12),n+=c(t,6)),n+a(63&t|128)}function u(){if(r>=i)throw Error("Invalid byte index");var t=255&n[r];if(r++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function d(t){var e,a;if(r>i)throw Error("Invalid byte index");if(r==i)return!1;if(e=255&n[r],r++,0==(128&e))return e;if(192==(224&e)){if((a=(31&e)<<6|u())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if((a=(15&e)<<12|u()<<6|u())>=2048)return s(a,t)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(a=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,i=o(t),r=i.length,a=-1,s="";++a<r;)s+=l(i[a],n);return s},decode:function(t,e){var s=!1!==(e=e||{}).strict;n=o(t),i=n.length,r=0;for(var c,l=[];!1!==(c=d(s));)l.push(c);return function(t){for(var e,n=t.length,i=-1,r="";++i<n;)(e=t[i])>65535&&(r+=a((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+=a(e);return r}(l)}}},qGlh:function(t,e){t.exports=function(t){return n&&Buffer.isBuffer(t)||i&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))};var n="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,i="function"==typeof ArrayBuffer},yeub:function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},ypnn:function(t,e){t.exports=function(t,e,n){var i=t.byteLength;if(e=e||0,n=n||i,t.slice)return t.slice(e,n);if(e<0&&(e+=i),n<0&&(n+=i),n>i&&(n=i),e>=i||e>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(t),a=new Uint8Array(n-e),o=e,s=0;o<n;o++,s++)a[s]=r[o];return a.buffer}},zJ60:function(t,e,n){var i=n("Uxeu"),r=n("NOtv")("socket.io-client:url");t.exports=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),r("parse %s",t),n=i(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(e&&e.port===n.port?"":":"+n.port),n}},zMFY:function(t,e){function n(){}t.exports=function(t,e,i){var r=!1;return i=i||n,a.count=t,0===t?e():a;function a(t,n){if(a.count<=0)throw new Error("after called too many times");--a.count,t?(r=!0,e(t),e=i):0!==a.count||r||e(null,n)}}}}]);