(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{fRIO:function(t,e,n){"use strict";n.r(e),n.d(e,"TasksModule",(function(){return Kn}));var a=n("ofXK"),i=n("PCNd"),r=n("sYmb"),s=n("zQsl"),o=n("zB/H"),c=n("ue6I"),l=n("DDyt"),d=n("3Pt+"),u=n("f7OT"),b=n("XiUW"),f=n("0IaG"),g=n("wd/R"),p=n("BCsW"),h=n("ISpo"),m=n("unh5"),I=n("mrmJ"),v=n("fXoL"),k=n("cH1L"),S=n("kmnG"),T=n("qFsG"),w=n("d3UM"),y=n("5RNC"),D=n("TFyl"),x=n("1jcm"),_=n("FKr1"),B=n("bTqV"),C=n("NFeN"),L=["taskName"];function N(t,e){1&t&&(v.Tb(0,"h1",42),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n      ",v.gc(2,1,"tasks.main.add_new_task"),"\n    "))}function M(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.task_name_error"),"\n            "))}function O(t,e){if(1&t&&(v.Tb(0,"mat-option",43),v.Ic(1,"\n                "),v.Tb(2,"span",44),v.Ic(3),v.Sb(),v.Ic(4,"\n              "),v.Sb()),2&t){var n=e.$implicit;v.kc("value",n.id),v.Bb(2),v.kc("ngClass",n.id),v.Bb(1),v.Jc(n.name)}}function j(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.task_status_error"),"\n            "))}function Y(t,e){if(1&t&&(v.Tb(0,"mat-option",43),v.Ic(1),v.Sb()),2&t){var n=e.$implicit;v.kc("value",n),v.Bb(1),v.Kc("\n                ",n.projectName,"\n              ")}}function P(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.task_project_error"),"\n            "))}function A(t,e){if(1&t&&(v.Tb(0,"mat-option",45),v.Ic(1,"\n                "),v.Tb(2,"div",46),v.Ic(3,"\n                  "),v.Tb(4,"img",47),v.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),v.Sb(),v.Ic(5,"\n                  "),v.Tb(6,"span",48),v.Ic(7),v.Sb(),v.Ic(8,"\n                "),v.Sb(),v.Ic(9,"\n              "),v.Sb()),2&t){var n=e.$implicit,a=v.ec(2);v.kc("value",n),v.Bb(4),v.kc("ngClass",a.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+n.email+".jpg",v.yc)("alt",n.name+" "+n.family),v.Bb(3),v.Jc(n.name+" "+n.family)}}function F(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.assign_to_error"),"\n            "))}function G(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.task_durationHours_error"),"\n            "))}function R(t,e){if(1&t&&(v.Tb(0,"mat-option",43),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t){var n=e.$implicit;v.kc("value",n),v.Bb(1),v.Lc("\n                ",n," ",n?v.gc(2,3,"global.minutes"):"","\n              ")}}function E(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.start_at_error"),"\n            "))}function U(t,e){if(1&t&&(v.Tb(0,"mat-option",43),v.Ic(1),v.Sb()),2&t){var n=e.$implicit;v.kc("value",n),v.Bb(1),v.Kc("\n                ",n,"\n              ")}}function J(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.start_time_error"),"\n            "))}function H(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.stop_at_error"),"\n            "))}function z(t,e){if(1&t&&(v.Tb(0,"mat-option",43),v.Ic(1),v.Sb()),2&t){var n=e.$implicit;v.kc("value",n),v.Bb(1),v.Kc("\n                ",n,"\n              ")}}function K(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.stop_time_error"),"\n            "))}function q(t,e){if(1&t&&(v.Tb(0,"div",36),v.Ic(1,"\n        "),v.Tb(2,"div",6),v.Ic(3,"\n          "),v.Tb(4,"mat-slide-toggle",49),v.Ic(5),v.fc(6,"translate"),v.Sb(),v.Ic(7,"\n        "),v.Sb(),v.Ic(8,"\n      "),v.Sb()),2&t){var n=v.ec(2);v.Bb(4),v.kc("color","primary"),v.Bb(1),v.Kc("\n            ",v.gc(6,2,n.form.get("status").value?"global.active":"global.deactivate"),"\n          ")}}function V(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",50),v.ac("click",(function(){return v.wc(n),v.ec(2).cancelBtn()})),v.Ic(1,"\n      "),v.Tb(2,"span",51),v.Ic(3),v.fc(4,"translate"),v.Sb(),v.Ic(5,"\n    "),v.Sb()}2&t&&(v.Bb(3),v.Jc(v.gc(4,1,"global.dismiss")))}function $(t,e){1&t&&(v.Tb(0,"button",52),v.Ic(1,"\n      "),v.Tb(2,"mat-icon",53),v.Ic(3,"check"),v.Sb(),v.Ic(4,"\n      "),v.Tb(5,"span",51),v.Ic(6),v.fc(7,"translate"),v.Sb(),v.Ic(8,"\n    "),v.Sb()),2&t&&(v.Bb(6),v.Jc(v.gc(7,1,"global.submit")))}function X(t,e){if(1&t){var n=v.Ub();v.Tb(0,"form",1),v.ac("submit",(function(){return v.wc(n),v.ec().submit()})),v.Ic(1,"\n  "),v.Tb(2,"div",2),v.Ic(3,"\n    "),v.Gc(4,N,3,3,"h1",3),v.Ic(5,"\n\n    "),v.Tb(6,"div",4),v.Ic(7,"\n      "),v.Tb(8,"div",5),v.Ic(9,"\n        "),v.Tb(10,"div",6),v.Ic(11,"\n          "),v.Tb(12,"mat-form-field",7),v.Ic(13,"\n            "),v.Ob(14,"input",8,9),v.fc(16,"translate"),v.Ic(17,"\n            "),v.Tb(18,"mat-label"),v.Ic(19),v.fc(20,"translate"),v.Sb(),v.Ic(21,"\n\n            "),v.Gc(22,M,3,3,"mat-error",10),v.Ic(23,"\n          "),v.Sb(),v.Ic(24,"\n        "),v.Sb(),v.Ic(25,"\n      "),v.Sb(),v.Ic(26,"\n\n      "),v.Tb(27,"div",5),v.Ic(28,"\n        "),v.Tb(29,"div",11),v.Ic(30,"\n          "),v.Tb(31,"mat-form-field",12),v.Ic(32,"\n            "),v.Tb(33,"mat-label"),v.Ic(34),v.fc(35,"translate"),v.Sb(),v.Ic(36,"\n            "),v.Tb(37,"mat-select",13),v.ac("selectionChange",(function(t){return v.wc(n),v.ec().changeBoardStatus(t.value)})),v.Ic(38,"\n              "),v.Gc(39,O,5,3,"mat-option",14),v.Ic(40,"\n            "),v.Sb(),v.Ic(41,"\n            "),v.Gc(42,j,3,3,"mat-error",10),v.Ic(43,"\n          "),v.Sb(),v.Ic(44,"\n        "),v.Sb(),v.Ic(45,"\n        "),v.Tb(46,"div",15),v.Ic(47,"\n          "),v.Tb(48,"div",16),v.Ic(49),v.fc(50,"translate"),v.Tb(51,"span"),v.Ic(52),v.Sb(),v.Ic(53," \u066a\n          "),v.Sb(),v.Ic(54,"\n          "),v.Tb(55,"mat-slider",17),v.Ic(56,"\n          "),v.Sb(),v.Ic(57,"\n        "),v.Sb(),v.Ic(58,"\n      "),v.Sb(),v.Ic(59,"\n\n      "),v.Tb(60,"div",18),v.Ic(61,"\n        "),v.Tb(62,"div",11),v.Ic(63,"\n          "),v.Tb(64,"mat-form-field",7),v.Ic(65,"\n            "),v.Tb(66,"mat-label"),v.Ic(67),v.fc(68,"translate"),v.Sb(),v.Ic(69,"\n            "),v.Tb(70,"mat-select",19),v.Ic(71,"\n              "),v.Gc(72,Y,2,2,"mat-option",14),v.Ic(73,"\n            "),v.Sb(),v.Ic(74,"\n\n            "),v.Gc(75,P,3,3,"mat-error",10),v.Ic(76,"\n          "),v.Sb(),v.Ic(77,"\n        "),v.Sb(),v.Ic(78,"\n        "),v.Tb(79,"div",11),v.Ic(80,"\n          "),v.Tb(81,"mat-form-field",7),v.Ic(82,"\n            "),v.Ob(83,"img",20),v.Ic(84,"\n            "),v.Tb(85,"mat-label"),v.Ic(86),v.fc(87,"translate"),v.Sb(),v.Ic(88,"\n            "),v.Tb(89,"mat-select",21),v.Ic(90,"\n              "),v.Gc(91,A,10,5,"mat-option",22),v.Ic(92,"\n            "),v.Sb(),v.Ic(93,"\n\n            "),v.Gc(94,F,3,3,"mat-error",10),v.Ic(95,"\n          "),v.Sb(),v.Ic(96,"\n        "),v.Sb(),v.Ic(97,"\n      "),v.Sb(),v.Ic(98,"\n\n      "),v.Tb(99,"div",23),v.Ic(100,"\n        "),v.Tb(101,"div",11),v.Ic(102,"\n          "),v.Tb(103,"mat-form-field",7),v.Ic(104,"\n            "),v.Ob(105,"input",24),v.fc(106,"translate"),v.Ic(107,"\n            "),v.Tb(108,"mat-label"),v.Ic(109),v.fc(110,"translate"),v.Sb(),v.Ic(111,"\n\n            "),v.Gc(112,G,3,3,"mat-error",10),v.Ic(113,"\n          "),v.Sb(),v.Ic(114,"\n        "),v.Sb(),v.Ic(115,"\n        "),v.Tb(116,"div",11),v.Ic(117,"\n          "),v.Tb(118,"mat-form-field",7),v.Ic(119,"\n            "),v.Ob(120,"mat-label"),v.Ic(121,"\n            "),v.Tb(122,"mat-select",25),v.Ic(123,"\n              "),v.Gc(124,R,3,5,"mat-option",14),v.Ic(125,"\n            "),v.Sb(),v.Ic(126,"\n          "),v.Sb(),v.Ic(127,"\n        "),v.Sb(),v.Ic(128,"\n      "),v.Sb(),v.Ic(129,"\n\n      "),v.Tb(130,"div",5),v.Ic(131,"\n        "),v.Tb(132,"div",26),v.Ic(133,"\n          "),v.Tb(134,"mat-form-field",27),v.Ic(135,"\n            "),v.Tb(136,"mat-label"),v.Ic(137),v.fc(138,"translate"),v.Sb(),v.Ic(139,"\n            "),v.Ob(140,"input",28),v.Ic(141,"\n\n            "),v.Gc(142,E,3,3,"mat-error",10),v.Ic(143,"\n          "),v.Sb(),v.Ic(144,"\n        "),v.Sb(),v.Ic(145,"\n        "),v.Tb(146,"div",29),v.Ic(147,"\n          "),v.Tb(148,"mat-form-field",7),v.Ic(149,"\n            "),v.Tb(150,"mat-label"),v.Ic(151),v.fc(152,"translate"),v.Sb(),v.Ic(153,"\n            "),v.Tb(154,"mat-select",30),v.Ic(155,"\n              "),v.Gc(156,U,2,2,"mat-option",14),v.Ic(157,"\n            "),v.Sb(),v.Ic(158,"\n\n            "),v.Gc(159,J,3,3,"mat-error",10),v.Ic(160,"\n          "),v.Sb(),v.Ic(161,"\n        "),v.Sb(),v.Ic(162,"\n\n        "),v.Tb(163,"div",31),v.Ic(164,"\n          "),v.Tb(165,"mat-form-field",27),v.Ic(166,"\n            "),v.Tb(167,"mat-label"),v.Ic(168),v.fc(169,"translate"),v.Sb(),v.Ic(170,"\n            "),v.Ob(171,"input",32),v.Ic(172,"\n\n            "),v.Gc(173,H,3,3,"mat-error",10),v.Ic(174,"\n          "),v.Sb(),v.Ic(175,"\n        "),v.Sb(),v.Ic(176,"\n        "),v.Tb(177,"div",29),v.Ic(178,"\n          "),v.Tb(179,"mat-form-field",7),v.Ic(180,"\n            "),v.Tb(181,"mat-label"),v.Ic(182),v.fc(183,"translate"),v.Sb(),v.Ic(184,"\n            "),v.Tb(185,"mat-select",33),v.Ic(186,"\n              "),v.Gc(187,z,2,2,"mat-option",14),v.Ic(188,"\n            "),v.Sb(),v.Ic(189,"\n\n            "),v.Gc(190,K,3,3,"mat-error",10),v.Ic(191,"\n          "),v.Sb(),v.Ic(192,"\n        "),v.Sb(),v.Ic(193,"\n      "),v.Sb(),v.Ic(194,"\n\n      "),v.Tb(195,"div",23),v.Ic(196,"\n        "),v.Tb(197,"div",6),v.Ic(198,"\n          "),v.Tb(199,"mat-form-field",34),v.Ic(200,"\n            "),v.Tb(201,"mat-label"),v.Ic(202),v.fc(203,"translate"),v.Sb(),v.Ic(204,"\n            "),v.Ob(205,"textarea",35),v.fc(206,"translate"),v.Ic(207,"\n          "),v.Sb(),v.Ic(208,"\n        "),v.Sb(),v.Ic(209,"\n      "),v.Sb(),v.Ic(210,"\n\n      "),v.Tb(211,"div",36),v.Ic(212,"\n        "),v.Tb(213,"div",6),v.Ic(214,"\n          "),v.Tb(215,"mat-slide-toggle",37),v.Ic(216),v.fc(217,"translate"),v.Sb(),v.Ic(218,"\n        "),v.Sb(),v.Ic(219,"\n      "),v.Sb(),v.Ic(220,"\n\n      "),v.Gc(221,q,9,4,"div",38),v.Ic(222,"\n    "),v.Sb(),v.Ic(223,"\n  "),v.Sb(),v.Ic(224,"\n\n  "),v.Tb(225,"div",39),v.Ic(226,"\n    "),v.Gc(227,V,6,3,"button",40),v.Ic(228,"\n\n    "),v.Gc(229,$,9,3,"button",41),v.Ic(230,"\n  "),v.Sb(),v.Ic(231,"\n"),v.Sb()}if(2&t){var a=v.ec();v.kc("dir",a.rtlDirection?"rtl":"ltr")("formGroup",a.form),v.Bb(4),v.kc("ngIf","detail"!==a.data.action),v.Bb(10),v.lc("placeholder",v.gc(16,50,"tasks.form.task_name")),v.Bb(5),v.Kc("\n              ",v.gc(20,52,"tasks.form.task_name"),"\n            "),v.Bb(3),v.kc("ngIf",!a.form.get("taskName").valid),v.Bb(12),v.Jc(v.gc(35,54,"tasks.form.task_status")),v.Bb(5),v.kc("ngForOf",a.boardsList),v.Bb(3),v.kc("ngIf",!a.form.get("boardStatus").valid),v.Bb(6),v.kc("ngClass",a.rtlDirection?"right-six-tenth":"left-six-tenth"),v.Bb(1),v.Kc("\n            ",v.gc(50,56,"tasks.boards.task_percentage"),"\n            "),v.Bb(3),v.Jc(a.form.get("percentage").value),v.Bb(3),v.kc("max",100)("min",0)("step",5)("thumbLabel",!0)("tickInterval",2),v.Bb(12),v.Jc(v.gc(68,58,"tasks.form.task_project")),v.Bb(5),v.kc("ngForOf",a.projectsList),v.Bb(3),v.kc("ngIf",!a.form.get("project").valid),v.Bb(8),v.kc("ngClass",a.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+a.form.get("email").value+".jpg",v.yc),v.Bb(3),v.Jc(v.gc(87,60,"tasks.form.assign_to")),v.Bb(5),v.kc("ngForOf",a.usersList),v.Bb(3),v.kc("ngIf",!a.form.get("assignTo").valid),v.Bb(11),v.lc("placeholder",v.gc(106,62,"tasks.form.task_durationHours")),v.Bb(4),v.Kc("\n              ",v.gc(110,64,"tasks.form.task_durationHours"),"\n            "),v.Bb(3),v.kc("ngIf",!a.form.get("taskDurationHours").valid),v.Bb(12),v.kc("ngForOf",a.durationMinute),v.Bb(10),v.kc("dir",a.rtlDirection?"rtl":"ltr"),v.Bb(3),v.Jc(v.gc(138,66,"tasks.form.start_at")),v.Bb(3),v.kc("dpDayPicker",a.datePicker),v.Bb(2),v.kc("ngIf",!a.form.get("startAt").valid),v.Bb(9),v.Jc(v.gc(152,68,"tasks.form.start_time")),v.Bb(5),v.kc("ngForOf",a.hours),v.Bb(3),v.kc("ngIf",!a.form.get("startTime").valid),v.Bb(6),v.kc("dir",a.rtlDirection?"rtl":"ltr"),v.Bb(3),v.Jc(v.gc(169,70,"tasks.form.stop_at")),v.Bb(3),v.kc("dpDayPicker",a.datePicker),v.Bb(2),v.kc("ngIf",!a.form.get("stopAt").valid),v.Bb(9),v.Jc(v.gc(183,72,"tasks.form.stop_time")),v.Bb(5),v.kc("ngForOf",a.hours),v.Bb(3),v.kc("ngIf",!a.form.get("stopTime").valid),v.Bb(12),v.Jc(v.gc(203,74,"tasks.form.task_description")),v.Bb(3),v.lc("placeholder",v.gc(206,76,"tasks.form.task_description")),v.Bb(10),v.kc("color","primary"),v.Bb(1),v.Kc("\n            ",v.gc(217,78,"tasks.form.trackable_by_mobile"),"\n          "),v.Bb(5),v.kc("ngIf","detail"===a.data.action),v.Bb(6),v.kc("ngIf",a.editable||"detail"!==a.data.action),v.Bb(2),v.kc("ngIf",a.editable)}}var W,Q=function(){function t(t,e){var n=this;this.translate=t,this.viewDirection=e,this.data=null,this.cancel=new v.o,this.formOutput=new v.o,this.rtlDirection=!1,this.task=null,this.projectsList=[],this.usersList=[],this.durationMinute=[0,15,30,45],this.hours=[],this.boardsList=[],this.datePicker=null,this._subscription=new o.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){n.rtlDirection=t,n.setupDatepickers(),n.setupTaskStatusWords()})))}return t.prototype.ngOnInit=function(){this.usersList=this.data.usersList,this.projectsList=this.data.projectsList,"detail"===this.data.action?this.task=this.data.task:this.selectCurrentTime(),this.setupTaskStatusWords(),this.fillHoursDropdown()},t.prototype.ngAfterViewInit=function(){this.setupDatepickers(),this.editable&&this.taskName.nativeElement.focus()},t.prototype.fillHoursDropdown=function(){for(var t=["00","15","30","45"],e=0;e<=23;e++)for(var n=0,a=t;n<a.length;n++){var i=a[n],r=e<10?"0"+e:e.toString(10);this.hours.push(r+":"+i)}},t.prototype.setupDatepickers=function(){this.datePicker={locale:this.rtlDirection?"fa":"en",firstDayOfWeek:this.rtlDirection?"sa":"mo",format:"YYYY/MM/DD",closeOnSelect:!0,closeOnSelectDelay:150}},t.prototype.setupTaskStatusWords=function(){var t=this;setTimeout((function(){t.boardsList=[{id:"todo",name:t.getTranslate("tasks.boards.todo")},{id:"inProgress",name:t.getTranslate("tasks.boards.in_progress")},{id:"done",name:t.getTranslate("tasks.boards.done")}]}),200)},t.prototype.ngOnChanges=function(t){var e=this;t.form&&!t.form.firstChange&&(this.form=t.form.currentValue,this._subscription.add(this.form.get("assignTo").valueChanges.subscribe((function(t){var n=e.usersList.filter((function(e){return e.adminId===t.adminId})).pop();n&&e.form.get("email").setValue(n.email)}))))},t.prototype.cancelBtn=function(){this.cancel.emit(!0)},t.prototype.changeBoardStatus=function(t){"done"===t?this.form.get("percentage").setValue(100):"detail"===this.data.action?"done"!==this.data.boardStatus&&this.form.get("percentage").setValue(this.task.percentage):this.form.get("percentage").setValue(0)},t.prototype.selectCurrentTime=function(){var t=new Date,e=t.getHours()<10?"0"+t.getHours():t.getHours(),n=t.getMinutes(),a="";n<15?a="00":n>=15&&n<30||n>=30&&n<45?a="15":n>=45&&(a="45");var i=e+":"+a;this.form.get("startTime").setValue(i),this.form.get("stopTime").setValue(i)},t.prototype.submit=function(){this.form.valid&&this.formOutput.emit(this.form)},t.prototype.getTranslate=function(t){return this.translate.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(r.d),v.Nb(m.a))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-form"]],viewQuery:function(t,e){var n;1&t&&v.Nc(L,!0),2&t&&v.rc(n=v.bc())&&(e.taskName=n.first)},inputs:{form:"form",data:"data",editable:"editable"},outputs:{cancel:"cancel",formOutput:"formOutput"},features:[v.zb],decls:2,vars:1,consts:[["autocomplete","off","class","full-height",3,"dir","formGroup","submit",4,"ngIf"],["autocomplete","off",1,"full-height",3,"dir","formGroup","submit"],[1,"height-full-minus-30","full-width"],["class","margin-b-full text-gray-800 font-full-em text-weight-500 margin-b-half no-margin",4,"ngIf"],[1,"full-height","padding-mini-r-l","overflow-y-auto","overflow-x-hide"],[1,"display-flex","margin-r-l-reverse"],[1,"full-width","padding-mini-r-l"],[1,"full-width","font-9-em"],["formControlName","taskName","matInput","","required","","tabindex","1","type","text",1,"full-width",3,"placeholder"],["taskName",""],[4,"ngIf"],[1,"half-width","padding-mini-r-l"],[1,"full-width","font-full-em"],["formControlName","boardStatus","tabIndex","2","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"half-width","no-padding-r-l","pos-rel","display-flex","align-items-end"],[1,"font-9-em","pos-abs","top-full-plus-three-tenth",3,"ngClass"],["formControlName","percentage","tabindex","3",1,"full-width","pos-rel","top-half",3,"max","min","step","thumbLabel","tickInterval"],[1,"display-flex","margin-r-l-reverse","margin-b-half"],["formControlName","project","tabIndex","4","required",""],["matPrefix","","alt","",1,"width-20","height-20","round-corner-all","pos-rel","top-three-tenth",3,"ngClass","src"],["formControlName","assignTo","tabIndex","5","required",""],["class","font-full-em",3,"value",4,"ngFor","ngForOf"],[1,"display-flex","margin-b-half","margin-r-l-reverse"],["formControlName","taskDurationHours","matInput","","required","","tabindex","6","type","number","min","1","max","999",1,"full-width",3,"placeholder"],["formControlName","taskDurationMinutes","tabIndex","7"],[1,"dpDateStartPicker","quarter-width","padding-mini-r-l"],[1,"dpDatePicker","full-width","font-9-em",3,"dir"],["formControlName","startAt","attachTo",".dpDateStartPicker","autocomplete","off","tabindex","8","theme","dp-material","matInput","","placeholder","","readonly","","required","",3,"dpDayPicker"],[1,"quarter-width","padding-mini-r-l"],["formControlName","startTime","tabIndex","9","required",""],[1,"dpDateStopPicker","quarter-width","padding-mini-r-l"],["autocomplete","off","formControlName","stopAt","attachTo",".dpDateStopPicker","tabindex","10","theme","dp-material","matInput","","placeholder","","readonly","","required","",3,"dpDayPicker"],["formControlName","stopTime","tabIndex","11","required",""],[1,"full-width","height-80","font-9-em"],["formControlName","taskDesc","matInput","","tabindex","12",3,"placeholder"],[1,"display-flex","margin-b-full","margin-r-l-reverse"],["formControlName","trackable","tabIndex","13",3,"color"],["class","display-flex margin-b-full margin-r-l-reverse",4,"ngIf"],[1,"height-30","display-flex","justify-content-end"],["class","display-flex full-height no-bg no-border cursor-pointer text-red-500 line-height-30 font-9-em overflow-hide text-weight-normal","type","button","tabindex","15",3,"click",4,"ngIf"],["class","display-flex full-height green-gradient text-white line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","","tabindex","16","type","submit",4,"ngIf"],[1,"margin-b-full","text-gray-800","font-full-em","text-weight-500","margin-b-half","no-margin"],[3,"value"],[1,"task-count",3,"ngClass"],[1,"font-full-em",3,"value"],[1,"display-flex","align-items-center"],["matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel",3,"ngClass","src","alt","error"],[1,"line-height-40"],["formControlName","status","tabIndex","14",3,"color"],["type","button","tabindex","15",1,"display-flex","full-height","no-bg","no-border","cursor-pointer","text-red-500","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],[1,"padding-mini-r-l"],["mat-raised-button","","tabindex","16","type","submit",1,"display-flex","full-height","green-gradient","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"]],template:function(t,e){1&t&&(v.Gc(0,X,232,80,"form",0),v.Ic(1,"\n")),2&t&&v.kc("ngIf",e.form)},directives:[a.k,d.v,d.o,k.b,d.i,S.c,d.c,T.b,d.n,d.g,d.t,S.f,w.a,a.j,a.i,y.a,S.g,d.r,D.a,x.a,S.b,_.m,B.b,C.a],pipes:[r.c],styles:[".task-count.todo[_ngcontent-%COMP%]{color:#f44336}.task-count.inProgress[_ngcontent-%COMP%]{color:#eb9f4c}.task-count.done[_ngcontent-%COMP%]{color:#388e3c}.right-six-tenth[_ngcontent-%COMP%]{right:.6em!important}.left-six-tenth[_ngcontent-%COMP%]{left:.6em!important}"]}),t}(),Z=(W=function(t,e){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}W(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),tt=function(){return(tt=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function et(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",1),v.Ic(1,"\n  "),v.Tb(2,"app-task-form",2),v.ac("cancel",(function(t){return v.wc(n),v.ec().cancelBtn(t)}))("formOutput",(function(t){return v.wc(n),v.ec().updateForm(t)})),v.Sb(),v.Ic(3,"\n"),v.Sb()}if(2&t){var a=v.ec();v.Bb(2),v.kc("data",a.data)("editable",a.editable)("form",a.form)}}var nt=function(t){function e(e,n,a,i,r,s,c,l,d,u){var b=t.call(this,r,c)||this;return b.data=e,b.dialogRef=n,b.api=a,b.fb=i,b.injector=r,b.messageService=s,b.userInfoService=c,b.viewDirection=l,b.refreshLoginService=d,b.loadingIndicatorService=u,b.rtlDirection=!1,b.editable=!1,b.projectsList=[],b.usersList=[],b._subscription=new o.Subscription,b.usersList=b.data.usersList,b.projectsList=b.data.projectsList,b._subscription.add(b.viewDirection.currentDirection.subscribe((function(t){return b.rtlDirection=t}))),b}return Z(e,t),e.prototype.ngOnInit=function(){var t=this;this.createForm().then((function(){t.editable=!0,t.form.enable(),t.formValidationCheck()}))},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({taskId:new d.e(0),taskName:new d.e("",d.u.required),percentage:new d.e(0,d.u.required),assignTo:new d.e("",d.u.required),taskDurationHours:new d.e(1,[d.u.required,d.u.pattern("^[0-9]+"),d.u.min(1),d.u.max(999)]),taskDurationMinutes:new d.e(0,d.u.required),startAt:new d.e("",d.u.required),stopAt:new d.e("",d.u.required),startTime:new d.e("",d.u.required),stopTime:new d.e("",d.u.required),project:new d.e("",d.u.required),taskDesc:new d.e(""),email:new d.e("0"),boardStatus:new d.e("",d.u.required),taskDateStart:"0000-00-00 00:00:00",taskDateStop:"0000-00-00 00:00:00",assigner:new d.e(t.loggedInUser.email,d.u.required),trackable:new d.e(0)}),e(!0)}))},e.prototype.formValidationCheck=function(){var t=this;this._subscription.add(this.form.get("taskName").valueChanges.subscribe((function(e){var n=t.form.get("taskName");e.trim().length?n.setErrors(null):(n.setErrors({incorrect:!0}),n.markAsTouched())}))),this._subscription.add(this.form.get("assignTo").valueChanges.subscribe((function(e){var n=t.usersList.filter((function(t){return t.adminId===e.adminId})).pop();n&&t.form.get("email").setValue(n.email)}))),this._subscription.add(this.form.get("startAt").valueChanges.subscribe((function(e){var n=t.form.get("startAt"),a=t.form.get("stopAt"),i=a.value;i&&((t.rtlDirection?p(e,"YYYY/MM/DD").isAfter(p(i,"YYYY/MM/DD")):g(e,"YYYY/MM/DD").isAfter(g(i,"YYYY/MM/DD")))?(n.setErrors({incorrect:!0}),n.markAsTouched()):(n.setErrors(null),a.setErrors(null)))}))),this._subscription.add(this.form.get("stopAt").valueChanges.subscribe((function(e){var n=t.form.get("stopAt"),a=t.form.get("startAt"),i=a.value;i&&((t.rtlDirection?p(e,"YYYY/MM/DD").isBefore(p(i,"YYYY/MM/DD")):g(e,"YYYY/MM/DD").isBefore(g(i,"YYYY/MM/DD")))?(n.setErrors({incorrect:!0}),n.markAsTouched()):(n.setErrors(null),a.setErrors(null)))})))},e.prototype.updateForm=function(t){var e=this;this.form=t,setTimeout((function(){e.submit()}),500)},e.prototype.cancelBtn=function(t){t&&this.dialogRef.close(!1)},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.dialogRef.disableClose=!0;var e=tt({},this.form.value);this.form.disable(),this.rtlDirection?(e.startAt=p.from(e.startAt,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD"),e.stopAt=p.from(e.stopAt,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD")):(e.startAt=g(e.startAt,"YYYY/MM/DD").format("YYYY-MM-DD"),e.stopAt=g(e.stopAt,"YYYY/MM/DD").format("YYYY-MM-DD"));var n=tt(tt({},e),{taskName:e.taskName.trim(),startAt:e.startAt+" "+e.startTime+":00",stopAt:e.stopAt+" "+e.stopTime+":00"});delete n.taskId,this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.createTask(n).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.dialogRef.disableClose=!1,1===e.result?t.dialogRef.close(!0):t.form.enable(),e.message&&t.messageService.showMessage(e.message)}),(function(e){e.message&&(t.form.enable(),t.dialogRef.disableClose=!1,t.messageService.showMessage(e.message,"error")),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e),t.form.enable()})))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(v.Nb(f.a),v.Nb(f.e),v.Nb(u.a),v.Nb(d.d),v.Nb(v.t),v.Nb(b.a),v.Nb(l.a),v.Nb(m.a),v.Nb(h.a),v.Nb(I.a))},e.\u0275cmp=v.Hb({type:e,selectors:[["ng-component"]],features:[v.yb],decls:2,vars:1,consts:[["class","pos-abs left-0 right-0 top-0 bottom-0 padding-full z-index-99",4,"ngIf"],[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99"],[3,"data","editable","form","cancel","formOutput"]],template:function(t,e){1&t&&(v.Gc(0,et,4,3,"div",0),v.Ic(1,"\n")),2&t&&v.kc("ngIf",e.form)},directives:[a.k,Q],encapsulation:2}),e}(c.a),at=n("LyM2"),it=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),rt=function(){return(rt=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},st=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,o=r.length;s<o;s++,i++)a[i]=r[s];return a},ot=["typeSelect"];function ct(t,e){if(1&t&&(v.Tb(0,"mat-option",33),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t){var n=e.$implicit;v.kc("value",n.typeName),v.Bb(1),v.Kc("\n                ",v.gc(2,2,n.textName),"\n              ")}}function lt(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.task_name_error"),"\n            "))}function dt(t,e){if(1&t&&(v.Tb(0,"mat-option",33),v.Ic(1),v.Sb()),2&t){var n=e.$implicit;v.kc("value",n.projectId),v.Bb(1),v.Kc("\n                ",n.projectName,"\n              ")}}function ut(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.task_project_error"),"\n            "))}function bt(t,e){if(1&t&&(v.Tb(0,"img",34),v.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),v.Sb()),2&t){var n=v.ec(2);v.kc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+n.form.get("userImg").value+".jpg",v.yc)}}function ft(t,e){if(1&t&&(v.Tb(0,"mat-option",33),v.Ic(1,"\n                "),v.Tb(2,"div",35),v.Ic(3,"\n                  "),v.Tb(4,"img",36),v.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),v.Sb(),v.Ic(5,"\n                  "),v.Tb(6,"span",37),v.Ic(7),v.Sb(),v.Ic(8,"\n                "),v.Sb(),v.Ic(9,"\n              "),v.Sb()),2&t){var n=e.$implicit,a=v.ec(2);v.kc("value",n.adminId),v.Bb(4),v.kc("ngClass",a.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+n.email+".jpg",v.yc),v.Bb(3),v.Jc(n.name+" "+n.family)}}function gt(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.assign_to_error"),"\n            "))}function pt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",38),v.ac("click",(function(t){return v.wc(n),v.ec(2).form.get("dateStart").setValue(""),t.stopPropagation()})),v.Ic(1,"\n              "),v.Tb(2,"mat-icon"),v.Ic(3,"close"),v.Sb(),v.Ic(4,"\n            "),v.Sb()}if(2&t){var a=v.ec(2);v.kc("ngClass",a.rtlDirection?"float-left":"float-right")}}function ht(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"global.date_error"),"\n            "))}function mt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",38),v.ac("click",(function(t){return v.wc(n),v.ec(2).form.get("dateStop").setValue(""),t.stopPropagation()})),v.Ic(1,"\n              "),v.Tb(2,"mat-icon"),v.Ic(3,"close"),v.Sb(),v.Ic(4,"\n            "),v.Sb()}if(2&t){var a=v.ec(2);v.kc("ngClass",a.rtlDirection?"float-left":"float-right")}}function It(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"global.date_error"),"\n            "))}function vt(t,e){1&t&&(v.Tb(0,"div",39),v.Ic(1,"\n    "),v.Tb(2,"div",40),v.Ic(3,"\n      "),v.dc(),v.Tb(4,"svg",41),v.Ic(5,"\n        "),v.Tb(6,"rect",42),v.Ic(7,"\n          "),v.Ob(8,"animate",43),v.Ic(9,"\n          "),v.Ob(10,"animate",44),v.Ic(11,"\n        "),v.Sb(),v.Ic(12,"\n        "),v.Tb(13,"rect",45),v.Ic(14,"\n          "),v.Ob(15,"animate",46),v.Ic(16,"\n          "),v.Ob(17,"animate",47),v.Ic(18,"\n        "),v.Sb(),v.Ic(19,"\n        "),v.Tb(20,"rect",48),v.Ic(21,"\n          "),v.Ob(22,"animate",49),v.Ic(23,"\n          "),v.Ob(24,"animate",50),v.Ic(25,"\n        "),v.Sb(),v.Ic(26,"\n      "),v.Sb(),v.Ic(27,"\n\n      "),v.cc(),v.Tb(28,"span",51),v.Ic(29),v.fc(30,"translate"),v.Sb(),v.Ic(31,"\n    "),v.Sb(),v.Ic(32,"\n  "),v.Sb()),2&t&&(v.Bb(29),v.Jc(v.gc(30,1,"global.loading")))}function kt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",1),v.Ic(1,"\n  "),v.Tb(2,"form",2),v.Ic(3,"\n    "),v.Tb(4,"div",3),v.Ic(5,"\n      "),v.Tb(6,"h1",4),v.Ic(7),v.fc(8,"translate"),v.Sb(),v.Ic(9,"\n\n      "),v.Tb(10,"div",5),v.Ic(11,"\n        "),v.Tb(12,"div",6),v.Ic(13,"\n          "),v.Tb(14,"mat-form-field",7),v.Ic(15,"\n            "),v.Tb(16,"mat-label"),v.Ic(17),v.fc(18,"translate"),v.Sb(),v.Ic(19,"\n            "),v.Tb(20,"mat-select",8,9),v.Ic(22,"\n              "),v.Gc(23,ct,3,4,"mat-option",10),v.Ic(24,"\n            "),v.Sb(),v.Ic(25,"\n          "),v.Sb(),v.Ic(26,"\n        "),v.Sb(),v.Ic(27,"\n\n        "),v.Tb(28,"div",6),v.Ic(29,"\n          "),v.Tb(30,"mat-form-field",7),v.Ic(31,"\n            "),v.Ob(32,"input",11),v.fc(33,"translate"),v.Ic(34,"\n            "),v.Tb(35,"mat-label"),v.Ic(36),v.fc(37,"translate"),v.Sb(),v.Ic(38,"\n\n            "),v.Gc(39,lt,3,3,"mat-error",12),v.Ic(40,"\n          "),v.Sb(),v.Ic(41,"\n        "),v.Sb(),v.Ic(42,"\n      "),v.Sb(),v.Ic(43,"\n\n      "),v.Tb(44,"div",5),v.Ic(45,"\n        "),v.Tb(46,"div",6),v.Ic(47,"\n          "),v.Tb(48,"mat-form-field",7),v.Ic(49,"\n            "),v.Tb(50,"mat-label"),v.Ic(51),v.fc(52,"translate"),v.Sb(),v.Ic(53,"\n            "),v.Tb(54,"mat-select",13),v.Ic(55,"\n              "),v.Gc(56,dt,2,2,"mat-option",10),v.Ic(57,"\n            "),v.Sb(),v.Ic(58,"\n\n            "),v.Gc(59,ut,3,3,"mat-error",12),v.Ic(60,"\n          "),v.Sb(),v.Ic(61,"\n        "),v.Sb(),v.Ic(62,"\n\n        "),v.Tb(63,"div",6),v.Ic(64,"\n          "),v.Tb(65,"mat-form-field",7),v.Ic(66,"\n            "),v.Gc(67,bt,1,2,"img",14),v.Ic(68,"\n            "),v.Tb(69,"mat-label"),v.Ic(70),v.fc(71,"translate"),v.Sb(),v.Ic(72,"\n            "),v.Tb(73,"mat-select",15),v.Ic(74,"\n              "),v.Gc(75,ft,10,4,"mat-option",10),v.Ic(76,"\n            "),v.Sb(),v.Ic(77,"\n\n            "),v.Gc(78,gt,3,3,"mat-error",12),v.Ic(79,"\n          "),v.Sb(),v.Ic(80,"\n        "),v.Sb(),v.Ic(81,"\n      "),v.Sb(),v.Ic(82,"\n\n      "),v.Tb(83,"div",16),v.Ic(84,"\n        "),v.Tb(85,"div",17),v.Ic(86,"\n          "),v.Tb(87,"mat-form-field",18),v.Ic(88,"\n            "),v.Tb(89,"mat-label"),v.Ic(90),v.fc(91,"translate"),v.Sb(),v.Ic(92,"\n            "),v.Ob(93,"input",19),v.Ic(94,"\n\n            "),v.Gc(95,pt,5,1,"button",20),v.Ic(96,"\n\n            "),v.Gc(97,ht,3,3,"mat-error",12),v.Ic(98,"\n          "),v.Sb(),v.Ic(99,"\n        "),v.Sb(),v.Ic(100,"\n\n        "),v.Tb(101,"div",21),v.Ic(102,"\n          "),v.Tb(103,"mat-form-field",18),v.Ic(104,"\n            "),v.Tb(105,"mat-label"),v.Ic(106),v.fc(107,"translate"),v.Sb(),v.Ic(108,"\n            "),v.Ob(109,"input",22),v.Ic(110,"\n\n            "),v.Gc(111,mt,5,1,"button",20),v.Ic(112,"\n\n            "),v.Gc(113,It,3,3,"mat-error",12),v.Ic(114,"\n          "),v.Sb(),v.Ic(115,"\n        "),v.Sb(),v.Ic(116,"\n      "),v.Sb(),v.Ic(117,"\n\n      "),v.Tb(118,"div",23),v.Ic(119,"\n        "),v.Tb(120,"div",6),v.Ic(121,"\n          "),v.Tb(122,"mat-slide-toggle",24),v.Ic(123,"\n            "),v.Tb(124,"span",25),v.Ic(125),v.fc(126,"translate"),v.Sb(),v.Ic(127,"\n          "),v.Sb(),v.Ic(128,"\n        "),v.Sb(),v.Ic(129,"\n\n        "),v.Tb(130,"div",6),v.Ic(131,"\n          "),v.Tb(132,"mat-slide-toggle",26),v.Ic(133,"\n            "),v.Tb(134,"span",25),v.Ic(135),v.fc(136,"translate"),v.Sb(),v.Ic(137,"\n          "),v.Sb(),v.Ic(138,"\n        "),v.Sb(),v.Ic(139,"\n      "),v.Sb(),v.Ic(140,"\n    "),v.Sb(),v.Ic(141,"\n\n    "),v.Tb(142,"div",27),v.Ic(143,"\n      "),v.Tb(144,"button",28),v.ac("click",(function(){return v.wc(n),v.ec().submit()})),v.Ic(145,"\n        "),v.Tb(146,"mat-icon",29),v.Ic(147,"check"),v.Sb(),v.Ic(148,"\n        "),v.Tb(149,"span",30),v.Ic(150),v.fc(151,"translate"),v.Sb(),v.Ic(152,"\n      "),v.Sb(),v.Ic(153,"\n\n      "),v.Tb(154,"button",31),v.ac("click",(function(){return v.wc(n),v.ec().dialogRef.close(!1)})),v.Ic(155,"\n        "),v.Tb(156,"span",30),v.Ic(157),v.fc(158,"translate"),v.Sb(),v.Ic(159,"\n      "),v.Sb(),v.Ic(160,"\n    "),v.Sb(),v.Ic(161,"\n  "),v.Sb(),v.Ic(162,"\n\n  "),v.Gc(163,vt,33,3,"div",32),v.Ic(164,"\n"),v.Sb()}if(2&t){var a=v.ec();v.kc("dir",a.rtlDirection?"rtl":"ltr"),v.Bb(2),v.kc("formGroup",a.form),v.Bb(5),v.Kc("\n        ",v.gc(8,33,"tasks.task_filter.tasks_filter"),"\n      "),v.Bb(10),v.Jc(v.gc(18,35,"tasks.task_filter.filter_types")),v.Bb(6),v.kc("ngForOf",a.filterTypes),v.Bb(9),v.lc("placeholder",v.gc(33,37,"tasks.form.task_name")),v.Bb(4),v.Kc("\n              ",v.gc(37,39,"tasks.form.task_name"),"\n            "),v.Bb(3),v.kc("ngIf",!a.form.get("taskName").valid&&a.form.get("taskName").touched),v.Bb(12),v.Jc(v.gc(52,41,"tasks.form.task_project")),v.Bb(5),v.kc("ngForOf",a.projectsList),v.Bb(3),v.kc("ngIf",!a.form.get("projectId").valid&&a.form.get("projectId").touched),v.Bb(8),v.kc("ngIf",a.form.get("adminId").valid),v.Bb(3),v.Jc(v.gc(71,43,"tasks.form.assign_to")),v.Bb(5),v.kc("ngForOf",a.usersList),v.Bb(3),v.kc("ngIf",!a.form.get("adminId").valid&&a.form.get("adminId").touched),v.Bb(9),v.kc("dir",a.rtlDirection?"rtl":"ltr"),v.Bb(3),v.Jc(v.gc(91,45,"global.from_date")),v.Bb(3),v.kc("dpDayPicker",a.datePicker),v.Bb(2),v.kc("ngIf",a.form.get("dateStart").touched&&a.form.get("dateStart").value.length),v.Bb(2),v.kc("ngIf",!a.form.get("dateStart").valid&&a.form.get("dateStart").touched),v.Bb(6),v.kc("dir",a.rtlDirection?"rtl":"ltr"),v.Bb(3),v.Jc(v.gc(107,47,"global.to_date")),v.Bb(3),v.kc("dpDayPicker",a.datePicker),v.Bb(2),v.kc("ngIf",a.form.get("dateStop").touched&&a.form.get("dateStop").value.length),v.Bb(2),v.kc("ngIf",!a.form.get("dateStop").valid&&a.form.get("dateStop").touched),v.Bb(9),v.kc("color","primary"),v.Bb(3),v.Jc(v.gc(126,49,"tasks.task_filter.in_progress_tasks")),v.Bb(7),v.kc("color","primary"),v.Bb(3),v.Jc(v.gc(136,51,"tasks.task_filter.show_disabled_task")),v.Bb(9),v.kc("disabled",!a.form.valid&&a.form.touched),v.Bb(6),v.Jc(v.gc(151,53,"global.submit")),v.Bb(7),v.Jc(v.gc(158,55,"global.dismiss")),v.Bb(6),v.kc("ngIf",a.loadingIndicator.status&&"taskFilter"===a.loadingIndicator.serviceName)}}var St=function(t){function e(e,n,a,i,r,s,c,l,d,u,b){var f=t.call(this,r,l)||this;return f.data=e,f.dialogRef=n,f.api=a,f.fb=i,f.injector=r,f.translate=s,f.messageService=c,f.userInfoService=l,f.viewDirection=d,f.refreshLoginService=u,f.loadingIndicatorService=b,f.rtlDirection=!1,f.filterData={userId:0,adminId:0,dateStart:"",dateStop:"",projectId:0,taskName:"",email:"0",userImg:"0",type:"",status:0,percentageStatus:!1},f.projectsList=[],f.usersList=[],f.filterTypes=[{index:0,typeName:"byCreateDate",textName:"tasks.task_filter.by_create_date"},{index:1,typeName:"byProject",textName:"tasks.task_filter.by_project"},{index:2,typeName:"byUser",textName:"tasks.task_filter.by_user"},{index:3,typeName:"byStartDate",textName:"tasks.task_filter.by_start_date"},{index:4,typeName:"byStopDate",textName:"tasks.task_filter.by_stop_date"},{index:5,typeName:"byUserStartDate",textName:"tasks.task_filter.by_user_start_date"},{index:6,typeName:"byUserStopDate",textName:"tasks.task_filter.by_user_stop_date"},{index:7,typeName:"byStartedTask",textName:"tasks.task_filter.by_started_task"},{index:8,typeName:"byPostponed",textName:"tasks.task_filter.by_postponed"}],f.datePicker=null,f.loadingIndicator={status:!1,serviceName:"taskFilter"},f._subscription=new o.Subscription,f._subscription.add(f.viewDirection.currentDirection.subscribe((function(t){f.rtlDirection=t,f.form&&f.setupDatepickers()}))),f._subscription.add(f.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return f.loadingIndicator=t}))),f.usersList=st(f.data.usersList),f.projectsList=st(f.data.projectsList),f.filterData=rt({},f.data.filterData),f}return it(e,t),e.prototype.ngOnInit=function(){var t=this;this.createForm().then((function(){t.form.patchValue({taskName:t.filterData.taskName?t.filterData.taskName:"",projectId:t.filterData.projectId?t.filterData.projectId:0,dateStart:t.filterData.dateStart?t.filterData.dateStart:"",dateStop:t.filterData.dateStop?t.filterData.dateStop:"",adminId:t.filterData.adminId?t.filterData.adminId:0,email:t.filterData.email?t.filterData.email:t.loggedInUser.email,userImg:t.filterData.userImg?t.filterData.userImg:"0",type:t.filterData.type?t.filterData.type:null,status:t.filterData.status?t.filterData.status:0,percentageStatus:!!t.filterData.percentageStatus&&t.filterData.percentageStatus}),t.form.markAllAsTouched(),setTimeout((function(){return t.checkFormValidation()}),1e3),t._subscription.add(t.form.get("adminId").valueChanges.subscribe((function(e){var n=t.usersList.filter((function(t){return t.adminId===e})).pop();n&&t.form.get("userImg").setValue(n.email)})))})),setTimeout((function(){-1===t.usersList.findIndex((function(t){return 0===t.adminId}))&&t.usersList.splice(0,0,{adminId:0,name:t.getTranslate("tasks.task_filter.all"),family:"",email:"0"}),-1===t.projectsList.findIndex((function(t){return 0===t.projectId}))&&t.projectsList.splice(0,0,{projectId:0,projectName:t.getTranslate("tasks.task_filter.all")})}),500)},e.prototype.ngAfterViewInit=function(){this.setupDatepickers(),this.typeSelect.nativeElement.focus()},e.prototype.setupDatepickers=function(){this.datePicker={locale:this.rtlDirection?"fa":"en",firstDayOfWeek:this.rtlDirection?"sa":"mo",format:"YYYY/MM/DD",closeOnSelect:!0,closeOnSelectDelay:150}},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({userId:new d.e(0,d.u.required),userImg:new d.e("0"),email:new d.e(t.loggedInUser.email),taskName:new d.e(""),projectId:new d.e(0),dateStart:new d.e(""),dateStop:new d.e(""),type:new d.e("byCreateDate",d.u.required),adminId:new d.e(0),page:new d.e("-1"),status:new d.e(0),percentageStatus:new d.e(!1)}),e(!0)}))},e.prototype.checkFormValidation=function(){var t=this;"byProject"!==this.form.get("type").value&&"byUser"!==this.form.get("type").value&&this.dateRequiredValidation(),this._subscription.add(this.form.valueChanges.subscribe((function(e){var n=t.form.get("projectId"),a=t.form.get("adminId");switch(e.type){case"byProject":t.resetFormValidation(),0===n.value&&(n.setErrors({incorrect:!0}),n.markAsTouched());break;case"byCreateDate":case"byStartDate":case"byStopDate":case"byUserStartDate":case"byUserStopDate":t.dateRequiredValidation();break;case"byUser":t.resetFormValidation(),0===a.value&&(a.setErrors({incorrect:!0}),a.markAsTouched());break;default:t.resetFormValidation()}})))},e.prototype.dateRequiredValidation=function(){var t=this.form.get("dateStart"),e=this.form.get("dateStop");this.resetFormValidation(),""===t.value&&""!==e.value||""!==t.value&&""===e.value?(t.setErrors({incorrect:!0}),e.setErrors({incorrect:!0}),t.markAsTouched(),e.markAsTouched()):""!==t.value&&""!==e.value||(t.setErrors({incorrect:!0}),e.setErrors({incorrect:!0}),t.markAsTouched(),e.markAsTouched())},e.prototype.resetFormValidation=function(){this.form.get("projectId").setErrors(null),this.form.get("dateStart").setErrors(null),this.form.get("dateStop").setErrors(null),this.form.get("adminId").setErrors(null)},e.prototype.submit=function(){var t=this;this.dialogRef.disableClose=!0,this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"taskFilter"});var e=rt({},this.form.value);this.rtlDirection&&("Invalid date"!==p(e.dateStart).format("YYYY/MM/DD")&&(e.dateStart=p.from(e.dateStart,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD")),"Invalid date"!==p(e.dateStop).format("YYYY/MM/DD")&&(e.dateStop=p.from(e.dateStop,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD"))),this.filterData=rt({},this.form.value),0===e.adminId&&delete e.adminId,0===e.projectId&&delete e.projectId,""===e.taskName&&delete e.taskName,""===e.dateStart&&delete e.dateStart,""===e.dateStop&&delete e.dateStop,!1===e.percentageStatus&&delete e.percentageStatus,0===e.status&&delete e.status,this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.form.disable(),this._subscription.add(this.api.filterTask(e).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"taskFilter"}),1===e.result?t.dialogRef.close({result:1,filterData:t.filterData,contents:e.contents}):t.dialogRef.disableClose=!1,t.form.enable(),e.message&&t.messageService.showMessage(e.message)}),(function(e){e.message&&(t.messageService.showMessage(e.message,"error"),t.form.enable(),t.dialogRef.disableClose=!1),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"taskFilter"}),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.getTranslate=function(t){return this.translate.instant(t)},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(v.Nb(f.a),v.Nb(f.e),v.Nb(u.a),v.Nb(d.d),v.Nb(v.t),v.Nb(r.d),v.Nb(b.a),v.Nb(l.a),v.Nb(m.a),v.Nb(h.a),v.Nb(I.a))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-task-filter"]],viewQuery:function(t,e){var n;1&t&&v.Nc(ot,!0),2&t&&v.rc(n=v.bc())&&(e.typeSelect=n.first)},features:[v.yb],decls:2,vars:1,consts:[["class","pos-abs left-0 right-0 top-0 bottom-0 padding-full z-index-99",3,"dir",4,"ngIf"],[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99",3,"dir"],["autocomplete","off",1,"full-height",3,"formGroup"],[1,"height-full-minus-30","full-width"],[1,"margin-b-full","text-gray-800","font-full-em","text-weight-500","margin-b-half"],[1,"display-flex","margin-r-l-reverse"],[1,"half-width","padding-r-l"],[1,"full-width","font-9-em"],["formControlName","type","required","","tabIndex","1"],["typeSelect",""],["class","font-full-em",3,"value",4,"ngFor","ngForOf"],["formControlName","taskName","matInput","","tabindex","2","type","text",1,"full-width",3,"placeholder"],[4,"ngIf"],["formControlName","projectId","tabIndex","3"],["class","width-20 height-20 round-corner-all pos-rel top-three-tenth","matPrefix","","alt","",3,"ngClass","src","error",4,"ngIf"],["formControlName","adminId","tabIndex","4"],[1,"display-flex","margin-r-l-reverse","margin-b-full"],[1,"dpDateStartPicker","half-width","padding-r-l"],[1,"dpDatePicker","full-width","font-9-em",3,"dir"],["formControlName","dateStart","tabindex","5","autocomplete","off","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],["aria-label","Clear","class","close-icon pos-rel top-half","mat-button","","mat-icon-button","","matSuffix","","type","button",3,"ngClass","click",4,"ngIf"],[1,"dpDateStopPicker","half-width","padding-r-l"],["formControlName","dateStop","tabindex","6","autocomplete","off","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],[1,"display-flex","margin-r-l-reverse","margin-t-full-2"],["formControlName","percentageStatus",3,"color"],[1,"font-9-em"],["formControlName","status",3,"color"],[1,"height-30","full-width","display-flex","flex-direction-row-reverse"],["mat-raised-button","","tabindex","13","type","submit",1,"green-gradient","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["type","button",1,"no-bg","no-border","cursor-pointer","text-red-500","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],[1,"font-full-em",3,"value"],["matPrefix","","alt","",1,"width-20","height-20","round-corner-all","pos-rel","top-three-tenth",3,"ngClass","src","error"],[1,"display-flex","align-items-center"],["matPrefix","","alt","",1,"width-20","height-20","round-corner-all","pos-rel",3,"ngClass","src","error"],[1,"line-height-40"],["aria-label","Clear","mat-button","","mat-icon-button","","matSuffix","","type","button",1,"close-icon","pos-rel","top-half",3,"ngClass","click"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(v.Gc(0,kt,165,57,"div",0),v.Ic(1,"\n")),2&t&&v.kc("ngIf",e.form)},directives:[a.k,k.b,d.v,d.o,d.i,S.c,S.f,w.a,d.n,d.g,d.t,a.j,d.c,T.b,D.a,x.a,B.b,C.a,_.m,S.b,S.g,a.i,S.h],pipes:[r.c],encapsulation:2}),e}(c.a),Tt=n("+Ibf"),wt=n("0d0Z"),yt=n("7RJT"),Dt=function(){function t(){this._defaultButtonSheetData=null,this.buttonSheetData=new yt.BehaviorSubject(this._defaultButtonSheetData),this.currentButtonSheetData=this.buttonSheetData.asObservable()}return t.prototype.changeButtonSheetData=function(t){var e=this;this.buttonSheetData.next(t),setTimeout((function(){e.buttonSheetData.next(null)}),200)},t.\u0275prov=v.Jb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),xt=["oBottomSheet"],_t=["container"],Bt=function(){function t(t,e){this.renderer=t,this.cfr=e}return t.prototype.toggleBottomSheet=function(t,e){var n=this;void 0===e&&(e=!0),this.container.clear();var a=this.oBottomSheet.nativeElement.parentNode.parentNode,i=this.oBottomSheet.nativeElement;if(e){this.renderer.addClass(a,"active"),this.renderer.setStyle(i,"height",t.height),this.renderer.setStyle(i,"width",t.width),this.renderer.setStyle(a,"z-index","5");var r=this.cfr.resolveComponentFactory(t.component);this.container.createComponent(r).instance.bottomSheetData=t}else this.renderer.removeClass(a,"active"),this.renderer.setStyle(i,"height","0"),this.renderer.setStyle(i,"width","0"),setTimeout((function(){return n.renderer.setStyle(a,"z-index","-1")}),100)},t.prototype.close=function(){this.toggleBottomSheet(null,!1)},t.\u0275fac=function(e){return new(e||t)(v.Nb(v.G),v.Nb(v.j))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-bottom-sheet"]],viewQuery:function(t,e){if(1&t&&(v.Nc(xt,!0),v.Nc(_t,!0,v.R)),2&t){var n=void 0;v.rc(n=v.bc())&&(e.oBottomSheet=n.first),v.rc(n=v.bc())&&(e.container=n.first)}},decls:12,vars:0,consts:[[1,"o-bottom-sheet-container","full-width","full-height"],[1,"o-bottom-sheet-backdrop","full-width","full-height",3,"click"],[1,"o-bottom-sheet-content","overflow-hide","pos-abs","margin-auto","bottom-0","right-0","left-0","round-corner-top-left","round-corner-top-right"],["oBottomSheet",""],[1,"o-bottom-sheet-comp"],["container",""]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Tb(2,"div",1),v.ac("click",(function(){return e.close()})),v.Sb(),v.Ic(3,"\n\n  "),v.Tb(4,"div",2,3),v.Ic(6,"\n    "),v.Ob(7,"div",4,5),v.Ic(9,"\n  "),v.Sb(),v.Ic(10,"\n"),v.Sb(),v.Ic(11,"\n"))},styles:["[_nghost-%COMP%]{position:absolute;right:0;left:0;bottom:0;width:100%;height:100%;z-index:-1}[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{transition:background .2s!important;background:transparent}.active[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}[_nghost-%COMP%]   .o-bottom-sheet-content[_ngcontent-%COMP%]{transition:height .1s!important;box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);background-color:transparent;height:0;width:0}"]}),t}(),Ct=function(){function t(){this._autoRefresh=!1,this.autoRefresh=new yt.BehaviorSubject(this._autoRefresh),this.currentAutoRefresh=this.autoRefresh.asObservable()}return t.prototype.changeCurrentAutoRefresh=function(t){this.autoRefresh.next(t)},t.\u0275prov=v.Jb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),Lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Nt=function(){return(Nt=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Mt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"mat-option",22),v.ac("onSelectionChange",(function(t){v.wc(n);var a=e.$implicit;return v.ec().updateImage(t,a)})),v.Ic(1,"\n                "),v.Tb(2,"div",23),v.Ic(3,"\n                  "),v.Tb(4,"img",24),v.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),v.Sb(),v.Ic(5,"\n                  "),v.Tb(6,"span",25),v.Ic(7),v.Sb(),v.Ic(8,"\n                "),v.Sb(),v.Ic(9,"\n              "),v.Sb()}if(2&t){var a=e.$implicit,i=v.ec();v.kc("value",a.adminId),v.Bb(4),v.kc("ngClass",i.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+a.email+".jpg",v.yc),v.Bb(3),v.Jc(a.name+" "+a.family)}}function Ot(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.assign_to_error"),"\n            "))}function jt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",26),v.ac("click",(function(){return v.wc(n),v.ec().form.get("dateStart").setValue("")})),v.Ic(1,"\n              "),v.Tb(2,"mat-icon"),v.Ic(3,"close"),v.Sb(),v.Ic(4,"\n            "),v.Sb()}}function Yt(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"global.date_error"),"\n            "))}function Pt(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.form.assign_to_error"),"\n            "))}function At(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",26),v.ac("click",(function(){return v.wc(n),v.ec().form.get("dateStop").setValue("")})),v.Ic(1,"\n              "),v.Tb(2,"mat-icon"),v.Ic(3,"close"),v.Sb(),v.Ic(4,"\n            "),v.Sb()}}function Ft(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"global.date_error"),"\n            "))}var Gt=function(t){function e(e,n,a,i,r,s,c,l){var d=t.call(this,n,r)||this;return d.data=e,d.injector=n,d.apiService=a,d.messageService=i,d.userInfoService=r,d.refreshLoginService=s,d.loadingIndicatorService=c,d.dialogRef=l,d.rtlDirection=!1,d._subscription=new o.Subscription,d.usersList=d.data.usersList,d.loginData=d.data.loginData,d.rtlDirection=d.data.rtlDirection,d}return Lt(e,t),e.prototype.ngOnInit=function(){var t=this;this.createForm().then((function(){t._subscription.add(t.form.get("adminId").valueChanges.subscribe((function(e){var n=t.usersList.filter((function(t){return t.adminId===e})).pop();n&&t.form.get("userImg").setValue(n.email)})))}))},e.prototype.ngAfterViewInit=function(){this.setupDatepickers()},e.prototype.setupDatepickers=function(){this.datePicker={locale:this.rtlDirection?"fa":"en",firstDayOfWeek:this.rtlDirection?"sa":"mo",format:"YYYY/MM/DD",closeOnSelect:!0,closeOnSelectDelay:150}},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=new d.h({adminId:new d.e(null,d.u.required),dateStart:new d.e("",d.u.required),dateStop:new d.e("",d.u.required),userImg:new d.e("0"),email:new d.e(t.loggedInUser.email)}),e(!0)}))},e.prototype.updateImage=function(t,e){t.isUserInput&&(this.userSelected=e)},e.prototype.closeDialog=function(t){this.dialogRef.close(t)},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"});var e=Nt({},this.form.value);delete e.email,delete e.userImg,this.rtlDirection?(e.dateStart=p.from(e.dateStart,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD"),e.dateStop=p.from(e.dateStop,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD")):(e.dateStart=g(e.dateStart,"YYYY/MM/DD").format("YYYY-MM-DD"),e.dateStop=g(e.dateStop,"YYYY/MM/DD").format("YYYY-MM-DD")),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.form.disable(),this._subscription.add(this.apiService.boardsCalendarDurationTask(e).subscribe((function(n){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"});try{if(1===n.result){var a=[];n.content[0].map((function(t){var e={title:t.timediff,start:new Date(t.startDate),end:new Date(t.startDate)};a.push(e)})),t.sumTime=n.content[1][0].timeSum,t.dialogRef.close({sumTime:t.sumTime,calendarEvent:a,dateStart:e.dateStart,userSelected:t.userSelected,filterData:e})}else t.form.enable()}catch(i){console.log(i)}}),(function(e){e.message&&t.messageService.showMessage(e.message,"error"),t.form.enable(),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(v.Nb(f.a),v.Nb(v.t),v.Nb(u.a),v.Nb(b.a),v.Nb(l.a),v.Nb(h.a),v.Nb(I.a),v.Nb(f.e))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-task-calendar-filter"]],inputs:{sumTime:"sumTime",calendarComponent:"calendarComponent"},features:[v.yb],decls:92,vars:34,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99",3,"dir"],["autocomplete","off",1,"full-height",3,"formGroup","submit"],[1,"height-full-minus-30","full-width"],[1,"margin-b-full","text-gray-800","font-full-em","text-weight-500","margin-b-half"],[1,"display-flex","margin-r-l-reverse"],[1,"full-width","padding-r-l"],[1,"full-width","font-8-em"],["alt","","matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel","top-three-tenth",3,"ngClass","src"],["formControlName","adminId","tabIndex","1"],["class","font-full-em",3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"dpDateStartPicker","half-width","padding-r-l"],[1,"dpDatePicker","full-width","font-8-em",3,"dir"],["formControlName","dateStart","tabindex","2","autocomplete","off","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],["aria-label","Clear","class","close-icon pos-rel top-half float-left","mat-button","","mat-icon-button","","matSuffix","","type","button",3,"click",4,"ngIf"],[1,"dpDateStopPicker","half-width","padding-r-l"],["formControlName","dateStop","tabindex","6","autocomplete","off","theme","dp-material","matInput","","placeholder","","readonly","",3,"dpDayPicker"],[1,"height-30","full-width","display-flex","flex-direction-row-reverse"],["disabled","","mat-raised-button","","tabindex","13","type","submit",1,"green-gradient","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["type","button",1,"no-bg","no-border","cursor-pointer","text-red-500","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],[1,"font-full-em",3,"value","onSelectionChange"],[1,"display-flex","align-items-center"],["alt","","matPrefix","",1,"width-20","height-20","round-corner-all","pos-rel",3,"ngClass","src","error"],[1,"line-height-40"],["aria-label","Clear","mat-button","","mat-icon-button","","matSuffix","","type","button",1,"close-icon","pos-rel","top-half","float-left",3,"click"]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Tb(2,"form",1),v.ac("submit",(function(){return e.submit()})),v.Ic(3,"\n    "),v.Tb(4,"div",2),v.Ic(5,"\n      "),v.Tb(6,"h1",3),v.Ic(7),v.fc(8,"translate"),v.Sb(),v.Ic(9,"\n      "),v.Tb(10,"div",4),v.Ic(11,"\n        "),v.Tb(12,"div",5),v.Ic(13,"\n          "),v.Tb(14,"mat-form-field",6),v.Ic(15,"\n            "),v.Ob(16,"img",7),v.Ic(17,"\n            "),v.Tb(18,"mat-label"),v.Ic(19),v.fc(20,"translate"),v.Sb(),v.Ic(21,"\n            "),v.Tb(22,"mat-select",8),v.Ic(23,"\n              "),v.Gc(24,Mt,10,4,"mat-option",9),v.Ic(25,"\n            "),v.Sb(),v.Ic(26,"\n\n            "),v.Gc(27,Ot,3,3,"mat-error",10),v.Ic(28,"\n          "),v.Sb(),v.Ic(29,"\n        "),v.Sb(),v.Ic(30,"\n      "),v.Sb(),v.Ic(31,"\n      "),v.Tb(32,"div",4),v.Ic(33,"\n        "),v.Tb(34,"div",11),v.Ic(35,"\n          "),v.Tb(36,"mat-form-field",12),v.Ic(37,"\n            "),v.Tb(38,"mat-label"),v.Ic(39),v.fc(40,"translate"),v.Sb(),v.Ic(41,"\n            "),v.Ob(42,"input",13),v.Ic(43,"\n\n            "),v.Gc(44,jt,5,0,"button",14),v.Ic(45,"\n\n            "),v.Gc(46,Yt,3,3,"mat-error",10),v.Ic(47,"\n\n            "),v.Gc(48,Pt,3,3,"mat-error",10),v.Ic(49,"\n          "),v.Sb(),v.Ic(50,"\n        "),v.Sb(),v.Ic(51,"\n        "),v.Tb(52,"div",15),v.Ic(53,"\n          "),v.Tb(54,"mat-form-field",12),v.Ic(55,"\n            "),v.Tb(56,"mat-label"),v.Ic(57),v.fc(58,"translate"),v.Sb(),v.Ic(59,"\n            "),v.Ob(60,"input",16),v.Ic(61,"\n\n            "),v.Gc(62,At,5,0,"button",14),v.Ic(63,"\n\n            "),v.Gc(64,Ft,3,3,"mat-error",10),v.Ic(65,"\n          "),v.Sb(),v.Ic(66,"\n        "),v.Sb(),v.Ic(67,"\n      "),v.Sb(),v.Ic(68,"\n    "),v.Sb(),v.Ic(69,"\n    "),v.Tb(70,"div",17),v.Ic(71,"\n      "),v.Tb(72,"button",18),v.Ic(73,"\n        "),v.Tb(74,"mat-icon",19),v.Ic(75,"check"),v.Sb(),v.Ic(76,"\n        "),v.Tb(77,"span",20),v.Ic(78),v.fc(79,"translate"),v.Sb(),v.Ic(80,"\n      "),v.Sb(),v.Ic(81,"\n      "),v.Tb(82,"button",21),v.ac("click",(function(){return e.closeDialog(!1)})),v.Ic(83,"\n        "),v.Tb(84,"span",20),v.Ic(85),v.fc(86,"translate"),v.Sb(),v.Ic(87,"\n      "),v.Sb(),v.Ic(88,"\n    "),v.Sb(),v.Ic(89,"\n  "),v.Sb(),v.Ic(90,"\n"),v.Sb(),v.Ic(91,"\n")),2&t&&(v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(2),v.kc("formGroup",e.form),v.Bb(5),v.Kc("\n        ",v.gc(8,22,"tasks.task_filter.tasks_filter_calendar"),"\n      "),v.Bb(9),v.kc("ngClass",e.rtlDirection?"margin-l-half":"margin-r-half")("src","assets/profileImg/"+e.form.get("userImg").value+".jpg",v.yc),v.Bb(3),v.Jc(v.gc(20,24,"tasks.form.assign_to")),v.Bb(5),v.kc("ngForOf",e.usersList),v.Bb(3),v.kc("ngIf",!e.form.get("adminId").valid&&e.form.get("adminId").touched),v.Bb(9),v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(3),v.Jc(v.gc(40,26,"global.from_date")),v.Bb(3),v.kc("dpDayPicker",e.datePicker),v.Bb(2),v.kc("ngIf",e.form.get("dateStart").touched&&e.form.get("dateStart").value.length),v.Bb(2),v.kc("ngIf",!e.form.get("dateStart").valid&&e.form.get("dateStart").touched),v.Bb(2),v.kc("ngIf",e.form.get("dateStart").value>e.form.get("dateStop").value),v.Bb(6),v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(3),v.Jc(v.gc(58,28,"global.to_date")),v.Bb(3),v.kc("dpDayPicker",e.datePicker),v.Bb(2),v.kc("ngIf",e.form.get("dateStop").touched&&e.form.get("dateStop").value.length),v.Bb(2),v.kc("ngIf",!e.form.get("dateStop").valid&&e.form.get("dateStop").touched),v.Bb(8),v.kc("disabled",!e.form.valid),v.Bb(6),v.Jc(v.gc(79,30,"global.submit")),v.Bb(7),v.Jc(v.gc(86,32,"global.dismiss")))},directives:[k.b,d.v,d.o,d.i,S.c,S.g,a.i,S.f,w.a,d.n,d.g,a.j,a.k,d.c,T.b,D.a,B.b,C.a,_.m,S.b,S.h],pipes:[r.c],encapsulation:2}),e}(c.a),Rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Et=function(){return(Et=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ut=["bottomSheet"];function Jt(t,e){if(1&t&&(v.Ic(0,"\n          "),v.Tb(1,"mat-icon",18),v.Ic(2),v.Sb(),v.Ic(3,"\n          "),v.Tb(4,"span",8),v.Ic(5),v.Sb(),v.Ic(6,"\n        ")),2&t){var n=v.ec().$implicit;v.Bb(2),v.Kc("\n            ",n.icon,"\n          "),v.Bb(3),v.Jc(n.name)}}function Ht(t,e){1&t&&(v.Tb(0,"mat-tab"),v.Ic(1,"\n        "),v.Gc(2,Jt,7,2,"ng-template",17),v.Ic(3,"\n      "),v.Sb())}function zt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",19),v.ac("click",(function(){return v.wc(n),v.ec().resetFilter()})),v.Ic(1,"\n        "),v.Tb(2,"mat-icon",20),v.Ic(3,"close"),v.Sb(),v.Ic(4,"\n        "),v.Tb(5,"span",21),v.Ic(6),v.fc(7,"translate"),v.Sb(),v.Ic(8,"\n      "),v.Sb()}2&t&&(v.Bb(6),v.Jc(v.gc(7,1,"global.reset_filter")))}function Kt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",22),v.ac("click",(function(){return v.wc(n),v.ec().addNewTask()})),v.Ic(1,"\n        "),v.Tb(2,"mat-icon",7),v.Ic(3,"add"),v.Sb(),v.Ic(4,"\n        "),v.Tb(5,"span",8),v.Ic(6),v.fc(7,"translate"),v.Sb(),v.Ic(8,"\n      "),v.Sb()}if(2&t){var a=v.ec();v.kc("disabled",!a.taskEssentialInfo||a.disableButton),v.Bb(6),v.Jc(v.gc(7,2,"tasks.main.add_new_task"))}}function qt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",23),v.Ic(1,"\n        "),v.Tb(2,"app-task-board",24),v.ac("pushTaskEssentialInfo",(function(t){return v.wc(n),v.ec().getTaskEssentialInfo(t)}))("resetFilter",(function(t){return v.wc(n),v.ec().makeFilterReset(t)})),v.Ic(3,"\n        "),v.Sb(),v.Ic(4,"\n      "),v.Sb()}if(2&t){var a=v.ec(),i=v.sc(44);v.Bb(2),v.kc("filterBoards",a.filteredBoardsData)("pushTaskToBoard",a.pushTaskToBoard)("refreshData",a.refreshBoardData)("rtlDirection",a.rtlDirection)("bottomSheetRef",i)}}function Vt(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",25),v.Ic(1,"\n        "),v.Tb(2,"app-task-calendar",26),v.ac("onTabLoaded",(function(t){return v.wc(n),v.ec().doSomething(t)})),v.Sb(),v.Ic(3,"\n      "),v.Sb()}if(2&t){var a=v.ec();v.Bb(2),v.kc("calendarParameters",a.calendarParameters)("rtlDirection",a.rtlDirection)}}function $t(t,e){if(1&t&&(v.Tb(0,"div",27),v.Ic(1,"\n    "),v.Tb(2,"app-task-current",28),v.Ic(3,"\n    "),v.Sb(),v.Ic(4,"\n  "),v.Sb()),2&t){var n=v.ec();v.Bb(2),v.kc("rtlDirection",n.rtlDirection)("taskEssentialInfo",n.taskEssentialInfo)}}function Xt(t,e){1&t&&(v.Tb(0,"div",29),v.Ic(1,"\n    "),v.Tb(2,"div",30),v.Ic(3,"\n      "),v.dc(),v.Tb(4,"svg",31),v.Ic(5,"\n        "),v.Tb(6,"rect",32),v.Ic(7,"\n          "),v.Ob(8,"animate",33),v.Ic(9,"\n          "),v.Ob(10,"animate",34),v.Ic(11,"\n        "),v.Sb(),v.Ic(12,"\n        "),v.Tb(13,"rect",35),v.Ic(14,"\n          "),v.Ob(15,"animate",36),v.Ic(16,"\n          "),v.Ob(17,"animate",37),v.Ic(18,"\n        "),v.Sb(),v.Ic(19,"\n        "),v.Tb(20,"rect",38),v.Ic(21,"\n          "),v.Ob(22,"animate",39),v.Ic(23,"\n          "),v.Ob(24,"animate",40),v.Ic(25,"\n        "),v.Sb(),v.Ic(26,"\n      "),v.Sb(),v.Ic(27,"\n\n      "),v.cc(),v.Tb(28,"span",41),v.Ic(29),v.fc(30,"translate"),v.Sb(),v.Ic(31,"\n    "),v.Sb(),v.Ic(32,"\n  "),v.Sb()),2&t&&(v.Bb(29),v.Jc(v.gc(30,1,"global.loading")))}var Wt=function(t){return{"margin-r-l":t}},Qt=function(t){function e(e,n,a,i,r,s,c,l,d,u,b){var f=t.call(this,n,i)||this;return f.dialog=e,f.injector=n,f.translate=a,f.userInfoService=i,f.viewDirection=r,f.currentTaskService=s,f.eventHandlerService=c,f.windowManagerService=l,f.bottomSheetDataService=d,f.loadingIndicatorService=u,f.ignoreAutoRefreshService=b,f.rtlDirection=!1,f.loadingIndicator={status:!1,serviceName:"project"},f.doResetFilter=!1,f.disableButton=!1,f.activeTab=0,f.refreshBoardData=!1,f.filterData=null,f.filteredBoardsData=null,f.tabs=[],f.calendarParameters={},f.currentTasks=null,f.projectsList=[],f.usersList=[],f._subscription=new o.Subscription,f._subscription.add(f.viewDirection.currentDirection.subscribe((function(t){f.rtlDirection=t,f.changeMainTabLanguage()}))),f._subscription.add(f.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return f.loadingIndicator=t}))),f._subscription.add(f.currentTaskService.currentTask.subscribe((function(t){return f.currentTasks=t}))),f}return Rt(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.changeMainTabLanguage(),this.filterData={userId:0,userImg:"0",adminId:0,dateStart:"",dateStop:"",projectId:0,taskName:"",type:"",email:this.loggedInUser.email,status:0},this._subscription.add(this.bottomSheetDataService.currentButtonSheetData.subscribe((function(e){e&&(e.bottomSheetRef=t.bottomSheet,t.bottomSheet.toggleBottomSheet(e))})))},e.prototype.changeMainTabLanguage=function(){var t=this;setTimeout((function(){t.tabs=[{name:t.getTranslate("tasks.main.boards"),icon:"view_week",id:"boards"},{name:t.getTranslate("tasks.main.calendar"),icon:"event_available",id:"calendar"}]}),200)},e.prototype.addNewTask=function(){var t=this;this.disableButton=!0;var e=this.dialog.open(nt,{data:{action:"add",usersList:this.taskEssentialInfo.usersList,projectsList:this.taskEssentialInfo.projectsList},autoFocus:!1,width:"45%",height:"560px"});this._subscription.add(e.afterOpened().subscribe((function(){t.windowManagerService.dialogOnTop(e.id),t.ignoreAutoRefreshService.changeCurrentAutoRefresh(!0)}))),this._subscription.add(e.afterClosed().subscribe((function(e){t.ignoreAutoRefreshService.changeCurrentAutoRefresh(!1),t.disableButton=!1,e&&(t.refreshBoardData=!0,setTimeout((function(){return t.refreshBoardData=!1}),500))})))},e.prototype.tabChange=function(t){this.activeTab=t.index,this.doResetFilter=!1},e.prototype.getTaskEssentialInfo=function(t){this.taskEssentialInfo=t},e.prototype.showCalendarFilter=function(){var t=this,e=this.dialog.open(Gt,{data:{filterData:this.filterData,usersList:this.taskEssentialInfo.usersList,projectsList:this.taskEssentialInfo.projectsList,loginData:this.loginData,rtlDirection:this.rtlDirection},autoFocus:!1,width:"500px",height:"450px"});this._subscription.add(e.afterOpened().subscribe((function(){t.windowManagerService.dialogOnTop(e.id)}))),this._subscription.add(e.afterClosed().subscribe((function(e){t.disableButton=!1,e&&t.eventHandlerService.moveCalendarRate(e)})))},e.prototype.showTaskFilter=function(){var t=this,e=this.dialog.open(St,{data:{filterData:this.filterData,usersList:this.taskEssentialInfo.usersList,projectsList:this.taskEssentialInfo.projectsList},autoFocus:!1,width:"500px",height:"450px"});this._subscription.add(e.afterOpened().subscribe((function(){t.windowManagerService.dialogOnTop(e.id),t.ignoreAutoRefreshService.changeCurrentAutoRefresh(!0)}))),this._subscription.add(e.afterClosed().subscribe((function(e){t.disableButton=!1,e&&1===e.result?(t.filterData=null,t.filterData=Et({},e.filterData),t.filteredBoardsData={resp:e},t.eventHandlerService.moveEventsTask(e),t.doResetFilter=!0):t.ignoreAutoRefreshService.changeCurrentAutoRefresh(!1)})))},e.prototype.showFilter=function(){this.disableButton=!0,void 0!==this.checksTab&&"calendar_task"!=this.checksTab&&this.activeTab&&"calendar_task_rate"==this.checksTab&&this.activeTab?this.showCalendarFilter():this.showTaskFilter()},e.prototype.resetFilter=function(){var t=this;this.refreshBoardData=!0,this.filterData=null,setTimeout((function(){t.refreshBoardData=!1,t.doResetFilter=!1}),200)},e.prototype.makeFilterReset=function(t){t&&this.resetFilter()},e.prototype.getTranslate=function(t){return this.translate.instant(t)},e.prototype.doSomething=function(t){this.checksTab=t},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(v.Nb(f.b),v.Nb(v.t),v.Nb(r.d),v.Nb(l.a),v.Nb(m.a),v.Nb(at.a),v.Nb(Tt.a),v.Nb(wt.a),v.Nb(Dt),v.Nb(I.a),v.Nb(Ct))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-task-main"]],viewQuery:function(t,e){var n;1&t&&v.Nc(Ut,!0),2&t&&v.rc(n=v.bc())&&(e.bottomSheet=n.first)},features:[v.yb],decls:49,vars:18,consts:[[1,"full-width","full-height","pos-abs","left-0","right-0","top-0",3,"dir"],[1,"title-container","pos-rel","height-60","overflow-hide","full-width","display-flex","align-items-end"],["color","accent","disableRipple","",1,"padding-r-l","z-index-0","height-30",3,"selectedTabChange"],[4,"ngFor","ngForOf"],[1,"pos-abs","top-full","display-flex","flex-space-between","align-items-center",3,"ngClass"],["class","no-bg no-border height-35 margin-l-full cursor-pointer",3,"click",4,"ngIf"],["mat-raised-button","",1,"white-gradient","padding-mini-r-l","text-gray-800","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","ngClass","click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["class","green-gradient padding-mini-r-l text-white line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","",3,"disabled","click",4,"ngIf"],[1,"content-container","padding-t-b","full-width",3,"ngClass"],[3,"ngSwitch"],["class","full-height padding-mini-r-l",4,"ngSwitchCase"],["class","full-height",4,"ngSwitchCase"],["class","current-task-container bg-white height-50 full-width padding-r-l line-height-50",4,"ngIf"],["bottomSheet",""],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["class","display-flex","mat-tab-label",""],[1,"tab-icon","font-full-em","width-15","height-15"],[1,"no-bg","no-border","height-35","margin-l-full","cursor-pointer",3,"click"],[1,"font-8-rem","line-height-25","width-18","height-18"],[1,"font-8-rem","line-height-25"],["mat-raised-button","",1,"green-gradient","padding-mini-r-l","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","click"],[1,"full-height","padding-mini-r-l"],[3,"filterBoards","pushTaskToBoard","refreshData","rtlDirection","bottomSheetRef","pushTaskEssentialInfo","resetFilter"],[1,"full-height"],[3,"calendarParameters","rtlDirection","onTabLoaded"],[1,"current-task-container","bg-white","height-50","full-width","padding-r-l","line-height-50"],[3,"rtlDirection","taskEssentialInfo"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Tb(2,"div",1),v.Ic(3,"\n    "),v.Tb(4,"mat-tab-group",2),v.ac("selectedTabChange",(function(t){return e.tabChange(t)})),v.Ic(5,"\n      "),v.Gc(6,Ht,4,0,"mat-tab",3),v.Ic(7,"\n    "),v.Sb(),v.Ic(8,"\n\n    "),v.Tb(9,"div",4),v.Ic(10,"\n      "),v.Gc(11,zt,9,3,"button",5),v.Ic(12,"\n\n      "),v.Tb(13,"button",6),v.ac("click",(function(){return e.showFilter()})),v.Ic(14,"\n        "),v.Tb(15,"mat-icon",7),v.Ic(16,"filter_list"),v.Sb(),v.Ic(17,"\n        "),v.Tb(18,"span",8),v.Ic(19),v.fc(20,"translate"),v.Sb(),v.Ic(21,"\n      "),v.Sb(),v.Ic(22,"\n\n      "),v.Gc(23,Kt,9,4,"button",9),v.Ic(24,"\n    "),v.Sb(),v.Ic(25,"\n  "),v.Sb(),v.Ic(26,"\n\n  "),v.Tb(27,"div",10),v.Ic(28,"\n    "),v.Rb(29,11),v.Ic(30,"\n      "),v.Ic(31,"\n      "),v.Gc(32,qt,5,5,"div",12),v.Ic(33,"\n      "),v.Ic(34,"\n\n      "),v.Ic(35,"\n      "),v.Gc(36,Vt,4,2,"div",13),v.Ic(37,"\n      "),v.Ic(38,"\n    "),v.Qb(),v.Ic(39,"\n  "),v.Sb(),v.Ic(40,"\n\n  "),v.Gc(41,$t,5,2,"div",14),v.Ic(42,"\n\n  "),v.Ob(43,"app-task-bottom-sheet",null,15),v.Ic(45,"\n\n  "),v.Gc(46,Xt,33,3,"div",16),v.Ic(47,"\n"),v.Sb(),v.Ic(48,"\n")),2&t&&(v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(6),v.kc("ngForOf",e.tabs),v.Bb(3),v.kc("ngClass",e.rtlDirection?"left-full":"right-full"),v.Bb(2),v.kc("ngIf",e.doResetFilter&&0===e.activeTab),v.Bb(2),v.kc("disabled",!e.taskEssentialInfo||e.disableButton)("ngClass",v.oc(16,Wt,!e.activeTab)),v.Bb(6),v.Jc(v.gc(20,14,"global.filter")),v.Bb(4),v.kc("ngIf",!e.activeTab),v.Bb(4),v.kc("ngClass",e.currentTasks&&e.currentTasks.length?"height-full-minus-110":"height-full-minus-60"),v.Bb(2),v.kc("ngSwitch",e.activeTab),v.Bb(3),v.kc("ngSwitchCase",0),v.Bb(4),v.kc("ngSwitchCase",1),v.Bb(5),v.kc("ngIf",e.currentTasks&&e.currentTasks.length),v.Bb(5),v.kc("ngIf",e.loadingIndicator.status&&"project"===e.loadingIndicator.serviceName))},encapsulation:2}),e}(c.a),Zt=n("PqYM"),te=n("5+WD"),ee=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();function ne(t,e){1&t&&(v.Tb(0,"mat-error"),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Kc("\n              ",v.gc(2,1,"tasks.task_stop.description_error"),"\n            "))}function ae(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",1),v.Ic(1,"\n  "),v.Tb(2,"form",2),v.ac("submit",(function(){return v.wc(n),v.ec().submit()})),v.Ic(3,"\n    "),v.Tb(4,"div",3),v.Ic(5,"\n      "),v.Tb(6,"h1",4),v.Ic(7),v.fc(8,"translate"),v.Sb(),v.Ic(9,"\n\n      "),v.Tb(10,"div",5),v.Ic(11,"\n        "),v.Tb(12,"div",6),v.Ic(13,"\n          "),v.Tb(14,"span"),v.Ic(15),v.fc(16,"translate"),v.Sb(),v.Ic(17," "),v.Tb(18,"span",7),v.Ic(19),v.Sb(),v.Ic(20,"\n        "),v.Sb(),v.Ic(21,"\n      "),v.Sb(),v.Ic(22,"\n\n      "),v.Tb(23,"div",8),v.Ic(24,"\n        "),v.Tb(25,"div",9),v.Ic(26,"\n          "),v.Tb(27,"div",10),v.Ic(28),v.fc(29,"translate"),v.Tb(30,"span"),v.Ic(31),v.Sb(),v.Ic(32," \u066a\n          "),v.Sb(),v.Ic(33,"\n          "),v.Tb(34,"mat-slider",11),v.Ic(35,"\n          "),v.Sb(),v.Ic(36,"\n        "),v.Sb(),v.Ic(37,"\n      "),v.Sb(),v.Ic(38,"\n\n      "),v.Tb(39,"div",5),v.Ic(40,"\n        "),v.Tb(41,"div",6),v.Ic(42,"\n          "),v.Tb(43,"mat-form-field",12),v.Ic(44,"\n            "),v.Tb(45,"mat-label"),v.Ic(46),v.fc(47,"translate"),v.Sb(),v.Ic(48,"\n            "),v.Ob(49,"textarea",13),v.fc(50,"translate"),v.Ic(51,"\n\n            "),v.Gc(52,ne,3,3,"mat-error",14),v.Ic(53,"\n          "),v.Sb(),v.Ic(54,"\n        "),v.Sb(),v.Ic(55,"\n      "),v.Sb(),v.Ic(56,"\n    "),v.Sb(),v.Ic(57,"\n\n    "),v.Tb(58,"div",15),v.Ic(59,"\n      "),v.Tb(60,"button",16),v.Ic(61,"\n        "),v.Tb(62,"mat-icon",17),v.Ic(63,"check"),v.Sb(),v.Ic(64,"\n        "),v.Tb(65,"span",18),v.Ic(66),v.fc(67,"translate"),v.Sb(),v.Ic(68,"\n      "),v.Sb(),v.Ic(69,"\n    "),v.Sb(),v.Ic(70,"\n  "),v.Sb(),v.Ic(71,"\n"),v.Sb()}if(2&t){var a=v.ec();v.kc("dir",a.rtlDirection?"rtl":"ltr"),v.Bb(2),v.kc("formGroup",a.form),v.Bb(5),v.Kc("\n        ",v.gc(8,19,"tasks.task_stop.stop_description"),"\n      "),v.Bb(8),v.Kc("",v.gc(16,21,"tasks.form.task_name"),": "),v.Bb(4),v.Jc(a.task.taskName),v.Bb(8),v.kc("ngClass",a.rtlDirection?"right-full":"left-full"),v.Bb(1),v.Kc("\n            ",v.gc(29,23,"tasks.boards.task_percentage"),"\n            "),v.Bb(3),v.Jc(a.form.get("percentage").value),v.Bb(3),v.kc("disabled","done"===a.task.boardStatus)("max",100)("min",0)("step",5)("thumbLabel",!0)("tickInterval",2),v.Bb(12),v.Jc(v.gc(47,25,"tasks.task_stop.description")),v.Bb(3),v.lc("placeholder",v.gc(50,27,"tasks.task_stop.description")),v.Bb(3),v.kc("ngIf",!a.form.get("description").valid&&a.form.get("description").touched),v.Bb(8),v.kc("disabled",!a.form.valid),v.Bb(6),v.Jc(v.gc(67,29,"global.submit"))}}var ie=function(t){function e(e,n,a,i,r,s,c,l,d,u){var b=t.call(this,i,c)||this;return b.data=e,b.dialogRef=n,b.fb=a,b.injector=i,b.apiService=r,b.messageService=s,b.userInfoService=c,b.viewDirection=l,b.refreshLoginService=d,b.loadingIndicatorService=u,b.rtlDirection=!1,b._subscription=new o.Subscription,b._subscription.add(b.viewDirection.currentDirection.subscribe((function(t){return b.rtlDirection=t}))),b.task=e,b}return ee(e,t),e.prototype.ngOnInit=function(){var t=this;this.createForm().then((function(){t.form.patchValue({taskId:t.task.taskId,percentage:t.task.percentage})}))},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({taskId:new d.e(0),description:new d.e("",d.u.required),percentage:new d.e(0,d.u.required),email:new d.e(t.loggedInUser.email,d.u.required)}),e(!0)}))},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.form.disable(),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.taskStop(this.form.value).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),1===e.result?(t.messageService.showMessage(e.message),t.dialogRef.close(!0)):(t.form.enable(),t.messageService.showMessage(e.message))}),(function(e){e.message&&t.messageService.showMessage(e.message),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.form.enable(),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(v.Nb(f.a),v.Nb(f.e),v.Nb(d.d),v.Nb(v.t),v.Nb(u.a),v.Nb(b.a),v.Nb(l.a),v.Nb(m.a),v.Nb(h.a),v.Nb(I.a))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-task-stop"]],features:[v.yb],decls:2,vars:1,consts:[["class","pos-abs left-0 right-0 top-0 bottom-0 padding-full z-index-99 overflow-hide",3,"dir",4,"ngIf"],[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99","overflow-hide",3,"dir"],["autocomplete","off",1,"full-height",3,"formGroup","submit"],[1,"full-width"],[1,"margin-b-full","font-full-em","text-weight-500"],[1,"row","margin-b-full"],[1,"col-md-12"],[1,"text-orange-700"],[1,"row"],[1,"col-md-12","no-padding-r-l"],[1,"font-9-em","pos-abs","top-half","right-full",3,"ngClass"],["formControlName","percentage","tabIndex","1","tabindex","3",1,"full-width","no-padding-r-l","pos-rel","top-half",3,"disabled","max","min","step","thumbLabel","tickInterval"],[1,"full-width","height-110","font-9-em"],["formControlName","description","matInput","","required","","tabindex","2",3,"placeholder"],[4,"ngIf"],[1,"height-30","full-width","display-flex","justify-content-end"],["mat-raised-button","","tabindex","3","type","submit",1,"green-gradient","float-left","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"]],template:function(t,e){1&t&&(v.Gc(0,ae,72,31,"div",0),v.Ic(1,"\n")),2&t&&v.kc("ngIf",e.form)},directives:[a.k,k.b,d.v,d.o,d.i,a.i,y.a,d.n,d.g,S.c,S.f,d.c,T.b,d.t,B.b,C.a,S.b],pipes:[r.c],styles:[""]}),e}(c.a),re=n("8Tul"),se=n("AH9q"),oe=function(){function t(){this._defaultUsersProjectsList=null,this.usersProjectsList=new yt.BehaviorSubject(this._defaultUsersProjectsList),this.currentUsersProjectsList=this.usersProjectsList.asObservable()}return Object.defineProperty(t.prototype,"getUsersProjectsList",{get:function(){return this.usersProjectsList.getValue()},enumerable:!1,configurable:!0}),t.prototype.changeUsersProjectsList=function(t){this.usersProjectsList.next(t)},t.\u0275prov=v.Jb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),ce=n("jaxi"),le=n("Qu3c"),de=n("Wp6s"),ue=function(){return(ue=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},be=["searchBox"],fe=function(t){return{"text-line-through":t}};function ge(t,e){if(1&t){var n=v.Ub();v.Tb(0,"mat-card",17),v.Ic(1,"\n\n            "),v.Tb(2,"mat-card-content",18),v.Ic(3,"\n\n              "),v.Tb(4,"div",19),v.Ic(5,"\n                "),v.Tb(6,"mat-icon",20),v.Ic(7,"\n                  drag_handle\n                "),v.Sb(),v.Ic(8,"\n\n                "),v.Ic(9,"\n\n                "),v.Tb(10,"mat-icon",21),v.ac("click",(function(){v.wc(n);var t=e.$implicit;return v.ec(2).checkTask(t)})),v.Ic(11),v.Sb(),v.Ic(12,"\n              "),v.Sb(),v.Ic(13,"\n\n              "),v.Ic(14,"\n\n              "),v.Tb(15,"div",22),v.ac("click",(function(){v.wc(n);var t=e.$implicit;return v.ec(2).openTask(t)})),v.Ic(16,"\n                "),v.Tb(17,"div",23),v.Ic(18),v.Sb(),v.Ic(19,"\n\n                "),v.Ic(20,"\n              "),v.Sb(),v.Ic(21,"\n\n              "),v.Tb(22,"div",19),v.Ic(23,"\n                "),v.Tb(24,"button",24),v.ac("click",(function(t){v.wc(n);var a=e.$implicit,i=v.ec(2);return t.stopPropagation(),i.updateTask(a)})),v.Ic(25,"\n                  "),v.Tb(26,"mat-icon",25),v.Ic(27,"edit\n                  "),v.Sb(),v.Ic(28,"\n                "),v.Sb(),v.Ic(29,"\n\n                "),v.Tb(30,"button",26),v.ac("click",(function(t){v.wc(n);var a=e.$implicit,i=v.ec(2);return t.stopPropagation(),i.deleteTask(a)})),v.Ic(31,"\n                  "),v.Tb(32,"mat-icon",27),v.Ic(33,"close\n                  "),v.Sb(),v.Ic(34,"\n                "),v.Sb(),v.Ic(35,"\n              "),v.Sb(),v.Ic(36,"\n            "),v.Sb(),v.Ic(37,"\n          "),v.Sb()}if(2&t){var a=e.$implicit,i=e.index,r=v.ec(2);v.Bb(6),v.kc("ngClass",r.rtlDirection?"margin-l-tiny":"margin-r-tiny"),v.Bb(4),v.kc("ngClass",100===a.percentage?"text-green-200":"text-gray-700"),v.Bb(1),v.Kc("\n                  ",100===a.percentage?"check_circle_outline":"radio_button_unchecked","\n                "),v.Bb(4),v.kc("ngClass",100===a.percentage?"text-green-200":"text-gray-700"),v.Bb(2),v.kc("ngClass",v.oc(8,fe,100===a.percentage)),v.Bb(1),v.Lc("\n                  ",i+1,". ",a.taskName,"\n                "),v.Bb(6),v.kc("ngClass",r.rtlDirection?"margin-l-half":"margin-r-half")}}function pe(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",15),v.ac("cdkDropListDropped",(function(t){return v.wc(n),v.ec().changeTodo(t)})),v.Ic(1,"\n          "),v.Gc(2,ge,38,10,"mat-card",16),v.Ic(3,"\n        "),v.Sb()}if(2&t){var a=v.ec();v.kc("cdkDropListData",a.subTasks),v.Bb(2),v.kc("ngForOf",a.subTasks)}}function he(t,e){1&t&&(v.Tb(0,"div",28),v.Ic(1,"\n    "),v.Tb(2,"div",29),v.Ic(3,"\n      "),v.dc(),v.Tb(4,"svg",30),v.Ic(5,"\n        "),v.Tb(6,"rect",31),v.Ic(7,"\n          "),v.Ob(8,"animate",32),v.Ic(9,"\n          "),v.Ob(10,"animate",33),v.Ic(11,"\n        "),v.Sb(),v.Ic(12,"\n        "),v.Tb(13,"rect",34),v.Ic(14,"\n          "),v.Ob(15,"animate",35),v.Ic(16,"\n          "),v.Ob(17,"animate",36),v.Ic(18,"\n        "),v.Sb(),v.Ic(19,"\n        "),v.Tb(20,"rect",37),v.Ic(21,"\n          "),v.Ob(22,"animate",38),v.Ic(23,"\n          "),v.Ob(24,"animate",39),v.Ic(25,"\n        "),v.Sb(),v.Ic(26,"\n      "),v.Sb(),v.Ic(27,"\n\n      "),v.cc(),v.Tb(28,"span",40),v.Ic(29),v.fc(30,"translate"),v.Sb(),v.Ic(31,"\n    "),v.Sb(),v.Ic(32,"\n  "),v.Sb()),2&t&&(v.Bb(29),v.Jc(v.gc(30,1,"global.loading")))}var me=function(){function t(t,e,n,a,i,r,s,c,l,d,u){var b=this;this.dialog=t,this.fb=e,this.apiService=n,this.messageService=a,this.translateService=i,this.refreshLoginService=r,this.refreshBoardService=s,this.windowManagerService=c,this.bottomSheetDataService=l,this.loadingIndicatorService=d,this.taskEssentialInfoService=u,this.taskId=0,this.rtlDirection=!1,this.edit=!1,this.loadingIndicator={status:!1,serviceName:"todo"},this.subTasks=[],this.subTasksRemain=0,this.subTasksDone=0,this.bottomSheetData=null,this.usersList=[],this.projectsList=[],this.breadcrumbList=[],this._subscription=new o.Subscription,this._subscription.add(this.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return b.loadingIndicator=t})))}return t.prototype.ngOnInit=function(){var t=this;this._subscription.add(this.bottomSheetDataService.currentButtonSheetData.subscribe((function(e){e&&(t.bottomSheetData=e)}))),this.createForm(),this.getTodoList()},t.prototype.createForm=function(){this.form=this.fb.group({taskId:new d.e(0),status:new d.e(1),taskName:new d.e(""),percentage:new d.e(0),assignTo:new d.e(""),taskDurationHours:new d.e(0),taskDurationMinutes:new d.e(0),startAt:new d.e(""),stopAt:new d.e(""),startTime:new d.e(""),stopTime:new d.e(""),project:new d.e({}),taskDesc:new d.e(""),email:new d.e("0"),boardStatus:new d.e(""),taskDateStart:"0000-00-00 00:00:00",taskDateStop:"0000-00-00 00:00:00",assigner:new d.e(this.loggedInUser.email),trackable:new d.e(0),parentTaskId:new d.e(0)})},t.prototype.changeTodo=function(t){t.previousContainer===t.container?(Object(te.e)(t.container.data,t.previousIndex,t.currentIndex),this.changeTodoPriority(t.container.data)):Object(te.f)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)},t.prototype.changeTodoPriority=function(t){var e=this;if(t.length>1){var n=t;n.map((function(t,e){return t.priority=e})),this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.form.disable(),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.changePriority(n).subscribe((function(t){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.form.enable(),t.message&&e.messageService.showMessage(t.message)}),(function(t){t.message&&e.messageService.showMessage(t.message,"error"),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.refreshLoginService.openLoginDialog(t)})))}},t.prototype.sortTodo=function(){this.subTasks.sort((function(t,e){var n=t.priority,a=e.priority,i=0;return n>a?i=1:n<a&&(i=-1),i}))},t.prototype.getTodoList=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.form.disable(),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.usersList=this.taskEssentialInfoService.getUsersProjectsList.usersList,this.projectsList=this.taskEssentialInfoService.getUsersProjectsList.projectsList,this._subscription.add(this.apiService.getSubsetTask(this.loggedInUser.email,this.parentTaskData.taskId).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),1===e.result&&e.contents.length&&(t.subTasks=e.contents,t.subTasksRemain=0,t.subTasksDone=0,t.subTasks.map((function(e){return e.assignTo=t.usersList.filter((function(t){return t.adminId===e.assignTo})).pop(),e.assigner=t.usersList.filter((function(t){return t.adminId===e.assigner})).pop().email,e.project=t.projectsList.filter((function(t){return t.projectId===e.project})).pop(),100===e.percentage?t.subTasksDone++:t.subTasksRemain++,e})),t.sortTodo(),e.message&&t.messageService.showMessage(e.message)),t.form.enable()}),(function(e){e.message&&t.messageService.showMessage(e.message,"error"),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),t.refreshLoginService.openLoginDialog(e)})))},t.prototype.checkTask=function(t){var e=this;this.form.disable();var n={task:{taskId:t.taskId,taskName:t.taskName,assignTo:t.assignTo,taskDurationHours:t.taskDurationHours,taskDurationMinutes:t.taskDurationMinutes,startAt:t.startAt,stopAt:t.stopAt,project:t.project,status:t.status,taskDesc:t.taskDesc,percentage:"done"===t.boardStatus?0:100,assigner:t.assigner,taskDateStart:t.taskDateStart,taskDateStop:t.taskDateStop,boardStatus:"done"===t.boardStatus?"todo":"done",trackable:t.trackable,todoCount:t.todoCount,startTime:t.startTime,stopTime:t.stopTime,email:t.email}};this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this._subscription.add(this.apiService.taskChangeStatus(n.task,n.task.boardStatus).subscribe((function(t){if(e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),t.result){var n=t.content;e.subTasks=e.subTasks.map((function(t){return t.taskId===n.taskId&&(t=Object.assign(t,n)),t})),e.getTodoList(),e.sortTodo()}t.message&&e.messageService.showMessage(t.message),e.form.enable()}),(function(t){t.message&&e.messageService.showMessage(t.message,"error"),e.getTodoList(),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.refreshLoginService.openLoginDialog(t)})))},t.prototype.deleteTask=function(t){var e=this;this.form.disable();var n=this.dialog.open(re.a,{data:{title:this.getTranslate("tasks.task_detail.delete_title"),message:this.getTranslate("tasks.task_detail.delete_text")},autoFocus:!1,width:"70vh",maxWidth:"350px",panelClass:"approve-detail-dialog",height:"160px"});this._subscription.add(n.afterOpened().subscribe((function(){e.windowManagerService.dialogOnTop(n.id)}))),this._subscription.add(n.afterClosed().subscribe((function(n){n&&(e.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),e.apiService.accessToken=e.loginData.token_type+" "+e.loginData.access_token,e._subscription.add(e.apiService.deleteTask(t,e.loggedInUser.email).subscribe((function(n){1===n.result&&(e.form.reset(),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.subTasks=e.subTasks.filter((function(e){return e.taskId!==t.taskId})),e.sortTodo()),n.message&&e.messageService.showMessage(n.message),e.form.enable()}),(function(t){t.message&&e.messageService.showMessage(t.message,"error"),e.form.enable(),e.getTodoList(),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.refreshLoginService.openLoginDialog(t)}))))})))},t.prototype.addTask=function(){var t=this;if(this.form.get("taskName").value.trim(this.form.get("taskName").value).length>=1){this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.form.disable();var e={taskName:this.form.get("taskName").value,assignTo:this.parentTaskData.assignTo,taskDurationHours:0,taskDurationMinutes:0,startAt:"0000-00-00 00:00:00",stopAt:"0000-00-00 00:00:00",taskDateStart:"0000-00-00 00:00:00",taskDateStop:"0000-00-00 00:00:00",project:this.parentTaskData.project,taskDesc:"",percentage:0,assigner:this.loggedInUser.email,boardStatus:"todo",trackable:0,startTime:"00:00",stopTime:"00:00",parentTaskId:this.parentTaskData.taskId};this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.createTask(e).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),1===e.result&&(t.subTasks.push(e.content),t.form.reset(),t.sortTodo()),t.form.enable(),e.message&&t.messageService.showMessage(e.message)}),(function(e){e.message&&t.messageService.showMessage(e.message,"error"),t.form.enable(),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),t.refreshLoginService.openLoginDialog(e)})))}},t.prototype.updateTask=function(t){this.edit=!0,this.form.patchValue({taskId:t.taskId,taskName:t.taskName,percentage:t.percentage,assignTo:t.assignTo,taskDurationHours:t.taskDurationHours,taskDurationMinutes:t.taskDurationMinutes,startAt:t.startAt,stopAt:t.stopAt,startTime:t.startTime?t.startTime:"00:00",stopTime:t.stopTime?t.stopTime:"00:00",project:t.project,taskDesc:t.taskDesc,email:t.assignTo.email,boardStatus:t.boardStatus,taskDateStart:t.taskDateStart,taskDateStop:t.taskDateStop,assigner:t.assigner,trackable:t.trackable,parentTaskId:t.parentTaskId}),this.searchBox.nativeElement.focus()},t.prototype.saveTask=function(){var t=this;this.form.get("taskName").value.trim(this.form.get("taskName").value).length>=1&&(this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.form.disable(),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.updateTask(this.form.value).subscribe((function(e){if(t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),1===e.result){var n=e.content;t.subTasks=t.subTasks.map((function(t){return t.taskId===n.taskId&&(t=Object.assign(t,n)),t})),t.form.reset(),t.edit=!1,t.sortTodo()}t.form.enable(),e.message&&t.messageService.showMessage(e.message)}),(function(e){e.message&&t.messageService.showMessage(e.message,"error"),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),t.refreshLoginService.openLoginDialog(e)}))))},t.prototype.openTask=function(t){var e=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"todo"}),this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),this.bottomSheetData.bottomSheetRef.close(),setTimeout((function(){var n={action:"detail",usersList:e.usersList,projectsList:e.projectsList,task:t,boardStatus:t.boardStatus},a=ue(ue({},e.bottomSheetData),{data:n});e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.bottomSheetDataService.changeButtonSheetData(a)}),500)},t.prototype.getBreadcrumbData=function(t){var e=this;return new Promise((function(n){e._subscription.add(e.apiService.getBreadcrumb(t).subscribe((function(t){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),1===t.result&&(e.breadcrumbList=t.contents,n(!0)),t.message&&e.messageService.showMessage(t.message)}),(function(t){t.message&&e.messageService.showMessage(t.message,"error"),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"todo"}),e.refreshLoginService.openLoginDialog(t)})))}))},t.prototype.getTranslate=function(t){return this.translateService.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(f.b),v.Nb(d.d),v.Nb(u.a),v.Nb(b.a),v.Nb(r.d),v.Nb(h.a),v.Nb(se.a),v.Nb(wt.a),v.Nb(Dt),v.Nb(I.a),v.Nb(oe))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-todo"]],viewQuery:function(t,e){var n;1&t&&v.Nc(be,!0),2&t&&v.rc(n=v.bc())&&(e.searchBox=n.first)},inputs:{taskId:"taskId",parentTaskData:"parentTaskData",rtlDirection:"rtlDirection",loginData:"loginData",loggedInUser:"loggedInUser"},decls:44,vars:17,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","full-width","full-height",3,"dir"],[1,"margin-b-full","text-gray-800","font-full-em","text-weight-500","no-margin","height-45","line-height-15","padding-full"],[1,"text-gray-500","font-7-em","text-italic",3,"ngClass"],[1,"todo-content-container","height-full-minus-50","padding-full","padding-b-half","overflow-y-auto"],[1,"full-height",3,"formGroup"],[1,"todo-list-container","height-full-minus-45","overflow-y-auto","overflow-x-hide"],["cdkDropList","","class","no-padding example-list",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],[1,"enter-todo-container","height-45"],[1,"full-height","pos-rel"],["appearance","outline","color","primary",1,"full-width","height-45","font-9-em"],["matInput","","formControlName","taskName","name","inputValue",3,"placeholder","keydown"],["searchBox",""],["type","button",1,"no-bg","no-border","width-30","no-padding","pos-abs","top-full-plus-one-tenth","cursor-pointer",3,"ngClass","disabled","click"],[1,"text-blue-500"],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["cdkDropList","",1,"no-padding","example-list",3,"cdkDropListData","cdkDropListDropped"],["class","height-auto cursor-pointer border-bottom no-padding bg-grey no-box-shadow","cdkDragLockAxis","y","cdkDrag","",4,"ngFor","ngForOf"],["cdkDragLockAxis","y","cdkDrag","",1,"height-auto","cursor-pointer","border-bottom","no-padding","bg-grey","no-box-shadow"],[1,"text-gray-600","display-flex","flex-space-between"],[1,"display-flex","align-items-center"],["cdkDragHandle","",1,"no-padding","text-gray-400",3,"ngClass"],[1,"no-padding",3,"ngClass","click"],[1,"flex-grow-1",3,"ngClass","click"],[1,"no-text-eclipse","font-full-em","height-auto","padding-mini-t-b","padding-mini-r-l",3,"ngClass"],["type","button",1,"display-block","cursor-pointer","width-18","height-18","text-center","no-padding","no-border","no-bg",3,"ngClass","click"],[1,"no-padding","width-18","height-18","line-height-15","font-full-rem","text-green-600"],["type","button",1,"display-block","cursor-pointer","width-18","height-18","text-center","no-padding","no-border","no-bg",3,"click"],[1,"no-padding","width-18","height-18","line-height-15","font-full-rem","text-red-600"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["id","Layer_1","xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","24px","height","30px","viewBox","0 0 24 30",0,"xml","space","preserve",2,"enable-background","new 0 0 50 50"],["x","0","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0s","dur","0.6s","repeatCount","indefinite"],["x","10","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0.15s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0.15s","dur","0.6s","repeatCount","indefinite"],["x","20","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0.3s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0.3s","dur","0.6s","repeatCount","indefinite"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Tb(2,"h1",1),v.Ic(3),v.fc(4,"translate"),v.Tb(5,"span",2),v.Ic(6),v.fc(7,"translate"),v.Sb(),v.Ic(8,"\n  "),v.Sb(),v.Ic(9,"\n\n  "),v.Tb(10,"div",3),v.Ic(11,"\n    "),v.Tb(12,"form",4),v.Ic(13,"\n\n      "),v.Tb(14,"div",5),v.Ic(15,"\n        "),v.Gc(16,pe,4,2,"div",6),v.Ic(17,"\n      "),v.Sb(),v.Ic(18,"\n\n      "),v.Tb(19,"div",7),v.Ic(20,"\n        "),v.Tb(21,"div",8),v.Ic(22,"\n          "),v.Tb(23,"mat-form-field",9),v.Ic(24,"\n            "),v.Tb(25,"input",10,11),v.ac("keydown",(function(t){return"Enter"===t.code?e.edit?e.saveTask():e.addTask():""})),v.fc(27,"translate"),v.Sb(),v.Ic(28,"\n          "),v.Sb(),v.Ic(29,"\n          "),v.Tb(30,"button",12),v.ac("click",(function(){return e.edit?e.saveTask():e.addTask()})),v.Ic(31,"\n            "),v.Tb(32,"mat-icon",13),v.Ic(33,"send"),v.Sb(),v.Ic(34,"\n          "),v.Sb(),v.Ic(35,"\n        "),v.Sb(),v.Ic(36,"\n      "),v.Sb(),v.Ic(37,"\n      "),v.Ic(38,"\n    "),v.Sb(),v.Ic(39,"\n  "),v.Sb(),v.Ic(40,"\n\n  "),v.Gc(41,he,33,3,"div",14),v.Ic(42,"\n"),v.Sb(),v.Ic(43,"\n")),2&t&&(v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(3),v.Kc("\n    ",v.gc(4,11,"tasks.task_todo.todo_list"),"\n    "),v.Bb(2),v.kc("ngClass",e.rtlDirection?"margin-r-half":"margin-l-half"),v.Bb(1),v.Lc("\n      ",e.subTasks.length?e.subTasksDone+"/"+e.subTasks.length:"","\n      ",v.gc(7,13,e.subTasks.length?"global.items":""),"\n    "),v.Bb(6),v.kc("formGroup",e.form),v.Bb(4),v.kc("ngIf",e.subTasks.length),v.Bb(9),v.lc("placeholder",v.gc(27,15,"tasks.task_todo.add_an_item")),v.Bb(5),v.kc("ngClass",e.rtlDirection?"left-half":"right-half")("disabled",""===e.form.get("taskName").value),v.Bb(11),v.kc("ngIf",e.loadingIndicator.status&&"todo"===e.loadingIndicator.serviceName))},directives:[k.b,a.i,d.v,d.o,d.i,a.k,S.c,T.b,d.c,d.n,d.g,C.a,te.c,a.j,de.a,te.a,de.c,te.b],pipes:[r.c],styles:[".text-line-through[_ngcontent-%COMP%]{text-decoration:line-through}.border-bottom[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #ddd}.flex-grow-1[_ngcontent-%COMP%]{flex-grow:1!important}"]}),t}(),Ie=n("M9IT"),ve=n("+0xr"),ke=n("K3ar"),Se=function(){function t(t,e,n,a){var i=this;this.data=t,this.dialog=e,this.dialogRef=n,this.viewDirection=a,this.rtlDirection=!1,this._subscription=new o.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return i.rtlDirection=t})))}return t.prototype.ngOnInit=function(){this.taskDescription=this.data.description,this.NameDescription=this.data.task.taskName,this.taskPercentage=this.data.percentage,this.DateStop=this.data.taskDateStop},t.prototype.close=function(){this.dialogRef.close()},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(f.a),v.Nb(f.b),v.Nb(f.e),v.Nb(m.a))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-description"]],decls:45,vars:20,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","padding-full","z-index-99"],[1,"full-height",3,"dir"],[1,"height-45","overflow-x-hide","overflow-y-auto","full-width"],[1,"margin-b-full","font-full-em","text-pink-600","text-weight-500","margin-b-half",3,"ngClass"],[1,"pos-abs","top-full","cursor-pointer","text-gray-600",3,"ngClass","click"],[1,"text-grey-500"],[1,"height-full-minus-90"],[1,"half-width","display-block","text-gray-600","font-7-em","margin-b-full","display-flex",3,"ngClass"],[1,"width-18","height-18","font-full-plus-three-tenth-em","line-height-20"],[1,"half-width","display-block","text-gray-600","font-7-em","margin-b-full",3,"ngClass"],[3,"ngClass"],[1,"height-45","display-flex","justify-content-end","full-width","display-flex","align-items-end","justify-content-end"],["type","button",1,"no-bg","no-border","cursor-pointer","text-red-500","line-height-30","font-9-em","overflow-hide","text-weight-normal","full-width",3,"ngClass","click"],[1,"padding-mini-r-l"]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Tb(2,"div",1),v.Ic(3,"\n    "),v.Tb(4,"div",2),v.Ic(5,"\n      "),v.Tb(6,"h1",3),v.Ic(7),v.Sb(),v.Ic(8,"\n      "),v.Tb(9,"a",4),v.ac("click",(function(){return e.close()})),v.Ic(10,"\n        "),v.Tb(11,"mat-icon",5),v.Ic(12,"close"),v.Sb(),v.Ic(13,"\n      "),v.Sb(),v.Ic(14,"\n    "),v.Sb(),v.Ic(15,"\n    "),v.Tb(16,"div",6),v.Ic(17,"\n      "),v.Tb(18,"span",7),v.Ic(19,"\n           "),v.Tb(20,"mat-icon",8),v.Ic(21,"access_alarm"),v.Sb(),v.Ic(22),v.fc(23,"jalali"),v.Sb(),v.Ic(24,"\n      "),v.Tb(25,"span",9),v.Ic(26),v.fc(27,"translate"),v.Sb(),v.Ic(28,"\n      "),v.Tb(29,"p",10),v.Ic(30),v.Sb(),v.Ic(31,"\n    "),v.Sb(),v.Ic(32,"\n    "),v.Tb(33,"div",11),v.Ic(34,"\n      "),v.Tb(35,"button",12),v.ac("click",(function(){return e.close()})),v.Ic(36,"\n        "),v.Tb(37,"span",13),v.Ic(38),v.fc(39,"translate"),v.Sb(),v.Ic(40,"\n      "),v.Sb(),v.Ic(41,"\n    "),v.Sb(),v.Ic(42,"\n  "),v.Sb(),v.Ic(43,"\n"),v.Sb(),v.Ic(44,"\n")),2&t&&(v.Bb(2),v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(4),v.kc("ngClass",e.rtlDirection?"text-right":"text-left"),v.Bb(1),v.Kc("\n        ",e.NameDescription,"\n      "),v.Bb(2),v.kc("ngClass",e.rtlDirection?"left-full ":"right-full"),v.Bb(9),v.kc("ngClass",e.rtlDirection?"text-right float-right":"text-left float-left"),v.Bb(4),v.Kc(": ",v.hc(23,13,e.DateStop,e.rtlDirection),"\n      "),v.Bb(3),v.kc("ngClass",e.rtlDirection?"text-right float-right":"text-left float-left"),v.Bb(1),v.Lc("",v.gc(27,16,"tasks.boards.task_percentage"),"\n        :  ",e.taskPercentage,"%\n      "),v.Bb(3),v.kc("ngClass",e.rtlDirection?"text-right":"text-left"),v.Bb(1),v.Jc(e.taskDescription),v.Bb(5),v.kc("ngClass",e.rtlDirection?"text-left":"text-right"),v.Bb(3),v.Jc(v.gc(39,18,"global.dismiss")))},directives:[k.b,a.i,C.a],pipes:[ke.a,r.c],encapsulation:2}),t}();function Te(t,e){1&t&&(v.Tb(0,"th",18),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Jc(v.gc(2,1,"tasks.form.start_at")))}function we(t,e){if(1&t&&(v.Tb(0,"td",19),v.Ic(1,"\n          "),v.Tb(2,"span",20),v.Ic(3),v.fc(4,"jalali"),v.Sb(),v.Ic(5,"\n        "),v.Sb()),2&t){var n=e.$implicit,a=v.ec();v.Bb(3),v.Jc(v.hc(4,1,n.taskDateStart,a.rtlDirection))}}function ye(t,e){1&t&&(v.Tb(0,"th",18),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Jc(v.gc(2,1,"tasks.form.stop_at")))}function De(t,e){if(1&t&&(v.Tb(0,"td",19),v.Ic(1,"\n          "),v.Tb(2,"span",20),v.Ic(3),v.fc(4,"jalali"),v.Sb(),v.Ic(5,"\n        "),v.Sb()),2&t){var n=e.$implicit,a=v.ec();v.Bb(3),v.Jc(v.hc(4,1,n.taskDateStop,a.rtlDirection))}}function xe(t,e){1&t&&(v.Tb(0,"th",18),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Jc(v.gc(2,1,"tasks.form.task_admin_start")))}function _e(t,e){if(1&t&&(v.Tb(0,"td",19),v.Ic(1,"\n          "),v.Tb(2,"span",20),v.Ic(3),v.Sb(),v.Ic(4,"\n        "),v.Sb()),2&t){var n=e.$implicit;v.Bb(3),v.Jc(n.adminIdStartTask)}}function Be(t,e){1&t&&(v.Tb(0,"th",18),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Jc(v.gc(2,1,"tasks.form.task_admin_stop")))}function Ce(t,e){if(1&t&&(v.Tb(0,"td",19),v.Ic(1,"\n          "),v.Tb(2,"span",20),v.Ic(3),v.Sb(),v.Ic(4,"\n        "),v.Sb()),2&t){var n=e.$implicit;v.Bb(3),v.Jc(n.adminIdStopTask)}}function Le(t,e){1&t&&(v.Tb(0,"th",18),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Jc(v.gc(2,1,"tasks.boards.task_percentage")))}function Ne(t,e){if(1&t&&(v.Tb(0,"td",19),v.Ic(1,"\n          "),v.Tb(2,"span",20),v.Ic(3),v.Sb(),v.Ic(4,"\n        "),v.Sb()),2&t){var n=e.$implicit;v.Bb(3),v.Kc("",n.percentage,"%")}}function Me(t,e){1&t&&(v.Tb(0,"th",18),v.Ic(1),v.fc(2,"translate"),v.Sb()),2&t&&(v.Bb(1),v.Jc(v.gc(2,1,"tasks.form.task_description")))}function Oe(t,e){1&t&&(v.Tb(0,"span"),v.Ic(1,"\n            "),v.Tb(2,"a",23),v.Ic(3),v.Sb(),v.Ic(4,"\n          "),v.Sb()),2&t&&(v.Bb(3),v.Kc("\n             ","-","\n            "))}function je(t,e){if(1&t){var n=v.Ub();v.Tb(0,"a",24),v.ac("click",(function(){v.wc(n);var t=v.ec().$implicit;return v.ec().descriptionTask(t.description,t.percentage,t.taskDateStop)})),v.Ic(1,"\n            "),v.Tb(2,"span",25),v.Ic(3),v.fc(4,"translate"),v.Sb(),v.Ic(5,"\n          "),v.Sb()}2&t&&(v.Bb(3),v.Jc(v.gc(4,1,"tasks.task_detail.overview_description")))}function Ye(t,e){if(1&t&&(v.Tb(0,"td",19),v.Ic(1,"\n          "),v.Ic(2,"\n          "),v.Gc(3,Oe,5,1,"span",21),v.Ic(4,"\n\n          "),v.Gc(5,je,6,3,"a",22),v.Ic(6,"\n        "),v.Sb()),2&t){var n=e.$implicit;v.Bb(3),v.kc("ngIf",!n.description.length),v.Bb(2),v.kc("ngIf",n.description.length)}}function Pe(t,e){1&t&&v.Ob(0,"tr",26)}function Ae(t,e){1&t&&v.Ob(0,"tr",27)}function Fe(t,e){1&t&&(v.Tb(0,"div",28),v.Ic(1,"\n    "),v.Tb(2,"div",29),v.Ic(3,"\n      "),v.dc(),v.Tb(4,"svg",30),v.Ic(5,"\n        "),v.Tb(6,"rect",31),v.Ic(7,"\n          "),v.Ob(8,"animate",32),v.Ic(9,"\n          "),v.Ob(10,"animate",33),v.Ic(11,"\n        "),v.Sb(),v.Ic(12,"\n        "),v.Tb(13,"rect",34),v.Ic(14,"\n          "),v.Ob(15,"animate",35),v.Ic(16,"\n          "),v.Ob(17,"animate",36),v.Ic(18,"\n        "),v.Sb(),v.Ic(19,"\n        "),v.Tb(20,"rect",37),v.Ic(21,"\n          "),v.Ob(22,"animate",38),v.Ic(23,"\n          "),v.Ob(24,"animate",39),v.Ic(25,"\n        "),v.Sb(),v.Ic(26,"\n      "),v.Sb(),v.Ic(27,"\n\n      "),v.cc(),v.Tb(28,"span",40),v.Ic(29),v.fc(30,"translate"),v.Sb(),v.Ic(31,"\n    "),v.Sb(),v.Ic(32,"\n  "),v.Sb()),2&t&&(v.Bb(29),v.Jc(v.gc(30,1,"global.loading")))}var Ge=function(){function t(t,e,n,a,i,r,s,c){var l=this;this.dialog=t,this.api=e,this.translate=n,this.messageService=a,this.matPaginatorIntl=i,this.refreshLoginService=r,this.windowManagerService=s,this.loadingIndicatorService=c,this.rtlDirection=!1,this.usersList=[],this.taskReports=[],this.displayedColumns=["taskDateStart","taskDateStop","adminIdStartTask","adminIdStopTask","percentage","description"],this.pageLimit=[10,25,50,100],this.dataSource=new ve.k(this.taskReports),this.loadingIndicator={status:!1,serviceName:"project-report-report"},this.dataChange=!1,this.total=null,this._subscription=new o.Subscription,this._subscription.add(this.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return l.loadingIndicator=t})))}return t.prototype.ngOnInit=function(){var t=this;this.getTaskReport(),this.matPaginatorIntl.itemsPerPageLabel=this.getTranslate("global.pagination.item_per_page"),this.matPaginatorIntl.getRangeLabel=function(e,n,a){if(0===a||0===n)return"0 "+t.getTranslate("global.pagination.from")+" "+a;var i=e*n;return i+1+" - "+(i<(a=Math.max(a,0))?Math.min(i+n,a):i+n)+" "+t.getTranslate("global.pagination.from")+" "+a}},t.prototype.getTaskReport=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project-report"}),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.getTaskReport(this.task.taskId).subscribe((function(e){if(t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project-report"}),1===e.result){t.taskReports=e.contents;var n=0;t.taskReports.map((function(t){if("0000-00-00 00:00:00"!==t.taskDateStop){var e=new Date(t.taskDateStart),a=new Date(t.taskDateStop),i=Math.abs(a.getTime()-e.getTime());n+=i}}));var a=(n=(n-n%1e3)/1e3)%60,i=(n=(n-a)/60)%60,r=(n-i)/60;t.total={hours:r<10?"0"+r:""+r,minutes:i<10?"0"+i:""+i,seconds:a<10?"0"+a:""+a},t.taskReports.map((function(e){if(e.adminIdStartTask){var n=t.usersList.filter((function(t){return t.adminId===e.adminIdStartTask})).pop();e.adminIdStartTask=n?n.name+" "+n.family:"-"}if(e.adminIdStopTask){var a=t.usersList.filter((function(t){return t.adminId===e.adminIdStopTask})).pop();e.adminIdStopTask=a?a.name+" "+a.family:"-"}})),t.dataSource=new ve.k(t.taskReports),t.dataSource.paginator=t.paginator}e.message&&t.messageService.showMessage(e.message)}),(function(e){e.message&&t.messageService.showMessage(e.message),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project-report"}),t.refreshLoginService.openLoginDialog(e)})))},t.prototype.getTranslate=function(t){return this.translate.instant(t)},t.prototype.descriptionTask=function(t,e,n){var a=this,i=this.dialog.open(Se,{data:{task:this.task,description:t,percentage:e,taskDateStop:n},autoFocus:!1,width:"500px",height:"250px"});this._subscription.add(i.afterOpened().subscribe((function(){a.windowManagerService.dialogOnTop(i.id)}))),this._subscription.add(i.afterClosed().subscribe((function(t){t&&(a.dataChange=!0,setTimeout((function(){a.dataChange=!1}),500))})))},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(f.b),v.Nb(u.a),v.Nb(r.d),v.Nb(b.a),v.Nb(Ie.b),v.Nb(h.a),v.Nb(wt.a),v.Nb(I.a))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-report"]],viewQuery:function(t,e){var n;1&t&&v.Cc(Ie.a,!0),2&t&&v.rc(n=v.bc())&&(e.paginator=n.first)},inputs:{rtlDirection:"rtlDirection",loginData:"loginData",task:"task",usersList:"usersList"},decls:87,vars:21,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","full-width","full-height",3,"dir"],[1,"padding-full","height-40","border-bottom","line-height","display-flex"],[1,"text-pink-600","display-flex"],[1,"margin-r-l","text-gray-700","display-flex"],[1,"full-width","height-full-minus-40","overflow-y-auto","overflow-x-hide","height-full-minus-40"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","taskDateStart"],["class","font-7-em","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","taskDateStop"],["matColumnDef","adminIdStartTask"],["matColumnDef","adminIdStopTask"],["matColumnDef","percentage"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"full-width",3,"pageSizeOptions"],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["mat-header-cell","",1,"font-7-em"],["mat-cell",""],[1,"font-7-em","display-block","width-60"],[4,"ngIf"],["class","line-height-30 font-9-em overflow-hide text-weight-normal no-box-shadow cursor-pointer",3,"click",4,"ngIf"],[1,"font-7-em","display-block"],[1,"line-height-30","font-9-em","overflow-hide","text-weight-normal","no-box-shadow","cursor-pointer",3,"click"],[1,"text-blue"],["mat-header-row",""],["mat-row",""],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Tb(2,"div",1),v.Ic(3,"\n    "),v.Tb(4,"span",2),v.Ic(5),v.fc(6,"translate"),v.Sb(),v.Ic(7,"\n    "),v.Tb(8,"span",3),v.Ic(9,"\n      "),v.Tb(10,"span"),v.Ic(11),v.fc(12,"translate"),v.Sb(),v.Ic(13,"\n      "),v.Tb(14,"span"),v.Ic(15),v.fc(16,"translate"),v.Sb(),v.Ic(17,"\n      "),v.Tb(18,"span"),v.Ic(19),v.fc(20,"translate"),v.Sb(),v.Ic(21,"\n    "),v.Sb(),v.Ic(22,"\n  "),v.Sb(),v.Ic(23,"\n\n  "),v.Tb(24,"div",4),v.Ic(25,"\n    "),v.Tb(26,"table",5),v.Ic(27,"\n      "),v.Ic(28,"\n      "),v.Rb(29,6),v.Ic(30,"\n        "),v.Gc(31,Te,3,3,"th",7),v.Ic(32,"\n        "),v.Gc(33,we,6,4,"td",8),v.Ic(34,"\n      "),v.Qb(),v.Ic(35,"\n\n      "),v.Ic(36,"\n      "),v.Rb(37,9),v.Ic(38,"\n        "),v.Gc(39,ye,3,3,"th",7),v.Ic(40,"\n        "),v.Gc(41,De,6,4,"td",8),v.Ic(42,"\n      "),v.Qb(),v.Ic(43,"\n\n      "),v.Ic(44,"\n      "),v.Rb(45,10),v.Ic(46,"\n        "),v.Gc(47,xe,3,3,"th",7),v.Ic(48,"\n        "),v.Gc(49,_e,5,1,"td",8),v.Ic(50,"\n      "),v.Qb(),v.Ic(51,"\n\n      "),v.Ic(52,"\n      "),v.Rb(53,11),v.Ic(54,"\n        "),v.Gc(55,Be,3,3,"th",7),v.Ic(56,"\n        "),v.Gc(57,Ce,5,1,"td",8),v.Ic(58,"\n      "),v.Qb(),v.Ic(59,"\n\n      "),v.Ic(60,"\n      "),v.Rb(61,12),v.Ic(62,"\n        "),v.Gc(63,Le,3,3,"th",7),v.Ic(64,"\n        "),v.Gc(65,Ne,5,1,"td",8),v.Ic(66,"\n      "),v.Qb(),v.Ic(67,"\n\n      "),v.Ic(68,"\n      "),v.Rb(69,13),v.Ic(70,"\n        "),v.Gc(71,Me,3,3,"th",7),v.Ic(72,"\n        "),v.Gc(73,Ye,7,2,"td",8),v.Ic(74,"\n      "),v.Qb(),v.Ic(75,"\n\n      "),v.Gc(76,Pe,1,0,"tr",14),v.Ic(77,"\n      "),v.Gc(78,Ae,1,0,"tr",15),v.Ic(79,"\n    "),v.Sb(),v.Ic(80,"\n\n    "),v.Ob(81,"mat-paginator",16),v.Ic(82,"\n  "),v.Sb(),v.Ic(83,"\n\n  "),v.Gc(84,Fe,33,3,"div",17),v.Ic(85,"\n"),v.Sb(),v.Ic(86,"\n")),2&t&&(v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(5),v.Kc("\n      ",v.gc(6,13,"tasks.task_report.total_time"),":\n    "),v.Bb(6),v.Lc("",e.total&&e.total.hours?e.total.hours:0," ",v.gc(12,15,"global.hours")," - "),v.Bb(4),v.Lc("",e.total&&e.total.minutes?e.total.minutes:0," ",v.gc(16,17,"global.minutes")," - "),v.Bb(4),v.Lc("",e.total&&e.total.seconds?e.total.seconds:0," ",v.gc(20,19,"global.seconds"),""),v.Bb(7),v.kc("dataSource",e.dataSource),v.Bb(50),v.kc("matHeaderRowDef",e.displayedColumns),v.Bb(2),v.kc("matRowDefColumns",e.displayedColumns),v.Bb(3),v.kc("pageSizeOptions",e.pageLimit),v.Bb(3),v.kc("ngIf",e.loadingIndicator.status&&"project-report"===e.loadingIndicator.serviceName))},directives:[k.b,ve.j,ve.c,ve.e,ve.b,ve.g,ve.i,Ie.a,a.k,ve.d,ve.a,ve.f,ve.h],pipes:[r.c,ke.a],styles:[".border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1}.line-height[_ngcontent-%COMP%]{line-height:10px}"]}),t}(),Re=n("MutI");function Ee(t,e){if(1&t&&(v.Tb(0,"div",6),v.Ic(1,"\n    "),v.Ob(2,"ngx-charts-pie-chart",7),v.Ic(3,"\n  "),v.Sb()),2&t){var n=v.ec();v.Bb(2),v.kc("doughnut",n.isDoughnut)("gradient",n.gradient)("labels",n.showLabels)("legend",n.showLegend)("results",n.single)("scheme",n.colorScheme)}}function Ue(t,e){if(1&t&&(v.Tb(0,"mat-list-item",10),v.Ic(1,"\n        "),v.Tb(2,"mat-icon",11),v.Ic(3),v.Sb(),v.Ic(4,"\n\n        "),v.Tb(5,"div",12),v.Ic(6),v.Sb(),v.Ic(7,"\n\n        "),v.Tb(8,"div",13),v.Ic(9),v.fc(10,"jalali"),v.Sb(),v.Ic(11,"\n      "),v.Sb()),2&t){var n=e.$implicit,a=v.ec(2);v.Bb(3),v.Kc("\n          ",n.icon,"\n        "),v.Bb(3),v.Jc(n.logText),v.Bb(3),v.Jc(v.hc(10,3,n.creationDate,a.rtlDirection))}}function Je(t,e){if(1&t&&(v.Tb(0,"mat-list",8),v.Ic(1,"\n      "),v.Gc(2,Ue,12,6,"mat-list-item",9),v.Ic(3,"\n    "),v.Sb()),2&t){var n=v.ec();v.Bb(2),v.kc("ngForOf",n.activityList)}}function He(t,e){1&t&&(v.Tb(0,"div",14),v.Ic(1,"\n    "),v.Tb(2,"div",15),v.Ic(3,"\n      "),v.dc(),v.Tb(4,"svg",16),v.Ic(5,"\n        "),v.Tb(6,"rect",17),v.Ic(7,"\n          "),v.Ob(8,"animate",18),v.Ic(9,"\n          "),v.Ob(10,"animate",19),v.Ic(11,"\n        "),v.Sb(),v.Ic(12,"\n        "),v.Tb(13,"rect",20),v.Ic(14,"\n          "),v.Ob(15,"animate",21),v.Ic(16,"\n          "),v.Ob(17,"animate",22),v.Ic(18,"\n        "),v.Sb(),v.Ic(19,"\n        "),v.Tb(20,"rect",23),v.Ic(21,"\n          "),v.Ob(22,"animate",24),v.Ic(23,"\n          "),v.Ob(24,"animate",25),v.Ic(25,"\n        "),v.Sb(),v.Ic(26,"\n      "),v.Sb(),v.Ic(27,"\n\n      "),v.cc(),v.Tb(28,"span",26),v.Ic(29),v.fc(30,"translate"),v.Sb(),v.Ic(31,"\n    "),v.Sb(),v.Ic(32,"\n  "),v.Sb()),2&t&&(v.Bb(29),v.Jc(v.gc(30,1,"global.loading")))}var ze=function(){function t(t,e,n,a,i){var r=this;this.api=t,this.translate=e,this.messageService=n,this.refreshLoginService=a,this.loadingIndicatorService=i,this.rtlDirection=!1,this.activityList=[],this.loadingIndicator={status:!1,serviceName:"project-activity"},this.single=[],this.gradient=!1,this.showLegend=!1,this.showLabels=!0,this.isDoughnut=!1,this.colorScheme={domain:["#4caf50","#b71c1c"]},this._subscription=new o.Subscription,this._subscription.add(this.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return r.loadingIndicator=t})))}return t.prototype.ngAfterViewInit=function(){var t=this;this.getActivities().then((function(){t.single=[{name:t.getTranslate("tasks.activity.completed"),value:t.task.percentage},{name:t.getTranslate("tasks.activity.not_completed"),value:100-t.task.percentage}]}))},t.prototype.getActivities=function(){var t=this;return new Promise((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project-activity"}),t.api.accessToken=t.loginData.token_type+" "+t.loginData.access_token,t._subscription.add(t.api.getActivities(t.task.taskId).subscribe((function(n){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project-activity"}),1===n.result&&(t.createActivitiesStatements(n.contents),e(!0))}),(function(e){e.message&&t.messageService.showMessage(e.message),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project-activity"}),t.refreshLoginService.openLoginDialog(e)})))}))},t.prototype.createActivitiesStatements=function(t){var e=this;this.activityList=t.map((function(t){var n=t.user.name+" "+t.user.family,a="",i="";switch(t.logType){case 1:a=e.getTranslate("tasks.activity.created"),i="add";break;case 2:a=e.getTranslate("tasks.activity.edited"),i="edit";break;case 3:a=e.getTranslate("tasks.activity.deleted"),i="delete";break;case 4:a=e.getTranslate("tasks.activity.started"),i="play_arrow";break;case 5:a=e.getTranslate("tasks.activity.stopped"),i="stop";break;case 6:a=e.getTranslate("tasks.activity.done"),i="done";break;case 7:a=e.getTranslate("tasks.activity.described"),i="comment"}return t.logText=n+" "+a,t.icon=i,t}))},t.prototype.getTranslate=function(t){return this.translate.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(u.a),v.Nb(r.d),v.Nb(b.a),v.Nb(h.a),v.Nb(I.a))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-activity"]],inputs:{task:"task",rtlDirection:"rtlDirection",loginData:"loginData"},decls:20,vars:12,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0","full-width","full-height",3,"dir"],[1,"margin-b-full","padding-r-l","full-width","text-gray-800","font-full-em","text-weight-500","no-margin","height-35",3,"ngClass"],["class","full-width padding-b-full-2 height-200","dir","ltr",4,"ngIf"],[1,"activity-content-container","padding-r-l","overflow-y-auto","overflow-x-hide"],["class","no-padding",4,"ngIf"],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["dir","ltr",1,"full-width","padding-b-full-2","height-200"],[3,"doughnut","gradient","labels","legend","results","scheme"],[1,"no-padding"],["class","height-30 no-padding cursor-pointer margin-b-half",4,"ngFor","ngForOf"],[1,"height-30","no-padding","cursor-pointer","margin-b-half"],["mat-list-icon","",1,"no-padding","width-15","height-15","font-8-rem","text-center","line-height-15"],["mat-line","",1,"text-gray-600","font-8-rem"],["mat-line","",1,"text-italic","font-7-em"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Tb(2,"h1",1),v.Ic(3),v.fc(4,"translate"),v.Sb(),v.Ic(5,"\n  "),v.Gc(6,Ee,4,6,"div",2),v.Ic(7,"\n\n  "),v.Tb(8,"h1",1),v.Ic(9),v.fc(10,"translate"),v.Sb(),v.Ic(11,"\n  "),v.Tb(12,"div",3),v.Ic(13,"\n    "),v.Gc(14,Je,4,1,"mat-list",4),v.Ic(15,"\n  "),v.Sb(),v.Ic(16,"\n\n  "),v.Gc(17,He,33,3,"div",5),v.Ic(18,"\n"),v.Sb(),v.Ic(19,"\n")),2&t&&(v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(2),v.kc("ngClass",e.rtlDirection?"text-right":"text-left"),v.Bb(1),v.Kc("\n    ",v.gc(4,8,"tasks.activity.task_completion_percentage"),"\n  "),v.Bb(3),v.kc("ngIf",e.single.length),v.Bb(2),v.kc("ngClass",e.rtlDirection?"text-right":"text-left"),v.Bb(1),v.Kc("\n    ",v.gc(10,10,"tasks.activity.activity_list"),"\n  "),v.Bb(5),v.kc("ngIf",e.activityList.length),v.Bb(3),v.kc("ngIf",e.loadingIndicator.status&&"project-activity"===e.loadingIndicator.serviceName))},directives:[k.b,a.i,a.k,s.b,Re.a,a.j,Re.d,C.a,Re.c,_.j],pipes:[r.c,ke.a],styles:[".activity-content-container[_ngcontent-%COMP%]{height:calc(100% - 270px)}"]}),t}(),Ke=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),qe=function(){return(qe=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ve(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",16),v.ac("click",(function(){return v.wc(n),v.ec(2).deleteTask()})),v.fc(1,"translate"),v.Ic(2,"\n        "),v.Tb(3,"mat-icon",11),v.Ic(4,"delete"),v.Sb(),v.Ic(5,"\n      "),v.Sb()}2&t&&v.lc("matTooltip",v.gc(1,1,"tasks.task_detail.delete_title"))}function $e(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",17),v.ac("click",(function(){return v.wc(n),v.ec(2).editableForm()})),v.Ic(1,"\n        "),v.Tb(2,"mat-icon",11),v.Ic(3,"edit"),v.Sb(),v.Ic(4,"\n      "),v.Sb()}}function Xe(t,e){if(1&t){var n=v.Ub();v.Tb(0,"li",28),v.ac("click",(function(){v.wc(n);var t=e.last,a=e.$implicit,i=v.ec(4);return t?null:i.openTask(a.taskId)})),v.Ic(1),v.Sb()}if(2&t){var a=e.$implicit;v.kc("ngClass",e.last?"active text-gray-500":"cursor-pointer"),v.Bb(1),v.Kc("\n            ",a.taskName,"\n          ")}}function We(t,e){if(1&t&&(v.Tb(0,"nav",25),v.Ic(1,"\n\n        "),v.Tb(2,"ol",26),v.Ic(3,"\n          "),v.Gc(4,Xe,2,2,"li",27),v.Ic(5,"\n        "),v.Sb(),v.Ic(6,"\n      "),v.Sb()),2&t){var n=v.ec(3);v.kc("dir",n.rtlDirection?"rtl":"ltr"),v.Bb(4),v.kc("ngForOf",n.breadcrumbList)}}function Qe(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",18),v.Ic(1,"\n    "),v.Tb(2,"div",19),v.Ic(3,"\n      "),v.Gc(4,We,7,2,"nav",20),v.Ic(5,"\n\n      "),v.Tb(6,"div",21),v.Ic(7,"\n        "),v.Tb(8,"app-task-form",22),v.ac("cancel",(function(t){return v.wc(n),v.ec(2).cancelBtn(t)}))("formOutput",(function(t){return v.wc(n),v.ec(2).updateForm(t)})),v.Sb(),v.Ic(9,"\n      "),v.Sb(),v.Ic(10,"\n    "),v.Sb(),v.Ic(11,"\n\n    "),v.Tb(12,"div",23),v.Ic(13,"\n      "),v.Ob(14,"app-task-todo",24),v.Ic(15,"\n    "),v.Sb(),v.Ic(16,"\n  "),v.Sb()}if(2&t){var a=v.ec(2);v.Bb(2),v.kc("ngClass",a.rtlDirection?"float-right":"float-left"),v.Bb(2),v.kc("ngIf",a.breadcrumbList&&a.breadcrumbList.length>1),v.Bb(2),v.kc("ngClass",a.breadcrumbList&&a.breadcrumbList.length>1?"height-full-minus-35":"full-height"),v.Bb(2),v.kc("data",a.data)("editable",a.editable)("form",a.form),v.Bb(4),v.kc("ngClass",a.rtlDirection?"float-left":"float-right"),v.Bb(2),v.kc("loggedInUser",a.loggedInUser)("loginData",a.loginData)("rtlDirection",a.rtlDirection)("parentTaskData",a.task)}}function Ze(t,e){if(1&t&&(v.Tb(0,"div",18),v.Ic(1,"\n      "),v.Tb(2,"div",30),v.Ic(3,"\n        "),v.Ob(4,"app-task-report",31),v.Ic(5,"\n      "),v.Sb(),v.Ic(6,"\n\n      "),v.Tb(7,"div",32),v.Ic(8,"\n        "),v.Ob(9,"app-task-activity",33),v.Ic(10,"\n      "),v.Sb(),v.Ic(11,"\n    "),v.Sb()),2&t){var n=v.ec(3);v.Bb(2),v.kc("ngClass",n.rtlDirection?" float-right":" float-left"),v.Bb(2),v.kc("loginData",n.loginData)("rtlDirection",n.rtlDirection)("task",n.task)("usersList",n.usersList),v.Bb(3),v.kc("ngClass",n.rtlDirection?" float-left":" float-right"),v.Bb(2),v.kc("loginData",n.loginData)("rtlDirection",n.rtlDirection)("task",n.task)}}function tn(t,e){if(1&t&&(v.Ic(0,"\n    "),v.Gc(1,Ze,12,9,"div",29),v.Ic(2,"\n  ")),2&t){var n=v.ec(2);v.Bb(1),v.kc("ngIf",n.task)}}var en=function(t){return{"view-mode":t}};function nn(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",1),v.Ic(1,"\n  "),v.Tb(2,"div",2),v.Ic(3,"\n    "),v.Tb(4,"h1",3),v.Ic(5,"\n      "),v.Tb(6,"span",4),v.Ic(7),v.Sb(),v.Ic(8),v.Sb(),v.Ic(9,"\n\n    "),v.Tb(10,"div",5),v.Ic(11,"\n      "),v.Tb(12,"mat-button-toggle-group",6,7),v.ac("change",(function(){v.wc(n);var t=v.sc(13);return v.ec().changeViewMode(t.value)})),v.Ic(14,"\n        "),v.Tb(15,"mat-button-toggle",8),v.Ic(16,"\n          "),v.Tb(17,"span"),v.Ic(18),v.fc(19,"translate"),v.Sb(),v.Ic(20,"\n        "),v.Sb(),v.Ic(21,"\n        "),v.Tb(22,"mat-button-toggle",8),v.Ic(23,"\n          "),v.Tb(24,"span"),v.Ic(25),v.fc(26,"translate"),v.Sb(),v.Ic(27,"\n        "),v.Sb(),v.Ic(28,"\n      "),v.Sb(),v.Ic(29,"\n    "),v.Sb(),v.Ic(30,"\n\n    "),v.Tb(31,"div",9),v.Ic(32,"\n      "),v.Tb(33,"button",10),v.ac("click",(function(){return v.wc(n),v.ec().cancelBtn(!1)})),v.Ic(34,"\n        "),v.Tb(35,"mat-icon",11),v.Ic(36,"close"),v.Sb(),v.Ic(37,"\n      "),v.Sb(),v.Ic(38,"\n\n      "),v.Gc(39,Ve,6,3,"button",12),v.Ic(40,"\n\n      "),v.Gc(41,$e,5,0,"button",13),v.Ic(42,"\n    "),v.Sb(),v.Ic(43,"\n  "),v.Sb(),v.Ic(44,"\n\n  "),v.Gc(45,Qe,17,11,"div",14),v.Ic(46,"\n\n  "),v.Gc(47,tn,3,1,"ng-template",null,15,v.Hc),v.Ic(49,"\n"),v.Sb()}if(2&t){var a=v.sc(13),i=v.sc(48),r=v.ec();v.kc("dir",r.rtlDirection?"rtl":"ltr"),v.Bb(7),v.Kc("#",r.task.taskId,""),v.Bb(1),v.Kc(" ",r.task.taskName,"\n    "),v.Bb(4),v.kc("ngClass",v.oc(17,en,a))("value",r.viewModeTypes),v.Bb(3),v.kc("value","info"),v.Bb(3),v.Jc(v.gc(19,13,"tasks.task_detail.overview")),v.Bb(4),v.kc("value","report"),v.Bb(3),v.Jc(v.gc(26,15,"tasks.task_detail.reports")),v.Bb(14),v.kc("ngIf","info"===r.viewModeTypes),v.Bb(2),v.kc("ngIf","info"===r.viewModeTypes&&!r.editable),v.Bb(4),v.kc("ngIf","info"===r.viewModeTypes)("ngIfElse",i)}}var an=function(t){function e(e,n,a,i,r,s,c,l,d,u,b,f,g,p){var h=t.call(this,a,s)||this;return h.dialog=e,h.fb=n,h.injector=a,h.apiService=i,h.messageService=r,h.userInfoService=s,h.translateService=c,h.viewDirection=l,h.refreshLoginService=d,h.refreshBoardService=u,h.windowManagerService=b,h.bottomSheetDataService=f,h.loadingIndicatorService=g,h.taskEssentialInfoService=p,h.rtlDirection=!1,h.editable=!1,h.task=null,h.breadcrumbList=[],h.projectsList=[],h.usersList=[],h.projectsListNew=[],h.usersListNew=[],h.viewModeTypes="info",h._subscription=new o.Subscription,h._subscription.add(h.viewDirection.currentDirection.subscribe((function(t){h.rtlDirection=t,h.form&&h.formPatchValue()}))),h._subscription.add(h.bottomSheetDataService.currentButtonSheetData.subscribe((function(t){t&&(h.bottomSheetData=t,h.breadcrumbList=h.bottomSheetData.data.breadCrumbList&&h.bottomSheetData.data.breadCrumbList.length?h.bottomSheetData.data.breadCrumbList:[],console.log(h.breadcrumbList))}))),h}return Ke(e,t),e.prototype.onKeydownHandler=function(){this.bottomSheetData.bottomSheetRef.close()},e.prototype.ngOnInit=function(){this.data=this.bottomSheetData.data,this.usersList=this.data.usersList,this.projectsList=this.data.projectsList,this.task=this.data.task},e.prototype.ngAfterViewInit=function(){var t=this;this.createForm().then((function(){"detail"===t.data.action&&(t.formPatchValue(),t.formValidationCheck(),t.getBreadcrumbData(t.task.taskId).then((function(e){t.breadcrumbList=e})))}))},e.prototype.createForm=function(){var t=this;return new Promise((function(e){t.form=t.fb.group({taskId:new d.e(0),taskName:new d.e("",d.u.required),percentage:new d.e(0,d.u.required),assignTo:new d.e({adminId:0},d.u.required),email:new d.e("0"),taskDurationHours:new d.e(1,[d.u.required,d.u.pattern("^[0-9]+"),d.u.min(1),d.u.max(999)]),taskDurationMinutes:new d.e(0,d.u.required),startAt:new d.e("",d.u.required),stopAt:new d.e("",d.u.required),startTime:new d.e("",d.u.required),stopTime:new d.e("",d.u.required),project:new d.e({},d.u.required),taskDesc:new d.e(""),boardStatus:new d.e("",d.u.required),taskDateStart:"0000-00-00 00:00:00",taskDateStop:"0000-00-00 00:00:00",status:new d.e(0),assigner:new d.e(t.loggedInUser.email,d.u.required),trackable:new d.e(0)}),e(!0)}))},e.prototype.updateForm=function(t){this.form=t,this.submit()},e.prototype.cancelBtn=function(t){this.form.disable(),t&&"detail"===this.data.action&&this.editable?this.formPatchValue():this.bottomSheetData.bottomSheetRef.close()},e.prototype.formPatchValue=function(){var t=this;this.form.disable(),this.editable=!1;var e,n,a=this.task.startAt?this.task.startAt.split(" "):null,i=this.task.stopAt?this.task.stopAt.split(" "):null,r=a?a[1].split(":"):null,s=i?i[1].split(":"):null,o=r?r[0]+":"+r[1]:null,c=s?s[0]+":"+s[1]:null,l=this.projectsList.filter((function(e){return e.projectId===t.task.project.projectId})).pop(),d=this.usersList.filter((function(e){return e.email===t.task.assignTo.email})).pop();e="Invalid"!==a[0]?p.from(a[0],"en","YYYY-MM-DD").locale(this.rtlDirection?"fa":"en").format("YYYY/MM/DD"):null,n="Invalid"!==i[0]?p.from(i[0],"en","YYYY-MM-DD").locale(this.rtlDirection?"fa":"en").format("YYYY/MM/DD"):null,this.form.patchValue({taskId:this.task.taskId,taskName:this.task.taskName,percentage:this.task.percentage,assignTo:d,taskDurationHours:this.task.taskDurationHours,taskDurationMinutes:this.task.taskDurationMinutes,startAt:e,startTime:o,stopAt:n,stopTime:c,project:l,taskDesc:this.task.taskDesc,email:d.email,boardStatus:this.data.boardStatus,taskDateStart:this.task.taskDateStart,taskDateStop:this.task.taskDateStop,assigner:this.task.assigner,status:this.task.status,trackable:this.task.trackable})},e.prototype.formValidationCheck=function(){var t=this;this._subscription.add(this.form.get("taskName").valueChanges.subscribe((function(e){var n=t.form.get("taskName");e.trim().length?n.setErrors(null):(n.setErrors({incorrect:!0}),n.markAsTouched())}))),this._subscription.add(this.form.get("assignTo").valueChanges.subscribe((function(e){var n=t.usersList.filter((function(t){return t.adminId===e.adminId})).pop();n&&t.form.get("email").setValue(n.email)}))),this._subscription.add(this.form.get("startAt").valueChanges.subscribe((function(e){var n=t.form.get("startAt"),a=t.form.get("stopAt"),i=a.value;i&&((t.rtlDirection?p(e,"YYYY/MM/DD").isAfter(p(i,"YYYY/MM/DD")):g(e,"YYYY/MM/DD").isAfter(g(i,"YYYY/MM/DD")))?(n.setErrors({incorrect:!0}),n.markAsTouched()):(n.setErrors(null),a.setErrors(null)))}))),this._subscription.add(this.form.get("stopAt").valueChanges.subscribe((function(e){var n=t.form.get("stopAt"),a=t.form.get("startAt"),i=a.value;i&&((t.rtlDirection?p(e,"YYYY/MM/DD").isBefore(p(i,"YYYY/MM/DD")):g(e,"YYYY/MM/DD").isBefore(g(i,"YYYY/MM/DD")))?(n.setErrors({incorrect:!0}),n.markAsTouched()):(n.setErrors(null),a.setErrors(null)))})))},e.prototype.editableForm=function(){this.editable=!0,this.editable?this.form.enable():this.form.disable()},e.prototype.deleteTask=function(){var t=this;this.form.disable(),this.editable=!1;var e=this.dialog.open(re.a,{data:{title:this.getTranslate("tasks.task_detail.delete_title"),message:this.getTranslate("tasks.task_detail.delete_text")},autoFocus:!1,width:"70vh",maxWidth:"350px",panelClass:"approve-detail-dialog",height:"160px"});this._subscription.add(e.afterOpened().subscribe((function(){t.windowManagerService.dialogOnTop(e.id)}))),this._subscription.add(e.afterClosed().subscribe((function(e){e&&(t.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),t.apiService.accessToken=t.loginData.token_type+" "+t.loginData.access_token,t._subscription.add(t.apiService.deleteTask(t.task,t.loggedInUser.email).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.result?(t.bottomSheetData.bottomSheetRef.close(),t.messageService.showMessage(e.message),t.refreshBoardService.changeCurrentDoRefresh(!0)):t.messageService.showMessage(e.message)}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)}))))})))},e.prototype.submit=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"});var e=qe({},this.form.value);this.rtlDirection?(e.startAt=p.from(e.startAt,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD"),e.stopAt=p.from(e.stopAt,"fa","YYYY/MM/DD").locale("en").format("YYYY-MM-DD")):(e.startAt=g(e.startAt,"YYYY/MM/DD").format("YYYY-MM-DD"),e.stopAt=g(e.stopAt,"YYYY/MM/DD").format("YYYY-MM-DD")),e.startAt=e.startAt+" "+e.startTime+":00",e.stopAt=e.stopAt+" "+e.stopTime+":00",this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.form.disable(),this._subscription.add(this.apiService.updateTask(e).subscribe((function(n){if(t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),n.result){if(0===n.content.parentTaskId?t.bottomSheetData.bottomSheetRef.close():(t.editableForm(),t.editable=!1),"inProgress"!==t.task.boardStatus||"todo"!==e.boardStatus&&"done"!==e.boardStatus){if("todo"===t.task.boardStatus&&"done"===e.boardStatus)t.showTaskStopModal(e);else if("done"===t.task.boardStatus&&"todo"===e.boardStatus){var a=qe(qe({},e),{percentage:0,boardStatus:"todo"});t.showTaskStopModal(a)}}else t.showTaskStopModal(e);t.messageService.showMessage(n.message),t.refreshBoardService.changeCurrentDoRefresh(!0)}else t.form.enable(),t.messageService.showMessage(n.message)}),(function(e){e.message&&t.messageService.showMessage(e.message),t.form.enable(),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)})))},e.prototype.showTaskStopModal=function(t){var e=this,n=this.dialog.open(ie,{data:t,autoFocus:!1,width:"500px",height:"310px",disableClose:!0});this._subscription.add(n.afterOpened().subscribe((function(){e.windowManagerService.dialogOnTop(n.id)}))),this._subscription.add(n.afterClosed().subscribe((function(t){})))},e.prototype.openTask=function(t){var n=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.getBoardData().then((function(){n.getTaskDetail(t).then((function(t){n.bottomSheetData.bottomSheetRef.close(),n.usersListNew.map((function(e){t.assignTo.adminId===e.adminId&&(t.assignTo=e)})),n.projectsListNew.map((function(e){t.project.projectId===e.projectId&&(t.project=e)})),setTimeout((function(){var a={component:e,height:"98%",width:"95%",data:{action:"detail",usersList:n.usersListNew,projectsList:n.projectsListNew,task:t,boardStatus:t.boardStatus,breadCrumbList:n.breadcrumbList}};n.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),n.bottomSheetDataService.changeButtonSheetData(a)}),500)}))}))},e.prototype.getBoardData=function(){var t=this;return new Promise((function(e){t.usersListNew=t.taskEssentialInfoService.getUsersProjectsList.usersList,t.projectsListNew=t.taskEssentialInfoService.getUsersProjectsList.projectsList,e(!0)}))},e.prototype.getTaskDetail=function(t){var e=this;return new Promise((function(n){e._subscription.add(e.apiService.getTaskDetail(t).subscribe((function(t){t.result&&n(t.content)}),(function(t){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.refreshLoginService.openLoginDialog(t)})))}))},e.prototype.getBreadcrumbData=function(t){var e=this;return new Promise((function(n){e._subscription.add(e.apiService.getBreadcrumb(t).subscribe((function(t){1===t.result&&n(t.contents)}),(function(t){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.refreshLoginService.openLoginDialog(t)})))}))},e.prototype.getTranslate=function(t){return this.translateService.instant(t)},e.prototype.changeViewMode=function(t){this.viewModeTypes=t},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(v.Nb(f.b),v.Nb(d.d),v.Nb(v.t),v.Nb(u.a),v.Nb(b.a),v.Nb(l.a),v.Nb(r.d),v.Nb(m.a),v.Nb(h.a),v.Nb(se.a),v.Nb(wt.a),v.Nb(Dt),v.Nb(I.a),v.Nb(oe))},e.\u0275cmp=v.Hb({type:e,selectors:[["ng-component"]],hostBindings:function(t,e){1&t&&v.ac("keydown.escape",(function(t){return e.onKeydownHandler(t)}),!1,v.uc)},features:[v.yb],decls:2,vars:1,consts:[["class","full-page-size overflow-hide",3,"dir",4,"ngIf"],[1,"full-page-size","overflow-hide",3,"dir"],[1,"task-heading","clear-both","full-width","height-45","display-flex","flex-space-between"],[1,"no-margin","height-45","line-height-45","font-full-plus-one-tenth-em","text-eclipse","padding-r-l","text-pink-600","text-weight-500"],[1,"text-gray-700"],[1,"pos-abs","top-fourth-tenth","content-switcher"],[1,"full-width","mat-button-custom","line-height-20","round-corner-all",3,"ngClass","value","change"],["viewMode","matButtonToggleGroup"],[1,"overflow-hide","font-7-rem","line-height-20","height-30",3,"value"],[1,"display-flex","flex-direction-row-reverse"],["type","button",1,"no-border","cursor-pointer","no-bg","text-center","width-45","height-45","text-gray-600","no-padding",3,"click"],[1,"line-height-30"],["class","no-border cursor-pointer no-bg text-center width-45 height-45 text-red-400 no-padding","type","button",3,"matTooltip","click",4,"ngIf"],["class","no-border cursor-pointer no-bg text-center width-45 height-45 text-green-400 no-padding","type","button",3,"click",4,"ngIf"],["class","full-width height-full-minus-45",4,"ngIf","ngIfElse"],["reportView",""],["type","button",1,"no-border","cursor-pointer","no-bg","text-center","width-45","height-45","text-red-400","no-padding",3,"matTooltip","click"],["type","button",1,"no-border","cursor-pointer","no-bg","text-center","width-45","height-45","text-green-400","no-padding",3,"click"],[1,"full-width","height-full-minus-45"],[1,"task-form-container","full-height","overflow-hide","pos-rel",3,"ngClass"],["class","breadcrumb-container height-35 padding-r-l padding-t-half padding-b-half",3,"dir",4,"ngIf"],[1,"padding-full",3,"ngClass"],[3,"data","editable","form","cancel","formOutput"],[1,"task-todo-container","full-height","padding-r-l","padding-mini-t-b","pos-rel",3,"ngClass"],[3,"loggedInUser","loginData","rtlDirection","parentTaskData"],[1,"breadcrumb-container","height-35","padding-r-l","padding-t-half","padding-b-half",3,"dir"],[1,"breadcrumb","breadcrumb-scroll","no-margin","no-list-style","no-radius","no-padding","display-flex"],["class","breadcrumb-item white-space-no-wrap font-8-em text-orange-400 display-flex",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"breadcrumb-item","white-space-no-wrap","font-8-em","text-orange-400","display-flex",3,"ngClass","click"],["class","full-width height-full-minus-45",4,"ngIf"],[1,"task-report-container","padding-r-l","padding-mini-t-b","full-height","pos-rel",3,"ngClass"],[3,"loginData","rtlDirection","task","usersList"],[1,"task-activity-container","full-height","padding-r-l","padding-mini-t-b","pos-rel",3,"ngClass"],[3,"loginData","rtlDirection","task"]],template:function(t,e){1&t&&(v.Gc(0,nn,50,19,"div",0),v.Ic(1,"\n")),2&t&&v.kc("ngIf",e.data)},directives:[a.k,k.b,ce.b,a.i,ce.a,C.a,le.a,Q,me,a.j,Ge,ze],pipes:[r.c],styles:['[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.content-switcher[_ngcontent-%COMP%]{transform:translate(-50%);left:50%}.full-page-size[_ngcontent-%COMP%]{width:100vw;height:90vh;max-width:100%;max-height:100%}.task-heading[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1}.task-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:450px}.task-form-container[_ngcontent-%COMP%], .task-report-container[_ngcontent-%COMP%]{width:65%}.task-activity-container[_ngcontent-%COMP%], .task-todo-container[_ngcontent-%COMP%]{width:35%;background-color:#f5f5f5}.task-file-container[_ngcontent-%COMP%]{height:155px;border-top:1px solid #ddd;background-color:#eee}.breadcrumb-container[_ngcontent-%COMP%]{background-color:#f5f5f5}.breadcrumb[_ngcontent-%COMP%]{flex-wrap:wrap;background-color:transparent}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item.active[_ngcontent-%COMP%]{color:#e4a786!important}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;color:#e65100;content:"/";padding:0 .25rem}']}),e}(c.a),rn=n("zkoq"),sn=n("Xa2L"),on=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),cn=function(){return(cn=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ln=["searchBox"];function dn(t,e){if(1&t){var n=v.Ub();v.Tb(0,"mat-grid-tile",4),v.Ic(1,"\n    "),v.Tb(2,"div",5),v.Ic(3,"\n      "),v.Tb(4,"span",6),v.Ic(5,"\n        "),v.Tb(6,"mat-icon",7),v.Ic(7),v.Sb(),v.Ic(8,"\n      "),v.Sb(),v.Ic(9,"\n\n      "),v.Tb(10,"span",8),v.Ic(11),v.fc(12,"translate"),v.Sb(),v.Ic(13,"\n\n      "),v.Tb(14,"a",9),v.ac("click",(function(){v.wc(n);var t=e.$implicit,a=v.ec(2);return a.showFilterArgs[t.id]=!0,a.focusSearchBox(t.id)})),v.Ic(15,"\n        "),v.Tb(16,"mat-icon",10),v.Ic(17,"search"),v.Sb(),v.Ic(18,"\n      "),v.Sb(),v.Ic(19,"\n\n      "),v.Tb(20,"span",11),v.Ic(21),v.Sb(),v.Ic(22,"\n\n      "),v.Tb(23,"div",12),v.Ic(24,"\n        "),v.Tb(25,"mat-icon",13),v.Ic(26,"\n          search\n        "),v.Sb(),v.Ic(27,"\n\n        "),v.Tb(28,"input",14,15),v.ac("ngModelChange",(function(t){v.wc(n);var a=e.$implicit;return v.ec(2).filterArgs[a.id]=t}))("keydown",(function(t){v.wc(n);var a=e.$implicit,i=v.ec(2);return"Escape"===t.code&&(i.showFilterArgs[a.id]=!1),"Escape"===t.code?i.filterArgs[a.id]=null:""})),v.fc(30,"translate"),v.fc(31,"translate"),v.Sb(),v.Ic(32,"\n\n        "),v.Tb(33,"mat-icon",16),v.ac("click",(function(){v.wc(n);var t=e.$implicit,a=v.ec(2);return a.filterArgs[t.id]=null,a.showFilterArgs[t.id]=!1})),v.Ic(34,"\n          close\n        "),v.Sb(),v.Ic(35,"\n      "),v.Sb(),v.Ic(36,"\n    "),v.Sb(),v.Ic(37,"\n  "),v.Sb()}if(2&t){var a=e.$implicit,i=v.ec(2);v.kc("colspan",a.cols)("rowspan",a.rows),v.Bb(7),v.Jc(a.icon),v.Bb(4),v.Jc(v.gc(12,14,a.name)),v.Bb(3),v.kc("ngClass",i.rtlDirection?"margin-l-full margin-r-auto":"margin-r-full margin-l-auto"),v.Bb(6),v.kc("ngClass",a.id),v.Bb(1),v.Kc("\n        ",a.tasks.length,"\n      "),v.Bb(2),v.kc("ngClass",i.showFilterArgs[a.id]?"display-flex":"display-none"),v.Bb(2),v.kc("ngClass",i.rtlDirection?"right-half":"left-half"),v.Bb(3),v.mc("placeholder","",v.gc(30,16,"tasks.boards.search_in")," ",v.gc(31,18,a.name),""),v.kc("ngModel",i.filterArgs[a.id]),v.Cb("aria-label",a.id),v.Bb(5),v.kc("ngClass",i.rtlDirection?"left-half":"right-half")}}function un(t,e){if(1&t&&(v.Tb(0,"mat-grid-list",2),v.Ic(1,"\n  "),v.Gc(2,dn,38,20,"mat-grid-tile",3),v.Ic(3,"\n"),v.Sb()),2&t){var n=v.ec();v.kc("dir",n.rtlDirection?"rtl":"ltr"),v.Bb(2),v.kc("ngForOf",n.boards)}}function bn(t,e){if(1&t&&(v.Tb(0,"div",23),v.Ic(1,"\n        "),v.Ob(2,"img",24),v.Ic(3,"\n        "),v.Tb(4,"span",25),v.Ic(5),v.fc(6,"translate"),v.Sb(),v.Ic(7,"\n      "),v.Sb()),2&t){var n=v.ec().$implicit;v.Bb(2),v.kc("src","assets/board-empty-state/"+n.id+".png",v.yc)("alt",n.id),v.Bb(3),v.Kc("\n          ",v.gc(6,3,"global.no_result"),"\n        ")}}function fn(t,e){if(1&t&&(v.Tb(0,"span",41),v.fc(1,"translate"),v.Ic(2,"\n            "),v.Tb(3,"mat-icon",42),v.Ic(4,"\n              rule\n            "),v.Sb(),v.Ic(5),v.Sb()),2&t){var n=v.ec().$implicit,a=v.ec(3);v.lc("matTooltip",v.gc(1,5,"tasks.boards.todo_count")),v.kc("ngClass",a.rtlDirection?"margin-l-full margin-r-auto":"margin-r-full margin-l-auto")("matTooltipPosition",a.rtlDirection?"right":"left"),v.Bb(5),v.Lc("\n            ",n.todoCountDone,"/",n.todoCount+n.todoCountDone,"\n          ")}}var gn=function(t){return{"overdue-task":t}};function pn(t,e){if(1&t){var n=v.Ub();v.Tb(0,"mat-card",26),v.ac("click",(function(){v.wc(n);var t=e.$implicit,a=v.ec().$implicit;return v.ec(2).showTaskDetail(t,a.id)})),v.fc(1,"translate"),v.Ic(2,"\n        "),v.Tb(3,"mat-card-header",27),v.Ic(4,"\n          "),v.Tb(5,"mat-card-subtitle",28),v.Ic(6,"\n            "),v.Tb(7,"span",29),v.Ic(8,"\n              "),v.Tb(9,"mat-icon",30),v.Ic(10,"access_alarm"),v.Sb(),v.Ic(11),v.fc(12,"jalali"),v.Sb(),v.Ic(13,"\n\n            "),v.Tb(14,"span"),v.Ic(15),v.Sb(),v.Ic(16,"\n          "),v.Sb(),v.Ic(17,"\n          "),v.Tb(18,"mat-card-title",31),v.Ic(19),v.Sb(),v.Ic(20,"\n        "),v.Sb(),v.Ic(21,"\n\n        "),v.Tb(22,"mat-card-content",32),v.Ic(23,"\n          "),v.Tb(24,"mat-icon",30),v.Ic(25,"work\n          "),v.Sb(),v.Ic(26),v.Sb(),v.Ic(27,"\n\n        "),v.Tb(28,"mat-card-footer",33),v.Ic(29,"\n          "),v.Tb(30,"span",34),v.Ic(31,"\n            "),v.Tb(32,"img",35),v.ac("error",(function(t){return t.target.src="assets/profileImg/0.jpg"})),v.Sb(),v.Ic(33,"\n            "),v.Tb(34,"span",36),v.Ic(35),v.Sb(),v.Ic(36,"\n          "),v.Sb(),v.Ic(37,"\n\n          "),v.Gc(38,fn,6,7,"span",37),v.Ic(39,"\n\n          "),v.Tb(40,"span",38),v.fc(41,"translate"),v.Ic(42,"\n            "),v.Tb(43,"span",39),v.Ic(44),v.Sb(),v.Ic(45,"\n            "),v.Tb(46,"mat-progress-spinner",40),v.Ic(47,"\n            "),v.Sb(),v.Ic(48,"\n          "),v.Sb(),v.Ic(49,"\n        "),v.Sb(),v.Ic(50,"\n      "),v.Sb()}if(2&t){var a=e.$implicit,i=v.ec(3);v.lc("matTooltip",a.overdue?v.gc(1,21,"tasks.boards.overdue"):null),v.kc("ngClass",v.oc(28,gn,a.overdue))("cdkDragData",a)("cdkDragDisabled",a.assignTo.email!==i.loggedInUser.email),v.Bb(9),v.kc("ngClass",i.rtlDirection?"margin-l-half":"margin-r-half"),v.Bb(2),v.Kc("\n              ",v.hc(12,23,a.stopAt,i.rtlDirection),"\n            "),v.Bb(4),v.Kc("\n              #",a.taskId,"\n            "),v.Bb(4),v.Kc("\n            ",a.taskName,"\n          "),v.Bb(5),v.kc("ngClass",i.rtlDirection?"margin-l-half":"margin-r-half"),v.Bb(2),v.Kc("\n          ",a.project.projectName,"\n        "),v.Bb(6),v.kc("src","assets/profileImg/"+a.assignTo.email+".jpg",v.yc)("alt",a.assignTo.name+" "+a.assignTo.family),v.Bb(3),v.Kc("\n              ",a.assignTo.name+" "+a.assignTo.family,"\n            "),v.Bb(3),v.kc("ngIf",a.todoCount+a.todoCountDone),v.Bb(2),v.lc("matTooltip",v.gc(41,26,"tasks.boards.task_percentage")),v.kc("matTooltipPosition",i.rtlDirection?"right":"left"),v.Bb(4),v.Kc("\n              ",a.percentage,"\n            "),v.Bb(2),v.kc("ngClass",i.getColor(a.percentage))("diameter",25)("strokeWidth",2)("value",a.percentage)}}function hn(t,e){if(1&t){var n=v.Ub();v.Tb(0,"mat-grid-tile",19),v.Ic(1,"\n    "),v.Tb(2,"div",20),v.ac("cdkDropListDropped",(function(t){return v.wc(n),v.ec(2).changeStatus(t)})),v.Ic(3,"\n      "),v.Gc(4,bn,8,5,"div",21),v.Ic(5,"\n\n      "),v.Gc(6,pn,51,30,"mat-card",22),v.fc(7,"myFilter"),v.Ic(8,"\n    "),v.Sb(),v.Ic(9,"\n  "),v.Sb()}if(2&t){var a=e.$implicit,i=v.ec(2);v.kc("colspan",a.cols)("rowspan",a.rows),v.Bb(2),v.kc("id",a.id)("cdkDropListData",a.tasks)("cdkDropListConnectedTo",i.connectedTo),v.Bb(2),v.kc("ngIf",!a.tasks.length),v.Bb(2),v.kc("ngForOf",v.hc(7,7,a.tasks,i.filterArgs[a.id]))}}function mn(t,e){if(1&t&&(v.Tb(0,"mat-grid-list",17),v.Ic(1,"\n  "),v.Gc(2,hn,10,10,"mat-grid-tile",18),v.Ic(3,"\n"),v.Sb()),2&t){var n=v.ec();v.Bb(2),v.kc("ngForOf",n.boards)}}var In=function(t){function e(e,n,a,i,r,s,c,l,d,u,b,f,g){var p=t.call(this,n,r)||this;return p.dialog=e,p.injector=n,p.apiService=a,p.messageService=i,p.userInfoService=r,p.currentTaskService=s,p.refreshLoginService=c,p.refreshBoardService=l,p.windowManagerService=d,p.bottomSheetDataService=u,p.loadingIndicatorService=b,p.taskEssentialInfoService=f,p.ignoreAutoRefreshService=g,p.pushTaskEssentialInfo=new v.o,p.resetFilter=new v.o,p.rtlDirection=!1,p.refreshData=!1,p.myTasks=[],p.rowHeight="0",p.connectedTo=[],p.boards=[],p.usersList=[],p.projectsList=[],p.currentTasks=null,p.filterArgs=null,p.showFilterArgs=null,p.timerDueTime=0,p.timerPeriod=12e4,p.globalTimer=null,p._subscription=new o.Subscription,p._subscription.add(p.currentTaskService.currentTask.subscribe((function(t){return p.currentTasks=t}))),p._subscription.add(p.refreshBoardService.currentDoRefresh.subscribe((function(t){t&&(p.doResetFilter(),p.clearTimer(),setTimeout((function(){return p.startTimer()}),200))}))),p._subscription.add(p.userInfoService.currentLoginData.subscribe((function(){p.doResetFilter(),p.clearTimer(),setTimeout((function(){return p.startTimer()}),200)}))),p._subscription.add(p.ignoreAutoRefreshService.currentAutoRefresh.subscribe((function(t){t?p.clearTimer():(p.clearTimer(),setTimeout((function(){return p.startTimer()}),200))}))),p}return on(e,t),e.prototype.ngOnInit=function(){this.rowHeight="100%",this.resetColumnFilter()},e.prototype.resetColumnFilter=function(){this.filterArgs={todo:null,inProgress:null,done:null},this.showFilterArgs={todo:!1,inProgress:!1,done:!1}},e.prototype.changeStatus=function(t){var e=this;if(t.previousContainer===t.container)Object(te.e)(t.container.data,t.previousIndex,t.currentIndex);else{this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),Object(te.f)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex);var n=t.item.data;this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.taskChangeStatus(n,t.container.id).subscribe((function(n){e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),n.result&&e.assignNewTaskToBoard(n.content,t.previousContainer.id,t.container.id),n.message&&e.messageService.showMessage(n.message)}),(function(t){t.message&&e.messageService.showMessage(t.message,"error"),e.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),e.refreshLoginService.openLoginDialog(t)})))}},e.prototype.assignNewTaskToBoard=function(t,e,n){var a=this,i=this.projectsList.filter((function(e){return e.projectId===t.project.projectId})).pop(),r=this.usersList.filter((function(e){return e.adminId===t.assignTo.adminId})).pop();if(this.myTasks=[],this.boards.map((function(e){e.id===n&&e.tasks.map((function(e){return e.taskId===t.taskId&&(t.assignTo=r,t.project=i,e=Object.assign(e,t)),e.assignTo.email===a.loggedInUser.email&&"inProgress"===n&&a.myTasks.push(e),e}))})),this.myTasks.length)this.currentTaskService.changeCurrentTask(this.myTasks),this.myTasks=[];else if(this.currentTasks.length){if("inProgress"!==t.boardStatus){var s=this.currentTasks.findIndex((function(e){return e.taskId===t.taskId}));this.currentTasks.splice(s,1),this.currentTaskService.changeCurrentTask(this.currentTasks)}}else this.currentTaskService.changeCurrentTask(null);if("inProgress"!==e||"todo"!==n&&"done"!==n){if("todo"===e&&"done"===n)this.showTaskStopModal(t);else if("done"===e&&"todo"===n){var o=cn(cn({},t),{percentage:0,boardStatus:"todo"});this.showTaskStopModal(o)}}else this.showTaskStopModal(t);this.resetColumnFilter()},e.prototype.showTaskStopModal=function(t){var e=this,n=this.dialog.open(ie,{data:t,autoFocus:!1,width:"500px",height:"310px",disableClose:!0});this._subscription.add(n.afterOpened().subscribe((function(){e.windowManagerService.dialogOnTop(n.id)}))),this._subscription.add(n.afterClosed().subscribe((function(t){t&&(e.getBoards(),e.doResetFilter())})))},e.prototype.showTaskDetail=function(t,e){var n={bottomSheetRef:this.bottomSheetRef,component:an,height:"98%",width:"95%",data:{action:"detail",usersList:this.usersList,projectsList:this.projectsList,task:t,boardStatus:e,boardsList:this.boards}};this.clearTimer(),this.bottomSheetDataService.changeButtonSheetData(n)},e.prototype.putTasksToAllBoards=function(t){var e=this,n=[],a=[],i=[];this.boards=[],this.connectedTo=[],this.usersList=t.contents.users.list,this.projectsList=t.contents.projects.list,this.pushTaskEssentialInfo.emit({usersList:this.usersList,projectsList:this.projectsList}),this.myTasks=[],t.contents.boards.list.map((function(t){t.assignTo.email===e.loggedInUser.email&&"inProgress"===t.boardStatus&&e.myTasks.push(t);var r=t.stopAt,s=new Date,o=g(s).format("YYYY-MM-DD HH:mm:ss"),c=g.utc(r,"YYYY-MM-DD HH:mm:ss").isSameOrBefore(o);switch(t.boardStatus){case"todo":t.overdue=c,n.push(t);break;case"inProgress":t.overdue=c,a.push(t);break;case"done":i.push(t)}})),this.boards.push({id:"todo",cols:1,rows:1,name:"tasks.boards.todo",icon:"add_task",tasks:n}),this.boards.push({id:"inProgress",cols:1,rows:1,name:"tasks.boards.in_progress",icon:"playlist_play",tasks:a}),this.boards.push({id:"done",cols:1,rows:1,name:"tasks.boards.done",icon:"done_all",tasks:i});for(var r=0,s=this.boards;r<s.length;r++)this.connectedTo.push(s[r].id);this.currentTaskService.changeCurrentTask(this.myTasks),this.myTasks=[],this.resetColumnFilter()},e.prototype.getBoards=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.loginData&&this.loginData.token_type&&(this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.boards(this.loggedInUser.email).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),1===e.result&&(t.taskEssentialInfoService.changeUsersProjectsList({usersList:e.contents.users.list,projectsList:e.contents.projects.list}),t.putTasksToAllBoards(e),t.resetColumnFilter())}),(function(e){e.message&&t.messageService.showMessage(e.message,"error"),t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)}))))},e.prototype.getColor=function(t){return t<10&&t>=0?"spinner-color-red":t<=30&&t>10?"spinner-color-redorange":t<=50&&t>30?"spinner-color-orange":t<=80&&t>50?"spinner-color-lightgreen":t>80?"spinner-color-green":void 0},e.prototype.doResetFilter=function(){this.resetFilter.emit(!0)},e.prototype.focusSearchBox=function(t){this.searchBoxes.toArray().map((function(e){var n=e.nativeElement;n.getAttribute("aria-label")===t&&setTimeout((function(){return n.focus()}),0)}))},e.prototype.startTimer=function(){var t=this;this.globalTimer&&(this.globalTimer=null),this.globalTimer=Object(Zt.a)(this.timerDueTime,this.timerPeriod),this.globalTimerSubscription&&this.globalTimerSubscription.unsubscribe(),this.globalTimerSubscription=this.globalTimer.subscribe((function(){t.globalTimer&&t.getBoards()}))},e.prototype.clearTimer=function(){this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)},e.prototype.ngOnChanges=function(t){var e=this;this.refreshData&&(this.doResetFilter(),this.clearTimer(),setTimeout((function(){return e.startTimer()}),200)),t.filterBoards&&!t.filterBoards.firstChange&&(this.filterBoards=t.filterBoards.currentValue,this.putTasksToAllBoards(this.filterBoards.resp),this.clearTimer()),t.pushTaskToBoard&&!t.pushTaskToBoard.firstChange&&(this.pushTaskToBoard=t.pushTaskToBoard.currentValue,this.assignNewTaskToBoard(this.pushTaskToBoard.task,this.pushTaskToBoard.prevContainer,this.pushTaskToBoard.newContainer))},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe(),this.clearTimer()},e.\u0275fac=function(t){return new(t||e)(v.Nb(f.b),v.Nb(v.t),v.Nb(u.a),v.Nb(b.a),v.Nb(l.a),v.Nb(at.a),v.Nb(h.a),v.Nb(se.a),v.Nb(wt.a),v.Nb(Dt),v.Nb(I.a),v.Nb(oe),v.Nb(Ct))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-task-board"]],viewQuery:function(t,e){var n;1&t&&v.Nc(ln,!0),2&t&&v.rc(n=v.bc())&&(e.searchBoxes=n)},inputs:{pushTaskToBoard:"pushTaskToBoard",rtlDirection:"rtlDirection",refreshData:"refreshData",filterBoards:"filterBoards",bottomSheetRef:"bottomSheetRef"},outputs:{pushTaskEssentialInfo:"pushTaskEssentialInfo",resetFilter:"resetFilter"},features:[v.yb,v.zb],decls:4,vars:2,consts:[["cols","3","gutterSize","10","rowHeight","40px",3,"dir",4,"ngIf"],["class","grid-height","cols","3","gutterSize","10","rowHeight","fit",4,"ngIf"],["cols","3","gutterSize","10","rowHeight","40px",3,"dir"],["class","board-container round-corner-top",3,"colspan","rowspan",4,"ngFor","ngForOf"],[1,"board-container","round-corner-top",3,"colspan","rowspan"],[1,"board-name","pos-abs","top-0","right-0","full-width","full-height","padding-mini-t-b","padding-mini-r-l","display-flex","flex-space-between","align-items-center","pos-rel"],[1,"flex-center"],[1,"text-gray-600","width-20","height-20","font-full-plus-half-em"],[1,"font-9-em","padding-mini-r-l"],[1,"cursor-pointer","full-height",3,"ngClass","click"],[1,"text-blue-700"],[1,"task-count","width-25","height-25","line-height-20","font-7-em","text-center","text-weight-500",3,"ngClass"],[1,"full-width","full-height","flex-space-between","align-items-center","pos-abs","top-0","bottom-0","left-0","right-0",3,"ngClass"],[1,"pos-abs","width-25","height-25","line-height-20","font-full-plus-two-tenth-em","flex-center",3,"ngClass"],[1,"font-9-em","full-width","full-height","no-border","padding-r-l-two-plus-half","no-margin","round-corner-top",3,"ngModel","placeholder","ngModelChange","keydown"],["searchBox",""],[1,"pos-abs","width-25","height-25","line-height-20","font-full-plus-two-tenth-em","flex-center","cursor-pointer",3,"ngClass","click"],["cols","3","gutterSize","10","rowHeight","fit",1,"grid-height"],["class","board-container",3,"colspan","rowspan",4,"ngFor","ngForOf"],[1,"board-container",3,"colspan","rowspan"],["cdkDropList","",1,"task-container","full-height","full-width","padding-full","overflow-x-hide","overflow-y-auto",3,"id","cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["class","flex-center full-width full-height pos-abs left-0 right-0 top-0 bottom-0 z-index-0",4,"ngIf"],["class","margin-b-full bg-white card-hover cursor-pointer","cdkDrag","",3,"ngClass","cdkDragData","cdkDragDisabled","matTooltip","click",4,"ngFor","ngForOf"],[1,"flex-center","full-width","full-height","pos-abs","left-0","right-0","top-0","bottom-0","z-index-0"],[1,"width-250",3,"src","alt"],[1,"pos-abs","left-0","right-0","bottom-0","top-0","z-index-0","margin-auto","text-gray-400","font-8-rem","full-width","height-45","line-height-150","text-center"],["cdkDrag","",1,"margin-b-full","bg-white","card-hover","cursor-pointer",3,"ngClass","cdkDragData","cdkDragDisabled","matTooltip","click"],[1,"full-width"],[1,"full-width","height-30","text-gray-600","display-flex","flex-space-between","no-margin"],[1,"display-flex"],[1,"width-18","height-18","font-full-plus-three-tenth-em",3,"ngClass"],[1,"full-width","clear-both","text-pink-600","font-full-em","padding-t-half"],[1,"text-gray-600","margin-b-half","display-flex"],[1,"padding-mini-t-b","padding-r-l","height-45","display-flex","flex-space-between"],[1,"display-flex","align-items-center"],[1,"display-block","width-25","height-25","round-corner-all","mat-elevation-z1",3,"src","alt","error"],[1,"display-block","full-height","line-height-25","padding-mini-r-l","text-eclipse","width-150"],["class","display-flex padding-tiny-t-b",3,"ngClass","matTooltip","matTooltipPosition",4,"ngIf"],[1,"width-25","height-25","round-corner-all","mat-elevation-z1","pos-rel",3,"matTooltip","matTooltipPosition"],[1,"font-6-em","text-gray-800","pos-abs","left-0","right-0","top-0","bottom-0","margin-auto","text-center","line-height-25","text-weight-500"],["color","accent",3,"ngClass","diameter","strokeWidth","value"],[1,"display-flex","padding-tiny-t-b",3,"ngClass","matTooltip","matTooltipPosition"],[1,"width-18","height-18","font-full-plus-three-tenth-em","line-height-20","margin-mini-r-l"]],template:function(t,e){1&t&&(v.Gc(0,un,4,2,"mat-grid-list",0),v.Ic(1,"\n"),v.Gc(2,mn,4,1,"mat-grid-list",1),v.Ic(3,"\n")),2&t&&(v.kc("ngIf",e.boards.length),v.Bb(2),v.kc("ngIf",e.boards.length))},directives:function(){return[a.k,rn.a,k.b,a.j,rn.c,C.a,a.i,d.c,d.n,d.q,te.c,de.a,te.a,le.a,de.e,de.g,de.h,de.c,de.d,sn.a]},pipes:function(){return[r.c,vn,ke.a]},styles:[".board-container[_ngcontent-%COMP%]{border:1px solid #ddd;background:#f8f8f8}.board-container[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]{align-self:start}.grid-height[_ngcontent-%COMP%]{height:calc(100% - 40px)}.line-height-22[_ngcontent-%COMP%]{line-height:22px!important}.task-count[_ngcontent-%COMP%]{border-radius:100px!important}.task-count.todo[_ngcontent-%COMP%]{border:2px solid #f44336;color:#f44336}.task-count.inProgress[_ngcontent-%COMP%]{border:2px solid #ffa000;color:#ffa000}.task-count.done[_ngcontent-%COMP%]{border:2px solid #388e3c;color:#388e3c}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.task-item[_ngcontent-%COMP%]:last-child{border:none}.tasks-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.mat-card[_ngcontent-%COMP%]:hover{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-card-footer[_ngcontent-%COMP%]{border-top:1px solid #ddd}.mat-card-footer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #ddd}.overdue-task[_ngcontent-%COMP%]{border:1px solid #f44336;border-radius:5px;box-shadow:0 4px 10px -4px #f44336}.padding-r-l-two-plus-half[_ngcontent-%COMP%]{padding-right:2.5em;padding-left:2.5em}"]}),e}(c.a),vn=function(){function t(){}return t.prototype.transform=function(t,e){return t&&e?t.filter((function(t){return t.taskName.toLowerCase().includes(e.toLowerCase())||t.project.projectName.toLowerCase().includes(e.toLowerCase())||t.assigner.toLowerCase().includes(e.toLowerCase())||t.assignTo.name.toLowerCase().includes(e.toLowerCase())||t.assignTo.family.toLowerCase().includes(e.toLowerCase())||t.assignTo.email.toLowerCase().includes(e.toLowerCase())?t:void 0})):t},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=v.Mb({name:"myFilter",type:t,pure:!1}),t}();function kn(t,e){if(1&t&&(v.Ic(0,"\n      "),v.Tb(1,"h3",10),v.Ic(2,"\n        "),v.Tb(3,"mat-icon",11),v.Ic(4),v.Sb(),v.Ic(5),v.Sb(),v.Ic(6,"\n    ")),2&t){var n=v.ec();v.Bb(3),v.kc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half"),v.Bb(1),v.Jc(n.data.icon),v.Bb(1),v.Kc("\n        ",n.rtlDirection?n.data.name_fa:n.data.name,"\n      ")}}function Sn(t,e){if(1&t&&(v.Ic(0,"\n      "),v.Tb(1,"h3",12),v.Ic(2,"\n        "),v.Tb(3,"mat-icon",11),v.Ic(4),v.Sb(),v.Ic(5),v.Sb(),v.Ic(6,"\n    ")),2&t){var n=v.ec();v.Bb(3),v.kc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half"),v.Bb(1),v.Jc(n.data.icon),v.Bb(1),v.Kc("\n        ",n.rtlDirection?n.data.name_fa:n.data.name,"\n      ")}}function Tn(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",13),v.ac("click",(function(t){return v.wc(n),v.ec().minimize(),t.stopPropagation()})),v.Ic(1,"\n        "),v.Tb(2,"mat-icon",8),v.Ic(3,"\n          minimize\n        "),v.Sb(),v.Ic(4,"\n      "),v.Sb()}}function wn(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",7),v.ac("click",(function(t){return v.wc(n),v.ec().restore(),t.stopPropagation()})),v.Ic(1,"\n        "),v.Tb(2,"mat-icon",8),v.Ic(3,"\n          filter_none\n        "),v.Sb(),v.Ic(4,"\n      "),v.Sb()}}function yn(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",7),v.ac("click",(function(t){return v.wc(n),v.ec().maximize(),t.stopPropagation()})),v.Ic(1,"\n        "),v.Tb(2,"mat-icon",8),v.Ic(3,"\n          crop_square\n        "),v.Sb(),v.Ic(4,"\n      "),v.Sb()}}var Dn=function(){function t(t,e){var n=this;this.windowManagerService=t,this.viewDirection=e,this.rtlDirection=!1,this._subscription=new o.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return n.rtlDirection=t})))}return t.prototype.ngOnInit=function(){var t=this;this._subscription.add(this.windowManagerService.windowsList.subscribe((function(e){t.windowInstance=e.filter((function(e){return e.windowService.service_name===t.data.service_name})).pop()})))},t.prototype.activeWindow=function(){this.windowManagerService.activeWindow(this.data)},t.prototype.minimize=function(){this.windowManagerService.minimizeWindow(this.data)},t.prototype.maximize=function(){this.windowManagerService.maximizeWindow(this.data)},t.prototype.restore=function(){this.windowManagerService.restoreWindow(this.data)},t.prototype.close=function(){this.windowManagerService.closeWindow(this.data)},t.prototype.centerWindow=function(){this.windowManagerService.centerWindow()},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(wt.a),v.Nb(m.a))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-window"]],decls:31,vars:7,consts:[[1,"pos-abs","left-0","right-0","bottom-0","top-0","full-width",3,"dir","click"],["cdkDrag","","cdkDragBoundary",".dashboard-app-boundary","cdkDragRootElement",".cdk-overlay-pane",1,"window-heading","full-width","height-45","padding-mini-r-l","display-flex","align-items-center",3,"dblclick"],[3,"ngIfElse","ngIf"],["notDraggableHeading",""],[1,"window-actions","display-flex",3,"ngClass"],["class","width-30 height-30 text-center line-height-25 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],["class","width-30 height-30 text-center line-height-35 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],[1,"width-30","height-30","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"],[1,"text-dark-mode-color","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],[1,"window-content","pos-rel"],["cdkDragHandle","",1,"window-title","full-width","full-height","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex","align-items-center","no-margin"],[1,"text-dark-mode-color","pos-rel",3,"ngClass"],[1,"window-title","full-width","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex","align-items-center","no-margin"],[1,"width-30","height-30","text-center","line-height-25","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"]],template:function(t,e){if(1&t&&(v.Tb(0,"div",0),v.ac("click",(function(){return e.activeWindow()})),v.Ic(1,"\n  "),v.Tb(2,"div",1),v.ac("dblclick",(function(){return e.windowInstance.isMaximized?e.restore():e.maximize()})),v.Ic(3,"\n    "),v.Gc(4,kn,7,3,"ng-template",2),v.Ic(5,"\n\n    "),v.Gc(6,Sn,7,3,"ng-template",null,3,v.Hc),v.Ic(8,"\n\n    "),v.Tb(9,"div",4),v.Ic(10,"\n      "),v.Gc(11,Tn,5,0,"button",5),v.Ic(12,"\n      "),v.Gc(13,wn,5,0,"button",6),v.Ic(14,"\n      "),v.Gc(15,yn,5,0,"button",6),v.Ic(16,"\n      "),v.Tb(17,"button",7),v.ac("click",(function(t){return e.close(),t.stopPropagation()})),v.Ic(18,"\n        "),v.Tb(19,"mat-icon",8),v.Ic(20,"close\n        "),v.Sb(),v.Ic(21,"\n      "),v.Sb(),v.Ic(22,"\n    "),v.Sb(),v.Ic(23,"\n  "),v.Sb(),v.Ic(24,"\n  "),v.Tb(25,"div",9),v.Ic(26,"\n    "),v.Ob(27,"app-task-main"),v.Ic(28,"\n  "),v.Sb(),v.Ic(29,"\n"),v.Sb(),v.Ic(30,"\n")),2&t){var n=v.sc(7);v.kc("dir",e.rtlDirection?"rtl":"ltr"),v.Bb(4),v.kc("ngIfElse",n)("ngIf",e.windowInstance.isDraggable),v.Bb(5),v.kc("ngClass",e.rtlDirection?" margin-r-auto":" margin-l-auto"),v.Bb(2),v.kc("ngIf",!e.windowInstance.isMinimized),v.Bb(2),v.kc("ngIf",e.windowInstance.isMaximized||e.windowInstance.isMinimized),v.Bb(2),v.kc("ngIf",!e.windowInstance.isMaximized&&!e.windowInstance.isMinimized)}},directives:[k.b,te.a,a.k,a.i,C.a,Qt,te.b],encapsulation:2}),t}();function xn(t,e){if(1&t){var n=v.Ub();v.Tb(0,"button",4),v.ac("click",(function(){v.wc(n);var t=e.$implicit;return v.ec(2).showTask(t)})),v.Ic(1,"\n      "),v.Tb(2,"mat-icon",5),v.Ic(3,"play_arrow\n      "),v.Sb(),v.Ic(4,"\n      "),v.Tb(5,"span",6),v.Ic(6),v.Sb(),v.Ic(7,"\n    "),v.Sb()}if(2&t){var a=e.$implicit,i=v.ec(2);v.kc("disabled",!i.taskEssentialInfo)("ngClass",i.rtlDirection?"margin-l-half":"margin-r-half"),v.Bb(6),v.Jc(a.taskName)}}function _n(t,e){if(1&t&&(v.Tb(0,"div",2),v.Ic(1,"\n    "),v.Gc(2,xn,8,3,"button",3),v.Ic(3,"\n  "),v.Sb()),2&t){var n=v.ec();v.Bb(2),v.kc("ngForOf",n.currentTasks)}}var Bn=function(){function t(t,e,n,a){var i=this;this.userInfoService=t,this.currentTaskService=e,this.bottomSheetDataService=n,this.taskEssentialInfoService=a,this.rtlDirection=!1,this.projectsList=[],this.usersList=[],this.currentTasks=null,this.message="",this.notification=!1,this._subscription=new o.Subscription,this._subscription.add(this.currentTaskService.currentTask.subscribe((function(t){return i.currentTasks=t}))),this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return i.user=t})))}return t.prototype.showTask=function(t){var e=this;this.usersList=this.taskEssentialInfoService.getUsersProjectsList.usersList,this.projectsList=this.taskEssentialInfoService.getUsersProjectsList.projectsList,setTimeout((function(){e.bottomSheetDataService.changeButtonSheetData({component:an,height:"98%",width:"95%",data:{action:"detail",usersList:e.usersList,projectsList:e.projectsList,task:t,boardStatus:t.boardStatus}})}),500)},t.prototype.ngOnChanges=function(t){t.taskEssentialInfo&&!t.taskEssentialInfo.firstChange&&(this.usersList=t.taskEssentialInfo.currentValue.usersList,this.projectsList=t.taskEssentialInfo.currentValue.projectsList)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(l.a),v.Nb(at.a),v.Nb(Dt),v.Nb(oe))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-current"]],inputs:{taskEssentialInfo:"taskEssentialInfo",rtlDirection:"rtlDirection"},features:[v.zb],decls:5,vars:1,consts:[[1,"display-flex","flex-space-between","align-items-center","full-height"],["class","display-flex flex-space-between height-30 align-items-center",4,"ngIf"],[1,"display-flex","flex-space-between","height-30","align-items-center"],["class","blink-effect white-gradient line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"blink-effect","white-gradient","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","ngClass","click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Gc(2,_n,4,1,"div",1),v.Ic(3,"\n"),v.Sb(),v.Ic(4,"\n")),2&t&&(v.Bb(2),v.kc("ngIf",e.currentTasks))},directives:[a.k,a.j,B.b,a.i,C.a],styles:[".hidden[_ngcontent-%COMP%]{display:none}.blink-effect[_ngcontent-%COMP%]{transition:all .4s!important;-webkit-animation:blink-effect 1s linear infinite;animation:blink-effect 1s linear infinite}@-webkit-keyframes blink-effect{0%{color:#888!important}33.33333%{color:#f94850;box-shadow:0 2px 4px -1px #ff0844,0 10px 25px -7px #ffb199,0 1px 10px 0 rgba(0,0,0,.12)}to{color:#888;box-shadow:none}}@keyframes blink-effect{0%{color:#888!important}33.33333%{color:#f94850;box-shadow:0 2px 4px -1px #ff0844,0 10px 25px -7px #ffb199,0 1px 10px 0 rgba(0,0,0,.12)}to{color:#888;box-shadow:none}}"]}),t}(),Cn=n("rBWh"),Ln=n("gaxV"),Nn=n("XhcP"),Mn=["dateCalendar"],On=function(){function t(t,e,n,a,i,r){var s=this;this.dialog=t,this.translateService=e,this.viewDirection=n,this.eventHandlerService=a,this.taskCalendarService=i,this.windowManagerService=r,this.triggerBottomSheet=new v.o,this.calendarEvents=null,this.rtlDirection=!1,this.tasks=[],this.usersList=[],this.datePickerConfig=null,this._subscription=new o.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return s.rtlDirection=t}))),this._subscription.add(this.eventHandlerService.currentEventsTaskList.subscribe((function(t){if(t){s.calendarEvents=s.taskCalendarService.prepareTaskItems(t);var e=s.rtlDirection?p.from(t.filterData.dateStart,"fa","YYYY/MM/DD"):g(new Date(t.filterData.dateStart));setTimeout((function(){s.datePickerDirective.api.moveCalendarTo(e)}))}})))}return t.prototype.ngAfterViewInit=function(){this.getCalendarItemsData()},t.prototype.dayBtnCssClassCallback=function(t){var e=this;this.calendarEvents&&setTimeout((function(){var n=e.rtlDirection?t.locale("fa").format("YYYY/M/D"):t.locale("en").format("DD-MM-YYYY"),a=document.querySelector('.weekday-calendar .dp-calendar-day[data-date="'+n+'"]');if(a){var i=0;e.calendarEvents.map((function(e){e.start.toLocaleDateString()==t._d.toLocaleDateString()&&(i<1&&a.insertAdjacentHTML("beforeend","<div data-objects='"+JSON.stringify(e)+"' style='background: "+e.color+" !important;' class='custom-event-box'><img src='"+e.imageurl+"' alt=''>"+e.title+"</div>"),i++)})),i>1&&a.insertAdjacentHTML("beforeend",'<div class="custom-event-count">'+i+"</div>")}}))},t.prototype.getCalendarItemsData=function(){var t=this;this._subscription.add(this.eventHandlerService.currentCalendarItems.subscribe((function(e){e&&(t.calendarEvents=e,t.setupCalendar())})))},t.prototype.setupCalendar=function(){var t=this,e=this.rtlDirection?p(new Date):g(new Date);setTimeout((function(){t.datePickerDirective.api.moveCalendarTo(e)})),this.datePickerConfig={locale:this.rtlDirection?"fa":"en",dayBtnCssClassCallback:function(e){t.dayBtnCssClassCallback(e)}}},t.prototype.eventClick=function(t){var e=this,n=this.calendarEvents.filter((function(e){return e.start.toLocaleDateString()==t.date._d.toLocaleDateString()}));if(n.length>1){var a=this.dialog.open(Ln.a,{data:{eventTemp:n,rtlDirection:this.rtlDirection},autoFocus:!1,width:"400px",height:"300px"});this._subscription.add(a.afterOpened().subscribe((function(){e.windowManagerService.dialogOnTop(a.id)}))),this._subscription.add(a.afterClosed().subscribe((function(t){t&&e.loadTaskDetails(t)})))}else{var i=this.rtlDirection?t.date.locale("fa").format("YYYY/M/D"):t.date.locale("en").format("DD-MM-YYYY"),r=document.querySelector('.weekday-calendar .dp-calendar-day[data-date="'+i+'"] .custom-event-box');if(r&&r.dataset){var s=JSON.parse(r.dataset.objects);this.loadTaskDetails(s)}}},t.prototype.loadTaskDetails=function(t){this.triggerBottomSheet.emit({component:an,height:"98%",width:"98%",data:{action:"detail",usersList:t.usersList,projectsList:t.projectsList,task:t,boardStatus:void 0}})},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(f.b),v.Nb(r.d),v.Nb(m.a),v.Nb(Tt.a),v.Nb(Cn.a),v.Nb(wt.a))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-calendar-weekday"]],viewQuery:function(t,e){var n;1&t&&v.Nc(Mn,!0),2&t&&v.rc(n=v.bc())&&(e.datePickerDirective=n.first)},outputs:{triggerBottomSheet:"triggerBottomSheet"},decls:6,vars:4,consts:[["autosize","",1,"weekday-calendar",3,"dir","ngClass"],["theme","dp-material",1,"custom-full-calendar","no-margin","mat-elevation-z3",3,"dir","config","onSelect"],["dateCalendar",""]],template:function(t,e){1&t&&(v.Tb(0,"mat-drawer-container",0),v.Ic(1,"\n  "),v.Tb(2,"dp-day-calendar",1,2),v.ac("onSelect",(function(t){return e.eventClick(t)})),v.Sb(),v.Ic(4,"\n"),v.Sb(),v.Ic(5,"\n")),2&t&&(v.kc("dir",e.rtlDirection?"rtl":"ltr")("ngClass",e.rtlDirection?"ca-rtl":"ca-ltr"),v.Bb(2),v.kc("dir",e.rtlDirection?"rtl":"ltr")("config",e.datePickerConfig))},directives:[Nn.b,k.b,a.i,D.b],styles:[".fc{font-family:inherit!important}.ca-rtl .fc-button-group,.ca-rtl .fc-content,.ca-rtl .fc-toolbar{direction:rtl!important}.ca-ltr .fc-button-group,.ca-ltr .fc-content,.ca-ltr .fc-toolbar{direction:ltr!important}.fc th{text-align:center;padding:5px!important}.fc-button{background:none;color:#333;border:none;margin:0!important}.fc-button-primary:not(:disabled).fc-button-active,.fc-button-primary:not(:disabled):active{border-radius:4px!important;background-image:linear-gradient(-20deg,#3949ab,#4fc3f7)!important}.fc-button-primary:hover{color:#3949ab;background:none;border:none}.fc-button-primary:disabled{color:#fff!important;background:#ccc}.fc-button-primary:not(:disabled).fc-button-active:focus,.fc-button-primary:not(:disabled):active:focus{box-shadow:none!important;background:none!important;color:#3949ab!important}.fc-day-grid-event .fc-content{white-space:normal!important;display:flex;flex-direction:inherit!important}.fc-day-grid-event .fc-content .fc-title{font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:left;line-height:20px;padding-left:5px!important;padding-right:5px!important}.fc-day-grid-event .fc-content .fc-time{display:none}a.fc-more{margin:1px 9px;font-size:.85em;cursor:pointer;text-decoration:none;background:#eee;border-radius:100%;width:18px;line-height:18px;display:block;text-align:center;border:1px solid #e6e6e6;font-weight:700;direction:ltr;color:#656565}"],encapsulation:2}),t}(),jn=function(){function t(){}return t.prototype.pad=function(t,e,n){return n=n||"0",(t+="").length>=e?t:new Array(e-t.length+1).join(n)+t},t.\u0275prov=v.Jb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),Yn=["drawer"],Pn=["dateCalendar"];function An(t,e){if(1&t&&(v.Tb(0,"div",7),v.Ic(1,"\n      "),v.Ob(2,"img",8),v.Ic(3,"\n\n      "),v.Tb(4,"div",9),v.Ic(5,"\n        "),v.Tb(6,"mat-icon",10),v.Ic(7,"person"),v.Sb(),v.Ic(8,"\n\n        "),v.Tb(9,"span",11),v.Ic(10),v.Sb(),v.Ic(11,"\n      "),v.Sb(),v.Ic(12,"\n\n      "),v.Tb(13,"div",9),v.Ic(14,"\n        "),v.Tb(15,"mat-icon",10),v.Ic(16,"mail_outline"),v.Sb(),v.Ic(17,"\n\n        "),v.Tb(18,"span",11),v.Ic(19),v.Sb(),v.Ic(20,"\n      "),v.Sb(),v.Ic(21,"\n\n      "),v.Tb(22,"div",9),v.Ic(23,"\n        "),v.Tb(24,"mat-icon",10),v.Ic(25,"av_timer"),v.Sb(),v.Ic(26,"\n\n        "),v.Tb(27,"span",11),v.Ic(28),v.fc(29,"translate"),v.Tb(30,"span",12),v.Ic(31),v.Sb(),v.Ic(32,"\n        "),v.Sb(),v.Ic(33,"\n      "),v.Sb(),v.Ic(34,"\n    "),v.Sb()),2&t){var n=v.ec();v.Bb(2),v.kc("alt",n.userSelected.name+" "+n.userSelected.family)("src","/assets/profileImg/"+n.userSelected.email+".jpg",v.yc),v.Bb(7),v.kc("ngClass",n.rtlDirection?"padding-r-half":"padding-l-half"),v.Bb(1),v.Lc("\n          ",n.userSelected.name," ",n.userSelected.family,"\n        "),v.Bb(8),v.kc("ngClass",n.rtlDirection?"padding-r-half":"padding-l-half"),v.Bb(1),v.Kc("\n          ",n.userSelected.email,"\n        "),v.Bb(8),v.kc("ngClass",n.rtlDirection?"padding-r-half":"padding-l-half"),v.Bb(1),v.Kc("\n          ",v.gc(29,10,"tasks.task_filter.tasks_filter_calendar_hours"),":\n          "),v.Bb(3),v.Jc(n.sumTime)}}var Fn=function(){function t(t,e,n,a,i,r){var s=this;this.api=t,this.utilService=e,this.translateService=n,this.eventHandlerService=a,this.taskCalendarService=i,this.viewDirectionService=r,this.rtlDirection=!1,this.datePickerConfig=null,this.isVisible=!1,this._subscription=new o.Subscription,this._subscription.add(this.viewDirectionService.currentDirection.subscribe((function(t){return s.rtlDirection=t}))),this._subscription.add(this.eventHandlerService.currentCalendarRate.subscribe((function(t){t&&(s.calendarEvents=t.calendarEvent,s.sumTime=t.sumTime,s.userSelected=t.userSelected,setTimeout((function(){var e=s.rtlDirection?p(new Date(t.filterData.dateStart)):g(new Date(t.filterData.dateStart));s.drawer.open(),s.datePickerDirective.api.moveCalendarTo(e),document.querySelector(".rate-calendar .custom-full-calendar").classList.add("margin-r-full"),s.datePickerConfig.locale=s.rtlDirection?"fa":"en",s.isVisible=!0}),1e3))})))}return t.prototype.ngAfterViewInit=function(){this.setupCalendar()},t.prototype.dayBtnCssClassCallback=function(t){var e=this;this.calendarEvents&&setTimeout((function(){var n=e.rtlDirection?t.locale("fa").format("YYYY/M/D"):t.locale("en").format("DD-MM-YYYY"),a=document.querySelector('.rate-calendar .dp-calendar-day[data-date="'+n+'"]');a&&e.calendarEvents.map((function(e){e.start.toLocaleDateString()==t._d.toLocaleDateString()&&a.insertAdjacentHTML("beforeend","<div class='custom-event-box'>"+e.title+"</div>")}))}))},t.prototype.setupCalendar=function(){var t=this;this.datePickerConfig={locale:this.rtlDirection?"fa":"en",firstDayOfWeek:this.rtlDirection?"sa":"mo",dayBtnCssClassCallback:function(e){t.dayBtnCssClassCallback(e)}}},t.prototype.getTranslate=function(t){return this.translateService.instant(t)},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(v.Nb(u.a),v.Nb(jn),v.Nb(r.d),v.Nb(Tt.a),v.Nb(Cn.a),v.Nb(m.a))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-task-calendar-rate"]],viewQuery:function(t,e){if(1&t&&(v.Nc(Yn,!0),v.Nc(Pn,!0)),2&t){var n=void 0;v.rc(n=v.bc())&&(e.drawer=n.first),v.rc(n=v.bc())&&(e.datePickerDirective=n.first)}},inputs:{usersList:"usersList",loginData:"loginData"},decls:16,vars:6,consts:[["autosize","",1,"full-width","rate-calendar","display-flex","flex-space-between"],["mode","side",1,"round-corner","mat-elevation-z1","padding-tiny-r-l",3,"disableClose"],["drawer",""],["class","padding-half",4,"ngIf"],[1,"full-height","rate-calendar",3,"dir","ngClass"],["theme","dp-material",1,"custom-full-calendar","no-margin","full-height",3,"dir","config"],["dateCalendar",""],[1,"padding-half"],[1,"width-70","height-70","display-block","margin-t-b","margin-auto","text-center","round-corner-all","margin-auto","pos-rel","top-six-tenth","mat-elevation-z2",3,"alt","src"],[1,"padding-t-b","display-flex","align-items-center"],[1,"width-20","height-20","line-height-20","font-full-plus-half-em"],[3,"ngClass"],[1,"text-weight-bold","text-green-500"]],template:function(t,e){1&t&&(v.Tb(0,"mat-drawer-container",0),v.Ic(1,"\n  "),v.Tb(2,"mat-drawer",1,2),v.Ic(4,"\n    "),v.Gc(5,An,35,12,"div",3),v.Ic(6,"\n  "),v.Sb(),v.Ic(7,"\n  "),v.Tb(8,"div",4),v.Ic(9,"\n\n    "),v.Tb(10,"dp-day-calendar",5,6),v.Ic(12,"\n    "),v.Sb(),v.Ic(13,"\n  "),v.Sb(),v.Ic(14,"\n"),v.Sb(),v.Ic(15,"\n")),2&t&&(v.Bb(2),v.kc("disableClose",!0),v.Bb(3),v.kc("ngIf",e.userSelected&&e.userSelected.email),v.Bb(3),v.kc("dir",e.rtlDirection?"rtl":"ltr")("ngClass",e.rtlDirection?"ca-rtl":"ca-ltr"),v.Bb(2),v.kc("dir",e.rtlDirection?"rtl":"ltr")("config",e.datePickerConfig))},directives:[Nn.b,Nn.a,a.k,k.b,a.i,D.b,C.a],pipes:[r.c],encapsulation:2}),t}(),Gn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rn=["bottomSheet"];function En(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",7),v.Ic(1,"\n      "),v.Tb(2,"app-task-calendar-weekday",8),v.ac("triggerBottomSheet",(function(t){return v.wc(n),v.ec().openButtonSheet(t)})),v.Sb(),v.Ic(3,"\n      "),v.Ob(4,"app-task-bottom-sheet",null,9),v.Ic(6,"\n    "),v.Sb()}}function Un(t,e){if(1&t&&(v.Tb(0,"div",7),v.Ic(1,"\n      "),v.Ob(2,"app-task-calendar-rate",10),v.Ic(3,"\n    "),v.Sb()),2&t){var n=v.ec();v.Bb(2),v.kc("loginData",n.loginData)("usersList",n.usersList)}}var Jn=function(t){return{"view-mode":t}},Hn=function(t){function e(e,n,a,i,r,s,c,l){var d=t.call(this,a,i)||this;return d.dialog=e,d.api=n,d.injector=a,d.userInfoService=i,d.refreshLoginService=r,d.taskCalendarService=s,d.eventHandlerService=c,d.loadingIndicatorService=l,d.refreshData=!1,d.rtlDirection=!1,d.onTabLoaded=new v.o,d.tasks=[],d.usersList=[],d.projectsList=[],d.calendarEvents=[],d.holidays=[],d.viewModeTypes="calendar_task",d._subscription=new o.Subscription,d}return Gn(e,t),e.prototype.ngOnInit=function(){this.getBoards()},e.prototype.changeViewMode=function(t){this.viewModeTypes=t,this.onTabLoaded.emit(this.viewModeTypes)},e.prototype.openButtonSheet=function(t){t.bottomSheetRef=this.bottomSheet,this.bottomSheet.toggleBottomSheet(t)},e.prototype.getBoards=function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this.loggedInUser&&this.loggedInUser.email&&(this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"project"}),this._subscription.add(this.api.boardsCalendar(this.loggedInUser.email).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),1===e.result&&(t.usersList=e.contents.users.list,t.projectsList=e.contents.projects.list,t.tasks=e.contents.boards.list,t.taskCalendarService.holidays=e.contents.boards.holidays,t.calendarEvents=t.taskCalendarService.prepareTaskItems(e),t.eventHandlerService.moveCalendarItem(t.calendarEvents))}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"project"}),t.refreshLoginService.openLoginDialog(e)}))))},e.prototype.ngOnDestroy=function(){this.viewModeTypes=null,this.onTabLoaded.emit(this.viewModeTypes),this._subscription&&this._subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(v.Nb(f.b),v.Nb(u.a),v.Nb(v.t),v.Nb(l.a),v.Nb(h.a),v.Nb(Cn.a),v.Nb(Tt.a),v.Nb(I.a))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-task-calendar"]],viewQuery:function(t,e){var n;1&t&&v.Nc(Rn,!0),2&t&&v.rc(n=v.bc())&&(e.bottomSheet=n.first)},inputs:{calendarParameters:"calendarParameters",filterBoards:"filterBoards",refreshData:"refreshData",rtlDirection:"rtlDirection"},outputs:{onTabLoaded:"onTabLoaded"},features:[v.yb],decls:34,vars:13,consts:[[1,"content-container","padding-mini-r-l","full-width","full-height"],[1,"calendar-switcher","pos-abs","left-0","right-0","top-full","text-center","margin-auto"],["value","calendar_task",1,"mat-button-custom","line-height-20","center-block","round-corner-all",3,"ngClass","change"],["viewMode","matButtonToggleGroup"],[1,"overflow-hide","font-7-rem","line-height-20","height-30",3,"value"],[1,"full-height"],["class","full-height mat-elevation-z3",4,"ngIf"],[1,"full-height","mat-elevation-z3"],[3,"triggerBottomSheet"],["bottomSheet",""],[3,"loginData","usersList"]],template:function(t,e){if(1&t){var n=v.Ub();v.Tb(0,"div",0),v.Ic(1,"\n  "),v.Tb(2,"div",1),v.Ic(3,"\n    "),v.Tb(4,"mat-button-toggle-group",2,3),v.ac("change",(function(){v.wc(n);var t=v.sc(5);return e.changeViewMode(t.value)})),v.Ic(6,"\n      "),v.Tb(7,"mat-button-toggle",4),v.Ic(8,"\n        "),v.Tb(9,"span"),v.Ic(10),v.fc(11,"translate"),v.Sb(),v.Ic(12,"\n      "),v.Sb(),v.Ic(13,"\n      "),v.Tb(14,"mat-button-toggle",4),v.Ic(15,"\n        "),v.Tb(16,"span"),v.Ic(17),v.fc(18,"translate"),v.Sb(),v.Ic(19,"\n      "),v.Sb(),v.Ic(20,"\n    "),v.Sb(),v.Ic(21,"\n  "),v.Sb(),v.Ic(22,"\n\n  "),v.Rb(23,5),v.Ic(24,"\n    "),v.Ic(25,"\n    "),v.Gc(26,En,7,0,"div",6),v.Ic(27,"\n    "),v.Ic(28,"\n\n    "),v.Ic(29,"\n    "),v.Gc(30,Un,4,2,"div",6),v.Ic(31,"\n  "),v.Qb(),v.Ic(32,"\n"),v.Sb(),v.Ic(33,"\n")}if(2&t){var a=v.sc(5);v.Bb(4),v.kc("ngClass",v.oc(11,Jn,a)),v.Bb(3),v.kc("value","calendar_task"),v.Bb(3),v.Jc(v.gc(11,7,"tasks.form.task_calendar")),v.Bb(4),v.kc("value","calendar_task_rate"),v.Bb(3),v.Jc(v.gc(18,9,"tasks.form.task_calendar_hours")),v.Bb(9),v.kc("ngIf","calendar_task"==e.viewModeTypes),v.Bb(4),v.kc("ngIf","calendar_task_rate"==e.viewModeTypes)}},directives:[ce.b,a.i,ce.a,a.k,On,Bt,Fn],pipes:[r.c],styles:[".calendar-switcher{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.fc-day-number{padding:0 5px!important}.fc-view .fc-event,.fc-view .fc-event-dot{border:none!important;margin:2px 10px!important;border-radius:5px!important;color:#fff!important;padding:1px 5px!important;font-size:12px!important;cursor:pointer;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.fc-more{position:absolute;top:0}[dir=rtl] .fc-more{right:0}.mat-drawer-content{width:100%;overflow:hidden!important;padding:0!important}"],encapsulation:2}),e}(c.a),zn=n("wZkO"),Kn=function(){function t(t){this.componentFactoryResolver=t}return t.prototype.resolveComponent=function(){return this.componentFactoryResolver.resolveComponentFactory(Dn)},t.\u0275mod=v.Lb({type:t}),t.\u0275inj=v.Kb({factory:function(e){return new(e||t)(v.Xb(v.j))},imports:[[a.c,i.a,s.a,D.c,r.b.forChild()]]}),t}();v.zc(Qt,[k.b,zn.b,a.j,zn.a,zn.c,C.a,a.i,a.k,B.b,a.m,a.n,In,Hn,Bn,Bt],[r.c])}}]);