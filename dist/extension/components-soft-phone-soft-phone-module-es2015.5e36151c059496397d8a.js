(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{A9vo:function(t,e,i){"use strict";i.r(e),i.d(e,"SoftPhoneModule",(function(){return Ie}));var n=i("PCNd"),o=i("ofXK"),s=i("sYmb"),r=i("fXoL");let c=(()=>{class t{constructor(t){this.el=t,this.decimal=!1,this.decimalSeparator=".",this.min=-1/0,this.max=1/0,this.onValueChanged=new r.o,this.hasDecimalPoint=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.inputElement=t.nativeElement}ngOnChanges(t){if(t.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),t.min){const t=Number(this.min);this.min=isNaN(t)?-1/0:t}if(t.max){const t=Number(this.max);this.max=isNaN(t)?1/0:t}this.onValueChanged.emit(this.inputElement.value)}onKeyDown(t){if(this.navigationKeys.indexOf(t.key)>-1||"a"===t.key&&!0===t.ctrlKey||"c"===t.key&&!0===t.ctrlKey||"v"===t.key&&!0===t.ctrlKey||"x"===t.key&&!0===t.ctrlKey||"a"===t.key&&!0===t.metaKey||"c"===t.key&&!0===t.metaKey||"v"===t.key&&!0===t.metaKey||"x"===t.key&&!0===t.metaKey||this.decimal&&t.key===this.decimalSeparator&&!this.hasDecimalPoint)return void("Backspace"===t.key&&(this.inputElement.value=this.inputElement.value.substring(0,this.inputElement.value.length)));if((" "===t.key||isNaN(Number(t.key)))&&t.preventDefault(),this.regex){const e=this.forecastValue(t.key);this.regex.test(e)||t.preventDefault()}const e=Number(this.forecastValue(t.key));(e>this.max||e<this.min)&&t.preventDefault()}onKeyUp(t){this.updateDecimalPoint(),this.onValueChanged.emit(this.inputElement.value)}onPaste(t){const e=t.clipboardData.getData("text/plain");this.pasteData(e),t.preventDefault()}onDrop(t){const e=t.dataTransfer.getData("text");this.inputElement.focus(),this.pasteData(e),t.preventDefault()}updateDecimalPoint(){this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator)>-1)}pasteData(t){const e=this.sanitizeInput(t);if(!document.execCommand("insertText",!1,e)){const{selectionStart:t,selectionEnd:i}=this.inputElement;this.inputElement.setRangeText(e,t,i,"end")}this.updateDecimalPoint()}sanitizeInput(t){let e="";if(this.decimal&&this.isValidDecimal(t)){const i=new RegExp(`[^0-9${this.decimalSeparator}]`,"g");e=t.replace(i,"")}else e=t.replace(/[^0-9]/g,"");const i=this.inputElement.maxLength;if(i>0){const t=i-this.inputElement.value.length;e=t>0?e.substring(0,t):""}return e}isValidDecimal(t){if(this.hasDecimalPoint){const e=this.getSelection();return e&&e.indexOf(this.decimalSeparator)>-1?t.split(this.decimalSeparator).length<=2:t.indexOf(this.decimalSeparator)<0}return t.split(this.decimalSeparator).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart,this.inputElement.selectionEnd)}forecastValue(t){const e=this.inputElement.selectionStart,i=this.inputElement.value,n=i.substring(e,this.inputElement.selectionEnd);return n?i.replace(n,t):i.substring(0,e)+t+i.substring(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.l))},t.\u0275dir=r.Lb({type:t,selectors:[["","digitOnly",""]],hostBindings:function(t,e){1&t&&r.ec("keydown",(function(t){return e.onKeyDown(t)}))("keyup",(function(t){return e.onKeyUp(t)}))("paste",(function(t){return e.onPaste(t)}))("drop",(function(t){return e.onDrop(t)}))},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",min:"min",max:"max",pattern:"pattern"},outputs:{onValueChanged:"onValueChanged"},features:[r.Ab]}),t})();var a=i("zB/H"),l=i("ue6I"),h=i("PqYM"),b=i("unh5"),u=i("Y2ut"),g=i("DDyt");function d(t,e){if(1&t){const t=r.Xb();r.Wb(0,"app-soft-phone-contacts",9),r.ec("triggerCloseBottomSheet",(function(){return r.zc(t),r.ic().closeTransferBottomSheet()})),r.Vb()}if(2&t){const t=r.ic();r.oc("fromPopUp",!0)("loggedInUser",t.loggedInUser)("rtlDirection",t.rtlDirection)("softPhoneUsers",t.softPhoneUsers)}}function p(t,e){if(1&t){const t=r.Xb();r.Wb(0,"app-soft-phone-keypad",10),r.ec("triggerCloseBottomSheet",(function(){return r.zc(t),r.ic().closeTransferBottomSheet()})),r.Vb()}if(2&t){const t=r.ic();r.oc("fromPopUp",!0)("rtlDirection",t.rtlDirection)("softPhoneUsers",t.softPhoneUsers)}}const f=function(t){return{"view-mode":t}};let m=(()=>{class t{constructor(t,e,i){this.viewDirection=t,this.softPhoneService=e,this.userInfoService=i,this.rtlDirection=!1,this.viewModeTypes="contact",this._subscription=new a.Subscription,this._subscription.add(this.softPhoneService.currentSoftPhoneUsers.subscribe(t=>this.softPhoneUsers=t)),this._subscription.add(this.viewDirection.currentDirection.subscribe(t=>this.rtlDirection=t)),this._subscription.add(this.userInfoService.currentUserInfo.subscribe(t=>this.loggedInUser=t))}ngOnInit(){}changeViewMode(t){this.viewModeTypes=t}closeTransferBottomSheet(){this.bottomSheetData.bottomSheetRef.close()}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(b.a),r.Qb(u.a),r.Qb(g.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-transfer-call"]],decls:16,vars:16,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0",3,"dir"],[1,"switch-container","height-45","padding-mini-t-b","padding-r-l"],[1,"full-width","mat-button-custom","height-30","line-height-15","round-corner-all",3,"ngClass","value","change"],["viewMode","matButtonToggleGroup"],[1,"overflow-hide","half-width","font-7-rem","line-height-15","height-30",3,"value"],[1,"component-container","height-full-minus-45","pos-rel"],[3,"ngSwitch"],[3,"fromPopUp","loggedInUser","rtlDirection","softPhoneUsers","triggerCloseBottomSheet",4,"ngSwitchCase"],[3,"fromPopUp","rtlDirection","softPhoneUsers","triggerCloseBottomSheet",4,"ngSwitchCase"],[3,"fromPopUp","loggedInUser","rtlDirection","softPhoneUsers","triggerCloseBottomSheet"],[3,"fromPopUp","rtlDirection","softPhoneUsers","triggerCloseBottomSheet"]],template:function(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"mat-button-toggle-group",2,3),r.ec("change",(function(){r.zc(t);const i=r.vc(3);return e.changeViewMode(i.value)})),r.Wb(4,"mat-button-toggle",4),r.Wb(5,"span"),r.Jc(6),r.jc(7,"translate"),r.Vb(),r.Vb(),r.Wb(8,"mat-button-toggle",4),r.Wb(9,"span"),r.Jc(10),r.jc(11,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(12,"div",5),r.Ub(13,6),r.Hc(14,d,1,4,"app-soft-phone-contacts",7),r.Hc(15,p,1,3,"app-soft-phone-keypad",8),r.Tb(),r.Vb(),r.Vb()}if(2&t){const t=r.vc(3);r.oc("dir",e.rtlDirection?"rtl":"ltr"),r.Cb(2),r.oc("ngClass",r.rc(14,f,t))("value",e.viewModeTypes),r.Cb(2),r.oc("value","contact"),r.Cb(2),r.Kc(r.kc(7,10,"soft_phone.main.address_book")),r.Cb(2),r.oc("value","keypad"),r.Cb(2),r.Kc(r.kc(11,12,"soft_phone.main.dial_pad")),r.Cb(3),r.oc("ngSwitch",e.viewModeTypes),r.Cb(1),r.oc("ngSwitchCase","contact"),r.Cb(1),r.oc("ngSwitchCase","keypad")}},styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}"]}),t})();var w=i("tk/3"),v=i("AytR");let x=(()=>{class t{constructor(t){this.http=t,this.accessToken="",this.API_URL=v.a.CONTAINER_URL+"/pbx",this.headers={headers:new w.c({"Content-Type":"application/json; charset=UTF-8",Accept:"application/json; charset=UTF-8"})}}getExtensionList(){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=extensions",this.headers)}getExtensionStatus(){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=extensionStatus",this.headers)}getCdr(t){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(`${this.API_URL}/cdr.php?action=cdr&extensionNo=${t}`,this.headers)}getConferenceList(){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=conferenceList",this.headers)}getConferenceOnlineUser(t){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(`${this.API_URL}/extension.php?action=conferenceOnlineUser&phoneNumber=${t}`,this.headers)}}return t.\u0275fac=function(e){return new(e||t)(r.ac(w.a))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=i("OC8m"),S=i("MutI"),k=i("bTqV"),_=i("NFeN");const P=["oBottomSheet"],y=["container"];let V=(()=>{class t{constructor(t,e,i){this.cfr=t,this.renderer=e,this.softPhoneService=i,this.minimizeStatus=!1,this._subscription=new a.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe(t=>{this.minimizeStatus=t;try{const t=this.oBottomSheet.nativeElement.parentNode.parentNode;this.minimizeStatus?this.renderer.addClass(t,"minimizePopUp"):this.renderer.removeClass(t,"minimizePopUp")}catch(e){}}))}toggleBottomSheet(t,e=!0){this.container.clear();const i=this.oBottomSheet.nativeElement.parentNode.parentNode,n=this.oBottomSheet.nativeElement;if(e){this.renderer.addClass(i,"active"),this.renderer.setStyle(n,"height",t.height),this.renderer.setStyle(n,"width",t.width),this.renderer.setStyle(i,"z-index","5");const e=this.cfr.resolveComponentFactory(t.component);this.container.createComponent(e).instance.bottomSheetData=t}else this.renderer.removeClass(i,"active"),this.renderer.setStyle(n,"height","0"),this.renderer.setStyle(n,"width","0"),setTimeout(()=>this.renderer.setStyle(i,"z-index","-1"),100)}close(){this.toggleBottomSheet(null,!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.j),r.Qb(r.F),r.Qb(u.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-bottom-sheet"]],viewQuery:function(t,e){var i;1&t&&(r.Pc(P,!0),r.Pc(y,!0,r.P)),2&t&&(r.uc(i=r.fc())&&(e.oBottomSheet=i.first),r.uc(i=r.fc())&&(e.container=i.first))},decls:6,vars:0,consts:[[1,"o-bottom-sheet-container","full-width","full-height"],[1,"o-bottom-sheet-backdrop","full-width","full-height",3,"click"],[1,"o-bottom-sheet-content","overflow-hide","pos-abs","margin-auto","bottom-0","right-0","left-0","round-corner-top-left","round-corner-top-right"],["oBottomSheet",""],[1,"o-bottom-sheet-comp"],["container",""]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.ec("click",(function(){return e.close()})),r.Vb(),r.Wb(2,"div",2,3),r.Rb(4,"div",4,5),r.Vb(),r.Vb())},styles:["[_nghost-%COMP%]{position:absolute;right:0;left:0;bottom:0;width:100%;height:100%;z-index:-1;transition:all .2s}[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{transition:background .2s!important;background:transparent}.active[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.7)}.minimizePopUp[_nghost-%COMP%]{bottom:-100%}[_nghost-%COMP%]   .o-bottom-sheet-content[_ngcontent-%COMP%]{transition:height .1s!important;box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);background-color:transparent;height:0;width:0}"]}),t})();var W=i("cH1L"),I=i("zkoq"),U=i("FKr1");const D=["bottomSheet"];function M(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",25),r.ec("click",(function(){return r.zc(t),r.ic().minimizePopUp()})),r.Wb(1,"mat-icon"),r.Jc(2),r.Vb(),r.Vb()}if(2&t){const t=r.ic();r.oc("ngClass",t.rtlDirection?"left-full":"right-full"),r.Cb(2),r.Kc(t.rtlDirection?"keyboard_arrow_left":"keyboard_arrow_right")}}const O=function(t,e){return{"right.px":t,"left.px":e}};function z(t,e){if(1&t&&(r.Wb(0,"li",31),r.Rb(1,"img",32),r.Vb()),2&t){const t=r.ic(),e=t.index,i=t.$implicit,n=r.ic(2);r.oc("ngStyle",r.sc(3,O,n.rtlDirection?e+"2":"inherit",n.rtlDirection?"inherit":e+"2")),r.Cb(1),r.oc("alt",i.extension_name)("src","assets/profileImg/"+(i.username?i.username:"0")+".jpg",r.Bc)}}function L(t,e){if(1&t&&(r.Ub(0),r.Hc(1,z,2,6,"li",30),r.Tb()),2&t){const t=e.index;r.Cb(1),r.oc("ngIf",t<3)}}function T(t,e){if(1&t&&(r.Wb(0,"span",33),r.Jc(1),r.Vb()),2&t){const t=r.ic(2);r.oc("ngClass",t.rtlDirection?"left-full-two-em-reverse":"right-full-two-em-reverse"),r.Cb(1),r.Lc("+",t.extensionList.length-3,"")}}function B(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",26),r.Wb(1,"ul",27),r.ec("click",(function(){r.zc(t);const e=r.ic();return e.activeExtensionList=!e.activeExtensionList})),r.Hc(2,L,2,1,"ng-container",28),r.Vb(),r.Hc(3,T,2,2,"span",29),r.Vb()}if(2&t){const t=r.ic();r.oc("ngClass",t.rtlDirection?"right-full":"left-full"),r.Cb(2),r.oc("ngForOf",t.extensionList),r.Cb(1),r.oc("ngIf",t.extensionList&&t.extensionList.length>3)}}function J(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",35),r.ec("click",(function(){r.zc(t);const i=e.$implicit;return r.ic(2).callEvent(i)})),r.Wb(1,"mat-icon"),r.Jc(2),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit,i=r.ic(2);r.Cb(2),r.Kc(i.muteStatus?t.changeIcon:t.num)}}function E(t,e){if(1&t&&(r.Ub(0),r.Hc(1,J,3,1,"button",34),r.Tb()),2&t){const t=r.ic();r.Cb(1),r.oc("ngForOf",t.keys)}}function j(t,e){if(1&t&&(r.Wb(0,"mat-list-item",36),r.Rb(1,"img",37),r.Wb(2,"h3",38),r.Jc(3),r.Vb(),r.Wb(4,"div",39),r.Jc(5),r.Vb(),r.Vb()),2&t){const t=e.$implicit;r.Cb(1),r.oc("src","assets/profileImg/"+t.username+".jpg",r.Bc)("alt",t.name),r.Cb(2),r.Lc(" ",t.extension_name," "),r.Cb(2),r.Kc(t.extension_no)}}function H(t,e){if(1&t){const t=r.Xb();r.Wb(0,"mat-grid-tile",40),r.Wb(1,"button",41),r.ec("mousedown",(function(i){r.zc(t);const n=e.$implicit;return r.ic().dialKeyPress(i,n)})),r.Jc(2),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit;r.oc("colspan",1)("rowspan",1),r.Cb(2),r.Lc(" ",t.num," ")}}let K=(()=>{class t{constructor(t,e,i,n,o){this.apiService=t,this.viewDirection=e,this.userInfoService=i,this.softPhoneService=n,this.notificationService=o,this.callTimer="00:00",this.counter=null,this.hour=0,this.minute=0,this.second=0,this.muteStatus=!1,this.connectedStatus=!1,this.extensionList=null,this.keys=[],this.activeExtensionList=!1,this.activeDialPad=!1,this.timerDueTime=0,this.timerPeriod=5e3,this.globalTimer=null,this.dialPadKeys=[{num:"1"},{num:"2"},{num:"3"},{num:"4"},{num:"5"},{num:"6"},{num:"7"},{num:"8"},{num:"9"},{num:"*"},{num:"0"},{num:"#"}],this._subscription=new a.Subscription,this._subscription.add(this.userInfoService.currentUserInfo.subscribe(t=>this.loggedInUser=t)),this._subscription.add(this.viewDirection.currentDirection.subscribe(t=>this.rtlDirection=t))}ngOnInit(){this.data=this.bottomSheetData.data,this.keys=[{type:"mute_unmute",num:"mic",changeIcon:"mic_off"}],"conference"!==this.data.type?this.keys.push({type:"forward",num:"phone_forwarded",changeIcon:"phone_forwarded"}):"conference"===this.data.type&&this.data.password.length&&this.keys.push({type:"key_pad",num:"dialpad",changeIcon:"dialpad"}),this.timeCounter&&(this.timeCounter.unsubscribe(),this.counter=null,this.callTimer="00:00"),this._subscription.add(this.softPhoneService.currentConnectedCall.subscribe(t=>{this.connectedStatus=t,this.connectedStatus?(this.counter=Object(h.a)(0,1e3),this.timeCounter=this.counter.subscribe(()=>{this.second<59?this.second++:(this.second=0,this.minute<59?this.minute++:(this.minute=0,this.hour++)),this.callTimer=(this.hour<10?"0"+this.hour:this.hour)+":"+(this.minute<10?"0"+this.minute:this.minute)+":"+(this.second<10?"0"+this.second:this.second)}),this.globalTimer=Object(h.a)(this.timerDueTime,this.timerPeriod),this.globalTimerSubscription=this.globalTimer.subscribe(()=>this.getConferenceOnlineUser())):this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)})),this.softPhoneService.sipCall("call-audio",this.data.extension_no)}callEvent(t){switch(t.type){case"mute_unmute":this.muteStatus=this.softPhoneService.sipToggleMute();break;case"forward":{const t={component:m,height:"100%",width:"100%",data:""};t.bottomSheetRef=this.bottomSheet,this.bottomSheet.toggleBottomSheet(t);break}case"key_pad":this.activeDialPad=!0}}minimizePopUp(){this.softPhoneService.changeMinimizeCallPopUp(!0)}getConferenceOnlineUser(){this._subscription.add(this.apiService.getConferenceOnlineUser(this.data.extension_no).subscribe(t=>{t.success&&(this.extensionList=t.data)}))}hangUp(){this.softPhoneService.sipHangUp(),this.timeCounter&&(this.timeCounter.unsubscribe(),this.counter=null,this.callTimer="00:00"),this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)}dialKeyPress(t,e){this.softPhoneService.sipSendDTMF(e.num),"#"===e.num&&setTimeout(()=>this.activeDialPad=!1,5e3)}onKeydownHandler(){this.activeExtensionList=!1}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe(),this.timeCounter&&this.timeCounter.unsubscribe(),this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(x),r.Qb(b.a),r.Qb(g.a),r.Qb(u.a),r.Qb(C.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-call-pop-up"]],viewQuery:function(t,e){var i;1&t&&r.Pc(D,!0),2&t&&r.uc(i=r.fc())&&(e.bottomSheet=i.first)},hostBindings:function(t,e){1&t&&r.ec("keydown.escape",(function(t){return e.onKeydownHandler(t)}),!1,r.xc)},decls:44,vars:31,consts:[[1,"popup-container","pos-rel","full-height","full-width","padding-full"],["class","minimizeBtn pos-abs top-full width-40 height-40 text-white no-bg no-border cursor-pointer",3,"ngClass","click",4,"ngIf"],["class","extension-list pos-abs top-full width-50 height-30",3,"ngClass",4,"ngIf"],[1,"avatar-holder","text-center","width-100","height-100","round-corner-all","padding-half","margin-auto","margin-t-full-3","margin-b-full"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"full-width","round-corner-all",3,"alt","src"],[1,"width-200","margin-auto","height-40","line-height-40","text-center","text-white","text-eclipse","text-weight-normal","font-full-plus-two-tenth-em"],[1,"full-width","height-30","line-height-30","text-center","text-gray-500","text-weight-normal"],[1,"full-width","height-40","line-height-40","text-center","text-white","text-weight-normal",3,"ngClass"],[1,"full-width","transition","text-center","display-flex","padding-r-l-2","pos-abs","right-0","left-0","bottom-full-2",3,"ngClass"],[4,"ngIf"],["mat-raised-button","",1,"red-gradient","min-width-inherit","cursor-pointer","text-white","mat-elevation-z3","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","margin-mini-r-l","text-center","round-corner-all",3,"click"],["bottomSheet",""],[1,"show-extension-list","pos-abs","height-300","left-0","right-0","margin-auto","round-corner-top","bg-white","transition","overflow-hide",3,"ngClass","dir"],[1,"full-width","height-45","line-height-45","padding-r-l"],[1,"pos-abs","top-half","cursor-pointer","no-bg","no-border","no-box-shadow","width-30","height-30",3,"ngClass","click"],[1,"text-grey-500","line-height-30"],[1,"full-width","height-full-minus-45","overflow-x-hide","overflow-y-auto"],["class","highlight cursor-pointer padding-r-l",4,"ngFor","ngForOf"],[1,"show-dialPad","pos-abs","height-300","left-0","right-0","margin-auto","round-corner-top","bg-white","transition","overflow-hide",3,"ngClass","dir"],[1,"key-container"],["cols","3","gutterSize","30","rowHeight","fit","dir","ltr",1,"full-height"],[3,"colspan","rowspan",4,"ngFor","ngForOf"],[1,"padding-r-l-4","pos-abs","full-width","bottom-full-2"],["mat-raised-button","","type","button",1,"red-gradient","full-width","text-white","font-8-rem","margin-auto","width-90","height-35","padding-mini-r-l",3,"click"],[1,"padding-mini-r-l"],[1,"minimizeBtn","pos-abs","top-full","width-40","height-40","text-white","no-bg","no-border","cursor-pointer",3,"ngClass","click"],[1,"extension-list","pos-abs","top-full","width-50","height-30",3,"ngClass"],[1,"list-style-none","no-padding","no-margin","cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],["class","text-white pos-abs line-height-30",3,"ngClass",4,"ngIf"],["class","pos-abs display-flex align-items-center",3,"ngStyle",4,"ngIf"],[1,"pos-abs","display-flex","align-items-center",3,"ngStyle"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"mat-elevation-z3","width-30","height-30","round-corner-all",3,"alt","src"],[1,"text-white","pos-abs","line-height-30",3,"ngClass"],["class","key transition min-width-inherit cursor-pointer text-white mat-elevation-z3 no-box-shadow no-padding no-border font-full-plus-half-em width-50 height-50 margin-mini-r-l text-center round-corner-all","mat-raised-button","",3,"click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"key","transition","min-width-inherit","cursor-pointer","text-white","mat-elevation-z3","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","margin-mini-r-l","text-center","round-corner-all",3,"click"],[1,"highlight","cursor-pointer","padding-r-l"],["onerror","this.src='assets/profileImg/0.jpg'","matListAvatar","",1,"mat-elevation-z2","width-35","height-35","online-user",3,"src","alt"],["matLine","",1,"font-7-rem","text-weight-bold","no-margin"],[1,"pos-rel","online-extension","height-30","font-8-em","display-flex","flex-center-y"],[3,"colspan","rowspan"],["mat-raised-button","",1,"dial-pad-key","cursor-pointer","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","line-height-50","text-center","round-corner-all",3,"mousedown"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Hc(1,M,3,2,"button",1),r.Hc(2,B,4,3,"div",2),r.Wb(3,"div",3),r.Rb(4,"img",4),r.Vb(),r.Wb(5,"h2",5),r.Jc(6),r.jc(7,"translate"),r.Vb(),r.Wb(8,"h3",6),r.Jc(9),r.Vb(),r.Wb(10,"div",7),r.Jc(11),r.jc(12,"translate"),r.Vb(),r.Wb(13,"div",8),r.Hc(14,E,2,1,"ng-container",9),r.Wb(15,"button",10),r.ec("click",(function(){return e.hangUp()})),r.Wb(16,"mat-icon"),r.Jc(17,"call_end"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Rb(18,"app-soft-phone-bottom-sheet",null,11),r.Wb(20,"div",12),r.Wb(21,"h3",13),r.Jc(22),r.jc(23,"translate"),r.Vb(),r.Wb(24,"button",14),r.ec("click",(function(){return e.activeExtensionList=!1})),r.Wb(25,"mat-icon",15),r.Jc(26,"close"),r.Vb(),r.Vb(),r.Wb(27,"mat-list",16),r.Hc(28,j,6,4,"mat-list-item",17),r.Vb(),r.Vb(),r.Wb(29,"div",18),r.Wb(30,"h3",13),r.Jc(31),r.jc(32,"translate"),r.Vb(),r.Wb(33,"div",19),r.Wb(34,"mat-grid-list",20),r.Hc(35,H,3,3,"mat-grid-tile",21),r.Vb(),r.Vb(),r.Wb(36,"div",22),r.Wb(37,"button",23),r.ec("click",(function(){return e.activeDialPad=!1})),r.Wb(38,"span",24),r.Jc(39),r.jc(40,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Wb(41,"button",14),r.ec("click",(function(){return e.activeDialPad=!1})),r.Wb(42,"mat-icon",15),r.Jc(43,"close"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Cb(1),r.oc("ngIf",e.connectedStatus),r.Cb(1),r.oc("ngIf","conference"===e.data.type&&e.connectedStatus),r.Cb(2),r.oc("alt",e.data.name)("src","assets/profileImg/"+(e.data.username?e.data.username:"0")+".jpg",r.Bc),r.Cb(2),r.Lc(" ",e.data.extension_no?e.data.extension_name:r.kc(7,21,"soft_phone.call_pop_up.unknown_number")," "),r.Cb(3),r.Lc(" ",e.data.extension_no?e.data.extension_no:e.data," "),r.Cb(1),r.oc("ngClass","00:00"!==e.callTimer?"":"blink-effect"),r.Cb(1),r.Lc(" ","00:00"!==e.callTimer?e.callTimer:r.kc(12,23,"soft_phone.call_pop_up.calling")," "),r.Cb(2),r.oc("ngClass",e.connectedStatus?"flex-space-between":"flex-space-around"),r.Cb(1),r.oc("ngIf",e.connectedStatus),r.Cb(6),r.oc("ngClass",e.activeExtensionList?"bottom-0":"bottom-full-reverse-percent")("dir",e.rtlDirection?"rtl":"ltr"),r.Cb(2),r.Lc(" ",r.kc(23,25,"soft_phone.call_pop_up.available_users")," "),r.Cb(2),r.oc("ngClass",e.rtlDirection?"left-half":"right-half"),r.Cb(4),r.oc("ngForOf",e.extensionList),r.Cb(1),r.oc("ngClass",e.activeDialPad&&e.data.password.length?"bottom-0":"bottom-full-reverse-percent")("dir",e.rtlDirection?"rtl":"ltr"),r.Cb(2),r.Lc(" ",r.kc(32,27,"soft_phone.call_pop_up.available_users")," "),r.Cb(4),r.oc("ngForOf",e.dialPadKeys),r.Cb(4),r.Kc(r.kc(40,29,"global.hide")),r.Cb(2),r.oc("ngClass",e.rtlDirection?"left-half":"right-half"))},directives:[o.t,S.b,o.q,k.b,_.a,V,W.b,S.a,o.s,I.b,o.w,S.d,U.k,I.d],pipes:[s.d],styles:['[_nghost-%COMP%], [_nghost-%COMP%]:before{width:100%;height:100%;position:absolute;left:0;top:0;bottom:0;right:0}[_nghost-%COMP%]:before{content:"";filter:blur(8px);transform:scale(1.5)}.key[_ngcontent-%COMP%]{background-color:rgba(80,80,80,.9)}.dial-pad-key[_ngcontent-%COMP%]{background-color:#e1e1e1;min-width:inherit!important}.key-container[_ngcontent-%COMP%]{height:calc(100% - 180px);padding:1em 4em}.padding-r-l-4[_ngcontent-%COMP%]{padding:0 4em}.minimizeBtn[_ngcontent-%COMP%]{transform:scale(1.2)}.avatar-holder[_ngcontent-%COMP%]{background-color:#ddd;border:3px solid #aaa}.show-dialPad[_ngcontent-%COMP%], .show-extension-list[_ngcontent-%COMP%]{width:97%!important;height:99%!important;background-color:hsla(0,0%,100%,.95)}.online-user[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060}.online-extension[_ngcontent-%COMP%]{color:#4ec060}.blink-effect[_ngcontent-%COMP%]{transition:all .4s!important;-webkit-animation:blink-effect 1s linear infinite;animation:blink-effect 1s linear infinite}@-webkit-keyframes blink-effect{0%{color:#888}33.33333%{color:transparent}to{color:#888}}@keyframes blink-effect{0%{color:#888}33.33333%{color:transparent}to{color:#888}}']}),t})();var R=i("3Pt+"),N=i("ISpo"),Q=i("mrmJ"),F=i("wZkO"),Y=i("LvDl"),A=i("/Hbh"),X=i("f0Cb");function $(t,e){if(1&t&&r.Rb(0,"div",15),2&t){const t=r.ic();r.oc("ngClass",t.data.is_online?"online":"offline")}}let q=(()=>{class t{constructor(t,e,i,n){this.viewDirection=t,this.softPhoneService=e,this.notificationService=i,this.userInfoService=n,this._subscription=new a.Subscription,this._subscription.add(this.userInfoService.currentUserInfo.subscribe(t=>this.loggedInUser=t)),this._subscription.add(this.viewDirection.currentDirection.subscribe(t=>this.rtlDirection=t))}ngOnInit(){this.data=this.bottomSheetData.data}call(t){this.softPhoneService.changeOnCallUser(t),this.softPhoneService.sipHangUp()}closeBottomSheet(){this.bottomSheetData.bottomSheetRef.close()}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(b.a),r.Qb(u.a),r.Qb(C.a),r.Qb(g.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-call-to-action"]],decls:32,vars:19,consts:[[1,"full-width","full-height","padding-full",3,"dir"],[1,"text-weight-bold","font-full-plus-three-tenth-em","no-margin"],[1,"width-30","height-30","pos-abs","top-0","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"ngClass","click"],[1,"line-height-35","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],[1,"margin-t-half"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"online-user","mat-elevation-z2","width-50","height-50","round-corner-all","margin-auto",3,"alt","ngClass","src"],["matLine","",1,"font-8-rem"],[1,"ltr","padding-mini-r-l"],[3,"timezone"],["class","user-soft-phone-status pos-rel text-gray-500 width-30 height-30 round-corner-all",3,"ngClass",4,"ngIf"],[1,"margin-mini-t-b"],[1,"height-60","display-flex","flex-space-around"],["mat-raised-button","","type","submit",1,"green-gradient","full-width","text-white","font-8-rem","margin-auto","width-90","height-35","padding-mini-r-l",3,"disabled","click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],[1,"user-soft-phone-status","pos-rel","text-gray-500","width-30","height-30","round-corner-all",3,"ngClass"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"h3",1),r.Jc(2),r.Vb(),r.Wb(3,"button",2),r.ec("click",(function(){return e.closeBottomSheet()})),r.Wb(4,"mat-icon",3),r.Jc(5," close "),r.Vb(),r.Vb(),r.Wb(6,"mat-list",4),r.Wb(7,"mat-list-item"),r.Rb(8,"img",5),r.Wb(9,"p",6),r.Wb(10,"span"),r.Wb(11,"b"),r.Jc(12),r.jc(13,"translate"),r.Vb(),r.Wb(14,"span",7),r.Rb(15,"app-time-area-digital-clock",8),r.Vb(),r.Vb(),r.Vb(),r.Wb(16,"p",6),r.Wb(17,"span"),r.Wb(18,"b"),r.Jc(19),r.jc(20,"translate"),r.Vb(),r.Wb(21,"span",7),r.Jc(22),r.Vb(),r.Vb(),r.Vb(),r.Hc(23,$,1,1,"div",9),r.Vb(),r.Vb(),r.Rb(24,"mat-divider",10),r.Wb(25,"div",11),r.Wb(26,"button",12),r.ec("click",(function(){return e.call(e.data)})),r.Wb(27,"mat-icon",13),r.Jc(28,"call"),r.Vb(),r.Wb(29,"span",14),r.Jc(30),r.jc(31,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.oc("dir",e.rtlDirection?"rtl":"ltr"),r.Cb(2),r.Lc(" ",e.data.extension_name," "),r.Cb(1),r.oc("ngClass",e.rtlDirection?"left-0":"right-0"),r.Cb(5),r.oc("alt",e.data.name)("ngClass",e.data.is_online?"active":"")("src","assets/profileImg/"+e.data.username+".jpg",r.Bc),r.Cb(4),r.Kc(r.kc(13,13,"soft_phone.call_to_action.timezone")),r.Cb(3),r.oc("timezone",e.data.timezone),r.Cb(4),r.Kc(r.kc(20,15,"global.extension")),r.Cb(3),r.Kc(e.data.extension_no),r.Cb(1),r.oc("ngIf","conference"!==e.data.type),r.Cb(3),r.oc("disabled",!e.data.is_online&&"conference"!==e.data.type),r.Cb(4),r.Kc(r.kc(31,17,"soft_phone.call_to_action.call")))},directives:[W.b,o.q,_.a,S.a,S.d,S.b,U.k,A.a,o.t,X.a,k.b],pipes:[s.d],styles:['[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff}.user-soft-phone-status[_ngcontent-%COMP%]:before, [_nghost-%COMP%]{position:absolute;left:0;top:0;bottom:0;right:0}.user-soft-phone-status[_ngcontent-%COMP%]:before{border-radius:100px!important;content:"";width:12px;height:12px;margin:auto}.user-soft-phone-status.online[_ngcontent-%COMP%]:before{background-color:#4ec060;-webkit-animation:blink-online-user-light 1s linear infinite;animation:blink-online-user-light 1s linear infinite}.user-soft-phone-status.offline[_ngcontent-%COMP%]:before{background-color:#c30}.online-user[_ngcontent-%COMP%]{box-shadow:0 0 0 2px transparent}.online-user.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060;-webkit-animation:blink-online-user 1s linear infinite;animation:blink-online-user 1s linear infinite}@-webkit-keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@-webkit-keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}@keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}']}),t})();var G=i("XiUW"),Z=i("1jcm");const tt=function(t){return{active:t}};function et(t,e){if(1&t){const t=r.Xb();r.Wb(0,"mat-list-item",12),r.ec("click",(function(){r.zc(t);const i=e.$implicit;return r.ic().openSheet(i)})),r.Rb(1,"img",13),r.Wb(2,"h3",14),r.Jc(3),r.Vb(),r.Wb(4,"div",15),r.Wb(5,"mat-icon",16),r.Jc(6,"access_time "),r.Vb(),r.Rb(7,"app-time-area-digital-clock",17),r.Vb(),r.Wb(8,"div",18),r.Jc(9),r.Vb(),r.Rb(10,"div",19),r.Vb()}if(2&t){const t=e.$implicit,i=r.ic();r.oc("ngClass",i.rtlDirection?"padding-r-half padding-l-tiny":"padding-l-half padding-r-tiny"),r.Cb(1),r.oc("alt",t.name)("ngClass",r.rc(10,tt,t.is_online))("src","assets/profileImg/"+t.username+".jpg",r.Bc),r.Cb(2),r.Kc(t.extension_name),r.Cb(2),r.oc("ngClass",i.rtlDirection?"text-right":"text-left"),r.Cb(2),r.oc("timezone",t.timezone),r.Cb(1),r.oc("ngClass",t.is_online?"text-green-700":"text-red-700"),r.Cb(1),r.Lc(" ",t.extension_no," "),r.Cb(1),r.oc("ngClass",t.is_online?"online":"offline")}}let it=(()=>{class t{constructor(t,e,i,n,o){this.apiService=t,this.messageService=e,this.softPhoneService=i,this.translateService=n,this.refreshLoginService=o,this.triggerBottomSheet=new r.o,this.softPhoneUsers=[],this.timerDueTime=0,this.timerPeriod=15e3,this.globalTimer=null,this.loggedInUserExtension=null,this.filterArgs=null,this.callPopUpMinimizeStatus=!1,this.softphoneConnectedStatus=!1,this.extensionStatusSubscription=new a.Subscription,this.softphoneConnectedStatusSubscription=new a.Subscription,this._subscription=new a.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe(t=>this.callPopUpMinimizeStatus=t))}ngOnInit(){this.filterArgs={email:this.loggedInUser.email}}getExtensionStatus(){this.extensionStatusSubscription&&this.extensionStatusSubscription.unsubscribe(),this.extensionStatusSubscription=this.apiService.getExtensionStatus().subscribe(t=>{if(t.success&&this.softPhoneUsers&&this.softPhoneUsers.length){const e=t.data.filter(t=>"2"===t.extension_type&&t.username.length>10),i=Y.merge(this.softPhoneUsers,e);this.softPhoneService.changeSoftPhoneUsers(i),this.softphoneConnectedStatusSubscription&&this.softphoneConnectedStatusSubscription.unsubscribe(),this.softphoneConnectedStatusSubscription=this.softPhoneService.currentSoftphoneConnected.subscribe(t=>{t&&(this.softphoneConnectedStatus=this.softPhoneService.getSoftphoneConnectedStatus(),i.map(t=>{t.username===this.loggedInUser.email&&(this.loggedInUserExtension={user:this.loggedInUser,extension:t})}))})}},t=>{this.refreshLoginService.openLoginDialog(t)})}openSheet(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:q,height:"200px",width:"98%",data:t})}getTranslate(t){return this.translateService.instant(t)}changeSoftphoneStatus(t){t.checked?this.softPhoneService.sipRegister():this.softPhoneService.sipUnRegister()}ngOnChanges(t){t.softPhoneUsers.currentValue&&(this.globalTimer=Object(h.a)(this.timerDueTime,this.timerPeriod),this.globalTimerSubscription=this.globalTimer.subscribe(()=>this.getExtensionStatus()))}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe(),this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(x),r.Qb(G.a),r.Qb(u.a),r.Qb(s.e),r.Qb(N.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-information"]],inputs:{rtlDirection:"rtlDirection",softPhoneUsers:"softPhoneUsers",loggedInUser:"loggedInUser"},outputs:{triggerBottomSheet:"triggerBottomSheet"},features:[r.Ab],decls:16,vars:12,consts:[[1,"full-width","full-height"],[1,"soft-phone-user","full-width","height-50"],[1,"padding-mini-r-l","full-height"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"mat-elevation-z2","my-profile-img",3,"alt","src"],["matLine","",1,"font-8-rem","text-weight-bold"],[1,"font-8-rem",3,"dir"],[1,"soft-phone-status",3,"checked","change"],["slideToggle",""],[1,"padding-mini-r-l"],[1,"height-full-minus-50","overflow-x-hide","overflow-y-auto"],[1,"full-width"],["class","highlight cursor-pointer full-height",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","full-height",3,"ngClass","click"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"online-user","mat-elevation-z2","width-35","height-35","transition",3,"alt","ngClass","src"],["matLine","",1,"font-7-rem","text-weight-bold","no-margin"],["matLine",""],[1,"width-18","height-18","font-8-em","pos-rel","top-two-tenth",3,"ngClass"],[1,"font-8-em","text-gray-600",3,"timezone"],[1,"pos-rel","height-30","line-height-30","round-corner-all","font-8-em",3,"ngClass"],[1,"user-soft-phone-status","pos-rel","text-gray-500","width-30","height-30","round-corner-all","transition",3,"ngClass"]],template:function(t,e){if(1&t&&(r.Wb(0,"div",0),r.Wb(1,"mat-list",1),r.Wb(2,"mat-list-item",2),r.Rb(3,"img",3),r.Wb(4,"h3",4),r.Jc(5),r.Vb(),r.Wb(6,"div",5),r.Wb(7,"mat-slide-toggle",6,7),r.ec("change",(function(t){return e.changeSoftphoneStatus(t)})),r.Wb(9,"span",8),r.Jc(10),r.jc(11,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(12,"div",9),r.Wb(13,"mat-list",10),r.Hc(14,et,11,12,"mat-list-item",11),r.jc(15,"myFilter"),r.Vb(),r.Vb(),r.Vb()),2&t){const t=r.vc(8);r.Cb(3),r.oc("alt",e.loggedInUser?e.loggedInUser.name:"")("src","assets/profileImg/"+(e.loggedInUser?e.loggedInUser.email:"0")+".jpg",r.Bc),r.Cb(2),r.Lc(" ",e.loggedInUser?e.loggedInUser.name:""," "),r.Cb(1),r.oc("dir",e.rtlDirection?"ltr":"rtl"),r.Cb(1),r.oc("checked",e.loggedInUserExtension&&e.softphoneConnectedStatus&&e.loggedInUserExtension.extension.is_online),r.Cb(3),r.Lc(" ",r.kc(11,7,t.checked?"global.active":"global.deactivate")," "),r.Cb(4),r.oc("ngForOf",r.lc(15,9,e.softPhoneUsers,e.filterArgs))}},directives:function(){return[S.a,S.d,S.b,U.k,W.b,Z.a,o.s,o.q,_.a,A.a]},pipes:function(){return[s.d,nt]},styles:['[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.my-profile-img[_ngcontent-%COMP%]{transform:scale(.9)}.soft-phone-user[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.user-soft-phone-status[_ngcontent-%COMP%]:before{border-radius:100px!important;content:"";position:absolute;width:12px;height:12px;left:0;right:0;bottom:0;top:0;margin:auto}.user-soft-phone-status.online[_ngcontent-%COMP%]:before{background-color:#4ec060;-webkit-animation:blink-online-user-light 1s linear infinite;animation:blink-online-user-light 1s linear infinite}.user-soft-phone-status.offline[_ngcontent-%COMP%]:before{background-color:#c30}.online-user.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060;-webkit-animation:blink-online-user 1s linear infinite;animation:blink-online-user 1s linear infinite}@-webkit-keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@-webkit-keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}@keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}.highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.highlight[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid hsla(0,0%,86.3%,.5)}']}),t})(),nt=(()=>{class t{transform(t,e){return t&&e?t.filter(t=>t.username!==e.email):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Pb({name:"myFilter",type:t,pure:!1}),t})();function ot(t,e){if(1&t){const t=r.Xb();r.Wb(0,"mat-grid-tile",8),r.Wb(1,"button",9),r.ec("mousedown",(function(i){r.zc(t);const n=e.$implicit;return r.ic().keyPress(i,n)})),r.Jc(2),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit;r.oc("colspan",1)("rowspan",1),r.Cb(2),r.Lc(" ",t.num," ")}}function st(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",14),r.ec("click",(function(){return r.zc(t),r.ic(2).removeFromNumber()})),r.Wb(1,"mat-icon"),r.Jc(2,"backspace"),r.Vb(),r.Vb()}}function rt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",10),r.Wb(1,"button",11),r.ec("click",(function(){return r.zc(t),r.ic().openButtonSheet()})),r.Wb(2,"mat-icon",12),r.Jc(3,"phone"),r.Vb(),r.Vb(),r.Hc(4,st,3,0,"button",13),r.Vb()}if(2&t){const t=r.ic();r.Cb(4),r.oc("ngIf",t.numeric.length)}}function ct(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",15),r.Wb(1,"button",16),r.ec("click",(function(){return r.zc(t),r.ic().transferCall()})),r.Wb(2,"span",17),r.Jc(3),r.jc(4,"translate"),r.Vb(),r.Vb(),r.Wb(5,"button",18),r.ec("click",(function(){return r.zc(t),r.ic().dismissTransferCall()})),r.Wb(6,"span",17),r.Jc(7),r.jc(8,"translate"),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=r.ic();r.Cb(1),r.oc("disabled",t.disableKeypad),r.Cb(2),r.Kc(r.kc(4,4,"soft_phone.transfer_call")),r.Cb(2),r.oc("disabled",t.disableKeypad),r.Cb(2),r.Kc(r.kc(8,6,"global.dismiss"))}}let at=(()=>{class t{constructor(t,e,i){this.softPhoneService=t,this.translateService=e,this.messageService=i,this.triggerBottomSheet=new r.o,this.triggerCloseBottomSheet=new r.o,this.fromPopUp=!1,this.numeric="",this.oldNumeric="",this.disableKeypad=!1,this.callPopUpMinimizeStatus=!1,this.keys=[{num:"1"},{num:"2"},{num:"3"},{num:"4"},{num:"5"},{num:"6"},{num:"7"},{num:"8"},{num:"9"},{num:"*"},{num:"0"},{num:"#"}],this._subscription=new a.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe(t=>this.callPopUpMinimizeStatus=t))}keyPress(t,e){this.numeric+=e.num;const i=this.softPhoneUsers.filter(t=>this.numeric.includes(t.extension_no)).pop();this.softPhoneService.sipSendDTMF(e.num),i&&(this.oldNumeric=this.numeric,this.numeric=i.extension_name)}removeFromNumber(){""!==this.oldNumeric?(this.numeric=this.oldNumeric,this.oldNumeric=""):this.numeric=this.numeric.substring(0,this.numeric.length-1)}changeNumber(t){this.numeric=t;const e=this.softPhoneUsers.filter(t=>this.numeric.includes(t.extension_no)).pop();e&&(this.oldNumeric=this.numeric,this.numeric=e.extension_name)}openButtonSheet(){if(this.callPopUpMinimizeStatus)return void this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call"));if(!this.numeric.length)return;let t;t=this.softPhoneUsers.filter(t=>this.oldNumeric.includes(t.extension_no)).pop()||this.numeric,this.triggerBottomSheet.emit({component:K,height:"100%",width:"100%",data:t})}transferCall(){let t;this.disableKeypad=!0;const e=this.softPhoneUsers.filter(t=>this.oldNumeric.includes(t.extension_no)).pop();t=e?e.extension_no:this.numeric,this.softPhoneService.sipTransfer(t),setTimeout(()=>this.triggerCloseBottomSheet.emit(),1e3)}dismissTransferCall(){this.triggerCloseBottomSheet.emit()}getTranslate(t){return this.translateService.instant(t)}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u.a),r.Qb(s.e),r.Qb(G.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-keypad"]],inputs:{rtlDirection:"rtlDirection",fromPopUp:"fromPopUp",softPhoneUsers:"softPhoneUsers"},outputs:{triggerBottomSheet:"triggerBottomSheet",triggerCloseBottomSheet:"triggerCloseBottomSheet"},decls:10,vars:8,consts:[[1,"full-height"],[1,"input-holder","padding-mini-t-b","text-center","pos-rel","height-50","line-height-50"],["digitOnly","","dir","ltr","type","tel",1,"no-padding","no-border","no-bg","font-full-plus-three-tenth-em","full-width","text-center",3,"ngModel","readOnly","placeholder","onValueChanged"],[1,"key-container"],["cols","3","dir","ltr","gutterSize","30","rowHeight","fit",1,"full-height"],[3,"colspan","rowspan",4,"ngFor","ngForOf"],["class","dialer text-center padding-mini-t-b pos-rel",4,"ngIf","ngIfElse"],["inPopUp",""],[3,"colspan","rowspan"],["mat-raised-button","",1,"key","cursor-pointer","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","line-height-50","text-center","round-corner-all",3,"mousedown"],[1,"dialer","text-center","padding-mini-t-b","pos-rel"],["mat-raised-button","",1,"key","cursor-pointer","no-padding","no-box-shadow","no-border","font-full-plus-three-tenth-em","width-45","height-45","line-height-45","text-center","round-corner-all",3,"click"],[1,"line-height-25","text-white"],["class","remove-number top-full-plus-half no-bg no-border no-padding cursor-pointer pos-abs",3,"click",4,"ngIf"],[1,"remove-number","top-full-plus-half","no-bg","no-border","no-padding","cursor-pointer","pos-abs",3,"click"],[1,"height-60","full-width","pos-abs","bottom-0","padding-full","display-flex","flex-direction-row-reverse","flex-space-around"],["mat-raised-button","","type","button",1,"green-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"],[1,"padding-mini-r-l"],["mat-raised-button","","type","button",1,"red-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"]],template:function(t,e){if(1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"input",2),r.ec("onValueChanged",(function(t){return e.changeNumber(t)})),r.jc(3,"translate"),r.Vb(),r.Vb(),r.Wb(4,"div",3),r.Wb(5,"mat-grid-list",4),r.Hc(6,ot,3,3,"mat-grid-tile",5),r.Vb(),r.Vb(),r.Hc(7,rt,5,1,"div",6),r.Hc(8,ct,9,8,"ng-template",null,7,r.Ic),r.Vb()),2&t){const t=r.vc(9);r.Cb(2),r.pc("placeholder",r.kc(3,6,"global.extension_placeholder")),r.oc("ngModel",e.numeric)("readOnly",""!==e.oldNumeric),r.Cb(4),r.oc("ngForOf",e.keys),r.Cb(1),r.oc("ngIf",!e.fromPopUp)("ngIfElse",t)}},directives:[R.c,c,W.b,R.s,R.v,I.b,o.s,o.t,I.d,k.b,_.a],pipes:[s.d],styles:[".key[_ngcontent-%COMP%]{background-color:#e1e1e1;min-width:inherit!important}.key-container[_ngcontent-%COMP%]{height:calc(100% - 120px);padding:1em 4em}.input-holder[_ngcontent-%COMP%]{padding:.5em 3em!important}.dialer[_ngcontent-%COMP%]{height:50px}.dialer[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{background-color:#4ec060}.remove-number[_ngcontent-%COMP%]{right:6.5em}"]}),t})();var lt=i("K3ar");function ht(t,e){if(1&t&&(r.Wb(0,"mat-list-item",5),r.Wb(1,"mat-icon",6),r.Jc(2),r.Vb(),r.Wb(3,"h3",7),r.Jc(4),r.Vb(),r.Wb(5,"p",8),r.Jc(6),r.jc(7,"jalali"),r.Vb(),r.Wb(8,"div",9),r.Jc(9),r.jc(10,"translate"),r.Vb(),r.Vb()),2&t){const t=e.$implicit,i=r.ic(2);r.Cb(1),r.Eb(t.color),r.Cb(1),r.Lc(" ",t.icon," "),r.Cb(2),r.Mc(" ",t.user?t.user.extension_name+"-":""," ",t.src," "),r.Cb(2),r.Kc(r.lc(7,7,t.date,i.rtlDirection)),r.Cb(3),r.Lc(" ",r.kc(10,10,t.desc)," ")}}function bt(t,e){if(1&t&&(r.Wb(0,"mat-list",3),r.Hc(1,ht,11,12,"mat-list-item",4),r.Vb()),2&t){const t=r.ic();r.Cb(1),r.oc("ngForOf",t.cdrExtensionList)}}function ut(t,e){1&t&&(r.Jc(0),r.jc(1,"translate")),2&t&&r.Lc(" ",r.kc(1,1,"global.no_result")," ")}let gt=(()=>{class t{constructor(t,e,i,n){this.api=t,this.softPhoneService=e,this.refreshLoginService=i,this.loadingIndicatorService=n,this.triggerBottomSheet=new r.o,this.loggedInUserExtension="",this.cdrList=[],this.callPopUpMinimizeStatus=!1,this.cdrExtensionList=[],this._subscription=new a.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe(t=>this.callPopUpMinimizeStatus=t)),this._subscription.add(this.softPhoneService.currentExtensionList.subscribe(t=>{t&&t.length&&setTimeout(()=>{this.loggedInUserExtension=t.filter(t=>t.username===this.loggedInUser.email).pop().extension_no})})),this._subscription.add(this.softPhoneService.currentActiveTab.subscribe(t=>2===t?this.getCdr():null))}ngOnInit(){this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),setTimeout(()=>this.getCdr())}getCdr(){this._subscription.add(this.api.getCdr(this.loggedInUserExtension).subscribe(t=>{this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.success&&t.data.length&&(this.cdrList=t.data,this.cdrList.map(t=>{let e=null,i=null;if(this.loggedInUserExtension===t.dst){i=this.softPhoneUsers.filter(e=>e.extension_no===t.src).pop();let n="",o="";switch(t.disposition){case"NO ANSWER":n="soft_phone.call_logs.missed_call",o="text-red-500";break;case"BUSY":n="soft_phone.call_logs.rejected",o="text-orange-600";break;case"ANSWERED":n="soft_phone.call_logs.answered",o="text-green-500"}e={src:t.src,dst:t.dst,icon:"NO ANSWER"===t.disposition?"phone_missed":"phone_callback",date:t.calldate,color:o,desc:n}}else if(this.loggedInUserExtension===t.src){i=this.softPhoneUsers.filter(e=>e.extension_no===t.dst).pop();let n="",o="";switch(t.disposition){case"NO ANSWER":n="soft_phone.call_logs.not_answered",o="text-red-500";break;case"BUSY":n="soft_phone.call_logs.busy",o="text-orange-600";break;case"ANSWERED":n="soft_phone.call_logs.answered",o="text-green-500"}e={src:t.dst,dst:t.src,icon:"phone_forwarded",date:t.calldate,color:o,desc:n}}i?(e=Object.assign(Object.assign({},e),{user:i}),this.cdrExtensionList.push(e)):this.cdrExtensionList.push(e)}))},t=>{this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),this.refreshLoginService.openLoginDialog(t)}))}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(x),r.Qb(u.a),r.Qb(N.a),r.Qb(Q.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-logs"]],inputs:{rtlDirection:"rtlDirection",softPhoneUsers:"softPhoneUsers",loggedInUser:"loggedInUser"},outputs:{triggerBottomSheet:"triggerBottomSheet"},decls:4,vars:3,consts:[[1,"full-height","flex-center",3,"dir"],["class","cdr-mat-list full-width full-height overflow-x-hide overflow-y-auto",4,"ngIf","ngIfElse"],["noItem",""],[1,"cdr-mat-list","full-width","full-height","overflow-x-hide","overflow-y-auto"],["class","highlight cursor-pointer height-45 padding-tiny-t-b padding-mini-r-l",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","height-45","padding-tiny-t-b","padding-mini-r-l"],["mat-list-icon",""],["matLine","",1,"font-7-rem","text-weight-bold","line-height-20"],["matLine","",1,"font-7-em","text-gray-600","line-height-15"],[1,"user-soft-phone-status","white-space-nowrap","pos-rel","text-gray-500","round-corner-all","transition","font-7-em"]],template:function(t,e){if(1&t&&(r.Wb(0,"div",0),r.Hc(1,bt,2,1,"mat-list",1),r.Hc(2,ut,2,3,"ng-template",null,2,r.Ic),r.Vb()),2&t){const t=r.vc(3);r.oc("dir",e.rtlDirection?"rtl":"ltr"),r.Cb(1),r.oc("ngIf",e.cdrExtensionList.length)("ngIfElse",t)}},directives:[W.b,o.t,S.a,o.s,S.d,_.a,S.c,U.k],pipes:[lt.a,s.d],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.highlight[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid hsla(0,0%,86.3%,.5)}"]}),t})();function dt(t,e){1&t&&(r.Wb(0,"div",8),r.Wb(1,"mat-icon",9),r.Jc(2,"lock"),r.Vb(),r.Vb())}function pt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"mat-list-item",4),r.ec("click",(function(){r.zc(t);const i=e.$implicit;return r.ic().openSheet(i)})),r.Wb(1,"mat-icon",5),r.Jc(2,"group"),r.Vb(),r.Wb(3,"h3",6),r.Jc(4),r.Vb(),r.Hc(5,dt,3,0,"div",7),r.Vb()}if(2&t){const t=e.$implicit;r.Cb(4),r.Lc(" ",t.extension_name," "),r.Cb(1),r.oc("ngIf",t.password.length)}}let ft=(()=>{class t extends l.a{constructor(t,e,i,n,o,s,c,l){super(i,s),this.softPhoneService=t,this.translateService=e,this.injector=i,this.apiService=n,this.refreshLoginService=o,this.userInfoService=s,this.loadingIndicatorService=c,this.messageService=l,this.softPhoneUsers=[],this.triggerBottomSheet=new r.o,this.conferenceList=[],this.callPopUpMinimizeStatus=!1,this._subscription=new a.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe(t=>this.callPopUpMinimizeStatus=t))}ngOnInit(){this.getConferenceList()}getConferenceList(){this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.getConferenceList().subscribe(t=>{this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.success&&t.data.map(t=>{let e=Object.assign({username:"0",is_online:0,extension_name:t.conf_name,caller_id_number:t.conf_number,extension_no:t.conf_number,extension_type:"2"},t);this.conferenceList.push(e)})},t=>{this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),this.refreshLoginService.openLoginDialog(t)}))}openSheet(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:q,height:"200px",width:"98%",data:Object.assign(Object.assign({},t),{type:"conference"})})}getTranslate(t){return this.translateService.instant(t)}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u.a),r.Qb(s.e),r.Qb(r.s),r.Qb(x),r.Qb(N.a),r.Qb(g.a),r.Qb(Q.a),r.Qb(G.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-conference"]],inputs:{rtlDirection:"rtlDirection",softPhoneUsers:"softPhoneUsers"},outputs:{triggerBottomSheet:"triggerBottomSheet"},features:[r.zb],decls:6,vars:5,consts:[[1,"full-width","full-height",3,"dir"],["mat-subheader",""],[1,"full-width"],["class","highlight cursor-pointer padding-r-l height-50 margin-b-half",3,"click",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","padding-r-l","height-50","margin-b-half",3,"click"],["mat-list-icon",""],["matLine","",1,"font-7-rem","text-weight-bold"],["class","pos-rel text-gray-500 height-30 line-height-35 round-corner-all text-center",4,"ngIf"],[1,"pos-rel","text-gray-500","height-30","line-height-35","round-corner-all","text-center"],[1,"font-full-plus-two-tenth-em"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Jc(2),r.jc(3,"translate"),r.Vb(),r.Wb(4,"mat-list",2),r.Hc(5,pt,6,2,"mat-list-item",3),r.Vb(),r.Vb()),2&t&&(r.oc("dir",e.rtlDirection?"rtl":"ltr"),r.Cb(2),r.Kc(r.kc(3,3,"soft_phone.conferences.conference_list")),r.Cb(3),r.oc("ngForOf",e.conferenceList))},directives:[W.b,S.g,S.a,o.s,S.d,_.a,S.c,U.k,o.t],pipes:[s.d],styles:[".highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]}),t})();const mt=["bottomSheet"],wt=["audioRemote"],vt=["ringtone"],xt=["ringbacktone"],Ct=["dtmfTone"];function St(t,e){if(1&t){const t=r.Xb();r.Wb(0,"a",17),r.ec("click",(function(){return r.zc(t),r.ic().maximizeCallPopUp()})),r.Jc(1),r.jc(2,"translate"),r.Vb()}2&t&&(r.Cb(1),r.Lc(" ",r.kc(2,1,"soft_phone.main.back_to_call")," "))}function kt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"app-soft-phone-information",18),r.ec("triggerBottomSheet",(function(e){return r.zc(t),r.ic().openButtonSheet(e)})),r.Vb()}if(2&t){const t=r.ic();r.oc("loggedInUser",t.loggedInUser)("rtlDirection",t.rtlDirection)("softPhoneUsers",t.softPhoneUsers)}}function _t(t,e){if(1&t){const t=r.Xb();r.Wb(0,"app-soft-phone-keypad",19),r.ec("triggerBottomSheet",(function(e){return r.zc(t),r.ic().openButtonSheet(e)})),r.Vb()}if(2&t){const t=r.ic();r.oc("rtlDirection",t.rtlDirection)("softPhoneUsers",t.softPhoneUsers)}}function Pt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"app-soft-phone-logs",18),r.ec("triggerBottomSheet",(function(e){return r.zc(t),r.ic().openButtonSheet(e)})),r.Vb()}if(2&t){const t=r.ic();r.oc("loggedInUser",t.loggedInUser)("rtlDirection",t.rtlDirection)("softPhoneUsers",t.softPhoneUsers)}}function yt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"app-soft-phone-conference",19),r.ec("triggerBottomSheet",(function(e){return r.zc(t),r.ic().openButtonSheet(e)})),r.Vb()}if(2&t){const t=r.ic();r.oc("rtlDirection",t.rtlDirection)("softPhoneUsers",t.softPhoneUsers)}}function Vt(t,e){if(1&t&&(r.Wb(0,"mat-icon",22),r.Jc(1),r.Vb(),r.Wb(2,"span",23),r.Jc(3),r.Vb()),2&t){const t=r.ic().$implicit;r.Cb(1),r.Lc(" ",t.icon," "),r.Cb(2),r.Kc(t.name)}}function Wt(t,e){1&t&&(r.Wb(0,"mat-tab",20),r.Hc(1,Vt,4,2,"ng-template",21),r.Vb())}function It(t,e){1&t&&(r.Wb(0,"div",24),r.Wb(1,"div",25),r.hc(),r.Wb(2,"svg",26),r.Wb(3,"rect",27),r.Rb(4,"animate",28),r.Rb(5,"animate",29),r.Vb(),r.Wb(6,"rect",30),r.Rb(7,"animate",31),r.Rb(8,"animate",32),r.Vb(),r.Wb(9,"rect",33),r.Rb(10,"animate",34),r.Rb(11,"animate",35),r.Vb(),r.Vb(),r.gc(),r.Wb(12,"span",36),r.Jc(13),r.jc(14,"translate"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Cb(13),r.Kc(r.kc(14,1,"global.loading")))}let Ut=(()=>{class t extends l.a{constructor(t,e,i,n,o,s,r,c,l){super(e,n),this.api=t,this.injector=e,this.translate=i,this.userInfoService=n,this.softPhoneService=o,this.viewDirection=s,this.notificationService=r,this.refreshLoginService=c,this.loadingIndicatorService=l,this.loadingIndicator=null,this.activeTab=new R.g(0),this.tabs=[],this.callPopUpMinimizeStatus=!1,this.softPhoneUsers=[],this._subscription=new a.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe(t=>{this.rtlDirection=t,this.changeMainTabLanguage()})),this._subscription.add(this.loadingIndicatorService.currentLoadingStatus.subscribe(t=>this.loadingIndicator=t)),this._subscription.add(this.softPhoneService.currentSoftPhoneUsers.subscribe(t=>this.softPhoneUsers=t)),this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe(t=>this.callPopUpMinimizeStatus=t)),this._subscription.add(this.softPhoneService.currentActiveTab.subscribe(t=>this.activeTab.setValue(t))),this._subscription.add(this.softPhoneService.currentOnCallUser.subscribe(t=>{t?this.openButtonSheet({component:K,height:"100%",width:"100%",data:t}):this.bottomSheet&&this.bottomSheet.close()}))}ngOnInit(){this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.getExtensionList().subscribe(t=>{if(this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.success){const e=t.data.filter(t=>"2"===t.extension_type&&t.username.length>10);this.softPhoneService.changeSoftPhoneUsers(e),this.softPhoneService.changeExtensionList(e).then(()=>{this.softPhoneUsers=e,this.softPhoneService.sipRegister()})}},t=>{this.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),this.refreshLoginService.openLoginDialog(t)}))}ngAfterViewInit(){this.softPhoneService.changeAudioRemoteTag({audioRemote:this.audioRemote,ringtone:this.ringtone,ringbacktone:this.ringbacktone,dtmfTone:this.dtmfTone}),this.changeMainTabLanguage()}changeMainTabLanguage(){setTimeout(()=>{this.tabs=[{name:this.getTranslate("soft_phone.main.status"),icon:"home"},{name:this.getTranslate("soft_phone.main.dial_pad"),icon:"dialpad"},{name:this.getTranslate("soft_phone.main.call_logs"),icon:"settings_phone"},{name:this.getTranslate("soft_phone.main.public_room"),icon:"group"}]},200)}tabChange(t){this.activeTab.setValue(t.index)}openButtonSheet(t){try{t.bottomSheetRef=this.bottomSheet,this.bottomSheet.toggleBottomSheet(t)}catch(e){console.log(e)}}call(t){this.openButtonSheet(t)}maximizeCallPopUp(){this.softPhoneService.changeMinimizeCallPopUp(!1)}getTranslate(t){return this.translate.instant(t)}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe(),this.softPhoneService.sipHangUp()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(x),r.Qb(r.s),r.Qb(s.e),r.Qb(g.a),r.Qb(u.a),r.Qb(b.a),r.Qb(C.a),r.Qb(N.a),r.Qb(Q.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-main"]],viewQuery:function(t,e){var i;1&t&&(r.Pc(mt,!0),r.Pc(wt,!0),r.Pc(vt,!0),r.Pc(xt,!0),r.Pc(Ct,!0)),2&t&&(r.uc(i=r.fc())&&(e.bottomSheet=i.first),r.uc(i=r.fc())&&(e.audioRemote=i.first),r.uc(i=r.fc())&&(e.ringtone=i.first),r.uc(i=r.fc())&&(e.ringbacktone=i.first),r.uc(i=r.fc())&&(e.dtmfTone=i.first))},features:[r.zb],decls:22,vars:14,consts:[[1,"soft-phone-wrapper","full-height","bg-white","display-flex","overflow-hide",3,"dir"],["class","display-block full-width height-35 line-height-35 font-8-em back-to-call text-white cursor-pointer text-center pos-rel z-index-99",3,"click",4,"ngIf"],[1,"soft-phone-container","full-width","pos-rel",3,"ngClass"],[3,"ngSwitch"],[3,"ngSwitchCase"],[1,"soft-phone-toolbar","clear-both","full-width","height-45","z-index-1"],["color","primary",1,"full-height","soft-phone-tab",3,"selectedIndex","selectedTabChange"],["class","full-height",4,"ngFor","ngForOf"],["bottomSheet",""],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["autoplay","autoplay"],["audioRemote",""],["loop","",3,"src"],["ringtone",""],["ringbacktone",""],[3,"src"],["dtmfTone",""],[1,"display-block","full-width","height-35","line-height-35","font-8-em","back-to-call","text-white","cursor-pointer","text-center","pos-rel","z-index-99",3,"click"],[3,"loggedInUser","rtlDirection","softPhoneUsers","triggerBottomSheet"],[3,"rtlDirection","softPhoneUsers","triggerBottomSheet"],[1,"full-height"],["class","full-height","mat-tab-label",""],["mat-list-icon","",1,"clear-both","text-gray-a300","height-20","width-20","font-full-plus-half-em"],[1,"font-half-em","clear-both","text-weight-bold"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","version","1.1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Hc(1,St,3,3,"a",1),r.Wb(2,"div",2),r.Ub(3,3),r.Hc(4,kt,1,3,"ng-template",4),r.Hc(5,_t,1,2,"ng-template",4),r.Hc(6,Pt,1,3,"ng-template",4),r.Hc(7,yt,1,2,"ng-template",4),r.Tb(),r.Vb(),r.Wb(8,"div",5),r.Wb(9,"mat-tab-group",6),r.ec("selectedTabChange",(function(t){return e.tabChange(t)})),r.Hc(10,Wt,2,0,"mat-tab",7),r.Vb(),r.Vb(),r.Rb(11,"app-soft-phone-bottom-sheet",null,8),r.Hc(13,It,15,3,"div",9),r.Vb(),r.Rb(14,"audio",10,11),r.Rb(16,"audio",12,13),r.Rb(18,"audio",12,14),r.Rb(20,"audio",15,16)),2&t&&(r.oc("dir",e.rtlDirection?"rtl":"ltr"),r.Cb(1),r.oc("ngIf",e.callPopUpMinimizeStatus),r.Cb(1),r.oc("ngClass",e.callPopUpMinimizeStatus?"height-full-minus-80":"height-full-minus-45"),r.Cb(1),r.oc("ngSwitch",e.activeTab.value),r.Cb(1),r.oc("ngSwitchCase",0),r.Cb(1),r.oc("ngSwitchCase",1),r.Cb(1),r.oc("ngSwitchCase",2),r.Cb(1),r.oc("ngSwitchCase",3),r.Cb(2),r.oc("selectedIndex",e.activeTab.value),r.Cb(1),r.oc("ngForOf",e.tabs),r.Cb(3),r.oc("ngIf",e.loadingIndicator&&e.loadingIndicator.status&&"pbx"===e.loadingIndicator.serviceName),r.Cb(3),r.oc("src","assets/sounds/ringtone.wav",r.Bc),r.Cb(2),r.oc("src","assets/sounds/ringbacktone.wav",r.Bc),r.Cb(2),r.oc("src","assets/sounds/dtmf.wav",r.Bc))},directives:[W.b,o.t,o.q,o.x,o.y,F.c,o.s,V,it,at,gt,ft,F.a,F.d,_.a,S.c],pipes:[s.d],styles:[".soft-phone-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:stretch}.soft-phone-wrapper[_ngcontent-%COMP%]   .soft-phone-toolbar[_ngcontent-%COMP%]{border-top:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.soft-phone-wrapper[_ngcontent-%COMP%]   .mat-list-avatar[_ngcontent-%COMP%]{border:1px solid #bbb}.back-to-call[_ngcontent-%COMP%]{-webkit-animation:glowing 1s infinite;animation:glowing 1s infinite}@-webkit-keyframes glowing{0%{background-color:#46b241;-webkit-box-shadow:0 0 3px #46b241}50%{background-color:#418252;-webkit-box-shadow:0 0 10px #418252}to{background-color:#46b241;-webkit-box-shadow:0 0 3px #46b241}}@keyframes glowing{0%{background-color:#46b241;box-shadow:0 0 3px #46b241}50%{background-color:#418252;box-shadow:0 0 10px #418252}to{background-color:#46b241;box-shadow:0 0 3px #46b241}}"]}),t})();var Dt=i("0d0Z"),Mt=i("5+WD");function Ot(t,e){if(1&t&&(r.Wb(0,"h3",10),r.Wb(1,"mat-icon",11),r.Jc(2),r.Vb(),r.Jc(3),r.Vb()),2&t){const t=r.ic();r.Cb(1),r.oc("ngClass",t.rtlDirection?"margin-l-half":"margin-r-half"),r.Cb(1),r.Kc(t.data.icon),r.Cb(1),r.Lc(" ",t.rtlDirection?t.data.name_fa:t.data.name," ")}}function zt(t,e){if(1&t&&(r.Wb(0,"h3",12),r.Wb(1,"mat-icon",11),r.Jc(2),r.Vb(),r.Jc(3),r.Vb()),2&t){const t=r.ic();r.Cb(1),r.oc("ngClass",t.rtlDirection?"margin-l-half":"margin-r-half"),r.Cb(1),r.Kc(t.data.icon),r.Cb(1),r.Lc(" ",t.rtlDirection?t.data.name_fa:t.data.name," ")}}function Lt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",13),r.ec("click",(function(e){return r.zc(t),r.ic().minimize(),e.stopPropagation()})),r.Wb(1,"mat-icon",8),r.Jc(2," minimize "),r.Vb(),r.Vb()}}function Tt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",7),r.ec("click",(function(e){return r.zc(t),r.ic().restore(),e.stopPropagation()})),r.Wb(1,"mat-icon",8),r.Jc(2," filter_none "),r.Vb(),r.Vb()}}function Bt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",7),r.ec("click",(function(e){return r.zc(t),r.ic().maximize(),e.stopPropagation()})),r.Wb(1,"mat-icon",8),r.Jc(2," crop_square "),r.Vb(),r.Vb()}}let Jt=(()=>{class t{constructor(t,e,i){this.windowManagerService=t,this.softPhoneService=e,this.viewDirection=i,this._subscription=new a.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe(t=>this.rtlDirection=t))}ngOnInit(){this._subscription.add(this.windowManagerService.windowsList.subscribe(t=>{this.windowInstance=t.filter(t=>t.windowService.serviceTitle===this.data.serviceTitle).pop()}))}activeWindow(){this.windowManagerService.activeWindow(this.data)}minimize(){this.windowManagerService.minimizeWindow(this.data)}maximize(){this.windowManagerService.maximizeWindow(this.data)}restore(){this.windowManagerService.restoreWindow(this.data)}close(){this.softPhoneService.sipHangUp(),this.softPhoneService.sipUnRegister(),this.windowManagerService.closeWindow(this.data)}centerWindow(){this.windowManagerService.centerWindow()}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Dt.a),r.Qb(u.a),r.Qb(b.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-window"]],decls:14,vars:7,consts:[[1,"pos-abs","left-0","right-0","bottom-0","top-0","full-width",3,"dir","click"],["cdkDrag","","cdkDragBoundary",".dashboard-app-boundary","cdkDragRootElement",".cdk-overlay-pane",1,"window-heading","full-width","height-45","padding-mini-r-l","display-flex","align-items-center",3,"dblclick"],[3,"ngIfElse","ngIf"],["notDraggableHeading",""],[1,"window-actions","display-flex",3,"ngClass"],["class","width-30 height-30 text-center line-height-25 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],["class","width-30 height-30 text-center line-height-35 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],[1,"width-30","height-30","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"],[1,"text-dark-mode-color","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],[1,"window-content","pos-rel"],["cdkDragHandle","",1,"window-title","full-width","full-height","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex","align-items-center","no-margin"],[1,"text-dark-mode-color","pos-rel",3,"ngClass"],[1,"window-title","full-width","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex"],[1,"width-30","height-30","text-center","line-height-25","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"]],template:function(t,e){if(1&t&&(r.Wb(0,"div",0),r.ec("click",(function(){return e.activeWindow()})),r.Wb(1,"div",1),r.ec("dblclick",(function(){return e.windowInstance.isMaximized&&!e.windowInstance.isMaximized?e.maximize():e.windowInstance.isMaximized?e.restore():null})),r.Hc(2,Ot,4,3,"ng-template",2),r.Hc(3,zt,4,3,"ng-template",null,3,r.Ic),r.Wb(5,"div",4),r.Hc(6,Lt,3,0,"button",5),r.Hc(7,Tt,3,0,"button",6),r.Hc(8,Bt,3,0,"button",6),r.Wb(9,"button",7),r.ec("click",(function(t){return e.close(),t.stopPropagation()})),r.Wb(10,"mat-icon",8),r.Jc(11,"close "),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(12,"div",9),r.Rb(13,"app-soft-phone-main"),r.Vb(),r.Vb()),2&t){const t=r.vc(4);r.oc("dir",e.rtlDirection?"rtl":"ltr"),r.Cb(2),r.oc("ngIfElse",t)("ngIf",e.windowInstance.isDraggable),r.Cb(3),r.oc("ngClass",e.rtlDirection?" margin-r-auto":" margin-l-auto"),r.Cb(1),r.oc("ngIf",!e.windowInstance.isMinimized),r.Cb(1),r.oc("ngIf",e.windowInstance.isMaximized||e.windowInstance.isMinimized),r.Cb(1),r.oc("ngIf",e.windowInstance.maximizable&&!e.windowInstance.isMaximized&&!e.windowInstance.isMinimized)}},directives:[W.b,Mt.a,o.t,o.q,_.a,Ut,Mt.b],encapsulation:2}),t})();var Et=i("kmnG"),jt=i("qFsG");function Ht(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",20),r.ec("click",(function(){return r.zc(t),r.ic(2).form.get("name").setValue("")})),r.Wb(1,"mat-icon"),r.Jc(2,"close"),r.Vb(),r.Vb()}}function Kt(t,e){1&t&&(r.Wb(0,"mat-error"),r.Jc(1),r.jc(2,"translate"),r.Vb()),2&t&&(r.Cb(1),r.Lc(" ",r.kc(2,1,"global.name_error")," "))}function Rt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",20),r.ec("click",(function(){return r.zc(t),r.ic(2).form.get("family").setValue("")})),r.Wb(1,"mat-icon"),r.Jc(2,"close"),r.Vb(),r.Vb()}}function Nt(t,e){1&t&&(r.Wb(0,"mat-error"),r.Jc(1),r.jc(2,"translate"),r.Vb()),2&t&&(r.Cb(1),r.Lc(" ",r.kc(2,1,"global.family_error")," "))}function Qt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",20),r.ec("click",(function(){return r.zc(t),r.ic(2).form.get("extension").setValue("")})),r.Wb(1,"mat-icon"),r.Jc(2,"close"),r.Vb(),r.Vb()}}function Ft(t,e){1&t&&(r.Wb(0,"mat-error"),r.Jc(1),r.jc(2,"translate"),r.Vb()),2&t&&(r.Cb(1),r.Lc(" ",r.kc(2,1,"global.extension_error")," "))}function Yt(t,e){1&t&&(r.Wb(0,"button",21),r.Wb(1,"mat-icon",17),r.Jc(2,"delete"),r.Vb(),r.Vb())}function At(t,e){if(1&t&&(r.Wb(0,"div",4),r.Wb(1,"form",5),r.Wb(2,"h1",6),r.Jc(3),r.jc(4,"translate"),r.Vb(),r.Wb(5,"div",7),r.Wb(6,"div",8),r.Wb(7,"mat-form-field",9),r.Wb(8,"mat-label"),r.Jc(9),r.jc(10,"translate"),r.Vb(),r.Rb(11,"input",10),r.Hc(12,Ht,3,0,"button",11),r.Hc(13,Kt,3,3,"mat-error",12),r.Vb(),r.Vb(),r.Wb(14,"div",8),r.Wb(15,"mat-form-field",9),r.Wb(16,"mat-label"),r.Jc(17),r.jc(18,"translate"),r.Vb(),r.Rb(19,"input",13),r.Hc(20,Rt,3,0,"button",11),r.Hc(21,Nt,3,3,"mat-error",12),r.Vb(),r.Vb(),r.Wb(22,"div",8),r.Wb(23,"mat-form-field",9),r.Wb(24,"mat-label"),r.Jc(25),r.jc(26,"translate"),r.Vb(),r.Rb(27,"input",14),r.Hc(28,Qt,3,0,"button",11),r.Hc(29,Ft,3,3,"mat-error",12),r.Vb(),r.Vb(),r.Vb(),r.Wb(30,"div",15),r.Wb(31,"button",16),r.Wb(32,"mat-icon",17),r.Jc(33,"check"),r.Vb(),r.Wb(34,"span",18),r.Jc(35),r.jc(36,"translate"),r.Vb(),r.Vb(),r.Hc(37,Yt,3,0,"button",19),r.Vb(),r.Vb(),r.Vb()),2&t){const t=r.ic();r.Cb(1),r.oc("formGroup",t.form),r.Cb(2),r.Lc(" ",r.kc(4,15,"soft_phone.soft_phone_contacts.add_new_contact")," "),r.Cb(6),r.Kc(r.kc(10,17,"global.name")),r.Cb(3),r.oc("ngIf",t.form.get("name").touched&&t.form.get("name").value.length),r.Cb(1),r.oc("ngIf",!t.form.get("name").valid&&t.form.get("name").touched),r.Cb(4),r.Kc(r.kc(18,19,"global.family")),r.Cb(3),r.oc("ngIf",t.form.get("family").touched&&t.form.get("family").value.length),r.Cb(1),r.oc("ngIf",!t.form.get("family").valid&&t.form.get("family").touched),r.Cb(4),r.Kc(r.kc(26,21,"global.extension")),r.Cb(3),r.oc("ngIf",t.form.get("extension").touched&&t.form.get("extension").value.length),r.Cb(1),r.oc("ngIf",!t.form.get("extension").valid&&t.form.get("extension").touched),r.Cb(2),r.oc("disabled",!t.form.valid&&t.form.touched)("ngClass",t.data&&"edit"===t.data.action&&t.rtlDirection?"margin-l-full":t.data&&"edit"===t.data.action?"margin-r-full":""),r.Cb(4),r.Kc(r.kc(36,23,"global.submit")),r.Cb(2),r.oc("ngIf",t.data&&"edit"===t.data.action)}}let Xt=(()=>{class t{constructor(t,e){this.viewDirection=t,this.fb=e,this._subscription=new a.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe(t=>this.rtlDirection=t))}ngOnInit(){this.data=this.bottomSheetData.data,this.data?this.createForm().then(()=>{this.form.patchValue({name:this.data.name,family:this.data.family,extension_no:this.data.extension_no})}):this.createForm()}createForm(){return new Promise(t=>{this.form=this.fb.group({name:new R.g("",R.G.required),family:new R.g("",R.G.required),extension_no:new R.g(0,R.G.required)}),t()})}closeBottomSheet(){this.bottomSheetData.bottomSheetRef.close()}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(b.a),r.Qb(R.f))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-contact-detail"]],decls:5,vars:2,consts:[[1,"full-width","full-height","padding-r-l","padding-b-full"],[1,"width-30","height-30","pos-abs","top-0","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"ngClass","click"],[1,"text-dark-mode-color","line-height-35","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],["class","height-full-minus-35 float-right full-width",4,"ngIf"],[1,"height-full-minus-35","float-right","full-width"],[1,"full-height",3,"formGroup"],[1,"margin-b-full","text-gray-800","full-width","font-full-em","text-weight-500","margin-b-half"],[1,"row"],[1,"col-md-12","margin-b-half","float-right"],[1,"full-width","font-9-em"],["formControlName","name","matInput","","tabindex","1"],["aria-label","Clear","class","close-icon pos-rel top-half float-left","mat-button","","mat-icon-button","","matSuffix","","type","button",3,"click",4,"ngIf"],[4,"ngIf"],["formControlName","family","matInput","","tabindex","2"],["formControlName","extension","matInput","","tabindex","3"],[1,"display-flex"],["mat-raised-button","","tabindex","4","type","submit",1,"green-gradient","full-width","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","ngClass"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["class","red-gradient width-30 height-30 text-white line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","","tabindex","5",4,"ngIf"],["aria-label","Clear","mat-button","","mat-icon-button","","matSuffix","","type","button",1,"close-icon","pos-rel","top-half","float-left",3,"click"],["mat-raised-button","","tabindex","5",1,"red-gradient","width-30","height-30","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"button",1),r.ec("click",(function(){return e.closeBottomSheet()})),r.Wb(2,"mat-icon",2),r.Jc(3," close "),r.Vb(),r.Vb(),r.Hc(4,At,38,25,"div",3),r.Vb()),2&t&&(r.Cb(1),r.oc("ngClass",e.rtlDirection?"left-0":"right-0"),r.Cb(3),r.oc("ngIf",e.form))},directives:[o.q,_.a,o.t,R.I,R.t,R.k,Et.c,Et.g,R.c,jt.b,R.s,R.i,k.b,Et.j,Et.b],pipes:[s.d],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}"]}),t})();const $t=["bottomSheet"];function qt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"mat-list",9),r.Wb(1,"mat-list-item",10),r.Rb(2,"img",11),r.Wb(3,"h3",12),r.Jc(4),r.Vb(),r.Wb(5,"div",13),r.Wb(6,"button",14),r.ec("click",(function(){return r.zc(t),r.ic().addNewContact()})),r.Wb(7,"mat-icon",15),r.Jc(8,"add"),r.Vb(),r.Wb(9,"span",16),r.Jc(10),r.jc(11,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=r.ic();r.Cb(2),r.oc("alt",t.loggedInUser?t.loggedInUser.name:"")("src",t.loggedInUser.email,r.Bc),r.Cb(2),r.Lc(" ",t.loggedInUser?t.loggedInUser.name:""," "),r.Cb(6),r.Kc(r.kc(11,4,"soft_phone.soft_phone_contacts.new_contact"))}}function Gt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",22),r.ec("click",(function(e){r.zc(t);const i=r.ic().$implicit;return r.ic().editContact(i),e.stopPropagation()})),r.Wb(1,"mat-icon",23),r.Jc(2,"edit "),r.Vb(),r.Vb()}}function Zt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"mat-list-item",17),r.ec("click",(function(){r.zc(t);const i=e.$implicit,n=r.ic();return n.fromPopUp?n.transferCall(i):n.openSheet(i)})),r.Wb(1,"mat-icon",18),r.Jc(2,"person"),r.Vb(),r.Wb(3,"div",19),r.Jc(4),r.Vb(),r.Wb(5,"div",20),r.Jc(6),r.Vb(),r.Hc(7,Gt,3,0,"button",21),r.Rb(8,"mat-divider"),r.Vb()}if(2&t){const t=e.$implicit,i=r.ic();r.Cb(4),r.Kc(t.extension_name),r.Cb(2),r.Kc(t.extension_no),r.Cb(1),r.oc("ngIf",!i.fromPopUp)}}function te(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",24),r.Wb(1,"button",25),r.ec("click",(function(){return r.zc(t),r.ic().dismissTransferCall()})),r.Wb(2,"span",16),r.Jc(3),r.jc(4,"translate"),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=r.ic();r.Cb(1),r.oc("disabled",t.disableContacts),r.Cb(2),r.Kc(r.kc(4,2,"global.dismiss"))}}let ee=(()=>{class t{constructor(t,e,i){this.softPhoneService=t,this.translateService=e,this.messageService=i,this.triggerBottomSheet=new r.o,this.triggerCloseBottomSheet=new r.o,this.fromPopUp=!1,this.disableContacts=!1,this.callPopUpMinimizeStatus=!1,this.filterArgs=null,this._subscription=new a.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe(t=>this.callPopUpMinimizeStatus=t))}ngOnInit(){this.assignCopy(),this.filterArgs={email:this.loggedInUser.email}}filterContacts(t){t||this.assignCopy(),this.filteredUsers=Object.assign([],this.softPhoneUsers).filter(e=>e.extension_name.toLowerCase().indexOf(t.toLowerCase())>-1)}assignCopy(){this.filteredUsers=Object.assign([],this.softPhoneUsers)}openSheet(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:q,height:"200px",width:"98%",data:t})}addNewContact(){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:Xt,height:"270px",width:"98%"})}editContact(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:Xt,height:"270px",width:"98%",data:Object.assign(Object.assign({},t),{action:"edit"})})}transferCall(t){this.disableContacts=!0,this.softPhoneService.sipTransfer(t.extension_no),setTimeout(()=>this.triggerCloseBottomSheet.emit(),1e3)}dismissTransferCall(){this.triggerCloseBottomSheet.emit()}getTranslate(t){return this.translateService.instant(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u.a),r.Qb(s.e),r.Qb(G.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-soft-phone-contacts"]],viewQuery:function(t,e){var i;1&t&&r.Pc($t,!0),2&t&&r.uc(i=r.fc())&&(e.bottomSheet=i.first)},inputs:{rtlDirection:"rtlDirection",fromPopUp:"fromPopUp",softPhoneUsers:"softPhoneUsers",loggedInUser:"loggedInUser"},outputs:{triggerBottomSheet:"triggerBottomSheet",triggerCloseBottomSheet:"triggerCloseBottomSheet"},decls:11,vars:10,consts:[[1,"full-width","full-height"],["class","soft-phone-user full-width height-50",4,"ngIf"],[1,"contact-search","height-45","padding-half"],["type","text",1,"full-width","full-height","round-corner","padding-mini-r-l","line-height-45",3,"placeholder","input"],["contactList",""],[1,"height-full-minus-95","padding-r-l","overflow-x-hide","overflow-y-auto"],[3,"disabled"],["class","cursor-pointer full-width height-45 font-8-rem",3,"click",4,"ngFor","ngForOf"],["class","height-45 padding-mini-t-b padding-r-l full-width display-flex flex-direction-row-reverse flex-space-between",4,"ngIf"],[1,"soft-phone-user","full-width","height-50"],[1,"padding-mini-r-l","full-height"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"mat-elevation-z2",3,"alt","src"],["matLine","",1,"font-8-rem","text-weight-bold"],[1,"font-8-rem"],["mat-raised-button","",1,"green-gradient","padding-mini-r-l","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],[1,"cursor-pointer","full-width","height-45","font-8-rem",3,"click"],["mat-list-icon",""],["mat-line",""],[1,"text-gray-700","margin-r-l"],["class","cursor-pointer no-bg no-border width-30 height-30 text-center text-green-500",3,"click",4,"ngIf"],[1,"cursor-pointer","no-bg","no-border","width-30","height-30","text-center","text-green-500",3,"click"],[1,"full-width","full-height","text-center","line-height-30","font-full-plus-two-tenth-rem"],[1,"height-45","padding-mini-t-b","padding-r-l","full-width","display-flex","flex-direction-row-reverse","flex-space-between"],["mat-raised-button","","type","button",1,"full-width","red-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"]],template:function(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",0),r.Hc(1,qt,12,6,"mat-list",1),r.Wb(2,"div",2),r.Wb(3,"input",3,4),r.ec("input",(function(){r.zc(t);const i=r.vc(4);return e.filterContacts(i.value)})),r.jc(5,"translate"),r.Vb(),r.Vb(),r.Wb(6,"div",5),r.Wb(7,"mat-list",6),r.Hc(8,Zt,9,3,"mat-list-item",7),r.jc(9,"myFilter"),r.Vb(),r.Vb(),r.Hc(10,te,5,4,"div",8),r.Vb()}2&t&&(r.Cb(1),r.oc("ngIf",!e.fromPopUp),r.Cb(2),r.pc("placeholder",r.kc(5,5,"global.search")),r.Cb(4),r.oc("disabled",e.disableContacts),r.Cb(1),r.oc("ngForOf",r.lc(9,7,e.filteredUsers,e.filterArgs)),r.Cb(2),r.oc("ngIf",e.fromPopUp))},directives:[o.t,S.a,o.s,S.d,S.b,U.k,k.b,_.a,S.c,X.a],pipes:[s.d,nt],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.contact-search[_ngcontent-%COMP%], .soft-phone-user[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.contact-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .soft-phone-user[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid hsla(0,0%,86.3%,.93)}"]}),t})();var ie=i("vxfF"),ne=i("/1cH"),oe=i("TU8p"),se=i("2ChS"),re=i("jaxi"),ce=i("Wp6s"),ae=i("bSwM"),le=i("A5z7"),he=i("iadO"),be=i("0IaG"),ue=i("7EHt"),ge=i("ihCf"),de=i("STbY"),pe=i("bv9b"),fe=i("Xa2L"),me=i("d3UM"),we=i("XhcP"),ve=i("5RNC"),xe=i("dNgK"),Ce=i("/t3+"),Se=i("Qu3c"),ke=i("+0xr"),_e=i("M9IT"),Pe=i("QibW"),ye=i("UXJo"),Ve=i("+rOU"),We=i("Z4Gg");let Ie=(()=>{class t{constructor(t){this.componentFactoryResolver=t}resolveComponent(){return this.componentFactoryResolver.resolveComponentFactory(Jt)}}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)(r.ac(r.j))},imports:[[o.c,n.a,s.c.forChild()]]}),t})();r.Cc(m,[o.q,o.r,o.s,o.t,o.A,o.w,o.x,o.y,o.z,o.u,o.v,R.I,R.x,R.H,R.c,R.y,R.B,R.a,R.E,R.F,R.A,R.s,R.t,R.D,R.o,R.n,R.z,R.b,R.d,R.v,R.w,R.u,ie.a,ne.a,U.o,U.n,ne.d,ne.c,W.b,oe.a,Mt.e,Mt.f,Mt.a,Mt.b,Mt.d,Mt.c,se.a,k.b,k.a,re.b,re.a,ce.a,ce.f,ce.n,ce.d,ce.m,ce.l,ce.b,ce.e,ce.k,ce.i,ce.h,ce.g,ce.o,ce.c,ae.a,ae.c,le.d,le.a,le.c,le.e,le.b,le.f,he.a,he.b,he.d,he.e,he.f,he.h,he.i,he.j,he.l,he.k,he.c,be.e,be.d,be.i,be.f,be.c,ue.a,ue.c,ue.d,ue.g,ue.h,ue.f,ue.e,I.b,I.d,I.g,U.k,I.f,I.e,I.a,_.a,ge.b,ge.c,Et.b,Et.c,Et.f,Et.g,Et.h,Et.i,Et.j,jt.b,jt.d,S.a,S.h,S.d,S.b,S.c,S.g,U.r,S.i,S.f,X.a,de.e,de.b,de.d,de.a,pe.a,fe.a,fe.c,me.a,me.c,we.a,we.b,we.c,we.d,we.e,we.f,ve.a,Z.c,Z.a,xe.c,F.c,F.d,F.a,F.f,F.e,F.b,Ce.a,Ce.c,Se.a,Se.c,ke.n,ke.i,ke.k,ke.c,ke.b,ke.m,ke.e,ke.g,ke.h,ke.a,ke.d,ke.j,ke.l,ke.f,ke.q,_e.a,Pe.b,Pe.a,ye.a,Ve.b,Ve.c,Ve.k,Ve.g,s.a,We.a,R.h,R.k,R.i,R.l,R.e,A.a,c,Ut,gt,at,Jt,ee,K,ft,V,it,q,m,Xt],[o.b,o.G,o.p,o.k,o.E,o.g,o.C,o.F,o.d,o.f,o.i,o.j,o.l,lt.a,s.d,nt])},K3ar:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("BCsW"),o=i("fXoL");let s=(()=>{class t{transform(t,...e){return e[0]?n(t,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD HH:mm:ss")===t?n(t,"YYYY-MM-DD HH:mm:ss").locale("fa").format("YYYY/MM/DD HH:mm:ss"):n(t,"YYYY-MM-DD").format("YYYY-MM-DD")===t||n(t,"YYYY-MM-DD HH:mm").format("YYYY-MM-DD HH:mm")===t?n(t,"YYYY-MM-DD").locale("fa").format("YYYY/MM/DD"):"-":t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Pb({name:"jalali",type:t,pure:!0}),t})()}}]);