function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{A9vo:function(t,e,n){"use strict";n.r(e),n.d(e,"SoftPhoneModule",(function(){return Qe}));var i,o=n("PCNd"),r=n("ofXK"),s=n("sYmb"),a=n("fXoL"),c=((i=function(){function t(e){_classCallCheck(this,t),this.el=e,this.decimal=!1,this.decimalSeparator=".",this.min=-1/0,this.max=1/0,this.onValueChanged=new a.o,this.hasDecimalPoint=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.inputElement=e.nativeElement}return _createClass(t,[{key:"ngOnChanges",value:function(t){if(t.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),t.min){var e=Number(this.min);this.min=isNaN(e)?-1/0:e}if(t.max){var n=Number(this.max);this.max=isNaN(n)?1/0:n}this.onValueChanged.emit(this.inputElement.value)}},{key:"onKeyDown",value:function(t){if(this.navigationKeys.indexOf(t.key)>-1||"a"===t.key&&!0===t.ctrlKey||"c"===t.key&&!0===t.ctrlKey||"v"===t.key&&!0===t.ctrlKey||"x"===t.key&&!0===t.ctrlKey||"a"===t.key&&!0===t.metaKey||"c"===t.key&&!0===t.metaKey||"v"===t.key&&!0===t.metaKey||"x"===t.key&&!0===t.metaKey||this.decimal&&t.key===this.decimalSeparator&&!this.hasDecimalPoint)"Backspace"===t.key&&(this.inputElement.value=this.inputElement.value.substring(0,this.inputElement.value.length));else{if((" "===t.key||isNaN(Number(t.key)))&&t.preventDefault(),this.regex){var e=this.forecastValue(t.key);this.regex.test(e)||t.preventDefault()}var n=Number(this.forecastValue(t.key));(n>this.max||n<this.min)&&t.preventDefault()}}},{key:"onKeyUp",value:function(t){this.updateDecimalPoint(),this.onValueChanged.emit(this.inputElement.value)}},{key:"onPaste",value:function(t){var e=t.clipboardData.getData("text/plain");this.pasteData(e),t.preventDefault()}},{key:"onDrop",value:function(t){var e=t.dataTransfer.getData("text");this.inputElement.focus(),this.pasteData(e),t.preventDefault()}},{key:"updateDecimalPoint",value:function(){this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator)>-1)}},{key:"pasteData",value:function(t){var e=this.sanitizeInput(t);if(!document.execCommand("insertText",!1,e)){var n=this.inputElement,i=n.selectionStart,o=n.selectionEnd;this.inputElement.setRangeText(e,i,o,"end")}this.updateDecimalPoint()}},{key:"sanitizeInput",value:function(t){var e="";if(this.decimal&&this.isValidDecimal(t)){var n=new RegExp("[^0-9".concat(this.decimalSeparator,"]"),"g");e=t.replace(n,"")}else e=t.replace(/[^0-9]/g,"");var i=this.inputElement.maxLength;if(i>0){var o=i-this.inputElement.value.length;e=o>0?e.substring(0,o):""}return e}},{key:"isValidDecimal",value:function(t){if(this.hasDecimalPoint){var e=this.getSelection();return e&&e.indexOf(this.decimalSeparator)>-1?t.split(this.decimalSeparator).length<=2:t.indexOf(this.decimalSeparator)<0}return t.split(this.decimalSeparator).length<=2}},{key:"getSelection",value:function(){return this.inputElement.value.substring(this.inputElement.selectionStart,this.inputElement.selectionEnd)}},{key:"forecastValue",value:function(t){var e=this.inputElement.selectionStart,n=this.inputElement.value,i=n.substring(e,this.inputElement.selectionEnd);return i?n.replace(i,t):n.substring(0,e)+t+n.substring(e)}}]),t}()).\u0275fac=function(t){return new(t||i)(a.Qb(a.l))},i.\u0275dir=a.Lb({type:i,selectors:[["","digitOnly",""]],hostBindings:function(t,e){1&t&&a.ec("keydown",(function(t){return e.onKeyDown(t)}))("keyup",(function(t){return e.onKeyUp(t)}))("paste",(function(t){return e.onPaste(t)}))("drop",(function(t){return e.onDrop(t)}))},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",min:"min",max:"max",pattern:"pattern"},outputs:{onValueChanged:"onValueChanged"},features:[a.Ab]}),i),l=n("zB/H"),h=n("ue6I"),u=n("PqYM"),b=n("unh5"),f=n("Y2ut"),g=n("DDyt");function d(t,e){if(1&t){var n=a.Xb();a.Wb(0,"app-soft-phone-contacts",9),a.ec("triggerCloseBottomSheet",(function(){return a.zc(n),a.ic().closeTransferBottomSheet()})),a.Vb()}if(2&t){var i=a.ic();a.oc("fromPopUp",!0)("loggedInUser",i.loggedInUser)("rtlDirection",i.rtlDirection)("softPhoneUsers",i.softPhoneUsers)}}function p(t,e){if(1&t){var n=a.Xb();a.Wb(0,"app-soft-phone-keypad",10),a.ec("triggerCloseBottomSheet",(function(){return a.zc(n),a.ic().closeTransferBottomSheet()})),a.Vb()}if(2&t){var i=a.ic();a.oc("fromPopUp",!0)("rtlDirection",i.rtlDirection)("softPhoneUsers",i.softPhoneUsers)}}var m,v,w,C=function(t){return{"view-mode":t}},k=((m=function(){function t(e,n,i){var o=this;_classCallCheck(this,t),this.viewDirection=e,this.softPhoneService=n,this.userInfoService=i,this.rtlDirection=!1,this.viewModeTypes="contact",this._subscription=new l.Subscription,this._subscription.add(this.softPhoneService.currentSoftPhoneUsers.subscribe((function(t){return o.softPhoneUsers=t}))),this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return o.rtlDirection=t}))),this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return o.loggedInUser=t})))}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"changeViewMode",value:function(t){this.viewModeTypes=t}},{key:"closeTransferBottomSheet",value:function(){this.bottomSheetData.bottomSheetRef.close()}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||m)(a.Qb(b.a),a.Qb(f.a),a.Qb(g.a))},m.\u0275cmp=a.Kb({type:m,selectors:[["app-soft-phone-transfer-call"]],decls:16,vars:16,consts:[[1,"pos-abs","left-0","right-0","top-0","bottom-0",3,"dir"],[1,"switch-container","height-45","padding-mini-t-b","padding-r-l"],[1,"full-width","mat-button-custom","height-30","line-height-15","round-corner-all",3,"ngClass","value","change"],["viewMode","matButtonToggleGroup"],[1,"overflow-hide","half-width","font-7-rem","line-height-15","height-30",3,"value"],[1,"component-container","height-full-minus-45","pos-rel"],[3,"ngSwitch"],[3,"fromPopUp","loggedInUser","rtlDirection","softPhoneUsers","triggerCloseBottomSheet",4,"ngSwitchCase"],[3,"fromPopUp","rtlDirection","softPhoneUsers","triggerCloseBottomSheet",4,"ngSwitchCase"],[3,"fromPopUp","loggedInUser","rtlDirection","softPhoneUsers","triggerCloseBottomSheet"],[3,"fromPopUp","rtlDirection","softPhoneUsers","triggerCloseBottomSheet"]],template:function(t,e){if(1&t){var n=a.Xb();a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"mat-button-toggle-group",2,3),a.ec("change",(function(){a.zc(n);var t=a.vc(3);return e.changeViewMode(t.value)})),a.Wb(4,"mat-button-toggle",4),a.Wb(5,"span"),a.Jc(6),a.jc(7,"translate"),a.Vb(),a.Vb(),a.Wb(8,"mat-button-toggle",4),a.Wb(9,"span"),a.Jc(10),a.jc(11,"translate"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(12,"div",5),a.Ub(13,6),a.Hc(14,d,1,4,"app-soft-phone-contacts",7),a.Hc(15,p,1,3,"app-soft-phone-keypad",8),a.Tb(),a.Vb(),a.Vb()}if(2&t){var i=a.vc(3);a.oc("dir",e.rtlDirection?"rtl":"ltr"),a.Cb(2),a.oc("ngClass",a.rc(14,C,i))("value",e.viewModeTypes),a.Cb(2),a.oc("value","contact"),a.Cb(2),a.Kc(a.kc(7,10,"soft_phone.main.address_book")),a.Cb(2),a.oc("value","keypad"),a.Cb(2),a.Kc(a.kc(11,12,"soft_phone.main.dial_pad")),a.Cb(3),a.oc("ngSwitch",e.viewModeTypes),a.Cb(1),a.oc("ngSwitchCase","contact"),a.Cb(1),a.oc("ngSwitchCase","keypad")}},styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}"]}),m),x=n("tk/3"),y=n("AytR"),S=((v=function(){function t(e){_classCallCheck(this,t),this.http=e,this.accessToken="",this.API_URL=y.a.CONTAINER_URL+"/pbx",this.headers={headers:new x.c({"Content-Type":"application/json; charset=UTF-8",Accept:"application/json; charset=UTF-8"})}}return _createClass(t,[{key:"getExtensionList",value:function(){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=extensions",this.headers)}},{key:"getExtensionStatus",value:function(){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=extensionStatus",this.headers)}},{key:"getCdr",value:function(t){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get("".concat(this.API_URL,"/cdr.php?action=cdr&extensionNo=").concat(t),this.headers)}},{key:"getConferenceList",value:function(){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get(this.API_URL+"/extension.php?action=conferenceList",this.headers)}},{key:"getConferenceOnlineUser",value:function(t){return this.headers.headers=this.headers.headers.set("Authorization",this.accessToken),this.http.get("".concat(this.API_URL,"/extension.php?action=conferenceOnlineUser&phoneNumber=").concat(t),this.headers)}}]),t}()).\u0275fac=function(t){return new(t||v)(a.ac(x.a))},v.\u0275prov=a.Mb({token:v,factory:v.\u0275fac,providedIn:"root"}),v),_=n("OC8m"),P=n("MutI"),V=n("bTqV"),W=n("NFeN"),I=["oBottomSheet"],U=["container"],D=((w=function(){function t(e,n,i){var o=this;_classCallCheck(this,t),this.cfr=e,this.renderer=n,this.softPhoneService=i,this.minimizeStatus=!1,this._subscription=new l.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){o.minimizeStatus=t;try{var e=o.oBottomSheet.nativeElement.parentNode.parentNode;o.minimizeStatus?o.renderer.addClass(e,"minimizePopUp"):o.renderer.removeClass(e,"minimizePopUp")}catch(n){}})))}return _createClass(t,[{key:"toggleBottomSheet",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.container.clear();var i=this.oBottomSheet.nativeElement.parentNode.parentNode,o=this.oBottomSheet.nativeElement;if(n){this.renderer.addClass(i,"active"),this.renderer.setStyle(o,"height",t.height),this.renderer.setStyle(o,"width",t.width),this.renderer.setStyle(i,"z-index","5");var r=this.cfr.resolveComponentFactory(t.component);this.container.createComponent(r).instance.bottomSheetData=t}else this.renderer.removeClass(i,"active"),this.renderer.setStyle(o,"height","0"),this.renderer.setStyle(o,"width","0"),setTimeout((function(){return e.renderer.setStyle(i,"z-index","-1")}),100)}},{key:"close",value:function(){this.toggleBottomSheet(null,!1)}}]),t}()).\u0275fac=function(t){return new(t||w)(a.Qb(a.j),a.Qb(a.F),a.Qb(f.a))},w.\u0275cmp=a.Kb({type:w,selectors:[["app-soft-phone-bottom-sheet"]],viewQuery:function(t,e){var n;1&t&&(a.Pc(I,!0),a.Pc(U,!0,a.P)),2&t&&(a.uc(n=a.fc())&&(e.oBottomSheet=n.first),a.uc(n=a.fc())&&(e.container=n.first))},decls:6,vars:0,consts:[[1,"o-bottom-sheet-container","full-width","full-height"],[1,"o-bottom-sheet-backdrop","full-width","full-height",3,"click"],[1,"o-bottom-sheet-content","overflow-hide","pos-abs","margin-auto","bottom-0","right-0","left-0","round-corner-top-left","round-corner-top-right"],["oBottomSheet",""],[1,"o-bottom-sheet-comp"],["container",""]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.ec("click",(function(){return e.close()})),a.Vb(),a.Wb(2,"div",2,3),a.Rb(4,"div",4,5),a.Vb(),a.Vb())},styles:["[_nghost-%COMP%]{position:absolute;right:0;left:0;bottom:0;width:100%;height:100%;z-index:-1;transition:all .2s}[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{transition:background .2s!important;background:transparent}.active[_nghost-%COMP%]   .o-bottom-sheet-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.7)}.minimizePopUp[_nghost-%COMP%]{bottom:-100%}[_nghost-%COMP%]   .o-bottom-sheet-content[_ngcontent-%COMP%]{transition:height .1s!important;box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);background-color:transparent;height:0;width:0}"]}),w),M=n("cH1L"),O=n("zkoq"),z=n("FKr1"),L=["bottomSheet"];function T(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",25),a.ec("click",(function(){return a.zc(n),a.ic().minimizePopUp()})),a.Wb(1,"mat-icon"),a.Jc(2),a.Vb(),a.Vb()}if(2&t){var i=a.ic();a.oc("ngClass",i.rtlDirection?"left-full":"right-full"),a.Cb(2),a.Kc(i.rtlDirection?"keyboard_arrow_left":"keyboard_arrow_right")}}var B=function(t,e){return{"right.px":t,"left.px":e}};function j(t,e){if(1&t&&(a.Wb(0,"li",31),a.Rb(1,"img",32),a.Vb()),2&t){var n=a.ic(),i=n.index,o=n.$implicit,r=a.ic(2);a.oc("ngStyle",a.sc(3,B,r.rtlDirection?i+"2":"inherit",r.rtlDirection?"inherit":i+"2")),a.Cb(1),a.oc("alt",o.extension_name)("src","assets/profileImg/"+(o.username?o.username:"0")+".jpg",a.Bc)}}function E(t,e){if(1&t&&(a.Ub(0),a.Hc(1,j,2,6,"li",30),a.Tb()),2&t){var n=e.index;a.Cb(1),a.oc("ngIf",n<3)}}function J(t,e){if(1&t&&(a.Wb(0,"span",33),a.Jc(1),a.Vb()),2&t){var n=a.ic(2);a.oc("ngClass",n.rtlDirection?"left-full-two-em-reverse":"right-full-two-em-reverse"),a.Cb(1),a.Lc("+",n.extensionList.length-3,"")}}function R(t,e){if(1&t){var n=a.Xb();a.Wb(0,"div",26),a.Wb(1,"ul",27),a.ec("click",(function(){a.zc(n);var t=a.ic();return t.activeExtensionList=!t.activeExtensionList})),a.Hc(2,E,2,1,"ng-container",28),a.Vb(),a.Hc(3,J,2,2,"span",29),a.Vb()}if(2&t){var i=a.ic();a.oc("ngClass",i.rtlDirection?"right-full":"left-full"),a.Cb(2),a.oc("ngForOf",i.extensionList),a.Cb(1),a.oc("ngIf",i.extensionList&&i.extensionList.length>3)}}function H(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",35),a.ec("click",(function(){a.zc(n);var t=e.$implicit;return a.ic(2).callEvent(t)})),a.Wb(1,"mat-icon"),a.Jc(2),a.Vb(),a.Vb()}if(2&t){var i=e.$implicit,o=a.ic(2);a.Cb(2),a.Kc(o.muteStatus?i.changeIcon:i.num)}}function K(t,e){if(1&t&&(a.Ub(0),a.Hc(1,H,3,1,"button",34),a.Tb()),2&t){var n=a.ic();a.Cb(1),a.oc("ngForOf",n.keys)}}function N(t,e){if(1&t&&(a.Wb(0,"mat-list-item",36),a.Rb(1,"img",37),a.Wb(2,"h3",38),a.Jc(3),a.Vb(),a.Wb(4,"div",39),a.Jc(5),a.Vb(),a.Vb()),2&t){var n=e.$implicit;a.Cb(1),a.oc("src","assets/profileImg/"+n.username+".jpg",a.Bc)("alt",n.name),a.Cb(2),a.Lc(" ",n.extension_name," "),a.Cb(2),a.Kc(n.extension_no)}}function Q(t,e){if(1&t){var n=a.Xb();a.Wb(0,"mat-grid-tile",40),a.Wb(1,"button",41),a.ec("mousedown",(function(t){a.zc(n);var i=e.$implicit;return a.ic().dialKeyPress(t,i)})),a.Jc(2),a.Vb(),a.Vb()}if(2&t){var i=e.$implicit;a.oc("colspan",1)("rowspan",1),a.Cb(2),a.Lc(" ",i.num," ")}}var F,Y=((F=function(){function t(e,n,i,o,r){var s=this;_classCallCheck(this,t),this.apiService=e,this.viewDirection=n,this.userInfoService=i,this.softPhoneService=o,this.notificationService=r,this.callTimer="00:00",this.counter=null,this.hour=0,this.minute=0,this.second=0,this.muteStatus=!1,this.connectedStatus=!1,this.extensionList=null,this.keys=[],this.activeExtensionList=!1,this.activeDialPad=!1,this.timerDueTime=0,this.timerPeriod=5e3,this.globalTimer=null,this.dialPadKeys=[{num:"1"},{num:"2"},{num:"3"},{num:"4"},{num:"5"},{num:"6"},{num:"7"},{num:"8"},{num:"9"},{num:"*"},{num:"0"},{num:"#"}],this._subscription=new l.Subscription,this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return s.loggedInUser=t}))),this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return s.rtlDirection=t})))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.data=this.bottomSheetData.data,this.keys=[{type:"mute_unmute",num:"mic",changeIcon:"mic_off"}],"conference"!==this.data.type?this.keys.push({type:"forward",num:"phone_forwarded",changeIcon:"phone_forwarded"}):"conference"===this.data.type&&this.data.password.length&&this.keys.push({type:"key_pad",num:"dialpad",changeIcon:"dialpad"}),this.timeCounter&&(this.timeCounter.unsubscribe(),this.counter=null,this.callTimer="00:00"),this._subscription.add(this.softPhoneService.currentConnectedCall.subscribe((function(e){t.connectedStatus=e,t.connectedStatus?(t.counter=Object(u.a)(0,1e3),t.timeCounter=t.counter.subscribe((function(){t.second<59?t.second++:(t.second=0,t.minute<59?t.minute++:(t.minute=0,t.hour++)),t.callTimer=(t.hour<10?"0"+t.hour:t.hour)+":"+(t.minute<10?"0"+t.minute:t.minute)+":"+(t.second<10?"0"+t.second:t.second)})),t.globalTimer=Object(u.a)(t.timerDueTime,t.timerPeriod),t.globalTimerSubscription=t.globalTimer.subscribe((function(){return t.getConferenceOnlineUser()}))):t.globalTimerSubscription&&(t.globalTimerSubscription.unsubscribe(),t.globalTimer=null)}))),this.softPhoneService.sipCall("call-audio",this.data.extension_no)}},{key:"callEvent",value:function(t){switch(t.type){case"mute_unmute":this.muteStatus=this.softPhoneService.sipToggleMute();break;case"forward":var e={component:k,height:"100%",width:"100%",data:""};e.bottomSheetRef=this.bottomSheet,this.bottomSheet.toggleBottomSheet(e);break;case"key_pad":this.activeDialPad=!0}}},{key:"minimizePopUp",value:function(){this.softPhoneService.changeMinimizeCallPopUp(!0)}},{key:"getConferenceOnlineUser",value:function(){var t=this;this._subscription.add(this.apiService.getConferenceOnlineUser(this.data.extension_no).subscribe((function(e){e.success&&(t.extensionList=e.data)})))}},{key:"hangUp",value:function(){this.softPhoneService.sipHangUp(),this.timeCounter&&(this.timeCounter.unsubscribe(),this.counter=null,this.callTimer="00:00"),this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)}},{key:"dialKeyPress",value:function(t,e){var n=this;this.softPhoneService.sipSendDTMF(e.num),"#"===e.num&&setTimeout((function(){return n.activeDialPad=!1}),5e3)}},{key:"onKeydownHandler",value:function(){this.activeExtensionList=!1}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this.timeCounter&&this.timeCounter.unsubscribe(),this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)}}]),t}()).\u0275fac=function(t){return new(t||F)(a.Qb(S),a.Qb(b.a),a.Qb(g.a),a.Qb(f.a),a.Qb(_.a))},F.\u0275cmp=a.Kb({type:F,selectors:[["app-soft-phone-call-pop-up"]],viewQuery:function(t,e){var n;1&t&&a.Pc(L,!0),2&t&&a.uc(n=a.fc())&&(e.bottomSheet=n.first)},hostBindings:function(t,e){1&t&&a.ec("keydown.escape",(function(t){return e.onKeydownHandler(t)}),!1,a.xc)},decls:44,vars:31,consts:[[1,"popup-container","pos-rel","full-height","full-width","padding-full"],["class","minimizeBtn pos-abs top-full width-40 height-40 text-white no-bg no-border cursor-pointer",3,"ngClass","click",4,"ngIf"],["class","extension-list pos-abs top-full width-50 height-30",3,"ngClass",4,"ngIf"],[1,"avatar-holder","text-center","width-100","height-100","round-corner-all","padding-half","margin-auto","margin-t-full-3","margin-b-full"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"full-width","round-corner-all",3,"alt","src"],[1,"width-200","margin-auto","height-40","line-height-40","text-center","text-white","text-eclipse","text-weight-normal","font-full-plus-two-tenth-em"],[1,"full-width","height-30","line-height-30","text-center","text-gray-500","text-weight-normal"],[1,"full-width","height-40","line-height-40","text-center","text-white","text-weight-normal",3,"ngClass"],[1,"full-width","transition","text-center","display-flex","padding-r-l-2","pos-abs","right-0","left-0","bottom-full-2",3,"ngClass"],[4,"ngIf"],["mat-raised-button","",1,"red-gradient","min-width-inherit","cursor-pointer","text-white","mat-elevation-z3","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","margin-mini-r-l","text-center","round-corner-all",3,"click"],["bottomSheet",""],[1,"show-extension-list","pos-abs","height-300","left-0","right-0","margin-auto","round-corner-top","bg-white","transition","overflow-hide",3,"ngClass","dir"],[1,"full-width","height-45","line-height-45","padding-r-l"],[1,"pos-abs","top-half","cursor-pointer","no-bg","no-border","no-box-shadow","width-30","height-30",3,"ngClass","click"],[1,"text-grey-500","line-height-30"],[1,"full-width","height-full-minus-45","overflow-x-hide","overflow-y-auto"],["class","highlight cursor-pointer padding-r-l",4,"ngFor","ngForOf"],[1,"show-dialPad","pos-abs","height-300","left-0","right-0","margin-auto","round-corner-top","bg-white","transition","overflow-hide",3,"ngClass","dir"],[1,"key-container"],["cols","3","gutterSize","30","rowHeight","fit","dir","ltr",1,"full-height"],[3,"colspan","rowspan",4,"ngFor","ngForOf"],[1,"padding-r-l-4","pos-abs","full-width","bottom-full-2"],["mat-raised-button","","type","button",1,"red-gradient","full-width","text-white","font-8-rem","margin-auto","width-90","height-35","padding-mini-r-l",3,"click"],[1,"padding-mini-r-l"],[1,"minimizeBtn","pos-abs","top-full","width-40","height-40","text-white","no-bg","no-border","cursor-pointer",3,"ngClass","click"],[1,"extension-list","pos-abs","top-full","width-50","height-30",3,"ngClass"],[1,"list-style-none","no-padding","no-margin","cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],["class","text-white pos-abs line-height-30",3,"ngClass",4,"ngIf"],["class","pos-abs display-flex align-items-center",3,"ngStyle",4,"ngIf"],[1,"pos-abs","display-flex","align-items-center",3,"ngStyle"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"mat-elevation-z3","width-30","height-30","round-corner-all",3,"alt","src"],[1,"text-white","pos-abs","line-height-30",3,"ngClass"],["class","key transition min-width-inherit cursor-pointer text-white mat-elevation-z3 no-box-shadow no-padding no-border font-full-plus-half-em width-50 height-50 margin-mini-r-l text-center round-corner-all","mat-raised-button","",3,"click",4,"ngFor","ngForOf"],["mat-raised-button","",1,"key","transition","min-width-inherit","cursor-pointer","text-white","mat-elevation-z3","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","margin-mini-r-l","text-center","round-corner-all",3,"click"],[1,"highlight","cursor-pointer","padding-r-l"],["onerror","this.src='assets/profileImg/0.jpg'","matListAvatar","",1,"mat-elevation-z2","width-35","height-35","online-user",3,"src","alt"],["matLine","",1,"font-7-rem","text-weight-bold","no-margin"],[1,"pos-rel","online-extension","height-30","font-8-em","display-flex","flex-center-y"],[3,"colspan","rowspan"],["mat-raised-button","",1,"dial-pad-key","cursor-pointer","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","line-height-50","text-center","round-corner-all",3,"mousedown"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Hc(1,T,3,2,"button",1),a.Hc(2,R,4,3,"div",2),a.Wb(3,"div",3),a.Rb(4,"img",4),a.Vb(),a.Wb(5,"h2",5),a.Jc(6),a.jc(7,"translate"),a.Vb(),a.Wb(8,"h3",6),a.Jc(9),a.Vb(),a.Wb(10,"div",7),a.Jc(11),a.jc(12,"translate"),a.Vb(),a.Wb(13,"div",8),a.Hc(14,K,2,1,"ng-container",9),a.Wb(15,"button",10),a.ec("click",(function(){return e.hangUp()})),a.Wb(16,"mat-icon"),a.Jc(17,"call_end"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Rb(18,"app-soft-phone-bottom-sheet",null,11),a.Wb(20,"div",12),a.Wb(21,"h3",13),a.Jc(22),a.jc(23,"translate"),a.Vb(),a.Wb(24,"button",14),a.ec("click",(function(){return e.activeExtensionList=!1})),a.Wb(25,"mat-icon",15),a.Jc(26,"close"),a.Vb(),a.Vb(),a.Wb(27,"mat-list",16),a.Hc(28,N,6,4,"mat-list-item",17),a.Vb(),a.Vb(),a.Wb(29,"div",18),a.Wb(30,"h3",13),a.Jc(31),a.jc(32,"translate"),a.Vb(),a.Wb(33,"div",19),a.Wb(34,"mat-grid-list",20),a.Hc(35,Q,3,3,"mat-grid-tile",21),a.Vb(),a.Vb(),a.Wb(36,"div",22),a.Wb(37,"button",23),a.ec("click",(function(){return e.activeDialPad=!1})),a.Wb(38,"span",24),a.Jc(39),a.jc(40,"translate"),a.Vb(),a.Vb(),a.Vb(),a.Wb(41,"button",14),a.ec("click",(function(){return e.activeDialPad=!1})),a.Wb(42,"mat-icon",15),a.Jc(43,"close"),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(1),a.oc("ngIf",e.connectedStatus),a.Cb(1),a.oc("ngIf","conference"===e.data.type&&e.connectedStatus),a.Cb(2),a.oc("alt",e.data.name)("src","assets/profileImg/"+(e.data.username?e.data.username:"0")+".jpg",a.Bc),a.Cb(2),a.Lc(" ",e.data.extension_no?e.data.extension_name:a.kc(7,21,"soft_phone.call_pop_up.unknown_number")," "),a.Cb(3),a.Lc(" ",e.data.extension_no?e.data.extension_no:e.data," "),a.Cb(1),a.oc("ngClass","00:00"!==e.callTimer?"":"blink-effect"),a.Cb(1),a.Lc(" ","00:00"!==e.callTimer?e.callTimer:a.kc(12,23,"soft_phone.call_pop_up.calling")," "),a.Cb(2),a.oc("ngClass",e.connectedStatus?"flex-space-between":"flex-space-around"),a.Cb(1),a.oc("ngIf",e.connectedStatus),a.Cb(6),a.oc("ngClass",e.activeExtensionList?"bottom-0":"bottom-full-reverse-percent")("dir",e.rtlDirection?"rtl":"ltr"),a.Cb(2),a.Lc(" ",a.kc(23,25,"soft_phone.call_pop_up.available_users")," "),a.Cb(2),a.oc("ngClass",e.rtlDirection?"left-half":"right-half"),a.Cb(4),a.oc("ngForOf",e.extensionList),a.Cb(1),a.oc("ngClass",e.activeDialPad&&e.data.password.length?"bottom-0":"bottom-full-reverse-percent")("dir",e.rtlDirection?"rtl":"ltr"),a.Cb(2),a.Lc(" ",a.kc(32,27,"soft_phone.call_pop_up.available_users")," "),a.Cb(4),a.oc("ngForOf",e.dialPadKeys),a.Cb(4),a.Kc(a.kc(40,29,"global.hide")),a.Cb(2),a.oc("ngClass",e.rtlDirection?"left-half":"right-half"))},directives:[r.t,P.b,r.q,V.b,W.a,D,M.b,P.a,r.s,O.b,r.w,P.d,z.k,O.d],pipes:[s.d],styles:['[_nghost-%COMP%], [_nghost-%COMP%]:before{width:100%;height:100%;position:absolute;left:0;top:0;bottom:0;right:0}[_nghost-%COMP%]:before{content:"";filter:blur(8px);transform:scale(1.5)}.key[_ngcontent-%COMP%]{background-color:rgba(80,80,80,.9)}.dial-pad-key[_ngcontent-%COMP%]{background-color:#e1e1e1;min-width:inherit!important}.key-container[_ngcontent-%COMP%]{height:calc(100% - 180px);padding:1em 4em}.padding-r-l-4[_ngcontent-%COMP%]{padding:0 4em}.minimizeBtn[_ngcontent-%COMP%]{transform:scale(1.2)}.avatar-holder[_ngcontent-%COMP%]{background-color:#ddd;border:3px solid #aaa}.show-dialPad[_ngcontent-%COMP%], .show-extension-list[_ngcontent-%COMP%]{width:97%!important;height:99%!important;background-color:hsla(0,0%,100%,.95)}.online-user[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060}.online-extension[_ngcontent-%COMP%]{color:#4ec060}.blink-effect[_ngcontent-%COMP%]{transition:all .4s!important;-webkit-animation:blink-effect 1s linear infinite;animation:blink-effect 1s linear infinite}@-webkit-keyframes blink-effect{0%{color:#888}33.33333%{color:transparent}to{color:#888}}@keyframes blink-effect{0%{color:#888}33.33333%{color:transparent}to{color:#888}}']}),F),A=n("3Pt+"),X=n("ISpo"),$=n("mrmJ"),q=n("wZkO"),G=n("LvDl"),Z=n("/Hbh"),tt=n("f0Cb");function et(t,e){if(1&t&&a.Rb(0,"div",15),2&t){var n=a.ic();a.oc("ngClass",n.data.is_online?"online":"offline")}}var nt,it=((nt=function(){function t(e,n,i,o){var r=this;_classCallCheck(this,t),this.viewDirection=e,this.softPhoneService=n,this.notificationService=i,this.userInfoService=o,this._subscription=new l.Subscription,this._subscription.add(this.userInfoService.currentUserInfo.subscribe((function(t){return r.loggedInUser=t}))),this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return r.rtlDirection=t})))}return _createClass(t,[{key:"ngOnInit",value:function(){this.data=this.bottomSheetData.data}},{key:"call",value:function(t){this.softPhoneService.changeOnCallUser(t),this.softPhoneService.sipHangUp()}},{key:"closeBottomSheet",value:function(){this.bottomSheetData.bottomSheetRef.close()}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||nt)(a.Qb(b.a),a.Qb(f.a),a.Qb(_.a),a.Qb(g.a))},nt.\u0275cmp=a.Kb({type:nt,selectors:[["app-soft-phone-call-to-action"]],decls:32,vars:19,consts:[[1,"full-width","full-height","padding-full",3,"dir"],[1,"text-weight-bold","font-full-plus-three-tenth-em","no-margin"],[1,"width-30","height-30","pos-abs","top-0","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"ngClass","click"],[1,"line-height-35","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],[1,"margin-t-half"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"online-user","mat-elevation-z2","width-50","height-50","round-corner-all","margin-auto",3,"alt","ngClass","src"],["matLine","",1,"font-8-rem"],[1,"ltr","padding-mini-r-l"],[3,"timezone"],["class","user-soft-phone-status pos-rel text-gray-500 width-30 height-30 round-corner-all",3,"ngClass",4,"ngIf"],[1,"margin-mini-t-b"],[1,"height-60","display-flex","flex-space-around"],["mat-raised-button","","type","submit",1,"green-gradient","full-width","text-white","font-8-rem","margin-auto","width-90","height-35","padding-mini-r-l",3,"disabled","click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],[1,"user-soft-phone-status","pos-rel","text-gray-500","width-30","height-30","round-corner-all",3,"ngClass"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"h3",1),a.Jc(2),a.Vb(),a.Wb(3,"button",2),a.ec("click",(function(){return e.closeBottomSheet()})),a.Wb(4,"mat-icon",3),a.Jc(5," close "),a.Vb(),a.Vb(),a.Wb(6,"mat-list",4),a.Wb(7,"mat-list-item"),a.Rb(8,"img",5),a.Wb(9,"p",6),a.Wb(10,"span"),a.Wb(11,"b"),a.Jc(12),a.jc(13,"translate"),a.Vb(),a.Wb(14,"span",7),a.Rb(15,"app-time-area-digital-clock",8),a.Vb(),a.Vb(),a.Vb(),a.Wb(16,"p",6),a.Wb(17,"span"),a.Wb(18,"b"),a.Jc(19),a.jc(20,"translate"),a.Vb(),a.Wb(21,"span",7),a.Jc(22),a.Vb(),a.Vb(),a.Vb(),a.Hc(23,et,1,1,"div",9),a.Vb(),a.Vb(),a.Rb(24,"mat-divider",10),a.Wb(25,"div",11),a.Wb(26,"button",12),a.ec("click",(function(){return e.call(e.data)})),a.Wb(27,"mat-icon",13),a.Jc(28,"call"),a.Vb(),a.Wb(29,"span",14),a.Jc(30),a.jc(31,"translate"),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.oc("dir",e.rtlDirection?"rtl":"ltr"),a.Cb(2),a.Lc(" ",e.data.extension_name," "),a.Cb(1),a.oc("ngClass",e.rtlDirection?"left-0":"right-0"),a.Cb(5),a.oc("alt",e.data.name)("ngClass",e.data.is_online?"active":"")("src","assets/profileImg/"+e.data.username+".jpg",a.Bc),a.Cb(4),a.Kc(a.kc(13,13,"soft_phone.call_to_action.timezone")),a.Cb(3),a.oc("timezone",e.data.timezone),a.Cb(4),a.Kc(a.kc(20,15,"global.extension")),a.Cb(3),a.Kc(e.data.extension_no),a.Cb(1),a.oc("ngIf","conference"!==e.data.type),a.Cb(3),a.oc("disabled",!e.data.is_online&&"conference"!==e.data.type),a.Cb(4),a.Kc(a.kc(31,17,"soft_phone.call_to_action.call")))},directives:[M.b,r.q,W.a,P.a,P.d,P.b,z.k,Z.a,r.t,tt.a,V.b],pipes:[s.d],styles:['[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff}.user-soft-phone-status[_ngcontent-%COMP%]:before, [_nghost-%COMP%]{position:absolute;left:0;top:0;bottom:0;right:0}.user-soft-phone-status[_ngcontent-%COMP%]:before{border-radius:100px!important;content:"";width:12px;height:12px;margin:auto}.user-soft-phone-status.online[_ngcontent-%COMP%]:before{background-color:#4ec060;-webkit-animation:blink-online-user-light 1s linear infinite;animation:blink-online-user-light 1s linear infinite}.user-soft-phone-status.offline[_ngcontent-%COMP%]:before{background-color:#c30}.online-user[_ngcontent-%COMP%]{box-shadow:0 0 0 2px transparent}.online-user.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060;-webkit-animation:blink-online-user 1s linear infinite;animation:blink-online-user 1s linear infinite}@-webkit-keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@-webkit-keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}@keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}']}),nt),ot=n("XiUW"),rt=n("1jcm"),st=function(t){return{active:t}};function at(t,e){if(1&t){var n=a.Xb();a.Wb(0,"mat-list-item",12),a.ec("click",(function(){a.zc(n);var t=e.$implicit;return a.ic().openSheet(t)})),a.Rb(1,"img",13),a.Wb(2,"h3",14),a.Jc(3),a.Vb(),a.Wb(4,"div",15),a.Wb(5,"mat-icon",16),a.Jc(6,"access_time "),a.Vb(),a.Rb(7,"app-time-area-digital-clock",17),a.Vb(),a.Wb(8,"div",18),a.Jc(9),a.Vb(),a.Rb(10,"div",19),a.Vb()}if(2&t){var i=e.$implicit,o=a.ic();a.oc("ngClass",o.rtlDirection?"padding-r-half padding-l-tiny":"padding-l-half padding-r-tiny"),a.Cb(1),a.oc("alt",i.name)("ngClass",a.rc(10,st,i.is_online))("src","assets/profileImg/"+i.username+".jpg",a.Bc),a.Cb(2),a.Kc(i.extension_name),a.Cb(2),a.oc("ngClass",o.rtlDirection?"text-right":"text-left"),a.Cb(2),a.oc("timezone",i.timezone),a.Cb(1),a.oc("ngClass",i.is_online?"text-green-700":"text-red-700"),a.Cb(1),a.Lc(" ",i.extension_no," "),a.Cb(1),a.oc("ngClass",i.is_online?"online":"offline")}}var ct,lt,ht=((lt=function(){function t(e,n,i,o,r){var s=this;_classCallCheck(this,t),this.apiService=e,this.messageService=n,this.softPhoneService=i,this.translateService=o,this.refreshLoginService=r,this.triggerBottomSheet=new a.o,this.softPhoneUsers=[],this.timerDueTime=0,this.timerPeriod=15e3,this.globalTimer=null,this.loggedInUserExtension=null,this.filterArgs=null,this.callPopUpMinimizeStatus=!1,this.softphoneConnectedStatus=!1,this.extensionStatusSubscription=new l.Subscription,this.softphoneConnectedStatusSubscription=new l.Subscription,this._subscription=new l.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return s.callPopUpMinimizeStatus=t})))}return _createClass(t,[{key:"ngOnInit",value:function(){this.filterArgs={email:this.loggedInUser.email}}},{key:"getExtensionStatus",value:function(){var t=this;this.extensionStatusSubscription&&this.extensionStatusSubscription.unsubscribe(),this.extensionStatusSubscription=this.apiService.getExtensionStatus().subscribe((function(e){if(e.success&&t.softPhoneUsers&&t.softPhoneUsers.length){var n=e.data.filter((function(t){return"2"===t.extension_type&&t.username.length>10})),i=G.merge(t.softPhoneUsers,n);t.softPhoneService.changeSoftPhoneUsers(i),t.softphoneConnectedStatusSubscription&&t.softphoneConnectedStatusSubscription.unsubscribe(),t.softphoneConnectedStatusSubscription=t.softPhoneService.currentSoftphoneConnected.subscribe((function(e){e&&(t.softphoneConnectedStatus=t.softPhoneService.getSoftphoneConnectedStatus(),i.map((function(e){e.username===t.loggedInUser.email&&(t.loggedInUserExtension={user:t.loggedInUser,extension:e})})))}))}}),(function(e){t.refreshLoginService.openLoginDialog(e)}))}},{key:"openSheet",value:function(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:it,height:"200px",width:"98%",data:t})}},{key:"getTranslate",value:function(t){return this.translateService.instant(t)}},{key:"changeSoftphoneStatus",value:function(t){t.checked?this.softPhoneService.sipRegister():this.softPhoneService.sipUnRegister()}},{key:"ngOnChanges",value:function(t){var e=this;t.softPhoneUsers.currentValue&&(this.globalTimer=Object(u.a)(this.timerDueTime,this.timerPeriod),this.globalTimerSubscription=this.globalTimer.subscribe((function(){return e.getExtensionStatus()})))}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this.globalTimerSubscription&&(this.globalTimerSubscription.unsubscribe(),this.globalTimer=null)}}]),t}()).\u0275fac=function(t){return new(t||lt)(a.Qb(S),a.Qb(ot.a),a.Qb(f.a),a.Qb(s.e),a.Qb(X.a))},lt.\u0275cmp=a.Kb({type:lt,selectors:[["app-soft-phone-information"]],inputs:{rtlDirection:"rtlDirection",softPhoneUsers:"softPhoneUsers",loggedInUser:"loggedInUser"},outputs:{triggerBottomSheet:"triggerBottomSheet"},features:[a.Ab],decls:16,vars:12,consts:[[1,"full-width","full-height"],[1,"soft-phone-user","full-width","height-50"],[1,"padding-mini-r-l","full-height"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"mat-elevation-z2","my-profile-img",3,"alt","src"],["matLine","",1,"font-8-rem","text-weight-bold"],[1,"font-8-rem",3,"dir"],[1,"soft-phone-status",3,"checked","change"],["slideToggle",""],[1,"padding-mini-r-l"],[1,"height-full-minus-50","overflow-x-hide","overflow-y-auto"],[1,"full-width"],["class","highlight cursor-pointer full-height",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","full-height",3,"ngClass","click"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"online-user","mat-elevation-z2","width-35","height-35","transition",3,"alt","ngClass","src"],["matLine","",1,"font-7-rem","text-weight-bold","no-margin"],["matLine",""],[1,"width-18","height-18","font-8-em","pos-rel","top-two-tenth",3,"ngClass"],[1,"font-8-em","text-gray-600",3,"timezone"],[1,"pos-rel","height-30","line-height-30","round-corner-all","font-8-em",3,"ngClass"],[1,"user-soft-phone-status","pos-rel","text-gray-500","width-30","height-30","round-corner-all","transition",3,"ngClass"]],template:function(t,e){if(1&t&&(a.Wb(0,"div",0),a.Wb(1,"mat-list",1),a.Wb(2,"mat-list-item",2),a.Rb(3,"img",3),a.Wb(4,"h3",4),a.Jc(5),a.Vb(),a.Wb(6,"div",5),a.Wb(7,"mat-slide-toggle",6,7),a.ec("change",(function(t){return e.changeSoftphoneStatus(t)})),a.Wb(9,"span",8),a.Jc(10),a.jc(11,"translate"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(12,"div",9),a.Wb(13,"mat-list",10),a.Hc(14,at,11,12,"mat-list-item",11),a.jc(15,"myFilter"),a.Vb(),a.Vb(),a.Vb()),2&t){var n=a.vc(8);a.Cb(3),a.oc("alt",e.loggedInUser?e.loggedInUser.name:"")("src","assets/profileImg/"+(e.loggedInUser?e.loggedInUser.email:"0")+".jpg",a.Bc),a.Cb(2),a.Lc(" ",e.loggedInUser?e.loggedInUser.name:""," "),a.Cb(1),a.oc("dir",e.rtlDirection?"ltr":"rtl"),a.Cb(1),a.oc("checked",e.loggedInUserExtension&&e.softphoneConnectedStatus&&e.loggedInUserExtension.extension.is_online),a.Cb(3),a.Lc(" ",a.kc(11,7,n.checked?"global.active":"global.deactivate")," "),a.Cb(4),a.oc("ngForOf",a.lc(15,9,e.softPhoneUsers,e.filterArgs))}},directives:function(){return[P.a,P.d,P.b,z.k,M.b,rt.a,r.s,r.q,W.a,Z.a]},pipes:function(){return[s.d,ut]},styles:['[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.my-profile-img[_ngcontent-%COMP%]{transform:scale(.9)}.soft-phone-user[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.user-soft-phone-status[_ngcontent-%COMP%]:before{border-radius:100px!important;content:"";position:absolute;width:12px;height:12px;left:0;right:0;bottom:0;top:0;margin:auto}.user-soft-phone-status.online[_ngcontent-%COMP%]:before{background-color:#4ec060;-webkit-animation:blink-online-user-light 1s linear infinite;animation:blink-online-user-light 1s linear infinite}.user-soft-phone-status.offline[_ngcontent-%COMP%]:before{background-color:#c30}.online-user.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4ec060;-webkit-animation:blink-online-user 1s linear infinite;animation:blink-online-user 1s linear infinite}@-webkit-keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@keyframes blink-online-user{0%{box-shadow:0 0 0 2px #4ec060}33.33333%{box-shadow:0 0 0 2px #a6c09e}to{box-shadow:0 0 0 2px #4ec060}}@-webkit-keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}@keyframes blink-online-user-light{0%{background-color:#4ec060}33.33333%{background-color:#a6c09e}to{background-color:#4ec060}}.highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.highlight[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid hsla(0,0%,86.3%,.5)}']}),lt),ut=((ct=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t,e){return t&&e?t.filter((function(t){return t.username!==e.email})):t}}]),t}()).\u0275fac=function(t){return new(t||ct)},ct.\u0275pipe=a.Pb({name:"myFilter",type:ct,pure:!1}),ct);function bt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"mat-grid-tile",8),a.Wb(1,"button",9),a.ec("mousedown",(function(t){a.zc(n);var i=e.$implicit;return a.ic().keyPress(t,i)})),a.Jc(2),a.Vb(),a.Vb()}if(2&t){var i=e.$implicit;a.oc("colspan",1)("rowspan",1),a.Cb(2),a.Lc(" ",i.num," ")}}function ft(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",14),a.ec("click",(function(){return a.zc(n),a.ic(2).removeFromNumber()})),a.Wb(1,"mat-icon"),a.Jc(2,"backspace"),a.Vb(),a.Vb()}}function gt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"div",10),a.Wb(1,"button",11),a.ec("click",(function(){return a.zc(n),a.ic().openButtonSheet()})),a.Wb(2,"mat-icon",12),a.Jc(3,"phone"),a.Vb(),a.Vb(),a.Hc(4,ft,3,0,"button",13),a.Vb()}if(2&t){var i=a.ic();a.Cb(4),a.oc("ngIf",i.numeric.length)}}function dt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"div",15),a.Wb(1,"button",16),a.ec("click",(function(){return a.zc(n),a.ic().transferCall()})),a.Wb(2,"span",17),a.Jc(3),a.jc(4,"translate"),a.Vb(),a.Vb(),a.Wb(5,"button",18),a.ec("click",(function(){return a.zc(n),a.ic().dismissTransferCall()})),a.Wb(6,"span",17),a.Jc(7),a.jc(8,"translate"),a.Vb(),a.Vb(),a.Vb()}if(2&t){var i=a.ic();a.Cb(1),a.oc("disabled",i.disableKeypad),a.Cb(2),a.Kc(a.kc(4,4,"soft_phone.transfer_call")),a.Cb(2),a.oc("disabled",i.disableKeypad),a.Cb(2),a.Kc(a.kc(8,6,"global.dismiss"))}}var pt,mt=((pt=function(){function t(e,n,i){var o=this;_classCallCheck(this,t),this.softPhoneService=e,this.translateService=n,this.messageService=i,this.triggerBottomSheet=new a.o,this.triggerCloseBottomSheet=new a.o,this.fromPopUp=!1,this.numeric="",this.oldNumeric="",this.disableKeypad=!1,this.callPopUpMinimizeStatus=!1,this.keys=[{num:"1"},{num:"2"},{num:"3"},{num:"4"},{num:"5"},{num:"6"},{num:"7"},{num:"8"},{num:"9"},{num:"*"},{num:"0"},{num:"#"}],this._subscription=new l.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return o.callPopUpMinimizeStatus=t})))}return _createClass(t,[{key:"keyPress",value:function(t,e){var n=this;this.numeric+=e.num;var i=this.softPhoneUsers.filter((function(t){return n.numeric.includes(t.extension_no)})).pop();this.softPhoneService.sipSendDTMF(e.num),i&&(this.oldNumeric=this.numeric,this.numeric=i.extension_name)}},{key:"removeFromNumber",value:function(){""!==this.oldNumeric?(this.numeric=this.oldNumeric,this.oldNumeric=""):this.numeric=this.numeric.substring(0,this.numeric.length-1)}},{key:"changeNumber",value:function(t){var e=this;this.numeric=t;var n=this.softPhoneUsers.filter((function(t){return e.numeric.includes(t.extension_no)})).pop();n&&(this.oldNumeric=this.numeric,this.numeric=n.extension_name)}},{key:"openButtonSheet",value:function(){var t,e=this;this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.numeric.length&&(t=this.softPhoneUsers.filter((function(t){return e.oldNumeric.includes(t.extension_no)})).pop()||this.numeric,this.triggerBottomSheet.emit({component:Y,height:"100%",width:"100%",data:t}))}},{key:"transferCall",value:function(){var t,e=this;this.disableKeypad=!0;var n=this.softPhoneUsers.filter((function(t){return e.oldNumeric.includes(t.extension_no)})).pop();t=n?n.extension_no:this.numeric,this.softPhoneService.sipTransfer(t),setTimeout((function(){return e.triggerCloseBottomSheet.emit()}),1e3)}},{key:"dismissTransferCall",value:function(){this.triggerCloseBottomSheet.emit()}},{key:"getTranslate",value:function(t){return this.translateService.instant(t)}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||pt)(a.Qb(f.a),a.Qb(s.e),a.Qb(ot.a))},pt.\u0275cmp=a.Kb({type:pt,selectors:[["app-soft-phone-keypad"]],inputs:{rtlDirection:"rtlDirection",fromPopUp:"fromPopUp",softPhoneUsers:"softPhoneUsers"},outputs:{triggerBottomSheet:"triggerBottomSheet",triggerCloseBottomSheet:"triggerCloseBottomSheet"},decls:10,vars:8,consts:[[1,"full-height"],[1,"input-holder","padding-mini-t-b","text-center","pos-rel","height-50","line-height-50"],["digitOnly","","dir","ltr","type","tel",1,"no-padding","no-border","no-bg","font-full-plus-three-tenth-em","full-width","text-center",3,"ngModel","readOnly","placeholder","onValueChanged"],[1,"key-container"],["cols","3","dir","ltr","gutterSize","30","rowHeight","fit",1,"full-height"],[3,"colspan","rowspan",4,"ngFor","ngForOf"],["class","dialer text-center padding-mini-t-b pos-rel",4,"ngIf","ngIfElse"],["inPopUp",""],[3,"colspan","rowspan"],["mat-raised-button","",1,"key","cursor-pointer","no-box-shadow","no-padding","no-border","font-full-plus-half-em","width-50","height-50","line-height-50","text-center","round-corner-all",3,"mousedown"],[1,"dialer","text-center","padding-mini-t-b","pos-rel"],["mat-raised-button","",1,"key","cursor-pointer","no-padding","no-box-shadow","no-border","font-full-plus-three-tenth-em","width-45","height-45","line-height-45","text-center","round-corner-all",3,"click"],[1,"line-height-25","text-white"],["class","remove-number top-full-plus-half no-bg no-border no-padding cursor-pointer pos-abs",3,"click",4,"ngIf"],[1,"remove-number","top-full-plus-half","no-bg","no-border","no-padding","cursor-pointer","pos-abs",3,"click"],[1,"height-60","full-width","pos-abs","bottom-0","padding-full","display-flex","flex-direction-row-reverse","flex-space-around"],["mat-raised-button","","type","button",1,"green-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"],[1,"padding-mini-r-l"],["mat-raised-button","","type","button",1,"red-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"]],template:function(t,e){if(1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"input",2),a.ec("onValueChanged",(function(t){return e.changeNumber(t)})),a.jc(3,"translate"),a.Vb(),a.Vb(),a.Wb(4,"div",3),a.Wb(5,"mat-grid-list",4),a.Hc(6,bt,3,3,"mat-grid-tile",5),a.Vb(),a.Vb(),a.Hc(7,gt,5,1,"div",6),a.Hc(8,dt,9,8,"ng-template",null,7,a.Ic),a.Vb()),2&t){var n=a.vc(9);a.Cb(2),a.pc("placeholder",a.kc(3,6,"global.extension_placeholder")),a.oc("ngModel",e.numeric)("readOnly",""!==e.oldNumeric),a.Cb(4),a.oc("ngForOf",e.keys),a.Cb(1),a.oc("ngIf",!e.fromPopUp)("ngIfElse",n)}},directives:[A.c,c,M.b,A.s,A.v,O.b,r.s,r.t,O.d,V.b,W.a],pipes:[s.d],styles:[".key[_ngcontent-%COMP%]{background-color:#e1e1e1;min-width:inherit!important}.key-container[_ngcontent-%COMP%]{height:calc(100% - 120px);padding:1em 4em}.input-holder[_ngcontent-%COMP%]{padding:.5em 3em!important}.dialer[_ngcontent-%COMP%]{height:50px}.dialer[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{background-color:#4ec060}.remove-number[_ngcontent-%COMP%]{right:6.5em}"]}),pt),vt=n("K3ar");function wt(t,e){if(1&t&&(a.Wb(0,"mat-list-item",5),a.Wb(1,"mat-icon",6),a.Jc(2),a.Vb(),a.Wb(3,"h3",7),a.Jc(4),a.Vb(),a.Wb(5,"p",8),a.Jc(6),a.jc(7,"jalali"),a.Vb(),a.Wb(8,"div",9),a.Jc(9),a.jc(10,"translate"),a.Vb(),a.Vb()),2&t){var n=e.$implicit,i=a.ic(2);a.Cb(1),a.Eb(n.color),a.Cb(1),a.Lc(" ",n.icon," "),a.Cb(2),a.Mc(" ",n.user?n.user.extension_name+"-":""," ",n.src," "),a.Cb(2),a.Kc(a.lc(7,7,n.date,i.rtlDirection)),a.Cb(3),a.Lc(" ",a.kc(10,10,n.desc)," ")}}function Ct(t,e){if(1&t&&(a.Wb(0,"mat-list",3),a.Hc(1,wt,11,12,"mat-list-item",4),a.Vb()),2&t){var n=a.ic();a.Cb(1),a.oc("ngForOf",n.cdrExtensionList)}}function kt(t,e){1&t&&(a.Jc(0),a.jc(1,"translate")),2&t&&a.Lc(" ",a.kc(1,1,"global.no_result")," ")}var xt,yt=((xt=function(){function t(e,n,i,o){var r=this;_classCallCheck(this,t),this.api=e,this.softPhoneService=n,this.refreshLoginService=i,this.loadingIndicatorService=o,this.triggerBottomSheet=new a.o,this.loggedInUserExtension="",this.cdrList=[],this.callPopUpMinimizeStatus=!1,this.cdrExtensionList=[],this._subscription=new l.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return r.callPopUpMinimizeStatus=t}))),this._subscription.add(this.softPhoneService.currentExtensionList.subscribe((function(t){t&&t.length&&setTimeout((function(){r.loggedInUserExtension=t.filter((function(t){return t.username===r.loggedInUser.email})).pop().extension_no}))}))),this._subscription.add(this.softPhoneService.currentActiveTab.subscribe((function(t){return 2===t?r.getCdr():null})))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),setTimeout((function(){return t.getCdr()}))}},{key:"getCdr",value:function(){var t=this;this._subscription.add(this.api.getCdr(this.loggedInUserExtension).subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),e.success&&e.data.length&&(t.cdrList=e.data,t.cdrList.map((function(e){var n=null,i=null;if(t.loggedInUserExtension===e.dst){i=t.softPhoneUsers.filter((function(t){return t.extension_no===e.src})).pop();var o="",r="";switch(e.disposition){case"NO ANSWER":o="soft_phone.call_logs.missed_call",r="text-red-500";break;case"BUSY":o="soft_phone.call_logs.rejected",r="text-orange-600";break;case"ANSWERED":o="soft_phone.call_logs.answered",r="text-green-500"}n={src:e.src,dst:e.dst,icon:"NO ANSWER"===e.disposition?"phone_missed":"phone_callback",date:e.calldate,color:r,desc:o}}else if(t.loggedInUserExtension===e.src){i=t.softPhoneUsers.filter((function(t){return t.extension_no===e.dst})).pop();var s="",a="";switch(e.disposition){case"NO ANSWER":s="soft_phone.call_logs.not_answered",a="text-red-500";break;case"BUSY":s="soft_phone.call_logs.busy",a="text-orange-600";break;case"ANSWERED":s="soft_phone.call_logs.answered",a="text-green-500"}n={src:e.dst,dst:e.src,icon:"phone_forwarded",date:e.calldate,color:a,desc:s}}i?(n=Object.assign(Object.assign({},n),{user:i}),t.cdrExtensionList.push(n)):t.cdrExtensionList.push(n)})))}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.refreshLoginService.openLoginDialog(e)})))}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||xt)(a.Qb(S),a.Qb(f.a),a.Qb(X.a),a.Qb($.a))},xt.\u0275cmp=a.Kb({type:xt,selectors:[["app-soft-phone-logs"]],inputs:{rtlDirection:"rtlDirection",softPhoneUsers:"softPhoneUsers",loggedInUser:"loggedInUser"},outputs:{triggerBottomSheet:"triggerBottomSheet"},decls:4,vars:3,consts:[[1,"full-height","flex-center",3,"dir"],["class","cdr-mat-list full-width full-height overflow-x-hide overflow-y-auto",4,"ngIf","ngIfElse"],["noItem",""],[1,"cdr-mat-list","full-width","full-height","overflow-x-hide","overflow-y-auto"],["class","highlight cursor-pointer height-45 padding-tiny-t-b padding-mini-r-l",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","height-45","padding-tiny-t-b","padding-mini-r-l"],["mat-list-icon",""],["matLine","",1,"font-7-rem","text-weight-bold","line-height-20"],["matLine","",1,"font-7-em","text-gray-600","line-height-15"],[1,"user-soft-phone-status","white-space-nowrap","pos-rel","text-gray-500","round-corner-all","transition","font-7-em"]],template:function(t,e){if(1&t&&(a.Wb(0,"div",0),a.Hc(1,Ct,2,1,"mat-list",1),a.Hc(2,kt,2,3,"ng-template",null,2,a.Ic),a.Vb()),2&t){var n=a.vc(3);a.oc("dir",e.rtlDirection?"rtl":"ltr"),a.Cb(1),a.oc("ngIf",e.cdrExtensionList.length)("ngIfElse",n)}},directives:[M.b,r.t,P.a,r.s,P.d,W.a,P.c,z.k],pipes:[vt.a,s.d],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.highlight[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid hsla(0,0%,86.3%,.5)}"]}),xt);function St(t,e){1&t&&(a.Wb(0,"div",8),a.Wb(1,"mat-icon",9),a.Jc(2,"lock"),a.Vb(),a.Vb())}function _t(t,e){if(1&t){var n=a.Xb();a.Wb(0,"mat-list-item",4),a.ec("click",(function(){a.zc(n);var t=e.$implicit;return a.ic().openSheet(t)})),a.Wb(1,"mat-icon",5),a.Jc(2,"group"),a.Vb(),a.Wb(3,"h3",6),a.Jc(4),a.Vb(),a.Hc(5,St,3,0,"div",7),a.Vb()}if(2&t){var i=e.$implicit;a.Cb(4),a.Lc(" ",i.extension_name," "),a.Cb(1),a.oc("ngIf",i.password.length)}}var Pt,Vt=((Pt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,r,s,c,h,u){var b;return _classCallCheck(this,n),(b=e.call(this,o,c)).softPhoneService=t,b.translateService=i,b.injector=o,b.apiService=r,b.refreshLoginService=s,b.userInfoService=c,b.loadingIndicatorService=h,b.messageService=u,b.softPhoneUsers=[],b.triggerBottomSheet=new a.o,b.conferenceList=[],b.callPopUpMinimizeStatus=!1,b._subscription=new l.Subscription,b._subscription.add(b.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return b.callPopUpMinimizeStatus=t}))),b}return _createClass(n,[{key:"ngOnInit",value:function(){this.getConferenceList()}},{key:"getConferenceList",value:function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),this.apiService.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.apiService.getConferenceList().subscribe((function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),e.success&&e.data.map((function(e){var n=Object.assign({username:"0",is_online:0,extension_name:e.conf_name,caller_id_number:e.conf_number,extension_no:e.conf_number,extension_type:"2"},e);t.conferenceList.push(n)}))}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.refreshLoginService.openLoginDialog(e)})))}},{key:"openSheet",value:function(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:it,height:"200px",width:"98%",data:Object.assign(Object.assign({},t),{type:"conference"})})}},{key:"getTranslate",value:function(t){return this.translateService.instant(t)}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),n}(h.a)).\u0275fac=function(t){return new(t||Pt)(a.Qb(f.a),a.Qb(s.e),a.Qb(a.s),a.Qb(S),a.Qb(X.a),a.Qb(g.a),a.Qb($.a),a.Qb(ot.a))},Pt.\u0275cmp=a.Kb({type:Pt,selectors:[["app-soft-phone-conference"]],inputs:{rtlDirection:"rtlDirection",softPhoneUsers:"softPhoneUsers"},outputs:{triggerBottomSheet:"triggerBottomSheet"},features:[a.zb],decls:6,vars:5,consts:[[1,"full-width","full-height",3,"dir"],["mat-subheader",""],[1,"full-width"],["class","highlight cursor-pointer padding-r-l height-50 margin-b-half",3,"click",4,"ngFor","ngForOf"],[1,"highlight","cursor-pointer","padding-r-l","height-50","margin-b-half",3,"click"],["mat-list-icon",""],["matLine","",1,"font-7-rem","text-weight-bold"],["class","pos-rel text-gray-500 height-30 line-height-35 round-corner-all text-center",4,"ngIf"],[1,"pos-rel","text-gray-500","height-30","line-height-35","round-corner-all","text-center"],[1,"font-full-plus-two-tenth-em"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Jc(2),a.jc(3,"translate"),a.Vb(),a.Wb(4,"mat-list",2),a.Hc(5,_t,6,2,"mat-list-item",3),a.Vb(),a.Vb()),2&t&&(a.oc("dir",e.rtlDirection?"rtl":"ltr"),a.Cb(2),a.Kc(a.kc(3,3,"soft_phone.conferences.conference_list")),a.Cb(3),a.oc("ngForOf",e.conferenceList))},directives:[M.b,P.g,P.a,r.s,P.d,W.a,P.c,z.k,r.t],pipes:[s.d],styles:[".highlight[_ngcontent-%COMP%]{transition:background .4s!important}.highlight[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]}),Pt),Wt=["bottomSheet"],It=["audioRemote"],Ut=["ringtone"],Dt=["ringbacktone"],Mt=["dtmfTone"];function Ot(t,e){if(1&t){var n=a.Xb();a.Wb(0,"a",17),a.ec("click",(function(){return a.zc(n),a.ic().maximizeCallPopUp()})),a.Jc(1),a.jc(2,"translate"),a.Vb()}2&t&&(a.Cb(1),a.Lc(" ",a.kc(2,1,"soft_phone.main.back_to_call")," "))}function zt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"app-soft-phone-information",18),a.ec("triggerBottomSheet",(function(t){return a.zc(n),a.ic().openButtonSheet(t)})),a.Vb()}if(2&t){var i=a.ic();a.oc("loggedInUser",i.loggedInUser)("rtlDirection",i.rtlDirection)("softPhoneUsers",i.softPhoneUsers)}}function Lt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"app-soft-phone-keypad",19),a.ec("triggerBottomSheet",(function(t){return a.zc(n),a.ic().openButtonSheet(t)})),a.Vb()}if(2&t){var i=a.ic();a.oc("rtlDirection",i.rtlDirection)("softPhoneUsers",i.softPhoneUsers)}}function Tt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"app-soft-phone-logs",18),a.ec("triggerBottomSheet",(function(t){return a.zc(n),a.ic().openButtonSheet(t)})),a.Vb()}if(2&t){var i=a.ic();a.oc("loggedInUser",i.loggedInUser)("rtlDirection",i.rtlDirection)("softPhoneUsers",i.softPhoneUsers)}}function Bt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"app-soft-phone-conference",19),a.ec("triggerBottomSheet",(function(t){return a.zc(n),a.ic().openButtonSheet(t)})),a.Vb()}if(2&t){var i=a.ic();a.oc("rtlDirection",i.rtlDirection)("softPhoneUsers",i.softPhoneUsers)}}function jt(t,e){if(1&t&&(a.Wb(0,"mat-icon",22),a.Jc(1),a.Vb(),a.Wb(2,"span",23),a.Jc(3),a.Vb()),2&t){var n=a.ic().$implicit;a.Cb(1),a.Lc(" ",n.icon," "),a.Cb(2),a.Kc(n.name)}}function Et(t,e){1&t&&(a.Wb(0,"mat-tab",20),a.Hc(1,jt,4,2,"ng-template",21),a.Vb())}function Jt(t,e){1&t&&(a.Wb(0,"div",24),a.Wb(1,"div",25),a.hc(),a.Wb(2,"svg",26),a.Wb(3,"rect",27),a.Rb(4,"animate",28),a.Rb(5,"animate",29),a.Vb(),a.Wb(6,"rect",30),a.Rb(7,"animate",31),a.Rb(8,"animate",32),a.Vb(),a.Wb(9,"rect",33),a.Rb(10,"animate",34),a.Rb(11,"animate",35),a.Vb(),a.Vb(),a.gc(),a.Wb(12,"span",36),a.Jc(13),a.jc(14,"translate"),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(13),a.Kc(a.kc(14,1,"global.loading")))}var Rt,Ht=((Rt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,r,s,a,c,h,u){var b;return _classCallCheck(this,n),(b=e.call(this,i,r)).api=t,b.injector=i,b.translate=o,b.userInfoService=r,b.softPhoneService=s,b.viewDirection=a,b.notificationService=c,b.refreshLoginService=h,b.loadingIndicatorService=u,b.loadingIndicator=null,b.activeTab=new A.g(0),b.tabs=[],b.callPopUpMinimizeStatus=!1,b.softPhoneUsers=[],b._subscription=new l.Subscription,b._subscription.add(b.viewDirection.currentDirection.subscribe((function(t){b.rtlDirection=t,b.changeMainTabLanguage()}))),b._subscription.add(b.loadingIndicatorService.currentLoadingStatus.subscribe((function(t){return b.loadingIndicator=t}))),b._subscription.add(b.softPhoneService.currentSoftPhoneUsers.subscribe((function(t){return b.softPhoneUsers=t}))),b._subscription.add(b.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return b.callPopUpMinimizeStatus=t}))),b._subscription.add(b.softPhoneService.currentActiveTab.subscribe((function(t){return b.activeTab.setValue(t)}))),b._subscription.add(b.softPhoneService.currentOnCallUser.subscribe((function(t){t?b.openButtonSheet({component:Y,height:"100%",width:"100%",data:t}):b.bottomSheet&&b.bottomSheet.close()}))),b}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this;this.loadingIndicatorService.changeLoadingStatus({status:!0,serviceName:"pbx"}),this.api.accessToken=this.loginData.token_type+" "+this.loginData.access_token,this._subscription.add(this.api.getExtensionList().subscribe((function(e){if(t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),e.success){var n=e.data.filter((function(t){return"2"===t.extension_type&&t.username.length>10}));t.softPhoneService.changeSoftPhoneUsers(n),t.softPhoneService.changeExtensionList(n).then((function(){t.softPhoneUsers=n,t.softPhoneService.sipRegister()}))}}),(function(e){t.loadingIndicatorService.changeLoadingStatus({status:!1,serviceName:"pbx"}),t.refreshLoginService.openLoginDialog(e)})))}},{key:"ngAfterViewInit",value:function(){this.softPhoneService.changeAudioRemoteTag({audioRemote:this.audioRemote,ringtone:this.ringtone,ringbacktone:this.ringbacktone,dtmfTone:this.dtmfTone}),this.changeMainTabLanguage()}},{key:"changeMainTabLanguage",value:function(){var t=this;setTimeout((function(){t.tabs=[{name:t.getTranslate("soft_phone.main.status"),icon:"home"},{name:t.getTranslate("soft_phone.main.dial_pad"),icon:"dialpad"},{name:t.getTranslate("soft_phone.main.call_logs"),icon:"settings_phone"},{name:t.getTranslate("soft_phone.main.public_room"),icon:"group"}]}),200)}},{key:"tabChange",value:function(t){this.activeTab.setValue(t.index)}},{key:"openButtonSheet",value:function(t){try{t.bottomSheetRef=this.bottomSheet,this.bottomSheet.toggleBottomSheet(t)}catch(e){console.log(e)}}},{key:"call",value:function(t){this.openButtonSheet(t)}},{key:"maximizeCallPopUp",value:function(){this.softPhoneService.changeMinimizeCallPopUp(!1)}},{key:"getTranslate",value:function(t){return this.translate.instant(t)}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this.softPhoneService.sipHangUp()}}]),n}(h.a)).\u0275fac=function(t){return new(t||Rt)(a.Qb(S),a.Qb(a.s),a.Qb(s.e),a.Qb(g.a),a.Qb(f.a),a.Qb(b.a),a.Qb(_.a),a.Qb(X.a),a.Qb($.a))},Rt.\u0275cmp=a.Kb({type:Rt,selectors:[["app-soft-phone-main"]],viewQuery:function(t,e){var n;1&t&&(a.Pc(Wt,!0),a.Pc(It,!0),a.Pc(Ut,!0),a.Pc(Dt,!0),a.Pc(Mt,!0)),2&t&&(a.uc(n=a.fc())&&(e.bottomSheet=n.first),a.uc(n=a.fc())&&(e.audioRemote=n.first),a.uc(n=a.fc())&&(e.ringtone=n.first),a.uc(n=a.fc())&&(e.ringbacktone=n.first),a.uc(n=a.fc())&&(e.dtmfTone=n.first))},features:[a.zb],decls:22,vars:14,consts:[[1,"soft-phone-wrapper","full-height","bg-white","display-flex","overflow-hide",3,"dir"],["class","display-block full-width height-35 line-height-35 font-8-em back-to-call text-white cursor-pointer text-center pos-rel z-index-99",3,"click",4,"ngIf"],[1,"soft-phone-container","full-width","pos-rel",3,"ngClass"],[3,"ngSwitch"],[3,"ngSwitchCase"],[1,"soft-phone-toolbar","clear-both","full-width","height-45","z-index-1"],["color","primary",1,"full-height","soft-phone-tab",3,"selectedIndex","selectedTabChange"],["class","full-height",4,"ngFor","ngForOf"],["bottomSheet",""],["class","loading-container pos-abs top-0 left-0 bottom-0 right-0 full-width full-height flex-center z-index-9999",4,"ngIf"],["autoplay","autoplay"],["audioRemote",""],["loop","",3,"src"],["ringtone",""],["ringbacktone",""],[3,"src"],["dtmfTone",""],[1,"display-block","full-width","height-35","line-height-35","font-8-em","back-to-call","text-white","cursor-pointer","text-center","pos-rel","z-index-99",3,"click"],[3,"loggedInUser","rtlDirection","softPhoneUsers","triggerBottomSheet"],[3,"rtlDirection","softPhoneUsers","triggerBottomSheet"],[1,"full-height"],["class","full-height","mat-tab-label",""],["mat-list-icon","",1,"clear-both","text-gray-a300","height-20","width-20","font-full-plus-half-em"],[1,"font-half-em","clear-both","text-weight-bold"],[1,"loading-container","pos-abs","top-0","left-0","bottom-0","right-0","full-width","full-height","flex-center","z-index-9999"],[1,"text-center"],["height","30px","id","Layer_1","version","1.1","viewBox","0 0 24 30","width","24px","x","0px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg","y","0px",2,"enable-background","new 0 0 50 50"],["fill","#333","height","5","width","4","x","0","y","13"],["attributeName","height","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","10","y","13"],["attributeName","height","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.15s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],["fill","#333","height","5","width","4","x","20","y","13"],["attributeName","height","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","5;21;5"],["attributeName","y","attributeType","XML","begin","0.3s","dur","0.6s","repeatCount","indefinite","values","13; 5; 13"],[1,"display-block","font-8-em","text-gray-700"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Hc(1,Ot,3,3,"a",1),a.Wb(2,"div",2),a.Ub(3,3),a.Hc(4,zt,1,3,"ng-template",4),a.Hc(5,Lt,1,2,"ng-template",4),a.Hc(6,Tt,1,3,"ng-template",4),a.Hc(7,Bt,1,2,"ng-template",4),a.Tb(),a.Vb(),a.Wb(8,"div",5),a.Wb(9,"mat-tab-group",6),a.ec("selectedTabChange",(function(t){return e.tabChange(t)})),a.Hc(10,Et,2,0,"mat-tab",7),a.Vb(),a.Vb(),a.Rb(11,"app-soft-phone-bottom-sheet",null,8),a.Hc(13,Jt,15,3,"div",9),a.Vb(),a.Rb(14,"audio",10,11),a.Rb(16,"audio",12,13),a.Rb(18,"audio",12,14),a.Rb(20,"audio",15,16)),2&t&&(a.oc("dir",e.rtlDirection?"rtl":"ltr"),a.Cb(1),a.oc("ngIf",e.callPopUpMinimizeStatus),a.Cb(1),a.oc("ngClass",e.callPopUpMinimizeStatus?"height-full-minus-80":"height-full-minus-45"),a.Cb(1),a.oc("ngSwitch",e.activeTab.value),a.Cb(1),a.oc("ngSwitchCase",0),a.Cb(1),a.oc("ngSwitchCase",1),a.Cb(1),a.oc("ngSwitchCase",2),a.Cb(1),a.oc("ngSwitchCase",3),a.Cb(2),a.oc("selectedIndex",e.activeTab.value),a.Cb(1),a.oc("ngForOf",e.tabs),a.Cb(3),a.oc("ngIf",e.loadingIndicator&&e.loadingIndicator.status&&"pbx"===e.loadingIndicator.serviceName),a.Cb(3),a.oc("src","assets/sounds/ringtone.wav",a.Bc),a.Cb(2),a.oc("src","assets/sounds/ringbacktone.wav",a.Bc),a.Cb(2),a.oc("src","assets/sounds/dtmf.wav",a.Bc))},directives:[M.b,r.t,r.q,r.x,r.y,q.c,r.s,D,ht,mt,yt,Vt,q.a,q.d,W.a,P.c],pipes:[s.d],styles:[".soft-phone-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:stretch}.soft-phone-wrapper[_ngcontent-%COMP%]   .soft-phone-toolbar[_ngcontent-%COMP%]{border-top:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.soft-phone-wrapper[_ngcontent-%COMP%]   .mat-list-avatar[_ngcontent-%COMP%]{border:1px solid #bbb}.back-to-call[_ngcontent-%COMP%]{-webkit-animation:glowing 1s infinite;animation:glowing 1s infinite}@-webkit-keyframes glowing{0%{background-color:#46b241;-webkit-box-shadow:0 0 3px #46b241}50%{background-color:#418252;-webkit-box-shadow:0 0 10px #418252}to{background-color:#46b241;-webkit-box-shadow:0 0 3px #46b241}}@keyframes glowing{0%{background-color:#46b241;box-shadow:0 0 3px #46b241}50%{background-color:#418252;box-shadow:0 0 10px #418252}to{background-color:#46b241;box-shadow:0 0 3px #46b241}}"]}),Rt),Kt=n("0d0Z"),Nt=n("5+WD");function Qt(t,e){if(1&t&&(a.Wb(0,"h3",10),a.Wb(1,"mat-icon",11),a.Jc(2),a.Vb(),a.Jc(3),a.Vb()),2&t){var n=a.ic();a.Cb(1),a.oc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half"),a.Cb(1),a.Kc(n.data.icon),a.Cb(1),a.Lc(" ",n.rtlDirection?n.data.name_fa:n.data.name," ")}}function Ft(t,e){if(1&t&&(a.Wb(0,"h3",12),a.Wb(1,"mat-icon",11),a.Jc(2),a.Vb(),a.Jc(3),a.Vb()),2&t){var n=a.ic();a.Cb(1),a.oc("ngClass",n.rtlDirection?"margin-l-half":"margin-r-half"),a.Cb(1),a.Kc(n.data.icon),a.Cb(1),a.Lc(" ",n.rtlDirection?n.data.name_fa:n.data.name," ")}}function Yt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",13),a.ec("click",(function(t){return a.zc(n),a.ic().minimize(),t.stopPropagation()})),a.Wb(1,"mat-icon",8),a.Jc(2," minimize "),a.Vb(),a.Vb()}}function At(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",7),a.ec("click",(function(t){return a.zc(n),a.ic().restore(),t.stopPropagation()})),a.Wb(1,"mat-icon",8),a.Jc(2," filter_none "),a.Vb(),a.Vb()}}function Xt(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",7),a.ec("click",(function(t){return a.zc(n),a.ic().maximize(),t.stopPropagation()})),a.Wb(1,"mat-icon",8),a.Jc(2," crop_square "),a.Vb(),a.Vb()}}var $t,qt=(($t=function(){function t(e,n,i){var o=this;_classCallCheck(this,t),this.windowManagerService=e,this.softPhoneService=n,this.viewDirection=i,this._subscription=new l.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return o.rtlDirection=t})))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._subscription.add(this.windowManagerService.windowsList.subscribe((function(e){t.windowInstance=e.filter((function(e){return e.windowService.serviceTitle===t.data.serviceTitle})).pop()})))}},{key:"activeWindow",value:function(){this.windowManagerService.activeWindow(this.data)}},{key:"minimize",value:function(){this.windowManagerService.minimizeWindow(this.data)}},{key:"maximize",value:function(){this.windowManagerService.maximizeWindow(this.data)}},{key:"restore",value:function(){this.windowManagerService.restoreWindow(this.data)}},{key:"close",value:function(){this.softPhoneService.sipHangUp(),this.softPhoneService.sipUnRegister(),this.windowManagerService.closeWindow(this.data)}},{key:"centerWindow",value:function(){this.windowManagerService.centerWindow()}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||$t)(a.Qb(Kt.a),a.Qb(f.a),a.Qb(b.a))},$t.\u0275cmp=a.Kb({type:$t,selectors:[["app-soft-phone-window"]],decls:14,vars:7,consts:[[1,"pos-abs","left-0","right-0","bottom-0","top-0","full-width",3,"dir","click"],["cdkDrag","","cdkDragBoundary",".dashboard-app-boundary","cdkDragRootElement",".cdk-overlay-pane",1,"window-heading","full-width","height-45","padding-mini-r-l","display-flex","align-items-center",3,"dblclick"],[3,"ngIfElse","ngIf"],["notDraggableHeading",""],[1,"window-actions","display-flex",3,"ngClass"],["class","width-30 height-30 text-center line-height-25 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],["class","width-30 height-30 text-center line-height-35 no-padding no-border no-bg cursor-pointer font-full-plus-two-tenth-em",3,"click",4,"ngIf"],[1,"width-30","height-30","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"],[1,"text-dark-mode-color","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],[1,"window-content","pos-rel"],["cdkDragHandle","",1,"window-title","full-width","full-height","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex","align-items-center","no-margin"],[1,"text-dark-mode-color","pos-rel",3,"ngClass"],[1,"window-title","full-width","font-full-plus-one-tenth-em","text-dark-mode-color","display-flex"],[1,"width-30","height-30","text-center","line-height-25","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"click"]],template:function(t,e){if(1&t&&(a.Wb(0,"div",0),a.ec("click",(function(){return e.activeWindow()})),a.Wb(1,"div",1),a.ec("dblclick",(function(){return e.windowInstance.isMaximized&&!e.windowInstance.isMaximized?e.maximize():e.windowInstance.isMaximized?e.restore():null})),a.Hc(2,Qt,4,3,"ng-template",2),a.Hc(3,Ft,4,3,"ng-template",null,3,a.Ic),a.Wb(5,"div",4),a.Hc(6,Yt,3,0,"button",5),a.Hc(7,At,3,0,"button",6),a.Hc(8,Xt,3,0,"button",6),a.Wb(9,"button",7),a.ec("click",(function(t){return e.close(),t.stopPropagation()})),a.Wb(10,"mat-icon",8),a.Jc(11,"close "),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(12,"div",9),a.Rb(13,"app-soft-phone-main"),a.Vb(),a.Vb()),2&t){var n=a.vc(4);a.oc("dir",e.rtlDirection?"rtl":"ltr"),a.Cb(2),a.oc("ngIfElse",n)("ngIf",e.windowInstance.isDraggable),a.Cb(3),a.oc("ngClass",e.rtlDirection?" margin-r-auto":" margin-l-auto"),a.Cb(1),a.oc("ngIf",!e.windowInstance.isMinimized),a.Cb(1),a.oc("ngIf",e.windowInstance.isMaximized||e.windowInstance.isMinimized),a.Cb(1),a.oc("ngIf",e.windowInstance.maximizable&&!e.windowInstance.isMaximized&&!e.windowInstance.isMinimized)}},directives:[M.b,Nt.a,r.t,r.q,W.a,Ht,Nt.b],encapsulation:2}),$t),Gt=n("kmnG"),Zt=n("qFsG");function te(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",20),a.ec("click",(function(){return a.zc(n),a.ic(2).form.get("name").setValue("")})),a.Wb(1,"mat-icon"),a.Jc(2,"close"),a.Vb(),a.Vb()}}function ee(t,e){1&t&&(a.Wb(0,"mat-error"),a.Jc(1),a.jc(2,"translate"),a.Vb()),2&t&&(a.Cb(1),a.Lc(" ",a.kc(2,1,"global.name_error")," "))}function ne(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",20),a.ec("click",(function(){return a.zc(n),a.ic(2).form.get("family").setValue("")})),a.Wb(1,"mat-icon"),a.Jc(2,"close"),a.Vb(),a.Vb()}}function ie(t,e){1&t&&(a.Wb(0,"mat-error"),a.Jc(1),a.jc(2,"translate"),a.Vb()),2&t&&(a.Cb(1),a.Lc(" ",a.kc(2,1,"global.family_error")," "))}function oe(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",20),a.ec("click",(function(){return a.zc(n),a.ic(2).form.get("extension").setValue("")})),a.Wb(1,"mat-icon"),a.Jc(2,"close"),a.Vb(),a.Vb()}}function re(t,e){1&t&&(a.Wb(0,"mat-error"),a.Jc(1),a.jc(2,"translate"),a.Vb()),2&t&&(a.Cb(1),a.Lc(" ",a.kc(2,1,"global.extension_error")," "))}function se(t,e){1&t&&(a.Wb(0,"button",21),a.Wb(1,"mat-icon",17),a.Jc(2,"delete"),a.Vb(),a.Vb())}function ae(t,e){if(1&t&&(a.Wb(0,"div",4),a.Wb(1,"form",5),a.Wb(2,"h1",6),a.Jc(3),a.jc(4,"translate"),a.Vb(),a.Wb(5,"div",7),a.Wb(6,"div",8),a.Wb(7,"mat-form-field",9),a.Wb(8,"mat-label"),a.Jc(9),a.jc(10,"translate"),a.Vb(),a.Rb(11,"input",10),a.Hc(12,te,3,0,"button",11),a.Hc(13,ee,3,3,"mat-error",12),a.Vb(),a.Vb(),a.Wb(14,"div",8),a.Wb(15,"mat-form-field",9),a.Wb(16,"mat-label"),a.Jc(17),a.jc(18,"translate"),a.Vb(),a.Rb(19,"input",13),a.Hc(20,ne,3,0,"button",11),a.Hc(21,ie,3,3,"mat-error",12),a.Vb(),a.Vb(),a.Wb(22,"div",8),a.Wb(23,"mat-form-field",9),a.Wb(24,"mat-label"),a.Jc(25),a.jc(26,"translate"),a.Vb(),a.Rb(27,"input",14),a.Hc(28,oe,3,0,"button",11),a.Hc(29,re,3,3,"mat-error",12),a.Vb(),a.Vb(),a.Vb(),a.Wb(30,"div",15),a.Wb(31,"button",16),a.Wb(32,"mat-icon",17),a.Jc(33,"check"),a.Vb(),a.Wb(34,"span",18),a.Jc(35),a.jc(36,"translate"),a.Vb(),a.Vb(),a.Hc(37,se,3,0,"button",19),a.Vb(),a.Vb(),a.Vb()),2&t){var n=a.ic();a.Cb(1),a.oc("formGroup",n.form),a.Cb(2),a.Lc(" ",a.kc(4,15,"soft_phone.soft_phone_contacts.add_new_contact")," "),a.Cb(6),a.Kc(a.kc(10,17,"global.name")),a.Cb(3),a.oc("ngIf",n.form.get("name").touched&&n.form.get("name").value.length),a.Cb(1),a.oc("ngIf",!n.form.get("name").valid&&n.form.get("name").touched),a.Cb(4),a.Kc(a.kc(18,19,"global.family")),a.Cb(3),a.oc("ngIf",n.form.get("family").touched&&n.form.get("family").value.length),a.Cb(1),a.oc("ngIf",!n.form.get("family").valid&&n.form.get("family").touched),a.Cb(4),a.Kc(a.kc(26,21,"global.extension")),a.Cb(3),a.oc("ngIf",n.form.get("extension").touched&&n.form.get("extension").value.length),a.Cb(1),a.oc("ngIf",!n.form.get("extension").valid&&n.form.get("extension").touched),a.Cb(2),a.oc("disabled",!n.form.valid&&n.form.touched)("ngClass",n.data&&"edit"===n.data.action&&n.rtlDirection?"margin-l-full":n.data&&"edit"===n.data.action?"margin-r-full":""),a.Cb(4),a.Kc(a.kc(36,23,"global.submit")),a.Cb(2),a.oc("ngIf",n.data&&"edit"===n.data.action)}}var ce,le=((ce=function(){function t(e,n){var i=this;_classCallCheck(this,t),this.viewDirection=e,this.fb=n,this._subscription=new l.Subscription,this._subscription.add(this.viewDirection.currentDirection.subscribe((function(t){return i.rtlDirection=t})))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.data=this.bottomSheetData.data,this.data?this.createForm().then((function(){t.form.patchValue({name:t.data.name,family:t.data.family,extension_no:t.data.extension_no})})):this.createForm()}},{key:"createForm",value:function(){var t=this;return new Promise((function(e){t.form=t.fb.group({name:new A.g("",A.G.required),family:new A.g("",A.G.required),extension_no:new A.g(0,A.G.required)}),e()}))}},{key:"closeBottomSheet",value:function(){this.bottomSheetData.bottomSheetRef.close()}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||ce)(a.Qb(b.a),a.Qb(A.f))},ce.\u0275cmp=a.Kb({type:ce,selectors:[["app-soft-phone-contact-detail"]],decls:5,vars:2,consts:[[1,"full-width","full-height","padding-r-l","padding-b-full"],[1,"width-30","height-30","pos-abs","top-0","text-center","line-height-35","no-padding","no-border","no-bg","cursor-pointer","font-full-plus-two-tenth-em",3,"ngClass","click"],[1,"text-dark-mode-color","line-height-35","full-width","full-height","text-center","font-9-em","text-gray-600","text-weight-bold"],["class","height-full-minus-35 float-right full-width",4,"ngIf"],[1,"height-full-minus-35","float-right","full-width"],[1,"full-height",3,"formGroup"],[1,"margin-b-full","text-gray-800","full-width","font-full-em","text-weight-500","margin-b-half"],[1,"row"],[1,"col-md-12","margin-b-half","float-right"],[1,"full-width","font-9-em"],["formControlName","name","matInput","","tabindex","1"],["aria-label","Clear","class","close-icon pos-rel top-half float-left","mat-button","","mat-icon-button","","matSuffix","","type","button",3,"click",4,"ngIf"],[4,"ngIf"],["formControlName","family","matInput","","tabindex","2"],["formControlName","extension","matInput","","tabindex","3"],[1,"display-flex"],["mat-raised-button","","tabindex","4","type","submit",1,"green-gradient","full-width","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"disabled","ngClass"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],["class","red-gradient width-30 height-30 text-white line-height-30 font-9-em overflow-hide text-weight-normal","mat-raised-button","","tabindex","5",4,"ngIf"],["aria-label","Clear","mat-button","","mat-icon-button","","matSuffix","","type","button",1,"close-icon","pos-rel","top-half","float-left",3,"click"],["mat-raised-button","","tabindex","5",1,"red-gradient","width-30","height-30","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"button",1),a.ec("click",(function(){return e.closeBottomSheet()})),a.Wb(2,"mat-icon",2),a.Jc(3," close "),a.Vb(),a.Vb(),a.Hc(4,ae,38,25,"div",3),a.Vb()),2&t&&(a.Cb(1),a.oc("ngClass",e.rtlDirection?"left-0":"right-0"),a.Cb(3),a.oc("ngIf",e.form))},directives:[r.q,W.a,r.t,A.I,A.t,A.k,Gt.c,Gt.g,A.c,Zt.b,A.s,A.i,V.b,Gt.j,Gt.b],pipes:[s.d],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}"]}),ce),he=["bottomSheet"];function ue(t,e){if(1&t){var n=a.Xb();a.Wb(0,"mat-list",9),a.Wb(1,"mat-list-item",10),a.Rb(2,"img",11),a.Wb(3,"h3",12),a.Jc(4),a.Vb(),a.Wb(5,"div",13),a.Wb(6,"button",14),a.ec("click",(function(){return a.zc(n),a.ic().addNewContact()})),a.Wb(7,"mat-icon",15),a.Jc(8,"add"),a.Vb(),a.Wb(9,"span",16),a.Jc(10),a.jc(11,"translate"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&t){var i=a.ic();a.Cb(2),a.oc("alt",i.loggedInUser?i.loggedInUser.name:"")("src",i.loggedInUser.email,a.Bc),a.Cb(2),a.Lc(" ",i.loggedInUser?i.loggedInUser.name:""," "),a.Cb(6),a.Kc(a.kc(11,4,"soft_phone.soft_phone_contacts.new_contact"))}}function be(t,e){if(1&t){var n=a.Xb();a.Wb(0,"button",22),a.ec("click",(function(t){a.zc(n);var e=a.ic().$implicit;return a.ic().editContact(e),t.stopPropagation()})),a.Wb(1,"mat-icon",23),a.Jc(2,"edit "),a.Vb(),a.Vb()}}function fe(t,e){if(1&t){var n=a.Xb();a.Wb(0,"mat-list-item",17),a.ec("click",(function(){a.zc(n);var t=e.$implicit,i=a.ic();return i.fromPopUp?i.transferCall(t):i.openSheet(t)})),a.Wb(1,"mat-icon",18),a.Jc(2,"person"),a.Vb(),a.Wb(3,"div",19),a.Jc(4),a.Vb(),a.Wb(5,"div",20),a.Jc(6),a.Vb(),a.Hc(7,be,3,0,"button",21),a.Rb(8,"mat-divider"),a.Vb()}if(2&t){var i=e.$implicit,o=a.ic();a.Cb(4),a.Kc(i.extension_name),a.Cb(2),a.Kc(i.extension_no),a.Cb(1),a.oc("ngIf",!o.fromPopUp)}}function ge(t,e){if(1&t){var n=a.Xb();a.Wb(0,"div",24),a.Wb(1,"button",25),a.ec("click",(function(){return a.zc(n),a.ic().dismissTransferCall()})),a.Wb(2,"span",16),a.Jc(3),a.jc(4,"translate"),a.Vb(),a.Vb(),a.Vb()}if(2&t){var i=a.ic();a.Cb(1),a.oc("disabled",i.disableContacts),a.Cb(2),a.Kc(a.kc(4,2,"global.dismiss"))}}var de,pe,me=((de=function(){function t(e,n,i){var o=this;_classCallCheck(this,t),this.softPhoneService=e,this.translateService=n,this.messageService=i,this.triggerBottomSheet=new a.o,this.triggerCloseBottomSheet=new a.o,this.fromPopUp=!1,this.disableContacts=!1,this.callPopUpMinimizeStatus=!1,this.filterArgs=null,this._subscription=new l.Subscription,this._subscription.add(this.softPhoneService.currentMinimizeCallPopUp.subscribe((function(t){return o.callPopUpMinimizeStatus=t})))}return _createClass(t,[{key:"ngOnInit",value:function(){this.assignCopy(),this.filterArgs={email:this.loggedInUser.email}}},{key:"filterContacts",value:function(t){t||this.assignCopy(),this.filteredUsers=Object.assign([],this.softPhoneUsers).filter((function(e){return e.extension_name.toLowerCase().indexOf(t.toLowerCase())>-1}))}},{key:"assignCopy",value:function(){this.filteredUsers=Object.assign([],this.softPhoneUsers)}},{key:"openSheet",value:function(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:it,height:"200px",width:"98%",data:t})}},{key:"addNewContact",value:function(){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:le,height:"270px",width:"98%"})}},{key:"editContact",value:function(t){this.callPopUpMinimizeStatus?this.messageService.showMessage(this.getTranslate("soft_phone.main.you_are_in_call")):this.triggerBottomSheet.emit({component:le,height:"270px",width:"98%",data:Object.assign(Object.assign({},t),{action:"edit"})})}},{key:"transferCall",value:function(t){var e=this;this.disableContacts=!0,this.softPhoneService.sipTransfer(t.extension_no),setTimeout((function(){return e.triggerCloseBottomSheet.emit()}),1e3)}},{key:"dismissTransferCall",value:function(){this.triggerCloseBottomSheet.emit()}},{key:"getTranslate",value:function(t){return this.translateService.instant(t)}}]),t}()).\u0275fac=function(t){return new(t||de)(a.Qb(f.a),a.Qb(s.e),a.Qb(ot.a))},de.\u0275cmp=a.Kb({type:de,selectors:[["app-soft-phone-contacts"]],viewQuery:function(t,e){var n;1&t&&a.Pc(he,!0),2&t&&a.uc(n=a.fc())&&(e.bottomSheet=n.first)},inputs:{rtlDirection:"rtlDirection",fromPopUp:"fromPopUp",softPhoneUsers:"softPhoneUsers",loggedInUser:"loggedInUser"},outputs:{triggerBottomSheet:"triggerBottomSheet",triggerCloseBottomSheet:"triggerCloseBottomSheet"},decls:11,vars:10,consts:[[1,"full-width","full-height"],["class","soft-phone-user full-width height-50",4,"ngIf"],[1,"contact-search","height-45","padding-half"],["type","text",1,"full-width","full-height","round-corner","padding-mini-r-l","line-height-45",3,"placeholder","input"],["contactList",""],[1,"height-full-minus-95","padding-r-l","overflow-x-hide","overflow-y-auto"],[3,"disabled"],["class","cursor-pointer full-width height-45 font-8-rem",3,"click",4,"ngFor","ngForOf"],["class","height-45 padding-mini-t-b padding-r-l full-width display-flex flex-direction-row-reverse flex-space-between",4,"ngIf"],[1,"soft-phone-user","full-width","height-50"],[1,"padding-mini-r-l","full-height"],["matListAvatar","","onerror","this.src='assets/profileImg/0.jpg'",1,"mat-elevation-z2",3,"alt","src"],["matLine","",1,"font-8-rem","text-weight-bold"],[1,"font-8-rem"],["mat-raised-button","",1,"green-gradient","padding-mini-r-l","text-white","line-height-30","font-9-em","overflow-hide","text-weight-normal",3,"click"],[1,"width-20","height-20","font-full-plus-two-tenth-rem"],[1,"padding-mini-r-l"],[1,"cursor-pointer","full-width","height-45","font-8-rem",3,"click"],["mat-list-icon",""],["mat-line",""],[1,"text-gray-700","margin-r-l"],["class","cursor-pointer no-bg no-border width-30 height-30 text-center text-green-500",3,"click",4,"ngIf"],[1,"cursor-pointer","no-bg","no-border","width-30","height-30","text-center","text-green-500",3,"click"],[1,"full-width","full-height","text-center","line-height-30","font-full-plus-two-tenth-rem"],[1,"height-45","padding-mini-t-b","padding-r-l","full-width","display-flex","flex-direction-row-reverse","flex-space-between"],["mat-raised-button","","type","button",1,"full-width","red-gradient","text-white","line-height-30","font-9-em","text-weight-normal",3,"disabled","click"]],template:function(t,e){if(1&t){var n=a.Xb();a.Wb(0,"div",0),a.Hc(1,ue,12,6,"mat-list",1),a.Wb(2,"div",2),a.Wb(3,"input",3,4),a.ec("input",(function(){a.zc(n);var t=a.vc(4);return e.filterContacts(t.value)})),a.jc(5,"translate"),a.Vb(),a.Vb(),a.Wb(6,"div",5),a.Wb(7,"mat-list",6),a.Hc(8,fe,9,3,"mat-list-item",7),a.jc(9,"myFilter"),a.Vb(),a.Vb(),a.Hc(10,ge,5,4,"div",8),a.Vb()}2&t&&(a.Cb(1),a.oc("ngIf",!e.fromPopUp),a.Cb(2),a.pc("placeholder",a.kc(5,5,"global.search")),a.Cb(4),a.oc("disabled",e.disableContacts),a.Cb(1),a.oc("ngForOf",a.lc(9,7,e.filteredUsers,e.filterArgs)),a.Cb(2),a.oc("ngIf",e.fromPopUp))},directives:[r.t,P.a,r.s,P.d,P.b,z.k,V.b,W.a,P.c,tt.a],pipes:[s.d,ut],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#fff;position:absolute;left:0;top:0;bottom:0;right:0}.contact-search[_ngcontent-%COMP%], .soft-phone-user[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,86.3%,.93);background-color:#f1f1f1}.contact-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .soft-phone-user[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid hsla(0,0%,86.3%,.93)}"]}),de),ve=n("vxfF"),we=n("/1cH"),Ce=n("TU8p"),ke=n("2ChS"),xe=n("jaxi"),ye=n("Wp6s"),Se=n("bSwM"),_e=n("A5z7"),Pe=n("iadO"),Ve=n("0IaG"),We=n("7EHt"),Ie=n("ihCf"),Ue=n("STbY"),De=n("bv9b"),Me=n("Xa2L"),Oe=n("d3UM"),ze=n("XhcP"),Le=n("5RNC"),Te=n("dNgK"),Be=n("/t3+"),je=n("Qu3c"),Ee=n("+0xr"),Je=n("M9IT"),Re=n("QibW"),He=n("UXJo"),Ke=n("+rOU"),Ne=n("Z4Gg"),Qe=((pe=function(){function t(e){_classCallCheck(this,t),this.componentFactoryResolver=e}return _createClass(t,[{key:"resolveComponent",value:function(){return this.componentFactoryResolver.resolveComponentFactory(qt)}}]),t}()).\u0275mod=a.Ob({type:pe}),pe.\u0275inj=a.Nb({factory:function(t){return new(t||pe)(a.ac(a.j))},imports:[[r.c,o.a,s.c.forChild()]]}),pe);a.Cc(k,[r.q,r.r,r.s,r.t,r.A,r.w,r.x,r.y,r.z,r.u,r.v,A.I,A.x,A.H,A.c,A.y,A.B,A.a,A.E,A.F,A.A,A.s,A.t,A.D,A.o,A.n,A.z,A.b,A.d,A.v,A.w,A.u,ve.a,we.a,z.o,z.n,we.d,we.c,M.b,Ce.a,Nt.e,Nt.f,Nt.a,Nt.b,Nt.d,Nt.c,ke.a,V.b,V.a,xe.b,xe.a,ye.a,ye.f,ye.n,ye.d,ye.m,ye.l,ye.b,ye.e,ye.k,ye.i,ye.h,ye.g,ye.o,ye.c,Se.a,Se.c,_e.d,_e.a,_e.c,_e.e,_e.b,_e.f,Pe.a,Pe.b,Pe.d,Pe.e,Pe.f,Pe.h,Pe.i,Pe.j,Pe.l,Pe.k,Pe.c,Ve.e,Ve.d,Ve.i,Ve.f,Ve.c,We.a,We.c,We.d,We.g,We.h,We.f,We.e,O.b,O.d,O.g,z.k,O.f,O.e,O.a,W.a,Ie.b,Ie.c,Gt.b,Gt.c,Gt.f,Gt.g,Gt.h,Gt.i,Gt.j,Zt.b,Zt.d,P.a,P.h,P.d,P.b,P.c,P.g,z.r,P.i,P.f,tt.a,Ue.e,Ue.b,Ue.d,Ue.a,De.a,Me.a,Me.c,Oe.a,Oe.c,ze.a,ze.b,ze.c,ze.d,ze.e,ze.f,Le.a,rt.c,rt.a,Te.c,q.c,q.d,q.a,q.f,q.e,q.b,Be.a,Be.c,je.a,je.c,Ee.n,Ee.i,Ee.k,Ee.c,Ee.b,Ee.m,Ee.e,Ee.g,Ee.h,Ee.a,Ee.d,Ee.j,Ee.l,Ee.f,Ee.q,Je.a,Re.b,Re.a,He.a,Ke.b,Ke.c,Ke.k,Ke.g,s.a,Ne.a,A.h,A.k,A.i,A.l,A.e,Z.a,c,Ht,yt,mt,qt,me,Y,Vt,D,ht,it,k,le],[r.b,r.G,r.p,r.k,r.E,r.g,r.C,r.F,r.d,r.f,r.i,r.j,r.l,vt.a,s.d,ut])},K3ar:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("BCsW"),o=n("fXoL"),r=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t){return(arguments.length<=1?void 0:arguments[1])?i(t,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD HH:mm:ss")===t?i(t,"YYYY-MM-DD HH:mm:ss").locale("fa").format("YYYY/MM/DD HH:mm:ss"):i(t,"YYYY-MM-DD").format("YYYY-MM-DD")===t||i(t,"YYYY-MM-DD HH:mm").format("YYYY-MM-DD HH:mm")===t?i(t,"YYYY-MM-DD").locale("fa").format("YYYY/MM/DD"):"-":t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Pb({name:"jalali",type:t,pure:!0}),t}()}}]);